"use strict";(self.webpackChunkrevise=self.webpackChunkrevise||[]).push([[179],{2011:(St,Oe,O)=>{O.d(Oe,{Dh:()=>le,GT:()=>ge,cc:()=>ke,hO:()=>Fe,on:()=>j,pX:()=>Ee,xv:()=>we});var d=O(4650),U=O(9260),k=O(4027);St=O.hmd(St);const ee=["ngOnDestroy"],Ee=(ie,ft,mt,xe={})=>new Proxy(ie,{get:(be,De)=>mt.runOutsideAngular(()=>{var je;if(ie[De])return!(null===(je=xe?.spy)||void 0===je)&&je.get&&xe.spy.get(De,ie[De]),ie[De];if(ee.indexOf(De)>-1)return()=>{};const We=ft.toPromise().then(z=>{const fe=z&&z[De];return"function"==typeof fe?fe.bind(z):fe&&fe.then?fe.then(Ge=>mt.run(()=>Ge)):mt.run(()=>fe)});return new Proxy(()=>{},{get:(z,fe)=>We[fe],apply:(z,fe,Ge)=>We.then(Qe=>{var bt;const Xe=Qe&&Qe(...Ge);return!(null===(bt=xe?.spy)||void 0===bt)&&bt.apply&&xe.spy.apply(De,Ge,Xe),Xe})})})}),ge=(ie,ft)=>{ft.forEach(mt=>{Object.getOwnPropertyNames(mt.prototype||mt).forEach(xe=>{Object.defineProperty(ie.prototype,xe,Object.getOwnPropertyDescriptor(mt.prototype||mt,xe))})})};class oe{constructor(ft){return ft}}const le=new d.OlP("angularfire2.app.options"),we=new d.OlP("angularfire2.app.name");function j(ie,ft,mt){const be="object"==typeof mt&&mt||{};be.name=be.name||"string"==typeof mt&&mt||"[DEFAULT]";const je=U.Z.apps.filter(We=>We&&We.name===be.name)[0]||ft.runOutsideAngular(()=>U.Z.initializeApp(ie,be));try{JSON.stringify(ie)!==JSON.stringify(je.options)&&H("error",`${je.name} Firebase App already initialized with different options${St.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new oe(je)}const H=(ie,...ft)=>{(0,d.X6Q)()&&typeof console<"u"&&console[ie](...ft)},K={provide:oe,useFactory:j,deps:[le,d.R0b,[new d.FiY,we]]};let Fe=(()=>{class ie{constructor(mt){U.Z.registerVersion("angularfire",k.q4.full,"core"),U.Z.registerVersion("angularfire",k.q4.full,"app-compat"),U.Z.registerVersion("angular",d.q4F.full,mt.toString())}static initializeApp(mt,xe){return{ngModule:ie,providers:[{provide:le,useValue:mt},{provide:we,useValue:xe}]}}}return ie.\u0275fac=function(mt){return new(mt||ie)(d.LFG(d.Lbi))},ie.\u0275mod=d.oAB({type:ie}),ie.\u0275inj=d.cJS({providers:[K]}),ie})();function ke(ie,ft,mt,xe,be){const[,De,je]=globalThis.\u0275AngularfireInstanceCache.find(We=>We[0]===ie)||[];if(De)return function _e(ie,ft){try{return ie.toString()===ft.toString()}catch{return ie===ft}}(be,je)||(ye("error",`${ft} was already initialized on the ${mt} Firebase App with different settings.${qe?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:be,was:je})),De;{const We=xe();return globalThis.\u0275AngularfireInstanceCache.push([ie,We,be]),We}}const qe=!!St.hot,ye=(ie,...ft)=>{(0,d.X6Q)()&&typeof console<"u"&&console[ie](...ft)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4027:(St,Oe,O)=>{O.d(Oe,{q4:()=>ye,iC:()=>Et,HU:()=>pe,vb:()=>Qe,JM:()=>Ge,nk:()=>fe,n1:()=>We,_J:()=>z,u3:()=>kt});var d=O(4650),U=O(259),k=O(4880),ee=O(751),Ee=O(3008),ge=O(4408),le=O(7565);const j=new class we extends le.v{}(class oe extends ge.o{constructor(Ke,_t){super(Ke,_t),this.scheduler=Ke,this.work=_t}schedule(Ke,_t=0){return _t>0?super.schedule(Ke,_t):(this.delay=_t,this.state=Ke,this.scheduler.flush(this),this)}execute(Ke,_t){return _t>0||this.closed?super.execute(Ke,_t):this._execute(Ke,_t)}requestAsyncId(Ke,_t,jt=0){return null!=jt&&jt>0||null==jt&&this.delay>0?super.requestAsyncId(Ke,_t,jt):(Ke.flush(this),0)}});var K=O(4986),Fe=O(9751),ke=O(8505),_e=O(9468),qe=O(5363);const ye=new d.GfV("7.5.0"),ie="__angularfire_symbol__analyticsIsSupportedValue",ft="__angularfire_symbol__analyticsIsSupported",mt="__angularfire_symbol__remoteConfigIsSupportedValue",xe="__angularfire_symbol__remoteConfigIsSupported",be="__angularfire_symbol__messagingIsSupportedValue",De="__angularfire_symbol__messagingIsSupported";globalThis[ft]||(globalThis[ft]=(0,Ee.Gb)().then(Le=>globalThis[ie]=Le).catch(()=>globalThis[ie]=!1)),globalThis[De]||(globalThis[De]=(0,ee.Gb)().then(Le=>globalThis[be]=Le).catch(()=>globalThis[be]=!1)),globalThis[xe]||(globalThis[xe]=(0,k.Gb)().then(Le=>globalThis[mt]=Le).catch(()=>globalThis[mt]=!1));const je=Le=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${Le} in the constructor, first ensure that ${Le} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${Le})\`.`,We={async:()=>globalThis[De],sync:()=>{const Le=globalThis[be];if(void 0===Le)throw new Error(je("Messaging"));return Le}},z={async:()=>globalThis[xe],sync:()=>{const Le=globalThis[mt];if(void 0===Le)throw new Error(je("RemoteConfig"));return Le}},fe={async:()=>globalThis[ft],sync:()=>{const Le=globalThis[ie];if(void 0===Le)throw new Error(je("Analytics"));return Le}};function Ge(Le,Ke,_t){if(Ke){if(1===Ke.length)return Ke[0];const qt=Ke.filter(xn=>xn.app===_t);if(1===qt.length)return qt[0]}return _t.container.getProvider(Le).getImmediate({optional:!0})}const Qe=(Le,Ke)=>{const _t=Ke?[Ke]:(0,U.C6)(),jt=[];return _t.forEach(en=>{en.container.getProvider(Le).instances.forEach(xn=>{jt.includes(xn)||jt.push(xn)})}),jt};function bt(){}class Xe{constructor(Ke,_t=j){this.zone=Ke,this.delegate=_t}now(){return this.delegate.now()}schedule(Ke,_t,jt){const en=this.zone;return this.delegate.schedule(function(xn){en.runGuarded(()=>{Ke.apply(this,[xn])})},_t,jt)}}class se{constructor(Ke){this.zone=Ke,this.task=null}call(Ke,_t){const jt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bt,{},bt,bt)),_t.pipe((0,ke.b)({next:jt,complete:jt,error:jt})).subscribe(Ke).add(jt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let pe=(()=>{class Le{constructor(_t){this.ngZone=_t,this.outsideAngular=_t.runOutsideAngular(()=>new Xe(Zone.current)),this.insideAngular=_t.run(()=>new Xe(Zone.current,K.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return Le.\u0275fac=function(_t){return new(_t||Le)(d.LFG(d.R0b))},Le.\u0275prov=d.Yz7({token:Le,factory:Le.\u0275fac,providedIn:"root"}),Le})();function me(){const Le=globalThis.\u0275AngularFireScheduler;if(!Le)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Le}function Ne(Le){return me().ngZone.runOutsideAngular(()=>Le())}function Me(Le){return me().ngZone.run(()=>Le())}function Et(Le){return me(),function Ot(Le){return function(_t){return(_t=_t.lift(new se(Le.ngZone))).pipe((0,_e.R)(Le.outsideAngular),(0,qe.Q)(Le.insideAngular))}}(me())(Le)}const tt=(Le,Ke)=>function(){const jt=arguments;return Ke&&setTimeout(()=>{"scheduled"===Ke.state&&Ke.invoke()},10),Me(()=>Le.apply(void 0,jt))},kt=(Le,Ke)=>function(){let _t;const jt=arguments;for(let qt=0;qt<arguments.length;qt++)"function"==typeof jt[qt]&&(Ke&&(_t||(_t=Me(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bt,{},bt,bt)))),jt[qt]=tt(jt[qt],_t));const en=Ne(()=>Le.apply(this,jt));if(!Ke){if(en instanceof Fe.y){const qt=me();return en.pipe((0,_e.R)(qt.outsideAngular),(0,qe.Q)(qt.insideAngular))}return Me(()=>en)}return en instanceof Fe.y?en.pipe(Et):en instanceof Promise?Me(()=>new Promise((qt,xn)=>en.then(Dn=>Me(()=>qt(Dn)),Dn=>Me(()=>xn(Dn))))):"function"==typeof en&&_t?function(){return setTimeout(()=>{_t&&"scheduled"===_t.state&&_t.invoke()},10),en.apply(this,arguments)}:Me(()=>en)}},8277:(St,Oe,O)=>{O.d(Oe,{$:()=>tu,A:()=>H,D:()=>ke,I:()=>Gs,J:()=>is,L:()=>Or,N:()=>on,P:()=>ui,Q:()=>mp,R:()=>L_,U:()=>u0,V:()=>Ja,W:()=>Ei,X:()=>Qa,Y:()=>xr,Z:()=>c0,_:()=>Sd,a:()=>po,a0:()=>$i,a1:()=>Pd,a2:()=>y_,a3:()=>d0,a4:()=>h0,a5:()=>kd,a6:()=>iu,a7:()=>f0,a8:()=>Rl,a9:()=>v_,aA:()=>z,aB:()=>rh,aC:()=>Rt,aD:()=>Vn,aE:()=>Wl,aF:()=>la,aG:()=>vu,aH:()=>Qn,aL:()=>ra,aO:()=>Ks,aa:()=>E_,ab:()=>Nl,ac:()=>p0,ad:()=>ir,ae:()=>g0,af:()=>m0,ai:()=>Ol,aj:()=>Cp,ak:()=>C_,an:()=>m_,ao:()=>bp,aq:()=>A_,ar:()=>Bd,as:()=>Ge,at:()=>re,au:()=>X,av:()=>xe,aw:()=>Su,ax:()=>Fp,ay:()=>$e,az:()=>be,b:()=>fu,c:()=>sr,d:()=>Xd,e:()=>B_,f:()=>Eu,g:()=>Op,h:()=>j_,i:()=>ia,j:()=>kp,k:()=>xu,l:()=>U_,m:()=>Eo,o:()=>O0,p:()=>le,r:()=>S0,s:()=>mu,u:()=>A0,x:()=>lu});var d=O(5861),U=O(2090),k=O(9681),ee=O(655),Ee=O(1877),ge=O(4859);const le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},H={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ke=function K(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},_e=function Fe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qe=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ie=new Ee.Yd("@firebase/auth");function mt(E,...p){ie.logLevel<=Ee.in.ERROR&&ie.error(`Auth (${k.SDK_VERSION}): ${E}`,...p)}function xe(E,...p){throw We(E,...p)}function be(E,...p){return We(E,...p)}function De(E,p,_){const w=Object.assign(Object.assign({},_e()),{[p]:_});return new U.LL("auth","Firebase",w).create(p,{appName:E.name})}function je(E,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&xe(E,"argument-error"),De(E,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function We(E,...p){if("string"!=typeof E){const _=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=E.name),E._errorFactory.create(_,...w)}return qe.create(E,...p)}function z(E,p,..._){if(!E)throw We(p,..._)}function fe(E){const p="INTERNAL ASSERTION FAILED: "+E;throw mt(p),new Error(p)}function Ge(E,p){E||fe(p)}function Qe(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function bt(){return"http:"===Xe()||"https:"===Xe()}function Xe(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class me{constructor(p,_){this.shortDelay=p,this.longDelay=_,Ge(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function se(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(bt()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ne(E,p){Ge(E.emulator,"Emulator should always be set here");const{url:_}=E.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class Me{static initialize(p,_,w){this.fetchImpl=p,_&&(this.headersImpl=_),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Te={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},et=new me(3e4,6e4);function Et(E,p){return E.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:E.tenantId}):p}function Ot(E,p,_,w){return tt.apply(this,arguments)}function tt(){return(tt=(0,d.Z)(function*(E,p,_,w,M={}){return kt(E,M,(0,d.Z)(function*(){let P={},Q={};w&&("GET"===p?Q=w:P={body:JSON.stringify(w)});const he=(0,U.xO)(Object.assign({key:E.config.apiKey},Q)).slice(1),Je=yield E._getAdditionalHeaders();return Je["Content-Type"]="application/json",E.languageCode&&(Je["X-Firebase-Locale"]=E.languageCode),Me.fetch()(jt(E,E.config.apiHost,_,he),Object.assign({method:p,headers:Je,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function kt(E,p,_){return Le.apply(this,arguments)}function Le(){return(Le=(0,d.Z)(function*(E,p,_){E._canInitEmulator=!1;const w=Object.assign(Object.assign({},Te),p);try{const M=new en(E),P=yield Promise.race([_(),M.promise]);M.clearNetworkTimeout();const Q=yield P.json();if("needConfirmation"in Q)throw qt(E,"account-exists-with-different-credential",Q);if(P.ok&&!("errorMessage"in Q))return Q;{const he=P.ok?Q.errorMessage:Q.error.message,[Je,ht]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Je)throw qt(E,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Je)throw qt(E,"email-already-in-use",Q);if("USER_DISABLED"===Je)throw qt(E,"user-disabled",Q);const Vt=w[Je]||Je.toLowerCase().replace(/[_\s]+/g,"-");if(ht)throw De(E,Vt,ht);xe(E,Vt)}}catch(M){if(M instanceof U.ZR)throw M;xe(E,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function Ke(E,p,_,w){return _t.apply(this,arguments)}function _t(){return(_t=(0,d.Z)(function*(E,p,_,w,M={}){const P=yield Ot(E,p,_,w,M);return"mfaPendingCredential"in P&&xe(E,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function jt(E,p,_,w){const M=`${p}${_}?${w}`;return E.config.emulator?Ne(E.config,M):`${E.config.apiScheme}://${M}`}class en{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,w)=>{this.timer=setTimeout(()=>w(be(this.auth,"network-request-failed")),et.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qt(E,p,_){const w={appName:E.name};_.email&&(w.email=_.email),_.phoneNumber&&(w.phoneNumber=_.phoneNumber);const M=be(E,p,w);return M.customData._tokenResponse=_,M}function Dn(){return(Dn=(0,d.Z)(function*(E,p){return Ot(E,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Yn(E,p){return zn.apply(this,arguments)}function zn(){return(zn=(0,d.Z)(function*(E,p){return Ot(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ut(E,p){return Z.apply(this,arguments)}function Z(){return(Z=(0,d.Z)(function*(E,p){return Ot(E,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Re(E){if(E)try{const p=new Date(Number(E));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Jt(){return(Jt=(0,d.Z)(function*(E,p=!1){const _=(0,U.m9)(E),w=yield _.getIdToken(p),M=tn(w);z(M&&M.exp&&M.auth_time&&M.iat,_.auth,"internal-error");const P="object"==typeof M.firebase?M.firebase:void 0,Q=P?.sign_in_provider;return{claims:M,token:w,authTime:Re(fn(M.auth_time)),issuedAtTime:Re(fn(M.iat)),expirationTime:Re(fn(M.exp)),signInProvider:Q||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function fn(E){return 1e3*Number(E)}function tn(E){const[p,_,w]=E.split(".");if(void 0===p||void 0===_||void 0===w)return mt("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,U.tV)(_);return M?JSON.parse(M):(mt("Failed to decode base64 JWT payload"),null)}catch(M){return mt("Caught error parsing JWT payload as JSON",M?.toString()),null}}function At(E,p){return it.apply(this,arguments)}function it(){return(it=(0,d.Z)(function*(E,p,_=!1){if(_)return p;try{return yield p}catch(w){throw w instanceof U.ZR&&pt(w)&&E.auth.currentUser===E&&(yield E.auth.signOut()),w}})).apply(this,arguments)}function pt({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class Kt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const M=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),w)}iteration(){var p=this;return(0,d.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&p.schedule(!0))}p.schedule()})()}}class Rn{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Re(this.lastLoginAt),this.creationTime=Re(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function _n(E){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,d.Z)(function*(E){var p;const _=E.auth,w=yield E.getIdToken(),M=yield At(E,ut(_,{idToken:w}));z(M?.users.length,_,"internal-error");const P=M.users[0];E._notifyReloadListener(P);const Q=null!==(p=P.providerUserInfo)&&void 0!==p&&p.length?rr(P.providerUserInfo):[],he=Pt(E.providerData,Q),Vt=!!E.isAnonymous&&!(E.email&&P.passwordHash||he?.length),dn={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:he,metadata:new Rn(P.createdAt,P.lastLoginAt),isAnonymous:Vt};Object.assign(E,dn)})).apply(this,arguments)}function Nn(){return(Nn=(0,d.Z)(function*(E){const p=(0,U.m9)(E);yield _n(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Pt(E,p){return[...E.filter(w=>!p.some(M=>M.providerId===w.providerId)),...p]}function rr(E){return E.map(p=>{var{providerId:_}=p,w=(0,ee._T)(p,["providerId"]);return{providerId:_,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function qn(){return(qn=(0,d.Z)(function*(E,p){const _=yield kt(E,{},(0,d.Z)(function*(){const w=(0,U.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:M,apiKey:P}=E.config,Q=jt(E,M,"/v1/token",`key=${P}`),he=yield E._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",Me.fetch()(Q,{method:"POST",headers:he,body:w})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class yn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){z(p.idToken,"internal-error"),z(typeof p.idToken<"u","internal-error"),z(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Xt(E){const p=tn(E);return z(p,"internal-error"),z(typeof p.exp<"u","internal-error"),z(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var w=this;return(0,d.Z)(function*(){return z(!w.accessToken||w.refreshToken,p,"user-token-expired"),_||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var w=this;return(0,d.Z)(function*(){const{accessToken:M,refreshToken:P,expiresIn:Q}=yield function rn(E,p){return qn.apply(this,arguments)}(p,_);w.updateTokensAndExpiration(M,P,Number(Q))})()}updateTokensAndExpiration(p,_,w){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,_){const{refreshToken:w,accessToken:M,expirationTime:P}=_,Q=new yn;return w&&(z("string"==typeof w,"internal-error",{appName:p}),Q.refreshToken=w),M&&(z("string"==typeof M,"internal-error",{appName:p}),Q.accessToken=M),P&&(z("number"==typeof P,"internal-error",{appName:p}),Q.expirationTime=P),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new yn,this.toJSON())}_performRefresh(){return fe("not implemented")}}function ot(E,p){z("string"==typeof E||typeof E>"u","internal-error",{appName:p})}class Ae{constructor(p){var{uid:_,auth:w,stsTokenManager:M}=p,P=(0,ee._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=w,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Rn(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,d.Z)(function*(){const w=yield At(_,_.stsTokenManager.getToken(_.auth,p));return z(w,_.auth,"internal-error"),_.accessToken!==w&&(_.accessToken=w,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),w})()}getIdTokenResult(p){return function yt(E){return Jt.apply(this,arguments)}(this,p)}reload(){return function Ft(E){return Nn.apply(this,arguments)}(this)}_assign(p){this!==p&&(z(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const _=new Ae(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(p){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var w=this;return(0,d.Z)(function*(){let M=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),M=!0),_&&(yield _n(w)),yield w.auth._persistUserIfCurrent(w),M&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,d.Z)(function*(){const _=yield p.getIdToken();return yield At(p,function xn(E,p){return Dn.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var w,M,P,Q,he,Je,ht,Vt;const dn=null!==(w=_.displayName)&&void 0!==w?w:void 0,ci=null!==(M=_.email)&&void 0!==M?M:void 0,Co=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,sc=null!==(Q=_.photoURL)&&void 0!==Q?Q:void 0,oc=null!==(he=_.tenantId)&&void 0!==he?he:void 0,ac=null!==(Je=_._redirectEventId)&&void 0!==Je?Je:void 0,Ou=null!==(ht=_.createdAt)&&void 0!==ht?ht:void 0,uc=null!==(Vt=_.lastLoginAt)&&void 0!==Vt?Vt:void 0,{uid:lc,emailVerified:cc,isAnonymous:ch,providerData:dh,stsTokenManager:Js}=_;z(lc&&Js,p,"internal-error");const ha=yn.fromJSON(this.name,Js);z("string"==typeof lc,p,"internal-error"),ot(dn,p.name),ot(ci,p.name),z("boolean"==typeof cc,p,"internal-error"),z("boolean"==typeof ch,p,"internal-error"),ot(Co,p.name),ot(sc,p.name),ot(oc,p.name),ot(ac,p.name),ot(Ou,p.name),ot(uc,p.name);const fa=new Ae({uid:lc,auth:p,email:ci,emailVerified:cc,displayName:dn,isAnonymous:ch,photoURL:sc,phoneNumber:Co,tenantId:oc,stsTokenManager:ha,createdAt:Ou,lastLoginAt:uc});return dh&&Array.isArray(dh)&&(fa.providerData=dh.map(Bp=>Object.assign({},Bp))),ac&&(fa._redirectEventId=ac),fa}static _fromIdTokenResponse(p,_,w=!1){return(0,d.Z)(function*(){const M=new yn;M.updateFromServerResponse(_);const P=new Ae({uid:_.localId,auth:p,stsTokenManager:M,isAnonymous:w});return yield _n(P),P})()}}const vt=new Map;function Rt(E){Ge(E instanceof Function,"Expected a class definition");let p=vt.get(E);return p?(Ge(p instanceof E,"Instance stored in cache mismatched with class"),p):(p=new E,vt.set(E,p),p)}const on=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,w){var M=this;return(0,d.Z)(function*(){M.storage[_]=w})()}_get(_){var w=this;return(0,d.Z)(function*(){const M=w.storage[_];return void 0===M?null:M})()}_remove(_){var w=this;return(0,d.Z)(function*(){delete w.storage[_]})()}_addListener(_,w){}_removeListener(_,w){}}return E.type="NONE",E})();function Vn(E,p,_){return`firebase:${E}:${p}:${_}`}class ${constructor(p,_,w){this.persistence=p,this.auth=_,this.userKey=w;const{config:M,name:P}=this.auth;this.fullUserKey=Vn(this.userKey,M.apiKey,P),this.fullPersistenceKey=Vn("persistence",M.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?Ae._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,d.Z)(function*(){if(_.persistence===p)return;const w=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,w?_.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,w="authUser"){return(0,d.Z)(function*(){if(!_.length)return new $(Rt(on),p,w);const M=(yield Promise.all(_.map(function(){var ht=(0,d.Z)(function*(Vt){if(yield Vt._isAvailable())return Vt});return function(Vt){return ht.apply(this,arguments)}}()))).filter(ht=>ht);let P=M[0]||Rt(on);const Q=Vn(w,p.config.apiKey,p.name);let he=null;for(const ht of _)try{const Vt=yield ht._get(Q);if(Vt){const dn=Ae._fromJSON(p,Vt);ht!==P&&(he=dn),P=ht;break}}catch{}const Je=M.filter(ht=>ht._shouldAllowMigration);return P._shouldAllowMigration&&Je.length?(P=Je[0],he&&(yield P._set(Q,he.toJSON())),yield Promise.all(_.map(function(){var ht=(0,d.Z)(function*(Vt){if(Vt!==P)try{yield Vt._remove(Q)}catch{}});return function(Vt){return ht.apply(this,arguments)}}())),new $(P,p,w)):new $(P,p,w)})()}}function B(E){const p=E.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(L(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(N(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(de(p))return"Blackberry";if(Be(p))return"Webos";if(S(p))return"Safari";if((p.includes("chrome/")||A(p))&&!p.includes("edge/"))return"Chrome";if(X(p))return"Android";{const w=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function N(E=(0,U.z$)()){return/firefox\//i.test(E)}function S(E=(0,U.z$)()){const p=E.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function A(E=(0,U.z$)()){return/crios\//i.test(E)}function L(E=(0,U.z$)()){return/iemobile/i.test(E)}function X(E=(0,U.z$)()){return/android/i.test(E)}function de(E=(0,U.z$)()){return/blackberry/i.test(E)}function Be(E=(0,U.z$)()){return/webos/i.test(E)}function re(E=(0,U.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function $e(E=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function Lt(E=(0,U.z$)()){return re(E)||X(E)||Be(E)||de(E)||/windows phone/i.test(E)||L(E)}function Y(E,p=[]){let _;switch(E){case"Browser":_=B((0,U.z$)());break;case"Worker":_=`${B((0,U.z$)())}-${E}`;break;default:_=E}const w=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${k.SDK_VERSION}/${w}`}function lt(){return(lt=(0,d.Z)(function*(E){return(yield Ot(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function wt(E,p){return nt.apply(this,arguments)}function nt(){return(nt=(0,d.Z)(function*(E,p){return Ot(E,"GET","/v2/recaptchaConfig",Et(E,p))})).apply(this,arguments)}function W(E){return void 0!==E&&void 0!==E.getResponse}function ae(E){return void 0!==E&&void 0!==E.enterprise}class He{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function nn(E){return new Promise((p,_)=>{const w=document.createElement("script");w.setAttribute("src",E),w.onload=p,w.onerror=M=>{const P=be("internal-error");P.customData=M,_(P)},w.type="text/javascript",w.charset="UTF-8",function Ct(){var E,p;return null!==(p=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==p?p:document}().appendChild(w)})}function gn(E){return`__${E}${Math.floor(1e6*Math.random())}`}class si{constructor(p){this.type="recaptcha-enterprise",this.auth=Qn(p)}verify(p="verify",_=!1){var w=this;return(0,d.Z)(function*(){function P(){return P=(0,d.Z)(function*(he){if(!_){if(null==he.tenantId&&null!=he._agentRecaptchaConfig)return he._agentRecaptchaConfig.siteKey;if(null!=he.tenantId&&void 0!==he._tenantRecaptchaConfigs[he.tenantId])return he._tenantRecaptchaConfigs[he.tenantId].siteKey}return new Promise(function(){var Je=(0,d.Z)(function*(ht,Vt){wt(he,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(dn=>{if(void 0!==dn.recaptchaKey){const ci=new He(dn);return null==he.tenantId?he._agentRecaptchaConfig=ci:he._tenantRecaptchaConfigs[he.tenantId]=ci,ht(ci.siteKey)}Vt(new Error("recaptcha Enterprise site key undefined"))}).catch(dn=>{Vt(dn)})});return function(ht,Vt){return Je.apply(this,arguments)}}())}),P.apply(this,arguments)}function Q(he,Je,ht){const Vt=window.grecaptcha;ae(Vt)?Vt.enterprise.ready(()=>{try{Vt.enterprise.execute(he,{action:p}).then(dn=>{Je(dn)}).catch(dn=>{ht(dn)})}catch(dn){ht(dn)}}):ht(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((he,Je)=>{(function M(he){return P.apply(this,arguments)})(w.auth).then(ht=>{if(!_&&ae(window.grecaptcha))Q(ht,he,Je);else{if(typeof window>"u")return void Je(new Error("RecaptchaVerifier is only supported in browser"));nn("https://www.google.com/recaptcha/enterprise.js?render="+ht).then(()=>{Q(ht,he,Je)}).catch(Vt=>{Je(Vt)})}}).catch(ht=>{Je(ht)})})})()}}function hr(E,p,_){return kn.apply(this,arguments)}function kn(){return(kn=(0,d.Z)(function*(E,p,_,w=!1){const M=new si(E);let P;try{P=yield M.verify(_)}catch{P=yield M.verify(_,!0)}const Q=Object.assign({},p);return Object.assign(Q,w?{captchaResp:P}:{captchaResponse:P}),Object.assign(Q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Q})).apply(this,arguments)}class u_{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const w=P=>new Promise((Q,he)=>{try{Q(p(P))}catch(Je){he(Je)}});w.onAbort=_,this.queue.push(w);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,d.Z)(function*(){if(_.auth.currentUser===p)return;const w=[];try{for(const M of _.queue)yield M(p),M.onAbort&&w.push(M.onAbort)}catch(M){w.reverse();for(const P of w)try{P()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class sp{constructor(p,_,w,M){this.app=p,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=w,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bl(this),this.idTokenSubscription=new bl(this),this.beforeStateQueue=new u_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(p,_){var w=this;return _&&(this._popupRedirectResolver=Rt(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var M,P;if(!w._deleted&&(w.persistenceManager=yield $.create(w,p),!w._deleted)){if(null!==(M=w._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(_),w.lastNotifiedUid=(null===(P=w.currentUser)||void 0===P?void 0:P.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,d.Z)(function*(){var w;const M=yield _.assertedPersistence.getCurrentUser();let P=M,Q=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const he=null===(w=_.redirectUser)||void 0===w?void 0:w._redirectEventId,Je=P?._redirectEventId,ht=yield _.tryRedirectSignIn(p);(!he||he===Je)&&ht?.user&&(P=ht.user,Q=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(Q)try{yield _.beforeStateQueue.runMiddleware(P)}catch(he){P=M,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(he))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return z(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(p){var _=this;return(0,d.Z)(function*(){let w=null;try{w=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,d.Z)(function*(){try{yield _n(p)}catch(w){if("auth/network-request-failed"!==w?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function pe(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var p=this;return(0,d.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,d.Z)(function*(){const w=p?(0,U.m9)(p):null;return w&&z(w.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(w&&w._clone(_))})()}_updateCurrentUser(p,_=!1){var w=this;return(0,d.Z)(function*(){if(!w._deleted)return p&&z(w.tenantId===p.tenantId,w,"tenant-id-mismatch"),_||(yield w.beforeStateQueue.runMiddleware(p)),w.queue((0,d.Z)(function*(){yield w.directlySetCurrentUser(p),w.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(Rt(p))}))}initializeRecaptchaConfig(){var p=this;return(0,d.Z)(function*(){const _=yield wt(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),w=new He(_);null==p.tenantId?p._agentRecaptchaConfig=w:p._tenantRecaptchaConfigs[p.tenantId]=w,w.emailPasswordEnabled&&new si(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new U.LL("auth","Firebase",p())}onAuthStateChanged(p,_,w){return this.registerStateListener(this.authStateSubscription,p,_,w)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,w){return this.registerStateListener(this.idTokenSubscription,p,_,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var w=this;return(0,d.Z)(function*(){const M=yield w.getOrInitRedirectPersistenceManager(_);return null===p?M.removeCurrentUser():M.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const w=p&&Rt(p)||_._popupRedirectResolver;z(w,_,"argument-error"),_.redirectPersistenceManager=yield $.create(_,[Rt(w._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,d.Z)(function*(){var w,M;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(w=_._currentUser)||void 0===w?void 0:w._redirectEventId)===p?_._currentUser:(null===(M=_.redirectUser)||void 0===M?void 0:M._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,d.Z)(function*(){if(p===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,w,M){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return z(Q,this,"internal-error"),Q.then(()=>P(this.currentUser)),"function"==typeof _?p.addObserver(_,w,M):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Y(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,d.Z)(function*(){var _;const w={"X-Client-Version":p.clientVersion};p.app.options.appId&&(w["X-Firebase-gmpid"]=p.app.options.appId);const M=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();M&&(w["X-Firebase-Client"]=M);const P=yield p._getAppCheckToken();return P&&(w["X-Firebase-AppCheck"]=P),w})()}_getAppCheckToken(){var p=this;return(0,d.Z)(function*(){var _;const w=yield null===(_=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return w?.error&&function ft(E,...p){ie.logLevel<=Ee.in.WARN&&ie.warn(`Auth (${k.SDK_VERSION}): ${E}`,...p)}(`Error while retrieving App Check token: ${w.error}`),w?.token})()}}function Qn(E){return(0,U.m9)(E)}class bl{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,U.ne)(_=>this.observer=_)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Gs(E,p,_){const w=Qn(E);z(w._canInitEmulator,w,"emulator-config-failed"),z(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const M=!!_?.disableWarnings,P=mr(p),{host:Q,port:he}=function l_(E){const p=mr(E),_=/(\/\/)?([^?#/]+)/.exec(E.substr(p.length));if(!_)return{host:"",port:null};const w=_[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(w);if(M){const P=M[1];return{host:P,port:Hr(w.substr(P.length+1))}}{const[P,Q]=w.split(":");return{host:P,port:Hr(Q)}}}(p);w.config.emulator={url:`${P}//${Q}${null===he?"":`:${he}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Q,port:he,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function yi(){function E(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function mr(E){const p=E.indexOf(":");return p<0?"":E.substr(0,p+1)}function Hr(E){if(!E)return null;const p=Number(E);return isNaN(p)?null:p}class is{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return fe("not implemented")}_getIdTokenResponse(p){return fe("not implemented")}_linkToIdToken(p,_){return fe("not implemented")}_getReauthenticationResolver(p){return fe("not implemented")}}function Ka(E,p){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,d.Z)(function*(E,p){return Ot(E,"POST","/v1/accounts:resetPassword",Et(E,p))})).apply(this,arguments)}function Bi(E,p){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,d.Z)(function*(E,p){return Ot(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function t0(E,p){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,d.Z)(function*(E,p){return Ot(E,"POST","/v1/accounts:update",Et(E,p))})).apply(this,arguments)}function Cd(E,p){return c_.apply(this,arguments)}function c_(){return(c_=(0,d.Z)(function*(E,p){return Ke(E,"POST","/v1/accounts:signInWithPassword",Et(E,p))})).apply(this,arguments)}function vi(E,p){return op.apply(this,arguments)}function op(){return(op=(0,d.Z)(function*(E,p){return Ot(E,"POST","/v1/accounts:sendOobCode",Et(E,p))})).apply(this,arguments)}function n0(E,p){return ap.apply(this,arguments)}function ap(){return(ap=(0,d.Z)(function*(E,p){return vi(E,p)})).apply(this,arguments)}function up(E,p){return lp.apply(this,arguments)}function lp(){return(lp=(0,d.Z)(function*(E,p){return vi(E,p)})).apply(this,arguments)}function cp(E,p){return dp.apply(this,arguments)}function dp(){return(dp=(0,d.Z)(function*(E,p){return vi(E,p)})).apply(this,arguments)}function r0(E,p){return hp.apply(this,arguments)}function hp(){return(hp=(0,d.Z)(function*(E,p){return vi(E,p)})).apply(this,arguments)}function fp(){return(fp=(0,d.Z)(function*(E,p){return Ke(E,"POST","/v1/accounts:signInWithEmailLink",Et(E,p))})).apply(this,arguments)}function Dl(){return(Dl=(0,d.Z)(function*(E,p){return Ke(E,"POST","/v1/accounts:signInWithEmailLink",Et(E,p))})).apply(this,arguments)}class so extends is{constructor(p,_,w,M=null){super("password",w),this._email=p,this._password=_,this._tenantId=M}static _fromEmailAndPassword(p,_){return new so(p,_,"password")}static _fromEmailAndCode(p,_,w=null){return new so(p,_,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,d.Z)(function*(){var w;switch(_.signInMethod){case"password":const M={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=p._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const P=yield hr(p,M,"signInWithPassword");return Cd(p,P)}return Cd(p,M).catch(function(){var P=(0,d.Z)(function*(Q){if("auth/missing-recaptcha-token"===Q.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const he=yield hr(p,M,"signInWithPassword");return Cd(p,he)}return Promise.reject(Q)});return function(Q){return P.apply(this,arguments)}}());case"emailLink":return function s0(E,p){return fp.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:xe(p,"internal-error")}})()}_linkToIdToken(p,_){var w=this;return(0,d.Z)(function*(){switch(w.signInMethod){case"password":return Bi(p,{idToken:_,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function o0(E,p){return Dl.apply(this,arguments)}(p,{idToken:_,email:w._email,oobCode:w._password});default:xe(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function qs(E,p){return pp.apply(this,arguments)}function pp(){return(pp=(0,d.Z)(function*(E,p){return Ke(E,"POST","/v1/accounts:signInWithIdp",Et(E,p))})).apply(this,arguments)}class Or extends is{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new Or(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):xe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:M}=_,P=(0,ee._T)(_,["providerId","signInMethod"]);if(!w||!M)return null;const Q=new Or(w,M);return Q.idToken=P.idToken||void 0,Q.accessToken=P.accessToken||void 0,Q.secret=P.secret,Q.nonce=P.nonce,Q.pendingToken=P.pendingToken||null,Q}_getIdTokenResponse(p){return qs(p,this.buildRequest())}_linkToIdToken(p,_){const w=this.buildRequest();return w.idToken=_,qs(p,w)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,qs(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,U.xO)(_)}return p}}function d_(E,p){return Za.apply(this,arguments)}function Za(){return(Za=(0,d.Z)(function*(E,p){return Ot(E,"POST","/v1/accounts:sendVerificationCode",Et(E,p))})).apply(this,arguments)}function Ya(){return(Ya=(0,d.Z)(function*(E,p){return Ke(E,"POST","/v1/accounts:signInWithPhoneNumber",Et(E,p))})).apply(this,arguments)}function Sl(){return(Sl=(0,d.Z)(function*(E,p){const _=yield Ke(E,"POST","/v1/accounts:signInWithPhoneNumber",Et(E,p));if(_.temporaryProof)throw qt(E,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const h_={USER_NOT_FOUND:"user-not-found"};function Qo(){return(Qo=(0,d.Z)(function*(E,p){return Ke(E,"POST","/v1/accounts:signInWithPhoneNumber",Et(E,Object.assign(Object.assign({},p),{operation:"REAUTH"})),h_)})).apply(this,arguments)}class oo extends is{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new oo({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new oo({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function gp(E,p){return Ya.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function Id(E,p){return Sl.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function f_(E,p){return Qo.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:w,verificationCode:M}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:w,code:M}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:w,phoneNumber:M,temporaryProof:P}=p;return w||_||M||P?new oo({verificationId:_,verificationCode:w,phoneNumber:M,temporaryProof:P}):null}}class Jo{constructor(p){var _,w,M,P,Q,he;const Je=(0,U.zd)((0,U.pd)(p)),ht=null!==(_=Je.apiKey)&&void 0!==_?_:null,Vt=null!==(w=Je.oobCode)&&void 0!==w?w:null,dn=function Si(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Je.mode)&&void 0!==M?M:null);z(ht&&Vt&&dn,"argument-error"),this.apiKey=ht,this.operation=dn,this.code=Vt,this.continueUrl=null!==(P=Je.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Q=Je.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(he=Je.tenantId)&&void 0!==he?he:null}static parseLink(p){const _=function bd(E){const p=(0,U.zd)((0,U.pd)(E)).link,_=p?(0,U.zd)((0,U.pd)(p)).deep_link_id:null,w=(0,U.zd)((0,U.pd)(E)).deep_link_id;return(w?(0,U.zd)((0,U.pd)(w)).link:null)||w||_||p||E}(p);try{return new Jo(_)}catch{return null}}}let mp=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(_,w){return so._fromEmailAndPassword(_,w)}static credentialWithLink(_,w){const M=Jo.parseLink(w);return z(M,"argument-error"),so._fromEmailAndCode(_,M.code,M.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class ao{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Jn extends ao{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Qa extends Jn{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return z("providerId"in _&&"signInMethod"in _,"argument-error"),Or._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return z(p.idToken||p.accessToken,"argument-error"),Or._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Qa.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Qa.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:w,oauthTokenSecret:M,pendingToken:P,nonce:Q,providerId:he}=p;if(!w&&!M&&!_&&!P||!he)return null;try{return new Qa(he)._credential({idToken:_,accessToken:w,nonce:Q,pendingToken:P})}catch{return null}}}let u0=(()=>{class E extends Jn{constructor(){super("facebook.com")}static credential(_){return Or._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Ja=(()=>{class E extends Jn{constructor(){super("google.com"),this.addScope("profile")}static credential(_,w){return Or._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:w})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:M}=_;if(!w&&!M)return null;try{return E.credential(w,M)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),Ei=(()=>{class E extends Jn{constructor(){super("github.com")}static credential(_){return Or._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Ks extends is{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return qs(p,this.buildRequest())}_linkToIdToken(p,_){const w=this.buildRequest();return w.idToken=_,qs(p,w)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,qs(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:M,pendingToken:P}=_;return w&&M&&P&&w===M?new Ks(w,P):null}static _create(p,_){return new Ks(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xr extends ao{constructor(p){z(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return xr.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return xr.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=Ks.fromJSON(p);return z(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:w}=p;if(!_||!w)return null;try{return Ks._create(w,_)}catch{return null}}}let c0=(()=>{class E extends Jn{constructor(){super("twitter.com")}static credential(_,w){return Or._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:w})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:w,oauthTokenSecret:M}=_;if(!w||!M)return null;try{return E.credential(w,M)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function uo(E,p){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,d.Z)(function*(E,p){return Ke(E,"POST","/v1/accounts:signUp",Et(E,p))})).apply(this,arguments)}class Cr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,w,M=!1){return(0,d.Z)(function*(){const P=yield Ae._fromIdTokenResponse(p,w,M),Q=Xo(w);return new Cr({user:P,providerId:Q,_tokenResponse:w,operationType:_})})()}static _forOperation(p,_,w){return(0,d.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const M=Xo(w);return new Cr({user:p,providerId:M,_tokenResponse:w,operationType:_})})()}}function Xo(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function Sd(E){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,d.Z)(function*(E){var p;const _=Qn(E);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new Cr({user:_.currentUser,providerId:null,operationType:"signIn"});const w=yield uo(_,{returnSecureToken:!0}),M=yield Cr._fromIdTokenResponse(_,"signIn",w,!0);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class eu extends U.ZR{constructor(p,_,w,M){var P;super(_.code,_.message),this.operationType=w,this.user=M,Object.setPrototypeOf(this,eu.prototype),this.customData={appName:p.name,tenantId:null!==(P=p.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,_,w,M){return new eu(p,_,w,M)}}function p_(E,p,_,w){return("reauthenticate"===p?_._getReauthenticationResolver(E):_._getIdTokenResponse(E)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?eu._fromErrorAndOperation(E,P,p,w):P})}function g_(E){return new Set(E.map(({providerId:p})=>p).filter(p=>!!p))}function m_(E,p){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,d.Z)(function*(E,p){const _=(0,U.m9)(E);yield xd(!0,_,p);const{providerUserInfo:w}=yield Yn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),M=g_(w||[]);return _.providerData=_.providerData.filter(P=>M.has(P.providerId)),M.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Al(E,p){return Md.apply(this,arguments)}function Md(){return(Md=(0,d.Z)(function*(E,p,_=!1){const w=yield At(E,p._linkToIdToken(E.auth,yield E.getIdToken()),_);return Cr._forOperation(E,"link",w)})).apply(this,arguments)}function xd(E,p,_){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,d.Z)(function*(E,p,_){yield _n(p);const M=!1===E?"provider-already-linked":"no-such-provider";z(g_(p.providerData).has(_)===E,p.auth,M)})).apply(this,arguments)}function In(E,p){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,d.Z)(function*(E,p,_=!1){const{auth:w}=E,M="reauthenticate";try{const P=yield At(E,p_(w,M,p,E),_);z(P.idToken,w,"internal-error");const Q=tn(P.idToken);z(Q,w,"internal-error");const{sub:he}=Q;return z(E.uid===he,w,"user-mismatch"),Cr._forOperation(E,M,P)}catch(P){throw"auth/user-not-found"===P?.code&&xe(w,"user-mismatch"),P}})).apply(this,arguments)}function Rd(E,p){return _r.apply(this,arguments)}function _r(){return(_r=(0,d.Z)(function*(E,p,_=!1){const w="signIn",M=yield p_(E,w,p),P=yield Cr._fromIdTokenResponse(E,w,M);return _||(yield E._updateCurrentUser(P.user)),P})).apply(this,arguments)}function tu(E,p){return lo.apply(this,arguments)}function lo(){return(lo=(0,d.Z)(function*(E,p){return Rd(Qn(E),p)})).apply(this,arguments)}function $i(E,p){return nu.apply(this,arguments)}function nu(){return(nu=(0,d.Z)(function*(E,p){const _=(0,U.m9)(E);return yield xd(!1,_,p.providerId),Al(_,p)})).apply(this,arguments)}function Pd(E,p){return _p.apply(this,arguments)}function _p(){return(_p=(0,d.Z)(function*(E,p){return In((0,U.m9)(E),p)})).apply(this,arguments)}function fr(E,p){return __.apply(this,arguments)}function __(){return(__=(0,d.Z)(function*(E,p){return Ke(E,"POST","/v1/accounts:signInWithCustomToken",Et(E,p))})).apply(this,arguments)}function y_(E,p){return zr.apply(this,arguments)}function zr(){return(zr=(0,d.Z)(function*(E,p){const _=Qn(E),w=yield fr(_,{token:p,returnSecureToken:!0}),M=yield Cr._fromIdTokenResponse(_,"signIn",w);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class Ai{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?Nd._fromServerResponse(p,_):"totpInfo"in _?co._fromServerResponse(p,_):xe(p,"internal-error")}}class Nd extends Ai{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new Nd(_)}}class co extends Ai{constructor(p){super("totp",p)}static _fromServerResponse(p,_){return new co(_)}}function oi(E,p,_){var w;z((null===(w=_.url)||void 0===w?void 0:w.length)>0,E,"invalid-continue-uri"),z(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(z(_.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(z(_.android.packageName.length>0,E,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function d0(E,p,_){return Od.apply(this,arguments)}function Od(){return Od=(0,d.Z)(function*(E,p,_){var w;const M=Qn(E),P={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=M._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const Q=yield hr(M,P,"getOobCode",!0);_&&oi(M,Q,_),yield up(M,Q)}else _&&oi(M,P,_),yield up(M,P).catch(function(){var Q=(0,d.Z)(function*(he){if("auth/missing-recaptcha-token"!==he.code)return Promise.reject(he);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Je=yield hr(M,P,"getOobCode",!0);_&&oi(M,Je,_),yield up(M,Je)}});return function(he){return Q.apply(this,arguments)}}())}),Od.apply(this,arguments)}function h0(E,p,_){return xl.apply(this,arguments)}function xl(){return(xl=(0,d.Z)(function*(E,p,_){yield Ka((0,U.m9)(E),{oobCode:p,newPassword:_})})).apply(this,arguments)}function kd(E,p){return ru.apply(this,arguments)}function ru(){return(ru=(0,d.Z)(function*(E,p){yield t0((0,U.m9)(E),{oobCode:p})})).apply(this,arguments)}function iu(E,p){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,d.Z)(function*(E,p){const _=(0,U.m9)(E),w=yield Ka(_,{oobCode:p}),M=w.requestType;switch(z(M,_,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":z(w.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":z(w.mfaInfo,_,"internal-error");default:z(w.email,_,"internal-error")}let P=null;return w.mfaInfo&&(P=Ai._fromServerResponse(Qn(_),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:P},operation:M}})).apply(this,arguments)}function f0(E,p){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,d.Z)(function*(E,p){const{data:_}=yield iu((0,U.m9)(E),p);return _.email})).apply(this,arguments)}function Rl(E,p,_){return su.apply(this,arguments)}function su(){return su=(0,d.Z)(function*(E,p,_){var w;const M=Qn(E),P={returnSecureToken:!0,email:p,password:_,clientType:"CLIENT_TYPE_WEB"};let Q;if(null!==(w=M._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const ht=yield hr(M,P,"signUpPassword");Q=uo(M,ht)}else Q=uo(M,P).catch(function(){var ht=(0,d.Z)(function*(Vt){if("auth/missing-recaptcha-token"===Vt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const dn=yield hr(M,P,"signUpPassword");return uo(M,dn)}return Promise.reject(Vt)});return function(Vt){return ht.apply(this,arguments)}}());const he=yield Q.catch(ht=>Promise.reject(ht)),Je=yield Cr._fromIdTokenResponse(M,"signIn",he);return yield M._updateCurrentUser(Je.user),Je}),su.apply(this,arguments)}function v_(E,p,_){return tu((0,U.m9)(E),mp.credential(p,_))}function E_(E,p,_){return Pl.apply(this,arguments)}function Pl(){return Pl=(0,d.Z)(function*(E,p,_){var w;const M=Qn(E),P={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function Q(he,Je){z(Je.handleCodeInApp,M,"argument-error"),Je&&oi(M,he,Je)}if(null!==(w=M._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const he=yield hr(M,P,"getOobCode",!0);Q(he,_),yield cp(M,he)}else Q(P,_),yield cp(M,P).catch(function(){var he=(0,d.Z)(function*(Je){if("auth/missing-recaptcha-token"!==Je.code)return Promise.reject(Je);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ht=yield hr(M,P,"getOobCode",!0);Q(ht,_),yield cp(M,ht)}});return function(Je){return he.apply(this,arguments)}}())}),Pl.apply(this,arguments)}function Nl(E,p){return"EMAIL_SIGNIN"===Jo.parseLink(p)?.operation}function p0(E,p,_){return yp.apply(this,arguments)}function yp(){return(yp=(0,d.Z)(function*(E,p,_){const w=(0,U.m9)(E),M=mp.credentialWithLink(p,_||Qe());return z(M._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),tu(w,M)})).apply(this,arguments)}function ai(E,p){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,d.Z)(function*(E,p){return Ot(E,"POST","/v1/accounts:createAuthUri",Et(E,p))})).apply(this,arguments)}function ir(E,p){return vp.apply(this,arguments)}function vp(){return(vp=(0,d.Z)(function*(E,p){const w={identifier:p,continueUri:bt()?Qe():"http://localhost"},{signinMethods:M}=yield ai((0,U.m9)(E),w);return M||[]})).apply(this,arguments)}function g0(E,p){return Ep.apply(this,arguments)}function Ep(){return(Ep=(0,d.Z)(function*(E,p){const _=(0,U.m9)(E),M={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};p&&oi(_.auth,M,p);const{email:P}=yield n0(_.auth,M);P!==E.email&&(yield E.reload())})).apply(this,arguments)}function m0(E,p,_){return wp.apply(this,arguments)}function wp(){return(wp=(0,d.Z)(function*(E,p,_){const w=(0,U.m9)(E),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:p};_&&oi(w.auth,P,_);const{email:Q}=yield r0(w.auth,P);Q!==E.email&&(yield E.reload())})).apply(this,arguments)}function w_(E,p){return ou.apply(this,arguments)}function ou(){return(ou=(0,d.Z)(function*(E,p){return Ot(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ol(E,p){return ea.apply(this,arguments)}function ea(){return(ea=(0,d.Z)(function*(E,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const w=(0,U.m9)(E),P={idToken:yield w.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},Q=yield At(w,w_(w.auth,P));w.displayName=Q.displayName||null,w.photoURL=Q.photoUrl||null;const he=w.providerData.find(({providerId:Je})=>"password"===Je);he&&(he.displayName=w.displayName,he.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Q)})).apply(this,arguments)}function Cp(E,p){return I_((0,U.m9)(E),p,null)}function C_(E,p){return I_((0,U.m9)(E),null,p)}function I_(E,p,_){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,d.Z)(function*(E,p,_){const{auth:w}=E,P={idToken:yield E.getIdToken(),returnSecureToken:!0};p&&(P.email=p),_&&(P.password=_);const Q=yield At(E,Bi(w,P));yield E._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class au{constructor(p,_,w={}){this.isNewUser=p,this.providerId=_,this.profile=w}}class b_ extends au{constructor(p,_,w,M){super(p,_,w),this.username=M}}class Fl extends au{constructor(p,_){super(p,"facebook.com",_)}}class Ip extends b_{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class _0 extends au{constructor(p,_){super(p,"google.com",_)}}class T_ extends b_{constructor(p,_,w){super(p,"twitter.com",_,w)}}function bp(E){const{user:p,_tokenResponse:_}=E;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function kl(E){var p,_;if(!E)return null;const{providerId:w}=E,M=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},P=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!w&&E?.idToken){const Q=null===(_=null===(p=tn(E.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(Q)return new au(P,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!w)return null;switch(w){case"facebook.com":return new Fl(P,M);case"github.com":return new Ip(P,M);case"google.com":return new _0(P,M);case"twitter.com":return new T_(P,M,E.screenName||null);case"custom":case"anonymous":return new au(P,null);default:return new au(P,w,M)}}(_)}function lu(E,p,_,w){return(0,U.m9)(E).onAuthStateChanged(p,_,w)}class Mi{constructor(p,_,w){this.type=p,this.credential=_,this.auth=w}static _fromIdtoken(p,_){return new Mi("enroll",p,_)}static _fromMfaPendingCredential(p){return new Mi("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,w;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Mi._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(w=p.multiFactorSession)&&void 0!==w&&w.idToken)return Mi._fromIdtoken(p.multiFactorSession.idToken)}return null}}class ho{constructor(p,_,w){this.session=p,this.hints=_,this.signInResolver=w}static _fromError(p,_){const w=Qn(p),M=_.customData._serverResponse,P=(M.mfaInfo||[]).map(he=>Ai._fromServerResponse(w,he));z(M.mfaPendingCredential,w,"internal-error");const Q=Mi._fromMfaPendingCredential(M.mfaPendingCredential);return new ho(Q,P,function(){var he=(0,d.Z)(function*(Je){const ht=yield Je._process(w,Q);delete M.mfaInfo,delete M.mfaPendingCredential;const Vt=Object.assign(Object.assign({},M),{idToken:ht.idToken,refreshToken:ht.refreshToken});switch(_.operationType){case"signIn":const dn=yield Cr._fromIdTokenResponse(w,_.operationType,Vt);return yield w._updateCurrentUser(dn.user),dn;case"reauthenticate":return z(_.user,w,"internal-error"),Cr._forOperation(_.user,_.operationType,Vt);default:xe(w,"internal-error")}});return function(Je){return he.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,d.Z)(function*(){return _.signInResolver(p)})()}}function A_(E,p){var _;const w=(0,U.m9)(E),M=p;return z(p.customData.operationType,w,"argument-error"),z(null===(_=M.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,w,"argument-error"),ho._fromError(w,M)}function ta(E,p){return Ot(E,"POST","/v2/accounts/mfaEnrollment:start",Et(E,p))}class Zs{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(w=>Ai._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new Zs(p)}getSession(){var p=this;return(0,d.Z)(function*(){return Mi._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,_){var w=this;return(0,d.Z)(function*(){const M=p,P=yield w.getSession(),Q=yield At(w.user,M._process(w.user.auth,P,_));return yield w.user._updateTokensIfNecessary(Q),w.user.reload()})()}unenroll(p){var _=this;return(0,d.Z)(function*(){const w="string"==typeof p?p:p.uid,M=yield _.user.getIdToken();try{const P=yield At(_.user,function Sp(E,p){return Ot(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Et(E,p))}(_.user.auth,{idToken:M,mfaEnrollmentId:w}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Q})=>Q!==w),yield _.user._updateTokensIfNecessary(P),yield _.user.reload()}catch(P){throw P}})()}}const du=new WeakMap;function Bd(E){const p=(0,U.m9)(E);return du.has(p)||du.set(p,Zs._fromUser(p)),du.get(p)}const fo="__sak";class hu{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(fo,"1"),this.storage.removeItem(fo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const fu=(()=>{class E extends hu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,w)=>this.onStorageEvent(_,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ll(){const E=(0,U.z$)();return S(E)||re(E)}()&&function an(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Lt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const w of Object.keys(this.listeners)){const M=this.storage.getItem(w),P=this.localCache[w];M!==P&&_(w,P,M)}}onStorageEvent(_,w=!1){if(!_.key)return void this.forAllChangedKeys((he,Je,ht)=>{this.notifyListeners(he,ht)});const M=_.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(M);if(_.newValue!==he)null!==_.newValue?this.storage.setItem(M,_.newValue):this.storage.removeItem(M);else if(this.localCache[M]===_.newValue&&!w)return}const P=()=>{const he=this.storage.getItem(M);!w&&this.localCache[M]===he||this.notifyListeners(M,he)},Q=this.storage.getItem(M);!function Ht(){return(0,U.w1)()&&10===document.documentMode}()||Q===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,w){this.localCache[_]=w;const M=this.listeners[_];if(M)for(const P of Array.from(M))P(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,w,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:w,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,w){var M=()=>super._set,P=this;return(0,d.Z)(function*(){yield M().call(P,_,w),P.localCache[_]=JSON.stringify(w)})()}_get(_){var w=()=>super._get,M=this;return(0,d.Z)(function*(){const P=yield w().call(M,_);return M.localCache[_]=JSON.stringify(P),P})()}_remove(_){var w=()=>super._remove,M=this;return(0,d.Z)(function*(){yield w().call(M,_),delete M.localCache[_]})()}}return E.type="LOCAL",E})(),po=(()=>{class E extends hu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,w){}_removeListener(_,w){}}return E.type="SESSION",E})();let x_=(()=>{class E{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const w=this.receivers.find(P=>P.isListeningto(_));if(w)return w;const M=new E(_);return this.receivers.push(M),M}isListeningto(_){return this.eventTarget===_}handleEvent(_){var w=this;return(0,d.Z)(function*(){const M=_,{eventId:P,eventType:Q,data:he}=M.data,Je=w.handlersMap[Q];if(!Je?.size)return;M.ports[0].postMessage({status:"ack",eventId:P,eventType:Q});const ht=Array.from(Je).map(function(){var dn=(0,d.Z)(function*(ci){return ci(M.origin,he)});return function(ci){return dn.apply(this,arguments)}}()),Vt=yield function na(E){return Promise.all(E.map(function(){var p=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(w){return{fulfilled:!1,reason:w}}});return function(_){return p.apply(this,arguments)}}()))}(ht);M.ports[0].postMessage({status:"done",eventId:P,eventType:Q,response:Vt})})()}_subscribe(_,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(w)}_unsubscribe(_,w){this.handlersMap[_]&&w&&this.handlersMap[_].delete(w),(!w||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function ra(E="",p=10){let _="";for(let w=0;w<p;w++)_+=Math.floor(10*Math.random());return E+_}class Ap{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,w=50){var M=this;return(0,d.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Q,he;return new Promise((Je,ht)=>{const Vt=ra("",20);P.port1.start();const dn=setTimeout(()=>{ht(new Error("unsupported_event"))},w);he={messageChannel:P,onMessage(ci){const Co=ci;if(Co.data.eventId===Vt)switch(Co.data.status){case"ack":clearTimeout(dn),Q=setTimeout(()=>{ht(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Je(Co.data.response);break;default:clearTimeout(dn),clearTimeout(Q),ht(new Error("invalid_response"))}}},M.handlers.add(he),P.port1.addEventListener("message",he.onMessage),M.target.postMessage({eventType:p,eventId:Vt,data:_},[P.port2])}).finally(()=>{he&&M.removeMessageHandler(he)})})()}}function Wn(){return window}function Vl(){return typeof Wn().WorkerGlobalScope<"u"&&"function"==typeof Wn().importScripts}function pu(){return(pu=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ys="firebaseLocalStorageDb",As="firebaseLocalStorage",zd="fbase_key";class go{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function ss(E,p){return E.transaction([As],p?"readwrite":"readonly").objectStore(As)}function Ul(){const E=indexedDB.open(Ys,1);return new Promise((p,_)=>{E.addEventListener("error",()=>{_(E.error)}),E.addEventListener("upgradeneeded",()=>{const w=E.result;try{w.createObjectStore(As,{keyPath:zd})}catch(M){_(M)}}),E.addEventListener("success",(0,d.Z)(function*(){const w=E.result;w.objectStoreNames.contains(As)?p(w):(w.close(),yield function E0(){const E=indexedDB.deleteDatabase(Ys);return new go(E).toPromise()}(),p(yield Ul()))}))})}function Un(E,p,_){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,d.Z)(function*(E,p,_){const w=ss(E,!0).put({[zd]:p,value:_});return new go(w).toPromise()})).apply(this,arguments)}function N_(){return(N_=(0,d.Z)(function*(E,p){const _=ss(E,!1).get(p),w=yield new go(_).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function O_(E,p){const _=ss(E,!0).delete(p);return new go(_).toPromise()}const ia=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield Ul()),_.db})()}_withRetries(_){var w=this;return(0,d.Z)(function*(){let M=0;for(;;)try{const P=yield w._openDb();return yield _(P)}catch(P){if(M++>3)throw P;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return Vl()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=x_._getInstance(function Mp(){return Vl()?self:null}()),_.receiver._subscribe("keyChanged",function(){var w=(0,d.Z)(function*(M,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(M,P){return w.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var w=(0,d.Z)(function*(M,P){return["keyChanged"]});return function(M,P){return w.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var w,M;if(_.activeServiceWorker=yield function Hd(){return pu.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Ap(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);!P||(null===(w=P[0])||void 0===w?void 0:w.fulfilled)&&(null===(M=P[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var w=this;return(0,d.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function P_(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:_},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Ul();return yield Un(_,fo,"1"),yield O_(_,fo),!0}catch{}return!1})()}_withPendingWrite(_){var w=this;return(0,d.Z)(function*(){w.pendingWrites++;try{yield _()}finally{w.pendingWrites--}})()}_set(_,w){var M=this;return(0,d.Z)(function*(){return M._withPendingWrite((0,d.Z)(function*(){return yield M._withRetries(P=>Un(P,_,w)),M.localCache[_]=w,M.notifyServiceWorker(_)}))})()}_get(_){var w=this;return(0,d.Z)(function*(){const M=yield w._withRetries(P=>function w0(E,p){return N_.apply(this,arguments)}(P,_));return w.localCache[_]=M,M})()}_remove(_){var w=this;return(0,d.Z)(function*(){return w._withPendingWrite((0,d.Z)(function*(){return yield w._withRetries(M=>O_(M,_)),delete w.localCache[_],w.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const w=yield _._withRetries(Q=>{const he=ss(Q,!1).getAll();return new go(he).toPromise()});if(!w)return[];if(0!==_.pendingWrites)return[];const M=[],P=new Set;for(const{fbase_key:Q,value:he}of w)P.add(Q),JSON.stringify(_.localCache[Q])!==JSON.stringify(he)&&(_.notifyListeners(Q,he),M.push(Q));for(const Q of Object.keys(_.localCache))_.localCache[Q]&&!P.has(Q)&&(_.notifyListeners(Q,null),M.push(Q));return M})()}notifyListeners(_,w){this.localCache[_]=w;const M=this.listeners[_];if(M)for(const P of Array.from(M))P(w)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function I0(E,p){return Ot(E,"POST","/v2/accounts/mfaSignIn:start",Et(E,p))}const Gd=1e12;class F_{constructor(p){this.auth=p,this.counter=Gd,this._widgets=new Map}render(p,_){const w=this.counter;return this._widgets.set(w,new Yr(p,this.auth.name,_||{})),this.counter++,w}reset(p){var _;const w=p||Gd;null===(_=this._widgets.get(w))||void 0===_||_.delete(),this._widgets.delete(w)}getResponse(p){var _;return(null===(_=this._widgets.get(p||Gd))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,d.Z)(function*(){var w;return null===(w=_._widgets.get(p||Gd))||void 0===w||w.execute(),""})()}}class Yr{constructor(p,_,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof p?document.getElementById(p):p;z(M,"argument-error",{appName:_}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function os(E){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<E;w++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const qd=gn("rcb"),Kd=new me(3e4,6e4);class xp{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Wn().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return z(function b0(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(_),p,"argument-error"),this.shouldResolveImmediately(_)&&W(Wn().grecaptcha)?Promise.resolve(Wn().grecaptcha):new Promise((w,M)=>{const P=Wn().setTimeout(()=>{M(be(p,"network-request-failed"))},Kd.get());Wn()[qd]=()=>{Wn().clearTimeout(P),delete Wn()[qd];const he=Wn().grecaptcha;if(!he||!W(he))return void M(be(p,"internal-error"));const Je=he.render;he.render=(ht,Vt)=>{const dn=Je(ht,Vt);return this.counter++,dn},this.hostLanguage=_,w(he)},nn(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:qd,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),M(be(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=Wn().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class T0{load(p){return(0,d.Z)(function*(){return new F_(p)})()}clearedOneInstance(){}}const D0="recaptcha",qD={theme:"light",type:"image"};class L_{constructor(p,_=Object.assign({},qD),w){this.parameters=_,this.type=D0,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Qn(w),this.isInvisible="invisible"===this.parameters.size,z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof p?document.getElementById(p):p;z(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new T0:new xp,this.validateStartingState()}verify(){var p=this;return(0,d.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(_)||new Promise(P=>{const Q=he=>{!he||(p.tokenChangeListeners.delete(Q),P(he))};p.tokenChangeListeners.add(Q),p.isInvisible&&w.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){z(!this.parameters.sitekey,this.auth,"argument-error"),z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(w=>w(_)),"function"==typeof p)p(_);else if("string"==typeof p){const w=Wn()[p];"function"==typeof w&&w(_)}}}assertNotDestroyed(){z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const w=document.createElement("div");_.appendChild(w),_=w}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.Z)(function*(){z(bt()&&!Vl(),p.auth,"internal-error"),yield function wi(){let E=null;return new Promise(p=>{"complete"!==document.readyState?(E=()=>p(),window.addEventListener("load",E)):p()}).catch(p=>{throw E&&window.removeEventListener("load",E),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function te(E){return lt.apply(this,arguments)}(p.auth);z(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class jl{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=oo._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function mu(E,p,_){return V_.apply(this,arguments)}function V_(){return(V_=(0,d.Z)(function*(E,p,_){const w=Qn(E),M=yield Zd(w,p,(0,U.m9)(_));return new jl(M,P=>tu(w,P))})).apply(this,arguments)}function U_(E,p,_){return Rp.apply(this,arguments)}function Rp(){return(Rp=(0,d.Z)(function*(E,p,_){const w=(0,U.m9)(E);yield xd(!1,w,"phone");const M=yield Zd(w.auth,p,(0,U.m9)(_));return new jl(M,P=>$i(w,P))})).apply(this,arguments)}function S0(E,p,_){return Pp.apply(this,arguments)}function Pp(){return(Pp=(0,d.Z)(function*(E,p,_){const w=(0,U.m9)(E),M=yield Zd(w.auth,p,(0,U.m9)(_));return new jl(M,P=>Pd(w,P))})).apply(this,arguments)}function Zd(E,p,_){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,d.Z)(function*(E,p,_){var w;const M=yield _.verify();try{let P;if(z("string"==typeof M,E,"argument-error"),z(_.type===D0,E,"argument-error"),P="string"==typeof p?{phoneNumber:p}:p,"session"in P){const Q=P.session;if("phoneNumber"in P)return z("enroll"===Q.type,E,"internal-error"),(yield ta(E,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{z("signin"===Q.type,E,"internal-error");const he=(null===(w=P.multiFactorHint)||void 0===w?void 0:w.uid)||P.multiFactorUid;return z(he,E,"missing-multi-factor-info"),(yield I0(E,{mfaPendingCredential:Q.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield d_(E,{phoneNumber:P.phoneNumber,recaptchaToken:M});return Q}}finally{_._reset()}})).apply(this,arguments)}function A0(E,p){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,d.Z)(function*(E,p){yield Al((0,U.m9)(E),p)})).apply(this,arguments)}let ui=(()=>{class E{constructor(_){this.providerId=E.PROVIDER_ID,this.auth=Qn(_)}verifyPhoneNumber(_,w){return Zd(this.auth,_,(0,U.m9)(w))}static credential(_,w){return oo._fromVerification(_,w)}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:w,temporaryProof:M}=_;return w&&M?oo._fromTokenResponse(w,M):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function sa(E,p){return p?Rt(p):(z(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class mo extends is{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return qs(p,this._buildIdpRequest())}_linkToIdToken(p,_){return qs(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return qs(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function Qd(E){return Rd(E.auth,new mo(E),E.bypassAuthState)}function Hl(E){const{auth:p,user:_}=E;return z(_,p,"internal-error"),In(_,new mo(E),E.bypassAuthState)}function Np(E){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,d.Z)(function*(E){const{auth:p,user:_}=E;return z(_,p,"internal-error"),Al(_,new mo(E),E.bypassAuthState)})).apply(this,arguments)}class oa{constructor(p,_,w,M,P=!1){this.auth=p,this.resolver=w,this.user=M,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,d.Z)(function*(w,M){p.pendingPromise={resolve:w,reject:M};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(P){p.reject(P)}});return function(w,M){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,d.Z)(function*(){const{urlResponse:w,sessionId:M,postBody:P,tenantId:Q,error:he,type:Je}=p;if(he)return void _.reject(he);const ht={auth:_.auth,requestUri:w,sessionId:M,tenantId:Q||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Je)(ht))}catch(Vt){_.reject(Vt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Qd;case"linkViaPopup":case"linkViaRedirect":return Np;case"reauthViaPopup":case"reauthViaRedirect":return Hl;default:xe(this.auth,"internal-error")}}resolve(p){Ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _o=new me(2e3,1e4);function sr(E,p,_){return zt.apply(this,arguments)}function zt(){return(zt=(0,d.Z)(function*(E,p,_){const w=Qn(E);je(E,p,ao);const M=sa(w,_);return new yu(w,"signInViaPopup",p,M).executeNotNull()})).apply(this,arguments)}function B_(E,p,_){return or.apply(this,arguments)}function or(){return(or=(0,d.Z)(function*(E,p,_){const w=(0,U.m9)(E);je(w.auth,p,ao);const M=sa(w.auth,_);return new yu(w.auth,"reauthViaPopup",p,M,w).executeNotNull()})).apply(this,arguments)}function Xd(E,p,_){return _u.apply(this,arguments)}function _u(){return(_u=(0,d.Z)(function*(E,p,_){const w=(0,U.m9)(E);je(w.auth,p,ao);const M=sa(w.auth,_);return new yu(w.auth,"linkViaPopup",p,M,w).executeNotNull()})).apply(this,arguments)}let yu=(()=>{class E extends oa{constructor(_,w,M,P,Q){super(_,w,P,Q),this.provider=M,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const w=yield _.execute();return z(w,_.auth,"internal-error"),w})()}onExecution(){var _=this;return(0,d.Z)(function*(){Ge(1===_.filter.length,"Popup operations only handle one event");const w=ra();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],w),_.authWindow.associatedEvent=w,_.resolver._originValidation(_.auth).catch(M=>{_.reject(M)}),_.resolver._isIframeWebStorageSupported(_.auth,M=>{M||_.reject(be(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const _=()=>{var w,M;this.pollId=null!==(M=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(be(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,_o.get())};_()}}return E.currentPopupAction=null,E})();const Hi=new Map;class as extends oa{constructor(p,_,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,d.Z)(function*(){let w=Hi.get(_.auth._key());if(!w){try{const P=(yield function $_(E,p){return ua.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;w=()=>Promise.resolve(P)}catch(M){w=()=>Promise.reject(M)}Hi.set(_.auth._key(),w)}return _.bypassAuthState||Hi.set(_.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,w=this;return(0,d.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(w,p);if("unknown"!==p.type){if(p.eventId){const M=yield w.auth._redirectUserForId(p.eventId);if(M)return w.user=M,_().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function ua(){return(ua=(0,d.Z)(function*(E,p){const _=Ci(p),w=eh(E);if(!(yield w._isAvailable()))return!1;const M="true"===(yield w._get(_));return yield w._remove(_),M})).apply(this,arguments)}function yo(E,p){return zl.apply(this,arguments)}function zl(){return(zl=(0,d.Z)(function*(E,p){return eh(E)._set(Ci(p),"true")})).apply(this,arguments)}function vu(){Hi.clear()}function la(E,p){Hi.set(E._key(),p)}function eh(E){return Rt(E._redirectPersistence)}function Ci(E){return Vn("pendingRedirect",E.config.apiKey,E.name)}function Eu(E,p,_){return function kr(E,p,_){return us.apply(this,arguments)}(E,p,_)}function us(){return(us=(0,d.Z)(function*(E,p,_){const w=Qn(E);je(E,p,ao),yield w._initializationPromise;const M=sa(w,_);return yield yo(M,w),M._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function j_(E,p,_){return function wu(E,p,_){return Qs.apply(this,arguments)}(E,p,_)}function Qs(){return(Qs=(0,d.Z)(function*(E,p,_){const w=(0,U.m9)(E);je(w.auth,p,ao),yield w.auth._initializationPromise;const M=sa(w.auth,_);yield yo(M,w.auth);const P=yield Iu(w);return M._openRedirect(w.auth,p,"reauthViaRedirect",P)})).apply(this,arguments)}function Op(E,p,_){return function H_(E,p,_){return Cu.apply(this,arguments)}(E,p,_)}function Cu(){return(Cu=(0,d.Z)(function*(E,p,_){const w=(0,U.m9)(E);je(w.auth,p,ao),yield w.auth._initializationPromise;const M=sa(w.auth,_);yield xd(!1,w,p.providerId),yield yo(M,w.auth);const P=yield Iu(w);return M._openRedirect(w.auth,p,"linkViaRedirect",P)})).apply(this,arguments)}function kp(E,p){return th.apply(this,arguments)}function th(){return(th=(0,d.Z)(function*(E,p){return yield Qn(E)._initializationPromise,Wl(E,p,!1)})).apply(this,arguments)}function Wl(E,p){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,d.Z)(function*(E,p,_=!1){const w=Qn(E),M=sa(w,p),Q=yield new as(w,M,_).execute();return Q&&!_&&(delete Q.user._redirectEventId,yield w._persistUserIfCurrent(Q.user),yield w._setRedirectUser(null,p)),Q})).apply(this,arguments)}function Iu(E){return vo.apply(this,arguments)}function vo(){return(vo=(0,d.Z)(function*(E){const p=ra(`${E.uid}:::`);return E._redirectEventId=p,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),p})).apply(this,arguments)}class rh{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(_=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function ih(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return z_(E);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var w;if(p.error&&!z_(p)){const M=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";_.onError(be(this.auth,M))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const w=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ql(p))}saveEventToCache(p){this.cachedEventUids.add(ql(p)),this.lastProcessedEventTime=Date.now()}}function ql(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(p=>p).join("-")}function z_({type:E,error:p}){return"unknown"===E&&"auth/no-auth-event"===p?.code}function Fp(E){return bu.apply(this,arguments)}function bu(){return(bu=(0,d.Z)(function*(E,p={}){return Ot(E,"GET","/v1/projects",p)})).apply(this,arguments)}const Lp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tu=/^https?/;function sh(){return(sh=(0,d.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:p}=yield Fp(E);for(const _ of p)try{if(Kl(_))return}catch{}xe(E,"unauthorized-domain")})).apply(this,arguments)}function Kl(E){const p=Qe(),{protocol:_,hostname:w}=new URL(p);if(E.startsWith("chrome-extension://")){const Q=new URL(E);return""===Q.hostname&&""===w?"chrome-extension:"===_&&E.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&Q.hostname===w}if(!Tu.test(_))return!1;if(Lp.test(E))return w===E;const M=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(w)}const Vp=new me(3e4,6e4);function Zl(){const E=Wn().___jsl;if(E?.H)for(const p of Object.keys(E.H))if(E.H[p].r=E.H[p].r||[],E.H[p].L=E.H[p].L||[],E.H[p].r=[...E.H[p].L],E.CP)for(let _=0;_<E.CP.length;_++)E.CP[_]=null}let Yl=null;function q_(E){return Yl=Yl||function G_(E){return new Promise((p,_)=>{var w,M,P;function Q(){Zl(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Zl(),_(be(E,"network-request-failed"))},timeout:Vp.get()})}if(null!==(M=null===(w=Wn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==M&&M.Iframe)p(gapi.iframes.getContext());else{if(null===(P=Wn().gapi)||void 0===P||!P.load){const he=gn("iframefcb");return Wn()[he]=()=>{gapi.load?Q():_(be(E,"network-request-failed"))},nn(`https://apis.google.com/js/api.js?onload=${he}`).catch(Je=>_(Je))}Q()}}).catch(p=>{throw Yl=null,p})}(E),Yl}const Qr=new me(5e3,15e3),K_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Z_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jl(E){const p=E.config;z(p.authDomain,E,"auth-domain-config-required");const _=p.emulator?Ne(p,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,w={apiKey:p.apiKey,appName:E.name,v:k.SDK_VERSION},M=Z_.get(E.config.apiHost);M&&(w.eid=M);const P=E._getFrameworks();return P.length&&(w.fw=P.join(",")),`${_}?${(0,U.xO)(w).slice(1)}`}function Du(){return Du=(0,d.Z)(function*(E){const p=yield q_(E),_=Wn().gapi;return z(_,E,"internal-error"),p.open({where:document.body,url:Jl(E),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:K_,dontclear:!0},w=>new Promise(function(){var M=(0,d.Z)(function*(P,Q){yield w.restyle({setHideOnLeave:!1});const he=be(E,"network-request-failed"),Je=Wn().setTimeout(()=>{Q(he)},Qr.get());function ht(){Wn().clearTimeout(Je),P(w)}w.ping(ht).then(ht,()=>{Q(he)})});return function(P,Q){return M.apply(this,arguments)}}()))}),Du.apply(this,arguments)}const Xl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Q_{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const li=encodeURIComponent("fac");function Su(E,p,_,w,M,P){return Au.apply(this,arguments)}function Au(){return(Au=(0,d.Z)(function*(E,p,_,w,M,P){z(E.config.authDomain,E,"auth-domain-config-required"),z(E.config.apiKey,E,"invalid-api-key");const Q={apiKey:E.config.apiKey,appName:E.name,authType:_,redirectUrl:w,v:k.SDK_VERSION,eventId:M};if(p instanceof ao){p.setDefaultLanguage(E.languageCode),Q.providerId=p.providerId||"",(0,U.xb)(p.getCustomParameters())||(Q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Vt,dn]of Object.entries(P||{}))Q[Vt]=dn}if(p instanceof Jn){const Vt=p.getScopes().filter(dn=>""!==dn);Vt.length>0&&(Q.scopes=Vt.join(","))}E.tenantId&&(Q.tid=E.tenantId);const he=Q;for(const Vt of Object.keys(he))void 0===he[Vt]&&delete he[Vt];const Je=yield E._getAppCheckToken(),ht=Je?`#${li}=${encodeURIComponent(Je)}`:"";return`${ah(E)}?${(0,U.xO)(he).slice(1)}${ht}`})).apply(this,arguments)}function ah({config:E}){return E.emulator?Ne(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}const Pr="webStorageSupport",xu=class Mu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=po,this._completeRedirectFn=Wl,this._overrideRedirectResult=la}_openPopup(p,_,w,M){var P=this;return(0,d.Z)(function*(){var Q;Ge(null===(Q=P.eventManagers[p._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const he=yield Su(p,_,w,Qe(),M);return function x0(E,p,_,w=500,M=600){const P=Math.max((window.screen.availHeight-M)/2,0).toString(),Q=Math.max((window.screen.availWidth-w)/2,0).toString();let he="";const Je=Object.assign(Object.assign({},Xl),{width:w.toString(),height:M.toString(),top:P,left:Q}),ht=(0,U.z$)().toLowerCase();_&&(he=A(ht)?"_blank":_),N(ht)&&(p=p||"http://localhost",Je.scrollbars="yes");const Vt=Object.entries(Je).reduce((ci,[Co,sc])=>`${ci}${Co}=${sc},`,"");if(function Ze(E=(0,U.z$)()){var p;return re(E)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(ht)&&"_self"!==he)return function J_(E,p){const _=document.createElement("a");_.href=E,_.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(w)}(p||"",he),new Q_(null);const dn=window.open(p||"",he,Vt);z(dn,E,"popup-blocked");try{dn.focus()}catch{}return new Q_(dn)}(p,he,ra())})()}_openRedirect(p,_,w,M){var P=this;return(0,d.Z)(function*(){return yield P._originValidation(p),function R_(E){Wn().location.href=E}(yield Su(p,_,w,Qe(),M)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:M,promise:P}=this.eventManagers[_];return M?Promise.resolve(M):(Ge(P,"If manager is not set, promise should be"),P)}const w=this.initAndGetManager(p);return this.eventManagers[_]={promise:w},w.catch(()=>{delete this.eventManagers[_]}),w}initAndGetManager(p){var _=this;return(0,d.Z)(function*(){const w=yield function ls(E){return Du.apply(this,arguments)}(p),M=new rh(p);return w.register("authEvent",P=>(z(P?.authEvent,p,"invalid-auth-event"),{status:M.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:M},_.iframes[p._key()]=w,M})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(Pr,{type:Pr},M=>{var P;const Q=null===(P=M?.[0])||void 0===P?void 0:P[Pr];void 0!==Q&&_(!!Q),xe(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function W_(E){return sh.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return Lt()||S()||re()}};class ca extends class Ru{constructor(p){this.factorId=p}_process(p,_,w){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,w);case"signin":return this._finalizeSignIn(p,_.credential);default:return fe("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new ca(p)}_finalizeEnroll(p,_,w){return function Ud(E,p){return Ot(E,"POST","/v2/accounts/mfaEnrollment:finalize",Et(E,p))}(p,{idToken:_,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function GD(E,p){return Ot(E,"POST","/v2/accounts/mfaSignIn:finalize",Et(E,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Eo=(()=>{class E{constructor(){}static assertion(_){return ca._fromCredential(_)}}return E.FACTOR_ID="phone",E})();var lh="@firebase/auth";class nc{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(w=>{p(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const N0=(0,U.Pz)("authIdTokenMaxAge")||300;let Nu=null;const X_=E=>function(){var p=(0,d.Z)(function*(_){const w=_&&(yield _.getIdTokenResult()),M=w&&((new Date).getTime()-Date.parse(w.issuedAtTime))/1e3;if(M&&M>N0)return;const P=w?.token;Nu!==P&&(Nu=P,yield fetch(E,{method:P?"POST":"DELETE",headers:P?{Authorization:`Bearer ${P}`}:{}}))});return function(_){return p.apply(this,arguments)}}();function O0(E=(0,k.getApp)()){const p=(0,k._getProvider)(E,"auth");if(p.isInitialized())return p.getImmediate();const _=function bs(E,p){const _=(0,k._getProvider)(E,"auth");if(_.isInitialized()){const M=_.getImmediate(),P=_.getOptions();if((0,U.vZ)(P,p??{}))return M;xe(M,"already-initialized")}return _.initialize({options:p})}(E,{popupRedirectResolver:xu,persistence:[ia,fu,po]}),w=(0,U.Pz)("authTokenSyncURL");if(w){const P=X_(w);(function Tp(E,p,_){(0,U.m9)(E).beforeAuthStateChanged(p,_)})(_,P,()=>P(_.currentUser)),function uu(E,p,_,w){(0,U.m9)(E).onIdTokenChanged(p,_,w)}(_,Q=>P(Q))}const M=(0,U.q4)("auth");return M&&Gs(_,`http://${M}`),_}!function Up(E){(0,k._registerComponent)(new ge.wA("auth",(p,{options:_})=>{const w=p.getProvider("app").getImmediate(),M=p.getProvider("heartbeat"),P=p.getProvider("app-check-internal"),{apiKey:Q,authDomain:he}=w.options;z(Q&&!Q.includes(":"),"invalid-api-key",{appName:w.name}),z(!he?.includes(":"),"argument-error",{appName:w.name});const Je={apiKey:Q,authDomain:he,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Y(E)},ht=new sp(w,M,P,Je);return function qa(E,p){const _=p?.persistence||[],w=(Array.isArray(_)?_:[_]).map(Rt);p?.errorMap&&E._updateErrorMap(p.errorMap),E._initializeWithPersistence(w,p?.popupRedirectResolver)}(ht,_),ht},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,w)=>{p.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new ge.wA("auth-internal",p=>{const _=Qn(p.getProvider("auth").getImmediate());return new nc(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(lh,"0.23.0",function rc(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,k.registerVersion)(lh,"0.23.0","esm2017")}("Browser")},2090:(St,Oe,O)=>{O.d(Oe,{$s:()=>Rt,BH:()=>De,DV:()=>zn,G6:()=>Ne,GJ:()=>Dn,L:()=>we,LL:()=>tt,P0:()=>mt,Pz:()=>be,Sg:()=>je,UG:()=>fe,UI:()=>Z,US:()=>ge,Wl:()=>_t,Yr:()=>me,ZB:()=>K,ZR:()=>Ot,aH:()=>xe,b$:()=>bt,cI:()=>Ke,dS:()=>rr,eu:()=>Te,g5:()=>k,gK:()=>Sn,gQ:()=>Xt,h$:()=>le,hl:()=>Me,hu:()=>U,jU:()=>Ge,m9:()=>Vn,ne:()=>At,p$:()=>H,pd:()=>tn,q4:()=>ft,r3:()=>Yn,ru:()=>Qe,tV:()=>j,uI:()=>z,ug:()=>rn,vZ:()=>Re,w1:()=>se,w9:()=>xn,xO:()=>Jt,xb:()=>ut,z$:()=>We,zI:()=>et,zd:()=>fn});const U=function($,B){if(!$)throw k(B)},k=function($){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+$)},ee=function($){const B=[];let N=0;for(let S=0;S<$.length;S++){let A=$.charCodeAt(S);A<128?B[N++]=A:A<2048?(B[N++]=A>>6|192,B[N++]=63&A|128):55296==(64512&A)&&S+1<$.length&&56320==(64512&$.charCodeAt(S+1))?(A=65536+((1023&A)<<10)+(1023&$.charCodeAt(++S)),B[N++]=A>>18|240,B[N++]=A>>12&63|128,B[N++]=A>>6&63|128,B[N++]=63&A|128):(B[N++]=A>>12|224,B[N++]=A>>6&63|128,B[N++]=63&A|128)}return B},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,B){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const N=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,S=[];for(let A=0;A<$.length;A+=3){const L=$[A],X=A+1<$.length,de=X?$[A+1]:0,Be=A+2<$.length,re=Be?$[A+2]:0;let Ht=(15&de)<<2|re>>6,Lt=63&re;Be||(Lt=64,X||(Ht=64)),S.push(N[L>>2],N[(3&L)<<4|de>>4],N[Ht],N[Lt])}return S.join("")},encodeString($,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa($):this.encodeByteArray(ee($),B)},decodeString($,B){return this.HAS_NATIVE_SUPPORT&&!B?atob($):function($){const B=[];let N=0,S=0;for(;N<$.length;){const A=$[N++];if(A<128)B[S++]=String.fromCharCode(A);else if(A>191&&A<224){const L=$[N++];B[S++]=String.fromCharCode((31&A)<<6|63&L)}else if(A>239&&A<365){const Be=((7&A)<<18|(63&$[N++])<<12|(63&$[N++])<<6|63&$[N++])-65536;B[S++]=String.fromCharCode(55296+(Be>>10)),B[S++]=String.fromCharCode(56320+(1023&Be))}else{const L=$[N++],X=$[N++];B[S++]=String.fromCharCode((15&A)<<12|(63&L)<<6|63&X)}}return B.join("")}(this.decodeStringToByteArray($,B))},decodeStringToByteArray($,B){this.init_();const N=B?this.charToByteMapWebSafe_:this.charToByteMap_,S=[];for(let A=0;A<$.length;){const L=N[$.charAt(A++)],de=A<$.length?N[$.charAt(A)]:0;++A;const re=A<$.length?N[$.charAt(A)]:64;++A;const Ze=A<$.length?N[$.charAt(A)]:64;if(++A,null==L||null==de||null==re||null==Ze)throw new oe;S.push(L<<2|de>>4),64!==re&&(S.push(de<<4&240|re>>2),64!==Ze&&S.push(re<<6&192|Ze))}return S},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class oe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const le=function($){const B=ee($);return ge.encodeByteArray(B,!0)},we=function($){return le($).replace(/\./g,"")},j=function($){try{return ge.decodeString($,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function H($){return K(void 0,$)}function K($,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return B}for(const N in B)!B.hasOwnProperty(N)||!Fe(N)||($[N]=K($[N],B[N]));return $}function Fe($){return"__proto__"!==$}const ie=()=>{try{return function ke(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=$&&j($[1]);return B&&JSON.parse(B)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},ft=$=>{var B,N;return null===(N=null===(B=ie())||void 0===B?void 0:B.emulatorHosts)||void 0===N?void 0:N[$]},mt=$=>{const B=ft($);if(!B)return;const N=B.lastIndexOf(":");if(N<=0||N+1===B.length)throw new Error(`Invalid host ${B} with no separate hostname and port!`);const S=parseInt(B.substring(N+1),10);return"["===B[0]?[B.substring(1,N-1),S]:[B.substring(0,N),S]},xe=()=>{var $;return null===($=ie())||void 0===$?void 0:$.config},be=$=>{var B;return null===(B=ie())||void 0===B?void 0:B[`_${$}`]};class De{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,N)=>{this.resolve=B,this.reject=N})}wrapCallback(B){return(N,S)=>{N?this.reject(N):this.resolve(S),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(N):B(N,S))}}}function je($,B){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const S=B||"demo-project",A=$.iat||0,L=$.sub||$.user_id;if(!L)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const X=Object.assign({iss:`https://securetoken.google.com/${S}`,aud:S,iat:A,exp:A+3600,auth_time:A,sub:L,user_id:L,firebase:{sign_in_provider:"custom",identities:{}}},$);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(X)),""].join(".")}function We(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function z(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function fe(){var $;const B=null===($=ie())||void 0===$?void 0:$.forceEnvironment;if("node"===B)return!0;if("browser"===B)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ge(){return"object"==typeof self&&self.self===self}function Qe(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function bt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function se(){const $=We();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function me(){return!1}function Ne(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Me(){try{return"object"==typeof indexedDB}catch{return!1}}function Te(){return new Promise(($,B)=>{try{let N=!0;const S="validate-browser-context-for-indexeddb-analytics-module",A=self.indexedDB.open(S);A.onsuccess=()=>{A.result.close(),N||self.indexedDB.deleteDatabase(S),$(!0)},A.onupgradeneeded=()=>{N=!1},A.onerror=()=>{var L;B((null===(L=A.error)||void 0===L?void 0:L.message)||"")}}catch(N){B(N)}})}function et(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ot extends Error{constructor(B,N,S){super(N),this.code=B,this.customData=S,this.name="FirebaseError",Object.setPrototypeOf(this,Ot.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tt.prototype.create)}}class tt{constructor(B,N,S){this.service=B,this.serviceName=N,this.errors=S}create(B,...N){const S=N[0]||{},A=`${this.service}/${B}`,L=this.errors[B],X=L?function kt($,B){return $.replace(Le,(N,S)=>{const A=B[S];return null!=A?String(A):`<${S}?>`})}(L,S):"Error";return new Ot(A,`${this.serviceName}: ${X} (${A}).`,S)}}const Le=/\{\$([^}]+)}/g;function Ke($){return JSON.parse($)}function _t($){return JSON.stringify($)}const jt=function($){let B={},N={},S={},A="";try{const L=$.split(".");B=Ke(j(L[0])||""),N=Ke(j(L[1])||""),A=L[2],S=N.d||{},delete N.d}catch{}return{header:B,claims:N,data:S,signature:A}},xn=function($){const N=jt($).claims;return!!N&&"object"==typeof N&&N.hasOwnProperty("iat")},Dn=function($){const B=jt($).claims;return"object"==typeof B&&!0===B.admin};function Yn($,B){return Object.prototype.hasOwnProperty.call($,B)}function zn($,B){if(Object.prototype.hasOwnProperty.call($,B))return $[B]}function ut($){for(const B in $)if(Object.prototype.hasOwnProperty.call($,B))return!1;return!0}function Z($,B,N){const S={};for(const A in $)Object.prototype.hasOwnProperty.call($,A)&&(S[A]=B.call(N,$[A],A,$));return S}function Re($,B){if($===B)return!0;const N=Object.keys($),S=Object.keys(B);for(const A of N){if(!S.includes(A))return!1;const L=$[A],X=B[A];if(at(L)&&at(X)){if(!Re(L,X))return!1}else if(L!==X)return!1}for(const A of S)if(!N.includes(A))return!1;return!0}function at($){return null!==$&&"object"==typeof $}function Jt($){const B=[];for(const[N,S]of Object.entries($))Array.isArray(S)?S.forEach(A=>{B.push(encodeURIComponent(N)+"="+encodeURIComponent(A))}):B.push(encodeURIComponent(N)+"="+encodeURIComponent(S));return B.length?"&"+B.join("&"):""}function fn($){const B={};return $.replace(/^\?/,"").split("&").forEach(S=>{if(S){const[A,L]=S.split("=");B[decodeURIComponent(A)]=decodeURIComponent(L)}}),B}function tn($){const B=$.indexOf("?");if(!B)return"";const N=$.indexOf("#",B);return $.substring(B,N>0?N:void 0)}class Xt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,N){N||(N=0);const S=this.W_;if("string"==typeof B)for(let Ze=0;Ze<16;Ze++)S[Ze]=B.charCodeAt(N)<<24|B.charCodeAt(N+1)<<16|B.charCodeAt(N+2)<<8|B.charCodeAt(N+3),N+=4;else for(let Ze=0;Ze<16;Ze++)S[Ze]=B[N]<<24|B[N+1]<<16|B[N+2]<<8|B[N+3],N+=4;for(let Ze=16;Ze<80;Ze++){const Ht=S[Ze-3]^S[Ze-8]^S[Ze-14]^S[Ze-16];S[Ze]=4294967295&(Ht<<1|Ht>>>31)}let re,$e,A=this.chain_[0],L=this.chain_[1],X=this.chain_[2],de=this.chain_[3],Be=this.chain_[4];for(let Ze=0;Ze<80;Ze++){Ze<40?Ze<20?(re=de^L&(X^de),$e=1518500249):(re=L^X^de,$e=1859775393):Ze<60?(re=L&X|de&(L|X),$e=2400959708):(re=L^X^de,$e=3395469782);const Ht=(A<<5|A>>>27)+re+Be+$e+S[Ze]&4294967295;Be=de,de=X,X=4294967295&(L<<30|L>>>2),L=A,A=Ht}this.chain_[0]=this.chain_[0]+A&4294967295,this.chain_[1]=this.chain_[1]+L&4294967295,this.chain_[2]=this.chain_[2]+X&4294967295,this.chain_[3]=this.chain_[3]+de&4294967295,this.chain_[4]=this.chain_[4]+Be&4294967295}update(B,N){if(null==B)return;void 0===N&&(N=B.length);const S=N-this.blockSize;let A=0;const L=this.buf_;let X=this.inbuf_;for(;A<N;){if(0===X)for(;A<=S;)this.compress_(B,A),A+=this.blockSize;if("string"==typeof B){for(;A<N;)if(L[X]=B.charCodeAt(A),++X,++A,X===this.blockSize){this.compress_(L),X=0;break}}else for(;A<N;)if(L[X]=B[A],++X,++A,X===this.blockSize){this.compress_(L),X=0;break}}this.inbuf_=X,this.total_+=N}digest(){const B=[];let N=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let A=this.blockSize-1;A>=56;A--)this.buf_[A]=255&N,N/=256;this.compress_(this.buf_);let S=0;for(let A=0;A<5;A++)for(let L=24;L>=0;L-=8)B[S]=this.chain_[A]>>L&255,++S;return B}}function At($,B){const N=new it($,B);return N.subscribe.bind(N)}class it{constructor(B,N){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=N,this.task.then(()=>{B(this)}).catch(S=>{this.error(S)})}next(B){this.forEachObserver(N=>{N.next(B)})}error(B){this.forEachObserver(N=>{N.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,N,S){let A;if(void 0===B&&void 0===N&&void 0===S)throw new Error("Missing Observer.");A=function Kt($,B){if("object"!=typeof $||null===$)return!1;for(const N of B)if(N in $&&"function"==typeof $[N])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:N,complete:S},void 0===A.next&&(A.next=Rn),void 0===A.error&&(A.error=Rn),void 0===A.complete&&(A.complete=Rn);const L=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?A.error(this.finalError):A.complete()}catch{}}),this.observers.push(A),L}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let N=0;N<this.observers.length;N++)this.sendOne(N,B)}sendOne(B,N){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{N(this.observers[B])}catch(S){typeof console<"u"&&console.error&&console.error(S)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rn(){}function Sn($,B){return`${$} failed: ${B} argument `}const rr=function($){const B=[];let N=0;for(let S=0;S<$.length;S++){let A=$.charCodeAt(S);if(A>=55296&&A<=56319){const L=A-55296;S++,U(S<$.length,"Surrogate pair missing trail surrogate."),A=65536+(L<<10)+($.charCodeAt(S)-56320)}A<128?B[N++]=A:A<2048?(B[N++]=A>>6|192,B[N++]=63&A|128):A<65536?(B[N++]=A>>12|224,B[N++]=A>>6&63|128,B[N++]=63&A|128):(B[N++]=A>>18|240,B[N++]=A>>12&63|128,B[N++]=A>>6&63|128,B[N++]=63&A|128)}return B},rn=function($){let B=0;for(let N=0;N<$.length;N++){const S=$.charCodeAt(N);S<128?B++:S<2048?B+=2:S>=55296&&S<=56319?(B+=4,N++):B+=3}return B};function Rt($,B=1e3,N=2){const S=B*Math.pow(N,$),A=Math.round(.5*S*(Math.random()-.5)*2);return Math.min(144e5,S+A)}function Vn($){return $&&$._delegate?$._delegate:$}},9356:(St,Oe,O)=>{var d=O(4650);let U=null;function k(){return U}const oe=new d.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function we(){return(0,d.LFG)(H)}()},providedIn:"platform"}),n})();const j=new d.OlP("Location Initialized");let H=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){K()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){K()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Fe(){return new H((0,d.LFG)(oe))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function ke(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function _e(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function qe(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(ft)},providedIn:"root"}),n})();const ie=new d.OlP("appBaseHref");let ft=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ke(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+qe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+qe(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+qe(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le),d.LFG(ie,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mt=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ke(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+qe(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+qe(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le),d.LFG(ie,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=_e(je(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qe(r))}normalize(t){return n.stripTrailingSlash(function De(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=qe,n.joinWithSlash=ke,n.stripTrailingSlash=_e,n.\u0275fac=function(t){return new(t||n)(d.LFG(ye))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function be(){return new xe((0,d.LFG)(ye))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}class bl{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bs=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new bl(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,l),qa(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{qa(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function qa(n,e){n.context.$implicit=e.item}let mr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new l_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Hr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Hr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class l_{constructor(){this.$implicit=null,this.ngIf=null}}function Hr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Yo=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,a]=t.split("."),l=-1===i.indexOf("-")?void 0:d.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,a?`${r}${a}`:r,l):this._renderer.removeStyle(this._ngEl.nativeElement,i,l)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.aQg),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),f_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Qo="browser";function Jo(n){return n===Qo}function Td(n){return"server"===n}let Qa=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new u0((0,d.LFG)(oe),window)}),n})();class u0{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ei(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ja(this.window.history)||Ja(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ja(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class bp extends class T_ extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Ee(n){U||(U=n)}(new bp)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Vd(){return Ld=Ld||document.querySelector("base"),Ld?Ld.getAttribute("href"):null}();return null==t?null:function Tp(n){uu=uu||document.createElement("a"),uu.setAttribute("href",n);const e=uu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ld=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function hr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let uu,Ld=null;const lu=new d.OlP("TRANSITION_ID"),S_=[{provide:d.ip1,useFactory:function D_(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[lu,oe,d.zs3],multi:!0}];let y0=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ji=new d.OlP("EventManagerPlugins");let Mi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ji),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ho{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let A_=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ta=(()=>{class n extends A_{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ud),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ud))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Ud(n){k().remove(n)}const Dp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},xi=/%COMP%/g;function Ll(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ll(n,i,t):(i=i.replace(xi,n),t.push(i))}return t}function $d(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let jd=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new fu(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new x_(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new ra(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ll(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Mi),d.LFG(ta),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class fu{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Dp[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(na(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(na(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Dp[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Dp[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,$d(r)):this.eventManager.addEventListener(e,t,$d(r))}}function na(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class x_ extends fu{constructor(e,t,r,i){super(e),this.component=r;const a=Ll(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function fo(n){return"_ngcontent-%COMP%".replace(xi,n)}(i+"-"+r.id),this.hostAttr=function hu(n){return"_nghost-%COMP%".replace(xi,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ra extends fu{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ll(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const f=document.createElement("style");f.textContent=a[l],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ap=(()=>{class n extends ho{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Wn=["alt","control","meta","shift"],R_={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Hd=(()=>{class n extends ho{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),l="code."),Wn.forEach(v=>{const b=r.indexOf(v);b>-1&&(r.splice(b,1),l+=v+".")}),l+=a,0!=r.length||0===a.length)return null;const m={};return m.domEventName=i,m.fullKey=l,m}static matchEventFullKeyCode(t,r){let i=R_[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Wn.forEach(l=>{l!==i&&(0,Vl[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const E0=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:Qo},{provide:d.g9A,useValue:function As(){bp.makeCurrent()},multi:!0},{provide:oe,useFactory:function go(){return(0,d.RDi)(document),document},deps:[]}]),Ul=new d.OlP(""),Un=[{provide:d.rWj,useClass:class cu{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const f=function(m){l=l||m,a--,0==a&&r(l)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Wd=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function zd(){return new d.qLn},deps:[]},{provide:ji,useClass:Ap,multi:!0,deps:[oe,d.R0b,d.Lbi]},{provide:ji,useClass:Hd,multi:!0,deps:[oe]},{provide:jd,useClass:jd,deps:[Mi,ta,d.AFp]},{provide:d.FYo,useExisting:jd},{provide:A_,useExisting:ta},{provide:ta,useClass:ta,deps:[oe]},{provide:Mi,useClass:Mi,deps:[ji,d.R0b]},{provide:class Ks{},useClass:y0,deps:[]},[]];let w0=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:lu,useExisting:d.AFp},S_]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ul,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Wd,...Un],imports:[f_,d.hGG]}),n})(),k_=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function C0(){return new k_((0,d.LFG)(oe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Bn=O(8996),ui=O(9751);const{isArray:sa}=Array,{getPrototypeOf:mo,prototype:Qd,keys:Hl}=Object;function Np(n){if(1===n.length){const e=n[0];if(sa(e))return{args:e,keys:null};if(function Jd(n){return n&&"object"==typeof n&&mo(n)===Qd}(e)){const t=Hl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var oa=O(8421),_o=O(7669),sr=O(5403),zt=O(4004);const{isArray:B_}=Array;function Xd(n){return(0,zt.U)(e=>function or(n,e){return B_(e)?n(...e):n(e)}(n,e))}function _u(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let aa=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Hi=(()=>{class n extends aa{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const as=new d.OlP("NgValueAccessor"),yo={provide:as,useExisting:(0,d.Gpc)(()=>la),multi:!0},vu=new d.OlP("CompositionEventMode");let la=(()=>{class n extends aa{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function zl(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(vu,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[d._Bn([yo]),d.qOj]}),n})();const kr=new d.OlP("NgValidators"),us=new d.OlP("NgAsyncValidators");function vo(n){return null!=n}function nh(n){return(0,d.QGY)(n)?(0,Bn.D)(n):n}function rh(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function ql(n,e){return e.map(t=>t(n))}function ih(n){return n.map(e=>function z_(n){return!n.validate}(e)?e:t=>e.validate(t))}function bu(n){return null!=n?function Fp(n){if(!n)return null;const e=n.filter(vo);return 0==e.length?null:function(t){return rh(ql(t,e))}}(ih(n)):null}function Tu(n){return null!=n?function Lp(n){if(!n)return null;const e=n.filter(vo);return 0==e.length?null:function(t){return function yu(...n){const e=(0,_o.jO)(n),{args:t,keys:r}=Np(n),i=new ui.y(a=>{const{length:l}=t;if(!l)return void a.complete();const f=new Array(l);let m=l,v=l;for(let b=0;b<l;b++){let T=!1;(0,oa.Xf)(t[b]).subscribe((0,sr.x)(a,x=>{T||(T=!0,v--),f[b]=x},()=>m--,void 0,()=>{(!m||!T)&&(v||a.next(r?_u(r,f):f),a.complete())}))}});return e?i.pipe(Xd(e)):i}(ql(t,e).map(nh)).pipe((0,zt.U)(rh))}}(ih(n)):null}function W_(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Vp(n){return n?Array.isArray(n)?n:[n]:[]}function Zl(n,e){return Array.isArray(n)?n.includes(e):n===e}function G_(n,e){const t=Vp(e);return Vp(n).forEach(i=>{Zl(t,i)||t.push(i)}),t}function Yl(n,e){return Vp(e).filter(t=>!Zl(n,t))}class q_{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=bu(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Tu(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Qr extends q_{get formDirective(){return null}get path(){return null}}class Ms extends q_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let Jl=(()=>{class n extends class Ql{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ms,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})();const Ru="VALID",ca="INVALID",Eo="PENDING",tc="DISABLED";function uh(n){return Array.isArray(n)?bu(n):n||null}function lh(n){return Array.isArray(n)?Tu(n):n||null}function Pu(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function p(n,e){(function P(n,e){const t=function sh(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(W_(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Kl(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(W_(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();w(e._rawValidators,i),w(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function he(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ht(n,e)})}(n,e),function Vt(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Je(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ht(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function M(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function w(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ht(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Bp(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function KD(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const ry={provide:Ms,useExisting:(0,d.Gpc)(()=>dc)},jp=(()=>Promise.resolve())();let dc=(()=>{class n extends Ms{constructor(t,r,i,a,l){super(),this._changeDetectorRef=l,this.control=new class extends class Up{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=uh(this._rawValidators),this._composedAsyncValidatorFn=lh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ru}get invalid(){return this.status===ca}get pending(){return this.status==Eo}get disabled(){return this.status===tc}get enabled(){return this.status!==tc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=uh(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=lh(e)}addValidators(e){this.setValidators(G_(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(G_(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Yl(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Yl(e,this._rawAsyncValidators))}hasValidator(e){return Zl(this._rawValidators,e)}hasAsyncValidator(e){return Zl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Eo,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=tc,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ru,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ru||this.status===Eo)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?tc:Ru}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Eo,this._hasOwnPendingAsyncValidator=!0;const t=nh(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?tc:this.errors?ca:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Eo)?Eo:this._anyControlsHaveStatus(ca)?ca:Ru}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Pu(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,r){super(function da(n){return(Pu(n)?n.validators:n)||null}(t),function wo(n,e){return(Pu(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Pu(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=KD(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Bp(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Bp(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){KD(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function cc(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===la?t=a:function uc(n){return Object.getPrototypeOf(n.constructor)===Hi}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Ou(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){p(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){jp.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,d.D6c)(r);jp.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function E(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Qr,9),d.Y36(kr,10),d.Y36(us,10),d.Y36(as,10),d.Y36(d.sBO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([ry]),d.qOj,d.TTD]}),n})(),sy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const U0={provide:as,useExisting:(0,d.Gpc)(()=>Wp),multi:!0};function B0(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Wp=(()=>{class n extends Hi{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=B0(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function rS(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([U0]),d.qOj]}),n})(),$0=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(B0(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(Wp,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const iS={provide:as,useExisting:(0,d.Gpc)(()=>j0),multi:!0};function Io(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let j0=(()=>{class n extends Hi{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(a=>this._getOptionId(a));r=(a,l)=>{a._setSelected(i.indexOf(l.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],a=r.selectedOptions;if(void 0!==a){const l=a;for(let f=0;f<l.length;f++){const v=this._getOptionValue(l[f].value);i.push(v)}}else{const l=r.options;for(let f=0;f<l.length;f++){const m=l[f];if(m.selected){const v=this._getOptionValue(m.value);i.push(v)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function _h(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([iS]),d.qOj]}),n})(),sS=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Io(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Io(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(j0,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),fS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[sy]}),n})(),pS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[fS]}),n})();function Nt(...n){const e=(0,_o.yG)(n);return(0,Bn.D)(n,e)}var cs=O(7579);class ds extends cs.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const qp=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var yh=O(4671),yS=O(9672);function Z0(...n){const e=(0,_o.yG)(n),t=(0,_o.jO)(n),{args:r,keys:i}=Np(n);if(0===r.length)return(0,Bn.D)([],e);const a=new ui.y(function vO(n,e,t=yh.y){return r=>{vS(e,()=>{const{length:i}=n,a=new Array(i);let l=i,f=i;for(let m=0;m<i;m++)vS(e,()=>{const v=(0,Bn.D)(n[m],e);let b=!1;v.subscribe((0,sr.x)(r,T=>{a[m]=T,b||(b=!0,f--),f||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>_u(i,l):yh.y));return t?a.pipe(Xd(t)):a}function vS(n,e,t){n?(0,yS.f)(t,n,e):e()}var bo=O(8189);function Kp(...n){return function py(){return(0,bo.J)(1)}()((0,Bn.D)(n,(0,_o.yG)(n)))}function gy(n){return new ui.y(e=>{(0,oa.Xf)(n()).subscribe(e)})}var Y0=O(9635),my=O(576);function pc(n,e){const t=(0,my.m)(n)?n:()=>n,r=i=>i.error(t());return new ui.y(e?i=>e.schedule(r,0,i):r)}var ga=O(515),Zp=O(727),Ii=O(4482);function _y(){return(0,Ii.e)((n,e)=>{let t=null;n._refCount++;const r=(0,sr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Yp extends ui.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ii.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Zp.w0;const t=this.getSubject();e.add(this.source.subscribe((0,sr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Zp.w0.EMPTY)}return e}refCount(){return _y()(this)}}function Ir(n,e){return(0,Ii.e)((t,r)=>{let i=null,a=0,l=!1;const f=()=>l&&!i&&r.complete();t.subscribe((0,sr.x)(r,m=>{i?.unsubscribe();let v=0;const b=a++;(0,oa.Xf)(n(m,b)).subscribe(i=(0,sr.x)(r,T=>r.next(e?e(m,T,b,v++):T),()=>{i=null,f()}))},()=>{l=!0,f()}))})}function gc(n){return n<=0?()=>ga.E:(0,Ii.e)((e,t)=>{let r=0;e.subscribe((0,sr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Rs(...n){const e=(0,_o.yG)(n);return(0,Ii.e)((t,r)=>{(e?Kp(n,t,e):Kp(n,t)).subscribe(r)})}function zi(n,e){return(0,Ii.e)((t,r)=>{let i=0;t.subscribe((0,sr.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Wr=O(5577);function ku(n){return(0,Ii.e)((e,t)=>{let r=!1;e.subscribe((0,sr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Q0(n=yy){return(0,Ii.e)((e,t)=>{let r=!1;e.subscribe((0,sr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function yy(){return new qp}function hs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?zi((i,a)=>n(i,a,r)):yh.y,gc(1),t?ku(e):Q0(()=>new qp))}function Wi(n,e){return(0,my.m)(e)?(0,Wr.z)(n,e,1):(0,Wr.z)(n,1)}var Jr=O(8505);function Xs(n){return(0,Ii.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,sr.x)(t,void 0,void 0,l=>{a=(0,oa.Xf)(n(l,Xs(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function ES(n,e,t,r,i){return(a,l)=>{let f=t,m=e,v=0;a.subscribe((0,sr.x)(l,b=>{const T=v++;m=f?n(m,b,T):(f=!0,b),r&&l.next(m)},i&&(()=>{f&&l.next(m),l.complete()})))}}function vh(n,e){return(0,Ii.e)(ES(n,e,arguments.length>=2,!0))}function Qp(n){return n<=0?()=>ga.E:(0,Ii.e)((e,t)=>{let r=[];e.subscribe((0,sr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Fu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?zi((i,a)=>n(i,a,r)):yh.y,Qp(1),t?ku(e):Q0(()=>new qp))}function vy(n){return(0,Ii.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const vn="primary",Lu=Symbol("RouteTitle");class IS{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Vu(n){return new IS(n)}function bS(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],f=n[a];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function To(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!X0(n[i],e[i]))return!1;return!0}function X0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function mc(n){return Array.prototype.concat.apply([],n)}function eC(n){return n.length>0?n[n.length-1]:null}function br(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ma(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,Bn.D)(Promise.resolve(n)):Nt(n)}const TS={exact:function Ey(n,e,t){if(!Uu(n.segments,e.segments)||!_c(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Ey(n.children[r],e.children[r],t))return!1;return!0},subset:Jp},rC={exact:function sC(n,e){return To(n,e)},subset:function wy(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>X0(n[t],e[t]))},ignored:()=>!0};function iC(n,e,t){return TS[t.paths](n.root,e.root,t.matrixParams)&&rC[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Jp(n,e,t){return oC(n,e,e.segments,t)}function oC(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Uu(i,t)||e.hasChildren()||!_c(i,t,r))}if(n.segments.length===t.length){if(!Uu(n.segments,t)||!_c(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Jp(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Uu(n.segments,i)&&_c(n.segments,i,r)&&n.children[vn])&&oC(n.children[vn],e,a,r)}}function _c(n,e,t){return e.every((r,i)=>rC[t](n[i].parameters,r.parameters))}class Ps{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vu(this.queryParams)),this._queryParamMap}toString(){return yc.serialize(this)}}class wn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,br(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fs(this)}}class wh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Vu(this.parameters)),this._parameterMap}toString(){return AS(this)}}function Uu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let aC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new Cy},providedIn:"root"}),n})();class Cy{parse(e){const t=new PS(e);return new Ps(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ch(e.root,!0)}`,r=function MS(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Iy(t)}=${Iy(i)}`).join("&"):`${Iy(t)}=${Iy(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function EO(n){return encodeURI(n)}(e.fragment)}`:""}`}}const yc=new Cy;function fs(n){return n.segments.map(e=>AS(e)).join("/")}function Ch(n,e){if(!n.hasChildren())return fs(n);if(e){const t=n.children[vn]?Ch(n.children[vn],!1):"",r=[];return br(n.children,(i,a)=>{a!==vn&&r.push(`${a}:${Ch(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function SS(n,e){let t=[];return br(n.children,(r,i)=>{i===vn&&(t=t.concat(e(r,i)))}),br(n.children,(r,i)=>{i!==vn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===vn?[Ch(n.children[vn],!1)]:[`${i}:${Ch(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[vn]?`${fs(n)}/${t[0]}`:`${fs(n)}/(${t.join("//")})`}}function uC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Iy(n){return uC(n).replace(/%3B/gi,";")}function Xp(n){return uC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function by(n){return decodeURIComponent(n)}function Ty(n){return by(n.replace(/\+/g,"%20"))}function AS(n){return`${Xp(n.path)}${function lC(n){return Object.keys(n).map(e=>`;${Xp(e)}=${Xp(n[e])}`).join("")}(n.parameters)}`}const cC=/^[^\/()?;=#]+/;function eg(n){const e=n.match(cC);return e?e[0]:""}const xS=/^[^=?&#]+/,RS=/^[^&#]+/;class PS{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wn([],{}):new wn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[vn]=new wn(e,t)),r}parseSegment(){const e=eg(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new wh(by(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=eg(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=eg(this.remaining);i&&(r=i,this.capture(r))}e[by(t)]=by(r)}parseQueryParam(e){const t=function Ns(n){const e=n.match(xS);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function dC(n){const e=n.match(RS);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Ty(t),a=Ty(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=eg(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=vn);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[vn]:new wn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function Dy(n){return n.segments.length>0?new wn([],{[vn]:n}):n}function tg(n){const e={};for(const r of Object.keys(n.children)){const a=tg(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function NS(n){if(1===n.numberOfChildren&&n.children[vn]){const e=n.children[vn];return new wn(n.segments.concat(e.segments),e.children)}return n}(new wn(n.segments,e))}function _a(n){return n instanceof Ps}function hC(n,e,t,r,i){if(0===t.length)return wc(e.root,e.root,e.root,r,i);const a=function pC(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ay(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return br(a.outlets,(m,v)=>{f[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new Ay(t,e,r)}(t);return a.toRoot()?wc(e.root,e.root,new wn([],{}),r,i):function l(m){const v=function FS(n,e,t,r){if(n.isAbsolute)return new Bu(e.root,!0,0);if(-1===r)return new Bu(t,t===e.root,0);return function LS(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new Bu(r,!1,i-a)}(t,r+(vc(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,m),b=v.processChildren?Os(v.segmentGroup,v.index,a.commands):ng(v.segmentGroup,v.index,a.commands);return wc(e.root,v.segmentGroup,b,r,i)}(n.snapshot?._lastPathIndex)}function vc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ec(n){return"object"==typeof n&&null!=n&&n.outlets}function wc(n,e,t,r,i){let l,a={};r&&br(r,(m,v)=>{a[v]=Array.isArray(m)?m.map(b=>`${b}`):`${m}`}),l=n===e?t:fC(n,e,t);const f=Dy(tg(l));return new Ps(f,a,i)}function fC(n,e,t){const r={};return br(n.children,(i,a)=>{r[a]=i===e?t:fC(i,e,t)}),new wn(n.segments,r)}class Ay{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&vc(r[0]))throw new d.vHH(4003,!1);const i=r.find(Ec);if(i&&i!==eC(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Bu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ng(n,e,t){if(n||(n=new wn([],{})),0===n.segments.length&&n.hasChildren())return Os(n,e,t);const r=function VS(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],f=t[r];if(Ec(f))break;const m=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!US(m,v,l))return a;r+=2}else{if(!US(m,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new wn(n.segments.slice(0,r.pathIndex),{});return a.children[vn]=new wn(n.segments.slice(r.pathIndex),n.children),Os(a,0,i)}return r.match&&0===i.length?new wn(n.segments,{}):r.match&&!n.hasChildren()?Ih(n,e,t):r.match?Os(n,0,i):Ih(n,e,t)}function Os(n,e,t){if(0===t.length)return new wn(n.segments,{});{const r=function gC(n){return Ec(n[0])?n[0].outlets:{[vn]:n}}(t),i={};return br(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=ng(n.children[l],e,a))}),br(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new wn(n.segments,i)}}function Ih(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Ec(a)){const m=My(a.outlets);return new wn(r,m)}if(0===i&&vc(t[0])){r.push(new wh(n.segments[e].path,mC(t[0]))),i++;continue}const l=Ec(a)?a.outlets[vn]:`${a}`,f=i<t.length-1?t[i+1]:null;l&&f&&vc(f)?(r.push(new wh(l,mC(f))),i+=2):(r.push(new wh(l,{})),i++)}return new wn(r,{})}function My(n){const e={};return br(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ih(new wn([],{}),0,t))}),e}function mC(n){const e={};return br(n,(t,r)=>e[r]=`${t}`),e}function US(n,e,t){return n==t.path&&To(e,t.parameters)}class ya{constructor(e,t){this.id=e,this.url=t}}class _C extends ya{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $u extends ya{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class bh extends ya{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class BS extends ya{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $S extends ya{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cc extends ya{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jS extends ya{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class yC extends ya{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rg extends ya{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HS{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vC{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class zS{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WS{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GS{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class EC{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wC{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class IC{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ig(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ig(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=sg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return sg(e,this._root).map(t=>t.value)}}function ig(n,e){if(n===e.value)return e;for(const t of e.children){const r=ig(n,t);if(r)return r}return null}function sg(n,e){if(n===e.value)return[e];for(const t of e.children){const r=sg(n,t);if(r.length)return r.unshift(e),r}return[]}class ks{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Th(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class og extends IC{constructor(e,t){super(e),this.snapshot=t,ag(this,e)}toString(){return this.snapshot.toString()}}function bC(n,e){const t=function CO(n,e){const l=new ju([],{},{},"",{},vn,e,null,n.root,-1,{});return new ps("",new ks(l,[]))}(n,e),r=new ds([new wh("",{})]),i=new ds({}),a=new ds({}),l=new ds({}),f=new ds(""),m=new Pi(r,i,l,f,a,vn,e,t.root);return m.snapshot=t.root,new og(new ks(m,[]),t)}class Pi{constructor(e,t,r,i,a,l,f,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.title=this.data?.pipe((0,zt.U)(v=>v[Lu]))??Nt(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,zt.U)(e=>Vu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,zt.U)(e=>Vu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function TC(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ju{constructor(e,t,r,i,a,l,f,m,v,b,T,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.title=this.data?.[Lu],this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=b,this._correctedLastPathIndex=x??b,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Vu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ps extends IC{constructor(e,t){super(t),this.url=e,ag(this,t)}toString(){return DC(this._root)}}function ag(n,e){e.value._routerState=n,e.children.forEach(t=>ag(n,t))}function DC(n){const e=n.children.length>0?` { ${n.children.map(DC).join(", ")} } `:"";return`${n.value}${e}`}function Dh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,To(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),To(e.params,t.params)||n.params.next(t.params),function J0(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!To(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),To(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Fs(n,e){const t=To(n.params,e.params)&&function DS(n,e){return Uu(n,e)&&n.every((t,r)=>To(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Fs(n.parent,e.parent))}function Ic(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Py(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ic(n,r,i);return Ic(n,r)})}(n,e,t);return new ks(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>Ic(n,f)),l}}const r=function IO(n){return new Pi(new ds(n.url),new ds(n.params),new ds(n.queryParams),new ds(n.fragment),new ds(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Ic(n,a));return new ks(r,i)}}const ug="ngNavigationCancelingError";function qS(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=_a(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Sh(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Sh(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[ug]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Ah(n){return lg(n)&&_a(n.url)}function lg(n){return n&&n[ug]}class Ny{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Hu,this.attachRef=null}}let Hu=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ny,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Oy=!1;let ky=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=i||vn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,Oy);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,Oy);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,Oy);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,Oy);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,m=new KS(t,f,i.injector);if(r&&function ZS(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(l);this.activated=i.createComponent(v,i.length,m)}else this.activated=i.createComponent(l,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Hu),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class KS{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Pi?this.route:e===Hu?this.childContexts:this.parent.get(e,t)}}let cg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[ky],encapsulation:2}),n})();function Fy(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function SC(n){const e=n.children&&n.children.map(SC),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==vn&&(t.component=cg),t}function Ls(n){return n.outlet||vn}function JS(n,e){const t=n.filter(r=>Ls(r)===e);return t.push(...n.filter(r=>Ls(r)!==e)),t}function hg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class SO{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Dh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Th(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),br(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Th(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Th(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Th(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new EC(a.value.snapshot))}),e.children.length&&this.forwardEvent(new WS(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Dh(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),Dh(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=hg(i.snapshot),m=f?.get(d._Vd)??null;l.attachRef=null,l.route=i,l.resolver=m,l.injector=f,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class XS{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Vy{constructor(e,t){this.component=e,this.route=t}}function AO(n,e,t){const r=n._root;return Mh(r,e?e._root:null,t,[r.value])}function Ea(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function Mh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Th(e);return n.children.forEach(l=>{(function AC(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const m=function Uy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Uu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Uu(n.url,e.url)||!To(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fs(n,e)||!To(n.queryParams,e.queryParams);default:return!Fs(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new XS(r)):(a.data=l.data,a._resolvedData=l._resolvedData),Mh(n,e,a.component?f?f.children:null:t,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new Vy(f.outlet.component,l))}else l&&bc(e,f,i),i.canActivateChecks.push(new XS(r)),Mh(n,null,a.component?f?f.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),br(a,(l,f)=>bc(l,t.getContext(f),i)),i}function bc(n,e,t){const r=Th(n),i=n.value;br(r,(a,l)=>{bc(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Vy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function zu(n){return"function"==typeof n}function Tc(n){return n instanceof qp||"EmptyError"===n?.name}const Do=Symbol("INITIAL_VALUE");function Ca(){return Ir(n=>Z0(n.map(e=>e.pipe(gc(1),Rs(Do)))).pipe((0,zt.U)(e=>{for(const t of e)if(!0!==t){if(t===Do)return Do;if(!1===t||t instanceof Ps)return t}return!0}),zi(e=>e!==Do),gc(1)))}function OC(n){return(0,Y0.z)((0,Jr.b)(e=>{if(_a(e))throw qS(0,e)}),(0,zt.U)(e=>!0===e))}const zy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Wy(n,e,t,r,i){const a=Gy(n,e,t);return a.matched?function xO(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Nt(i.map(l=>{const f=Ea(l,n);return ma(function xC(n){return n&&zu(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(Ca(),OC()):Nt(!0)}(r=Fy(e,r),e,t).pipe((0,zt.U)(l=>!0===l?a:{...zy})):Nt(a)}function Gy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...zy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||bS)(t,n,e);if(!i)return{...zy};const a={};br(i.posParams,(f,m)=>{a[m]=f.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function xh(n,e,t,r,i="corrected"){if(t.length>0&&function Gi(n,e,t){return t.some(r=>pg(n,e,r)&&Ls(r)!==vn)}(n,t,r)){const l=new wn(e,function iA(n,e,t,r){const i={};i[vn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Ls(a)!==vn){const l=new wn([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Ls(a)]=l}return i}(n,e,r,new wn(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function FC(n,e,t){return t.some(r=>pg(n,e,r))}(n,t,r)){const l=new wn(n.segments,function kC(n,e,t,r,i,a){const l={};for(const f of r)if(pg(n,t,f)&&!i[Ls(f)]){const m=new wn([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[Ls(f)]=m}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new wn(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function pg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function sA(n,e,t,r){return!!(Ls(n)===r||r!==vn&&pg(e,t,n))&&("**"===n.path||Gy(e,n,t).matched)}function LC(n,e,t){return 0===e.length&&!n.children[t]}const Sc=!1;class Rh{constructor(e){this.segmentGroup=e||null}}class VC{constructor(e){this.urlTree=e}}function Ph(n){return pc(new Rh(n))}function UC(n){return pc(new VC(n))}class aA{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=xh(this.urlTree.root,[],[],this.config).segmentGroup,t=new wn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,vn).pipe((0,zt.U)(a=>this.createUrlTree(tg(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Xs(a=>{if(a instanceof VC)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Rh?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,vn).pipe((0,zt.U)(i=>this.createUrlTree(tg(i),e.queryParams,e.fragment))).pipe(Xs(i=>{throw i instanceof Rh?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,Sc)}createUrlTree(e,t,r){const i=Dy(e);return new Ps(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,zt.U)(a=>new wn([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Bn.D)(i).pipe(Wi(a=>{const l=r.children[a],f=JS(t,a);return this.expandSegmentGroup(e,f,l,a).pipe((0,zt.U)(m=>({segment:m,outlet:a})))}),vh((a,l)=>(a[l.outlet]=l.segment,a),{}),Fu())}expandSegment(e,t,r,i,a,l){return(0,Bn.D)(r).pipe(Wi(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,l).pipe(Xs(v=>{if(v instanceof Rh)return Nt(null);throw v}))),hs(f=>!!f),Xs((f,m)=>{if(Tc(f))return LC(t,i,a)?Nt(new wn([],{})):Ph(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,l,f){return sA(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):Ph(t):Ph(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?UC(a):this.lineralizeSegments(r,a).pipe((0,Wr.z)(l=>{const f=new wn(l,{});return this.expandSegment(e,f,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:f,consumedSegments:m,remainingSegments:v,positionalParamSegments:b}=Gy(t,i,a);if(!f)return Ph(t);const T=this.applyRedirectCommands(m,i.redirectTo,b);return i.redirectTo.startsWith("/")?UC(T):this.lineralizeSegments(i,T).pipe((0,Wr.z)(x=>this.expandSegment(e,t,r,x.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=Fy(r,e),r.loadChildren?(r._loadedRoutes?Nt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,zt.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new wn(i,{})))):Nt(new wn(i,{}))):Wy(t,r,i,e).pipe(Ir(({matched:l,consumedSegments:f,remainingSegments:m})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Wr.z)(b=>{const T=b.injector??e,x=b.routes,{segmentGroup:V,slicedSegments:G}=xh(t,f,m,x),ue=new wn(V.segments,V.children);if(0===G.length&&ue.hasChildren())return this.expandChildren(T,x,ue).pipe((0,zt.U)(Dt=>new wn(f,Dt)));if(0===x.length&&0===G.length)return Nt(new wn(f,{}));const Ie=Ls(r)===a;return this.expandSegment(T,ue,x,G,Ie?vn:a,!0).pipe((0,zt.U)(xt=>new wn(f.concat(xt.segments),xt.children)))})):Ph(t)))}getChildConfig(e,t,r){return t.children?Nt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Nt({routes:t._loadedRoutes,injector:t._loadedInjector}):function Hy(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Nt(!0):Nt(i.map(l=>{const f=Ea(l,n);return ma(function wa(n){return n&&zu(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(Ca(),OC())}(e,t,r).pipe((0,Wr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Jr.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function oA(n){return pc(Sh(Sc,3))}())):Nt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Nt(r);if(i.numberOfChildren>1||!i.children[vn])return pc(new d.vHH(4e3,Sc));i=i.children[vn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Ps(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return br(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return br(t.children,(f,m)=>{l[m]=this.createSegmentGroup(e,f,r,i)}),new wn(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,Sc);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class jC{}class qy{constructor(e,t,r,i,a,l,f,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=f,this.urlSerializer=m}recognize(){const e=xh(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,vn).pipe((0,zt.U)(t=>{if(null===t)return null;const r=new ju([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},vn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ks(r,t),a=new ps(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=xy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Bn.D)(Object.keys(r.children)).pipe(Wi(i=>{const a=r.children[i],l=JS(t,i);return this.processSegmentGroup(e,l,a,i)}),vh((i,a)=>i&&a?(i.push(...a),i):null),function wS(n,e=!1){return(0,Ii.e)((t,r)=>{let i=0;t.subscribe((0,sr.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),ku(null),Fu(),(0,zt.U)(i=>{if(null===i)return null;const a=Ky(i);return function cA(n){n.sort((e,t)=>e.value.outlet===vn?-1:t.value.outlet===vn?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,Bn.D)(t).pipe(Wi(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),hs(l=>!!l),Xs(l=>{if(Tc(l))return LC(r,i,a)?Nt([]):Nt(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!sA(t,r,i,a))return Nt(null);let l;if("**"===t.path){const f=i.length>0?eC(i).parameters:{},m=zC(r)+i.length;l=Nt({snapshot:new ju(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,WC(t),Ls(t),t.component??t._loadedComponent??null,t,HC(r),m,GC(t),m),consumedSegments:[],remainingSegments:[]})}else l=Wy(r,t,i,e).pipe((0,zt.U)(({matched:f,consumedSegments:m,remainingSegments:v,parameters:b})=>{if(!f)return null;const T=zC(r)+m.length;return{snapshot:new ju(m,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,WC(t),Ls(t),t.component??t._loadedComponent??null,t,HC(r),T,GC(t),T),consumedSegments:m,remainingSegments:v}}));return l.pipe(Ir(f=>{if(null===f)return Nt(null);const{snapshot:m,consumedSegments:v,remainingSegments:b}=f;e=t._injector??e;const T=t._loadedInjector??e,x=function dA(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:G}=xh(r,v,b,x.filter(Ie=>void 0===Ie.redirectTo),this.relativeLinkResolution);if(0===G.length&&V.hasChildren())return this.processChildren(T,x,V).pipe((0,zt.U)(Ie=>null===Ie?null:[new ks(m,Ie)]));if(0===x.length&&0===G.length)return Nt([new ks(m,[])]);const ue=Ls(t)===a;return this.processSegment(T,x,V,G,ue?vn:a).pipe((0,zt.U)(Ie=>null===Ie?null:[new ks(m,Ie)]))}))}}function RO(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Ky(n){const e=[],t=new Set;for(const r of n){if(!RO(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Ky(r.children);e.push(new ks(r.value,i))}return e.filter(r=>!t.has(r))}function HC(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function zC(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function WC(n){return n.data||{}}function GC(n){return n.resolve||{}}function Qy(n){return"string"==typeof n.title||null===n.title}function yg(n){return Ir(e=>{const t=n(e);return t?(0,Bn.D)(t).pipe((0,zt.U)(()=>e)):Nt(e)})}let Jy=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===vn);return r}getResolvedTitleForRoute(t){return t.data[Lu]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Xy)},providedIn:"root"}),n})(),Xy=(()=>{class n extends Jy{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(k_))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class So{}class Eg extends class vg{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const wg=new d.OlP("",{providedIn:"root",factory:()=>({})}),Ig=new d.OlP("ROUTES");let ev=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Nt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ma(t.loadComponent()).pipe((0,Jr.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),vy(()=>{this.componentLoaders.delete(t)})),i=new Yp(r,()=>new cs.x).pipe(_y());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Nt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,zt.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,v,b=!1;Array.isArray(f)?v=f:(m=f.create(t).injector,v=mc(m.get(Ig,[],d.XFs.Self|d.XFs.Optional)));return{routes:v.map(SC),injector:m}}),vy(()=>{this.childrenLoaders.delete(r)})),l=new Yp(a,()=>new cs.x).pipe(_y());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return ma(t()).pipe((0,Wr.z)(r=>r instanceof d.YKP||Array.isArray(r)?Nt(r):(0,Bn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class fA{}class kh{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function OO(n){throw n}function pA(n,e,t){return e.parse("/")}const kO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function KC(){const n=(0,d.f3M)(aC),e=(0,d.f3M)(Hu),t=(0,d.f3M)(xe),r=(0,d.f3M)(d.zs3),i=(0,d.f3M)(d.Sil),a=(0,d.f3M)(Ig,{optional:!0})??[],l=(0,d.f3M)(wg,{optional:!0})??{},f=(0,d.f3M)(Xy),m=(0,d.f3M)(Jy,{optional:!0}),v=(0,d.f3M)(fA,{optional:!0}),b=(0,d.f3M)(So,{optional:!0}),T=new er(null,n,e,t,r,i,mc(a));return v&&(T.urlHandlingStrategy=v),b&&(T.routeReuseStrategy=b),T.titleStrategy=m??f,function mA(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,T),T}let er=(()=>{class n{constructor(t,r,i,a,l,f,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new cs.x,this.errorHandler=OO,this.malformedUriErrorHandler=pA,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Nt(void 0),this.urlHandlingStrategy=new kh,this.routeReuseStrategy=new Eg,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(ev),this.configLoader.onLoadEndListener=x=>this.triggerEvent(new vC(x)),this.configLoader.onLoadStartListener=x=>this.triggerEvent(new HS(x)),this.ngModule=l.get(d.h0i),this.console=l.get(d.c2e);const T=l.get(d.R0b);this.isNgZoneEnabled=T instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function nC(){return new Ps(new wn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=bC(this.currentUrlTree,this.rootComponentType),this.transitions=new ds({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(zi(i=>0!==i.id),(0,zt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Ir(i=>{let a=!1,l=!1;return Nt(i).pipe((0,Jr.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ir(f=>{const m=this.browserUrlTree.toString(),v=!this.navigated||f.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return ZC(f.source)&&(this.browserUrlTree=f.extractedUrl),Nt(f).pipe(Ir(T=>{const x=this.transitions.getValue();return r.next(new _C(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),x!==this.transitions.getValue()?ga.E:Promise.resolve(T)}),function uA(n,e,t,r){return Ir(i=>function $C(n,e,t,r,i){return new aA(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,zt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Jr.b)(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},i.urlAfterRedirects=T.urlAfterRedirects}),function mg(n,e,t,r,i,a){return(0,Wr.z)(l=>function eo(n,e,t,r,i,a,l="emptyOnly",f="legacy"){return new qy(n,e,t,r,i,l,f,a).recognize().pipe(Ir(m=>null===m?function lA(n){return new ui.y(e=>e.error(n))}(new jC):Nt(m)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,a).pipe((0,zt.U)(f=>({...l,targetSnapshot:f}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Jr.b)(T=>{if(i.targetSnapshot=T.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(V,T)}this.browserUrlTree=T.urlAfterRedirects}const x=new $S(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);r.next(x)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:V,source:G,restoredState:ue,extras:Ie}=f,It=new _C(x,this.serializeUrl(V),G,ue);r.next(It);const xt=bC(V,this.rootComponentType).snapshot;return Nt(i={...f,targetSnapshot:xt,urlAfterRedirects:V,extras:{...Ie,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=f.rawUrl,f.resolve(null),ga.E}),(0,Jr.b)(f=>{const m=new Cc(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}),(0,zt.U)(f=>i={...f,guards:AO(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),function Dc(n,e){return(0,Wr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?Nt({...t,guardsResult:!0}):function By(n,e,t,r){return(0,Bn.D)(n).pipe((0,Wr.z)(i=>function NC(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?Nt(a.map(f=>{const m=hg(e)??i,v=Ea(f,m);return ma(function nA(n){return n&&zu(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):m.runInContext(()=>v(n,e,t,r))).pipe(hs())})).pipe(Ca()):Nt(!0)}(i.component,i.route,t,e,r)),hs(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Wr.z)(f=>f&&function eA(n){return"boolean"==typeof n}(f)?function fg(n,e,t,r){return(0,Bn.D)(e).pipe(Wi(i=>Kp(function PC(n,e){return null!==n&&e&&e(new zS(n)),Nt(!0)}(i.route.parent,r),function RC(n,e){return null!==n&&e&&e(new GS(n)),Nt(!0)}(i.route,r),function jy(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function va(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>gy(()=>Nt(l.guards.map(m=>{const v=hg(l.node)??t,b=Ea(m,v);return ma(function tA(n){return n&&zu(n.canActivateChild)}(b)?b.canActivateChild(r,n):v.runInContext(()=>b(r,n))).pipe(hs())})).pipe(Ca())));return Nt(a).pipe(Ca())}(n,i.path,t),function $y(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Nt(!0);const i=r.map(a=>gy(()=>{const l=hg(e)??t,f=Ea(a,l);return ma(function MC(n){return n&&zu(n.canActivate)}(f)?f.canActivate(e,n):l.runInContext(()=>f(e,n))).pipe(hs())}));return Nt(i).pipe(Ca())}(n,i.route,t))),hs(i=>!0!==i,!0))}(r,a,n,e):Nt(f)),(0,zt.U)(f=>({...t,guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Jr.b)(f=>{if(i.guardsResult=f.guardsResult,_a(f.guardsResult))throw qS(0,f.guardsResult);const m=new jS(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(m)}),zi(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",3),!1)),yg(f=>{if(f.guards.canActivateChecks.length)return Nt(f).pipe((0,Jr.b)(m=>{const v=new yC(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),Ir(m=>{let v=!1;return Nt(m).pipe(function Zy(n,e){return(0,Wr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Nt(t);let a=0;return(0,Bn.D)(i).pipe(Wi(l=>function _g(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!Qy(i)&&(a[Lu]=i.title),function PO(n,e,t,r){const i=function Yy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Nt({});const a={};return(0,Bn.D)(i).pipe((0,Wr.z)(l=>function NO(n,e,t,r){const i=hg(e)??r,a=Ea(n,i);return ma(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(hs(),(0,Jr.b)(f=>{a[l]=f}))),Qp(1),function CS(n){return(0,zt.U)(()=>n)}(a),Xs(l=>Tc(l)?ga.E:pc(l)))}(a,n,e,r).pipe((0,zt.U)(l=>(n._resolvedData=l,n.data=xy(n,t).resolve,i&&Qy(i)&&(n.data[Lu]=i.title),null)))}(l.route,r,n,e)),(0,Jr.b)(()=>a++),Qp(1),(0,Wr.z)(l=>a===i.length?Nt(t):ga.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Jr.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,Jr.b)(m=>{const v=new rg(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),yg(f=>{const m=v=>{const b=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(v.routeConfig).pipe((0,Jr.b)(T=>{v.component=T}),(0,zt.U)(()=>{})));for(const T of v.children)b.push(...m(T));return b};return Z0(m(f.targetSnapshot.root)).pipe(ku(),gc(1))}),yg(()=>this.afterPreactivation()),(0,zt.U)(f=>{const m=function Ry(n,e,t){const r=Ic(n,e._root,t?t._root:void 0);return new og(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return i={...f,targetRouterState:m}}),(0,Jr.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,zt.U)(r=>(new SO(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Jr.b)({next(){a=!0},complete(){a=!0}}),vy(()=>{a||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Xs(f=>{if(l=!0,lg(f)){Ah(f)||(this.navigated=!0,this.restoreHistory(i,!0));const m=new bh(i.id,this.serializeUrl(i.extractedUrl),f.message,f.cancellationCode);if(r.next(m),Ah(f)){const v=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),b={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ZC(i.source)};this.scheduleNavigation(v,"imperative",null,b,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new BS(i.id,this.serializeUrl(i.extractedUrl),f,i.targetSnapshot??void 0);r.next(m);try{i.resolve(this.errorHandler(f))}catch(v){i.reject(v)}}return ga.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const f={...a};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(i.state=f)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(SC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:f,preserveFragment:m}=r,v=i||this.routerState.root,b=m?this.currentUrlTree.fragment:l;let T=null;switch(f){case"merge":T={...this.currentUrlTree.queryParams,...a};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=a||null}return null!==T&&(T=this.removeEmptyProps(T)),hC(v,this.currentUrlTree,t,T,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=_a(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function tv(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...kO}:!1===r?{...gA}:r,_a(t))return iC(this.currentUrlTree,t,i);const a=this.parseUrl(t);return iC(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new $u(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let f,m,v;l?(f=l.resolve,m=l.reject,v=l.promise):v=new Promise((x,V)=>{f=x,m=V});const b=++this.navigationId;let T;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),T=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):T=0,this.setTransition({id:b,targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:f,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(x=>Promise.reject(x))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new bh(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:function(){return KC()},providedIn:"root"}),n})();function ZC(n){return"imperative"!==n}class YC{}let Tg=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(zi(t=>t instanceof $u),Wi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,d.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,f=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,Bn.D)(i).pipe((0,bo.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Nt(null);const a=i.pipe((0,Wr.z)(l=>null===l?Nt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Bn.D)([a,l]).pipe((0,bo.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(er),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(YC),d.LFG(ev))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ao=new d.OlP("");let vA=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _C?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $u&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof wC&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new wC(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function ba(n,e){return{\u0275kind:n,\u0275providers:e}}function rv(n){return[{provide:Ig,multi:!0,useValue:n}]}function Ac(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(er),i=n.get(Xr);1===n.get(xo)&&r.initialNavigation(),n.get(Wu,null,d.XFs.Optional)?.setUpPreloading(),n.get(Ao,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const Xr=new d.OlP("",{factory:()=>new cs.x}),xo=new d.OlP("",{providedIn:"root",factory:()=>1});const Wu=new d.OlP("");function Mc(n){return ba(0,[{provide:Wu,useExisting:Tg},{provide:YC,useExisting:n}])}const Gu=new d.OlP("ROUTER_FORROOT_GUARD"),xc=[xe,{provide:aC,useClass:Cy},{provide:er,useFactory:KC},Hu,{provide:Pi,useFactory:function QC(n){return n.routerState.root},deps:[er]},ev];function Rc(){return new d.PXZ("Router",er)}let qu=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[xc,[],rv(t),{provide:Gu,useFactory:tI,deps:[[er,new d.FiY,new d.tp0]]},{provide:wg,useValue:r||{}},r?.useHash?{provide:ye,useClass:mt}:{provide:ye,useClass:ft},{provide:Ao,useFactory:()=>{const n=(0,d.f3M)(er),e=(0,d.f3M)(Qa),t=(0,d.f3M)(wg);return t.scrollOffset&&e.setOffset(t.scrollOffset),new vA(n,e,t)}},r?.preloadingStrategy?Mc(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:Rc},r?.initialNavigation?nI(r):[],[{provide:sv,useFactory:Ac},{provide:d.tb,multi:!0,useExisting:sv}]]}}static forChild(t){return{ngModule:n,providers:[rv(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Gu,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[cg]}),n})();function tI(n){return"guarded"}function nI(n){return["disabled"===n.initialNavigation?ba(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(er);return()=>{e.setUpLocationChangeListener()}}},{provide:xo,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ba(2,[{provide:xo,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(j,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const l=e.get(er),f=e.get(Xr);(function i(a){e.get(er).events.pipe(zi(f=>f instanceof $u||f instanceof bh||f instanceof BS),(0,zt.U)(f=>f instanceof $u||f instanceof bh&&(0===f.code||1===f.code)&&null),zi(f=>null!==f),gc(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),l.afterPreactivation=()=>(a(!0),r||f.closed?Nt(void 0):f),l.initialNavigation()}))}}]).\u0275providers:[]]}const sv=new d.OlP(""),ov=function(n){return{"background-color":n}};let wA=(()=>{class n{constructor(t){this.router=t,this.currentBg="#232432",this.currentIndex=0,this.modules=[{bg:"#231F26",name:"Digital Production",tutor:"SAJ",image:"../assets/prog.png"},{bg:"#0A2F3C",name:"Security",tutor:"SAM",image:"../assets/cyb.png"},{bg:"#121821",name:"Business Environments",tutor:"LIAM",image:"../assets/bse.png"},{bg:"#232432",name:"Data in Computing",tutor:"Trevor",image:"../assets/data.png"},{bg:"#675052",name:"Legislation",tutor:"SAJ",image:"../assets/legi.png"}],this.currentDisplay=this.modules[this.currentIndex]}ngOnInit(){}change(){this.currentIndex<4?(this.currentIndex+=1,this.currentDisplay=this.modules[this.currentIndex],console.log(this.currentDisplay,this.currentIndex)):4==this.currentIndex&&(this.currentIndex=0,this.currentDisplay=this.modules[this.currentIndex])}portal(){this.router.navigate([`portal/${this.modules[this.currentIndex].name}`])}route(t){this.router.navigate([t])}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(er))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-module"]],decls:17,vars:9,consts:[[1,"container",3,"ngStyle"],[1,"display-modules"],[1,"module",3,"ngStyle"],[1,"nav"],[1,"nav-button",3,"click"],[1,"nav-button","sec",3,"click"],[1,"flex-contain"],[1,"content"],[1,"col1"],[1,"module-name"],[1,"revise",3,"click"],[1,"col2",3,"click"],["alt","robot",3,"src"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),d.NdJ("click",function(){return r.route("")}),d._uU(5,"HOME"),d.qZA(),d.TgZ(6,"button",5),d.NdJ("click",function(){return r.route("contribute")}),d._uU(7,"Contribute"),d.qZA()(),d.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"h1",9),d._uU(12),d.qZA(),d.TgZ(13,"button",10),d.NdJ("click",function(){return r.portal()}),d._uU(14,"Revise"),d.qZA()()(),d.TgZ(15,"div",11),d.NdJ("click",function(){return r.change()}),d._UZ(16,"img",12),d.qZA()()()()()),2&t&&(d.Q6J("ngStyle",d.VKq(5,ov,r.currentDisplay.bg)),d.xp6(2),d.Q6J("ngStyle",d.VKq(7,ov,r.currentDisplay.bg)),d.xp6(10),d.AsE("",r.currentDisplay.name,"(",r.currentDisplay.tutor,")"),d.xp6(4),d.Q6J("src",r.currentDisplay.image,d.LSH))},dependencies:[Yo],styles:['@import"https://fonts.googleapis.com/css2?family=Play&display=swap";.container[_ngcontent-%COMP%]{height:auto;width:100%;max-width:100vw;display:flex;justify-content:center;font-family:Play,sans-serif}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]{width:80vw;max-width:2000px}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]{height:100vh}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{width:40%;display:flex;justify-content:space-evenly;margin-top:3vh}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(2.5vw,2.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .sec[_ngcontent-%COMP%]{color:var(--sec-color);background-color:var(--primary-color);border:2px solid var(--primary-color)}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:85vh}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .col1[_ngcontent-%COMP%]{align-self:center;width:45%}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .col1[_ngcontent-%COMP%]   .module-name[_ngcontent-%COMP%]{font-size:min(5vw,5em);color:var(--primary-color)}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .col1[_ngcontent-%COMP%]   .revise[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(1.5vw,1.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;padding:1vh min(3rem,3vw)}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .col2[_ngcontent-%COMP%]{min-height:100%;width:45%;display:flex;align-items:center}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .col2[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:80vh}']}),n})();var CA=O(6451),Uh=O(5363),IA=O(6063);class bA extends cs.x{constructor(e=1/0,t=1/0,r=IA.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let f=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)f=m;f&&r.splice(0,f+1)}}}var av=O(3099);function Sg(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,av.B)({connector:()=>new bA(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function iI(n,e){return(0,my.m)(e)?Ir(()=>n,e):Ir(()=>n)}var Pc=O(9468),st=O(4027),qi=O(2011),ei=O(259);class bi{constructor(e){return e}}class ms{constructor(){return(0,ei.C6)()}}const Bh=new d.OlP("angularfire2._apps"),oI={provide:bi,useFactory:function sI(n){return n&&1===n.length?n[0]:new bi((0,ei.Mq)())},deps:[[new d.FiY,Bh]]},aI={provide:ms,deps:[[new d.FiY,Bh]]};function uv(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new bi(r)}}let uI=(()=>{class n{constructor(t){(0,ei.KN)("angularfire",st.q4.full,"core"),(0,ei.KN)("angularfire",st.q4.full,"app"),(0,ei.KN)("angular",d.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[oI,aI]}),n})();function DA(n,...e){return{ngModule:uI,providers:[{provide:Bh,useFactory:uv(n),multi:!0,deps:[d.R0b,d.zs3,st.HU,...e]}]}}const lI=(0,st.u3)(ei.ZF,!0);var Ce=O(5861),On=O(9681),Po=O(4859),J=O(2090),Ki=O(1877);const Ag=new Map,lv={activated:!1,tokenObservers:[]},cI={initialized:!1,enabled:!1};function yr(n){return Ag.get(n)||Object.assign({},lv)}function cv(){return cI}class PA{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ce.Z)(function*(){t.stop();try{t.pending=new J.BH,yield function NA(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new J.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ti=new J.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function hv(n){if(!yr(n).activated)throw ti.create("use-before-activation",{appName:n.name})}function fv(n,e){return xg.apply(this,arguments)}function xg(){return(xg=(0,Ce.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const T=yield i.getHeartbeatsHeader();T&&(r["X-Firebase-Client"]=T)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,f;try{l=yield fetch(n,a)}catch(T){throw ti.create("fetch-network-error",{originalErrorMessage:T?.message})}if(200!==l.status)throw ti.create("fetch-status-error",{httpStatus:l.status});try{f=yield l.json()}catch(T){throw ti.create("fetch-parse-error",{originalErrorMessage:T?.message})}const m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw ti.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const v=1e3*Number(m[1]),b=Date.now();return{token:f.token,expireTimeMillis:b+v,issuedAtTimeMillis:b}})).apply(this,arguments)}function jO(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Ni="firebase-app-check-store";let Rg=null;function Vs(){return Rg||(Rg=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ti.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Ni,{keyPath:"compositeKey"})}}catch(t){e(ti.create("storage-open",{originalErrorMessage:t?.message}))}}),Rg)}function gv(){return(gv=(0,Ce.Z)(function*(n,e){const r=(yield Vs()).transaction(Ni,"readwrite"),a=r.objectStore(Ni).put({compositeKey:n,value:e});return new Promise((l,f)=>{a.onsuccess=m=>{l()},r.onerror=m=>{var v;f(ti.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const No=new Ki.Yd("@firebase/app-check");function _v(n,e){return(0,J.hl)()?function Bs(n,e){return function EI(n,e){return gv.apply(this,arguments)}(function Pg(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{No.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function jh(){return cv().enabled}function II(){return kg.apply(this,arguments)}function kg(){return(kg=(0,Ce.Z)(function*(){const n=cv();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const yv={error:"UNKNOWN_ERROR"};function Fg(n){return J.US.encodeString(JSON.stringify(n),!1)}function Nc(n){return Lg.apply(this,arguments)}function Lg(){return(Lg=(0,Ce.Z)(function*(n,e=!1){const t=n.app;hv(t);const r=yr(t);let a,i=r.token;if(i&&!Ku(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(Ku(m)?i=m:yield _v(t,void 0))}if(!e&&i&&Ku(i))return{token:i.token};let f,l=!1;if(jh()){r.exchangeTokenPromise||(r.exchangeTokenPromise=fv(jO(t,yield II()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const m=yield r.exchangeTokenPromise;return yield _v(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield yr(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?No.warn(m.message):No.error(m),a=m}return i?a?f=Ku(i)?{token:i.token,internalError:a}:DI(a):(f={token:i.token},r.token=i,yield _v(t,i)):f=DI(a),l&&Ev(t,f),f})).apply(this,arguments)}function Ug(n,e){const t=yr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function vv(n){const{app:e}=n,t=yr(e);let r=t.tokenRefresher;r||(r=function TI(n){const{app:e}=n;return new PA((0,Ce.Z)(function*(){let r;if(r=yr(e).token?yield Nc(n,!0):yield Nc(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=yr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Ev(n,e){const t=yr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Ku(n){return n.expireTimeMillis-Date.now()>0}function DI(n){return{token:Fg(yv),error:n}}class FA{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=yr(this.app);for(const t of e)Ug(this.app,t.next);return Promise.resolve()}}const Da="app-check-internal";!function JA(){(0,On._registerComponent)(new Po.wA("app-check",n=>function LA(n,e){return new FA(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Da).initialize()})),(0,On._registerComponent)(new Po.wA(Da,n=>function VA(n){return{getToken:e=>Nc(n,e),addTokenListener:e=>function Vg(n,e,t,r){const{app:i}=n,a=yr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Ku(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),vv(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>vv(n))}(n,"INTERNAL",e),removeTokenListener:e=>Ug(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,On.registerVersion)("@firebase/app-check","0.6.5")}();class Zu{constructor(){return(0,st.vb)("app-check")}}typeof window<"u"&&window;var FI=O(9260);const VI=new d.OlP("angularfire2.auth.use-emulator"),Av=new d.OlP("angularfire2.auth.settings"),Mv=new d.OlP("angularfire2.auth.tenant-id"),xv=new d.OlP("angularfire2.auth.langugage-code"),Rv=new d.OlP("angularfire2.auth.use-device-language"),UI=new d.OlP("angularfire.auth.persistence"),BI=(n,e,t,r,i,a,l,f)=>(0,qi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),l)for(const[v,b]of Object.entries(l))m.settings[v]=b;return f&&m.setPersistence(f),m},[t,r,i,a,l,f]);let Pv=(()=>{class n{constructor(t,r,i,a,l,f,m,v,b,T,x,V){const G=new cs.x,ue=Nt(void 0).pipe((0,Uh.Q)(l.outsideAngular),Ir(()=>a.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,9568)))),(0,zt.U)(()=>(0,qi.on)(t,a,r)),(0,zt.U)(Ie=>BI(Ie,a,f,v,b,T,m,x)),Sg({bufferSize:1,refCount:!1}));if(Td(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Nt(null);else{ue.pipe(hs()).subscribe();const It=ue.pipe(Ir($t=>$t.getRedirectResult().then(cn=>cn,()=>null)),st.iC,Sg({bufferSize:1,refCount:!1})),xt=ue.pipe(Ir($t=>new ui.y(cn=>({unsubscribe:a.runOutsideAngular(()=>$t.onAuthStateChanged(En=>cn.next(En),En=>cn.error(En),()=>cn.complete()))})))),Dt=ue.pipe(Ir($t=>new ui.y(cn=>({unsubscribe:a.runOutsideAngular(()=>$t.onIdTokenChanged(En=>cn.next(En),En=>cn.error(En),()=>cn.complete()))}))));this.authState=It.pipe(iI(xt),(0,Pc.R)(l.outsideAngular),(0,Uh.Q)(l.insideAngular)),this.user=It.pipe(iI(Dt),(0,Pc.R)(l.outsideAngular),(0,Uh.Q)(l.insideAngular)),this.idToken=this.user.pipe(Ir($t=>$t?(0,Bn.D)($t.getIdToken()):Nt(null))),this.idTokenResult=this.user.pipe(Ir($t=>$t?(0,Bn.D)($t.getIdTokenResult()):Nt(null))),this.credential=(0,CA.T)(It,G,this.authState.pipe(zi($t=>!$t))).pipe((0,zt.U)($t=>$t?.user?$t:null),(0,Pc.R)(l.outsideAngular),(0,Uh.Q)(l.insideAngular))}return(0,qi.pX)(this,ue,a,{spy:{apply:(Ie,It,xt)=>{(Ie.startsWith("signIn")||Ie.startsWith("createUser"))&&xt.then(Dt=>G.next(Dt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qi.Dh),d.LFG(qi.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(st.HU),d.LFG(VI,8),d.LFG(Av,8),d.LFG(Mv,8),d.LFG(xv,8),d.LFG(Rv,8),d.LFG(UI,8),d.LFG(Zu,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function tM(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",5),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.toggleAdmin())}),d._uU(1,"Admin"),d.qZA()}}function nM(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",5),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.toggleAdmin())}),d._uU(1,"Home"),d.qZA()}}function rM(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",6)(1,"h1"),d._uU(2,"Welcome back..."),d.qZA(),d.TgZ(3,"button",5),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.route())}),d._uU(4,"Start Revision"),d.qZA()()}}function Hg(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"label",10),d._uU(4,"Email:"),d.qZA(),d.TgZ(5,"input",11),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.email=i)}),d.qZA(),d.TgZ(6,"label",12),d._uU(7,"Password:"),d.qZA(),d.TgZ(8,"input",13),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.password=i)}),d.qZA(),d.TgZ(9,"button",14),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onSubmit())}),d._uU(10,"Sign in"),d.qZA()()()()}if(2&n){const t=d.oxw();d.xp6(5),d.Q6J("ngModel",t.email),d.xp6(3),d.Q6J("ngModel",t.password),d.xp6(1),d.Q6J("disabled",0==t.password.length)}}let $I=(()=>{class n{constructor(t,r){this.router=t,this.auth=r,this.email="",this.password="",this.admin=!1}ngOnInit(){}route(){this.router.navigate(["modules"])}toggleAdmin(){this.admin=!this.admin}signIn(){this.router.navigate(["admin"])}onSubmit(){this.auth.signInWithEmailAndPassword(this.email,this.password).then(t=>{console.log("User logged In"),this.signIn()}).catch(t=>{alert("Wrong email or password")})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(er),d.Y36(Pv))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-home"]],decls:6,vars:4,consts:[[1,"container"],[1,"top"],[3,"click",4,"ngIf"],["class","flex-contain",4,"ngIf"],["class","form-contain",4,"ngIf"],[3,"click"],[1,"flex-contain"],[1,"form-contain"],[1,"form"],[1,"form-wrap"],["for","email","type","email"],["name","Email","type","email",3,"ngModel","ngModelChange"],["for","password"],["name","password","type","password",3,"ngModel","ngModelChange"],[3,"disabled","click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d.YNc(2,tM,2,0,"button",2),d.YNc(3,nM,2,0,"button",2),d.qZA(),d.YNc(4,rM,5,0,"div",3),d.YNc(5,Hg,11,3,"div",4),d.qZA()),2&t&&(d.xp6(2),d.Q6J("ngIf",!r.admin),d.xp6(1),d.Q6J("ngIf",r.admin),d.xp6(1),d.Q6J("ngIf",!r.admin),d.xp6(1),d.Q6J("ngIf",r.admin))},dependencies:[mr,la,Jl,dc],styles:['@import"https://fonts.googleapis.com/css2?family=Play&display=swap";.container[_ngcontent-%COMP%]{height:100vh;background-image:url(home.f708dd93b6ce0104.png);background-position:center;background-size:cover}.container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(1.5vw,1.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;margin:0 auto;margin:1rem}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-self:center;height:85vh}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:min(8em,17vw)}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(1.5vw,1.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;margin:0 auto}.container[_ngcontent-%COMP%]   .form-contain[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-self:center;height:85vh}.container[_ngcontent-%COMP%]   .form-contain[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30vw;max-width:400px;max-height:400px;height:40vh;margin:0 auto;background-color:#0006}.container[_ngcontent-%COMP%]   .form-contain[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-wrap[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;width:100%;height:100%;max-height:450px;padding:1rem}.container[_ngcontent-%COMP%]   .form-contain[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-wrap[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--primary-color);margin-bottom:10px;font-size:min(1.5vw,1.5em)}.container[_ngcontent-%COMP%]   .form-contain[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-wrap[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-bottom:10px;height:5vh;font-size:1.3rem}.container[_ngcontent-%COMP%]   .form-contain[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-wrap[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(1.5vw,1.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;margin:0 auto}']}),n})();function jI(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",7),d.NdJ("click",function(){const a=d.CHM(t).$implicit,l=d.oxw();return d.KtG(l.select(a))}),d._uU(1),d.qZA()}if(2&n){const t=e.$implicit;d.xp6(1),d.hij(" ",t," ")}}const HI=function(n){return{"background-color":n}},iM=function(n){return{"background-image":n}};let Hh=(()=>{class n{constructor(t,r){this.route=t,this.router=r,this.bgColour="",this.bgImage="",this.module="",this.category=["Describe","Evaluate","Explain","Identify","State","Develop"]}ngOnInit(){this.route.params.subscribe(t=>{this.module=t.class}),this.checkBg(this.module)}checkBg(t){switch(console.log(this.module),t){case"Digital Production":default:this.bgColour="#231F26",this.bgImage="../assets/prog.png";break;case"Security":this.bgColour="#0A2F3C",this.bgImage="../assets/cyb.png";break;case"Business Environments":this.bgColour="#121821",this.bgImage="../assets/bse.png";break;case"Data in Computing":this.bgColour="#232432",this.bgImage="../assets/data.png";break;case"Legislation":this.bgColour="#675052",this.bgImage="../assets/legi.png"}}home(){window.history.go(-1)}select(t){this.router.navigate([`cards/${this.module}/${t}`])}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Pi),d.Y36(er))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-portal"]],decls:10,vars:7,consts:[[1,"container",3,"ngStyle"],[3,"click"],[1,"flex-contain"],[1,"child1"],[1,"block-contain"],["class","block",3,"click",4,"ngFor","ngForOf"],[1,"child2",3,"ngStyle"],[1,"block",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"button",1),d.NdJ("click",function(){return r.home()}),d._uU(2,"Back"),d.qZA(),d.TgZ(3,"div",2)(4,"div",3)(5,"div",4),d.YNc(6,jI,2,1,"div",5),d.qZA()(),d.TgZ(7,"div",6)(8,"h1"),d._uU(9,"Select a Category"),d.qZA()()()()),2&t&&(d.Q6J("ngStyle",d.VKq(3,HI,r.bgColour)),d.xp6(6),d.Q6J("ngForOf",r.category),d.xp6(1),d.Q6J("ngStyle",d.VKq(5,iM,"url("+r.bgImage+")")))},dependencies:[bs,Yo],styles:[".container[_ngcontent-%COMP%]{height:100vh;color:var(--primary-color);padding:2rem;width:100vw}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(2.5vw,2.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;margin-left:2rem}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]{height:90%;display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:contain;display:flex;align-items:center;justify-content:center;width:45%}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .block-contain[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:space-around}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .block-contain[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]{background-color:var(--sec-color);text-align:center;padding:1.5rem 2rem;border-radius:10px;width:40%;margin:.5rem 0;font-size:min(2vw,2em);cursor:pointer}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:contain;display:flex;align-items:center;justify-content:center;width:45%;height:85vh}"]}),n})();var zh=O(4986);function zg(){return(0,Ii.e)((n,e)=>{let t,r=!1;n.subscribe((0,sr.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function zI(n,e=yh.y){return n=n??sM,(0,Ii.e)((t,r)=>{let i,a=!0;t.subscribe((0,sr.x)(r,l=>{const f=e(l);(a||!n(i,f))&&(a=!1,i=f,r.next(l))}))})}function sM(n,e){return n===e}O(9568);var Ut,WI=O(3942),GI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oo={},Nv=Nv||{},un=GI||self;function Ov(){}function kv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Wg(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Gg="closure_uid_"+(1e9*Math.random()>>>0),qg=0;function aM(n,e,t){return n.call.apply(n.bind,arguments)}function uM(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ni(n,e,t){return(ni=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aM:uM).apply(null,arguments)}function Aa(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ri(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function Ma(){this.s=this.s,this.o=this.o}Ma.prototype.s=!1,Ma.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function GO(n){Object.prototype.hasOwnProperty.call(n,Gg)&&n[Gg]||(n[Gg]=++qg)}(this)},Ma.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const qI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Fv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Lv(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(kv(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function di(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}di.prototype.h=function(){this.defaultPrevented=!0};var cM=function(){if(!un.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{un.addEventListener("test",Ov,e),un.removeEventListener("test",Ov,e)}catch{}return n}();function xa(n){return/^[\s\xa0]*$/.test(n)}var KI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Kg(n,e){return n<e?-1:n>e?1:0}function Zg(){var n=un.navigator;return n&&(n=n.userAgent)?n:""}function $s(n){return-1!=Zg().indexOf(n)}function Vv(n){return Vv[" "](n),n}Vv[" "]=Ov;var Qg,n,dM=$s("Opera"),Ra=$s("Trident")||$s("MSIE"),YI=$s("Edge"),Yg=YI||Ra,Uv=$s("Gecko")&&!(-1!=Zg().toLowerCase().indexOf("webkit")&&!$s("Edge"))&&!($s("Trident")||$s("MSIE"))&&!$s("Edge"),hM=-1!=Zg().toLowerCase().indexOf("webkit")&&!$s("Edge");function QI(){var n=un.document;return n?n.documentMode:void 0}e:{var Wh="",Bv=(n=Zg(),Uv?/rv:([^\);]+)(\)|;)/.exec(n):YI?/Edge\/([\d\.]+)/.exec(n):Ra?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):hM?/WebKit\/(\S+)/.exec(n):dM?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Bv&&(Wh=Bv?Bv[1]:""),Ra){var Jg=QI();if(null!=Jg&&Jg>parseFloat(Wh)){Qg=String(Jg);break e}}Qg=Wh}var fM={};var gM=un.document&&Ra&&(QI()||parseInt(Qg,10))||void 0;function Gh(n,e){if(di.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Uv){e:{try{Vv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:mM[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Gh.X.h.call(this)}}ri(Gh,di);var mM={2:"touch",3:"pen",4:"mouse"};Gh.prototype.h=function(){Gh.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var qh="closure_listenable_"+(1e6*Math.random()|0),XI=0;function eb(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++XI,this.ba=this.ea=!1}function Xg(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function jv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Hv(n){const e={};for(const t in n)e[t]=n[t];return e}const tb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nb(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<tb.length;a++)t=tb[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function em(n){this.src=n,this.g={},this.h=0}function Kh(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=qI(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Xg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Zh(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}em.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Zh(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new eb(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var tm="closure_lm_"+(1e6*Math.random()|0),Yh={};function rb(n,e,t,r,i){if(r&&r.once)return sb(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)rb(n,e[a],t,r,i);return null}return t=Qh(t),n&&n[qh]?n.N(e,t,Wg(r)?!!r.capture:!!r,i):ib(n,e,t,!1,r,i)}function ib(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Wg(i)?!!i.capture:!!i,f=ob(n);if(f||(n[tm]=f=new em(n)),(t=f.add(e,t,r,l,a)).proxy)return t;if(r=function zv(){const e=_M;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)cM||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Gv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function sb(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)sb(n,e[a],t,r,i);return null}return t=Qh(t),n&&n[qh]?n.O(e,t,Wg(r)?!!r.capture:!!r,i):ib(n,e,t,!0,r,i)}function Wv(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Wv(n,e[a],t,r,i);else r=Wg(r)?!!r.capture:!!r,t=Qh(t),n&&n[qh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Zh(a=n.g[e],t,r,i))&&(Xg(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=ob(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Zh(e,t,r,i)),(t=-1<n?e[n]:null)&&Pa(t))}function Pa(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[qh])Kh(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Gv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ob(e))?(Kh(t,n),0==t.h&&(t.src=null,e[tm]=null)):Xg(n)}}}function Gv(n){return n in Yh?Yh[n]:Yh[n]="on"+n}function _M(n,e){if(n.ba)n=!0;else{e=new Gh(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Pa(n),n=t.call(r,e)}return n}function ob(n){return(n=n[tm])instanceof em?n:null}var nm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qh(n){return"function"==typeof n?n:(n[nm]||(n[nm]=function(e){return n.handleEvent(e)}),n[nm])}function Gr(){Ma.call(this),this.i=new em(this),this.P=this,this.I=null}function Lr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new di(e,n);else if(e instanceof di)e.target=e.target||n;else{var i=e;nb(e=new di(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=rm(l,r,!0,e)&&i}if(i=rm(l=e.g=n,r,!0,e)&&i,i=rm(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=rm(l=e.g=t[a],r,!1,e)&&i}function rm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var f=l.listener,m=l.ha||l.src;l.ea&&Kh(n.i,l),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}ri(Gr,Ma),Gr.prototype[qh]=!0,Gr.prototype.removeEventListener=function(n,e,t,r){Wv(this,n,e,t,r)},Gr.prototype.M=function(){if(Gr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Xg(t[r]);delete n.g[e],n.h--}}this.I=null},Gr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Gr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var im=un.JSON.stringify;function qv(){var n=Qv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Zv,Kv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new ub,n=>n.reset());class ub{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function lb(n){un.setTimeout(()=>{throw n},0)}function cb(n,e){Zv||function yM(){var n=un.Promise.resolve(void 0);Zv=function(){n.then(qO)}}(),Yv||(Zv(),Yv=!0),Qv.add(n,e)}var Yv=!1,Qv=new class ab{constructor(){this.h=this.g=null}add(e,t){const r=Kv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function qO(){for(var n;n=qv();){try{n.h.call(n.g)}catch(t){lb(t)}var e=Kv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Yv=!1}function Jh(n,e){Gr.call(this),this.h=n||1,this.g=e||un,this.j=ni(this.lb,this),this.l=Date.now()}function Jv(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Xv(n,e,t){if("function"==typeof n)t&&(n=ni(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ni(n.handleEvent,n)}return 2147483647<Number(e)?-1:un.setTimeout(n,e||0)}function vM(n){n.g=Xv(()=>{n.g=null,n.i&&(n.i=!1,vM(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ri(Jh,Gr),(Ut=Jh.prototype).ca=!1,Ut.R=null,Ut.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Lr(this,"tick"),this.ca&&(Jv(this),this.start()))}},Ut.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ut.M=function(){Jh.X.M.call(this),Jv(this),delete this.g};class KO extends Ma{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:vM(this)}M(){super.M(),this.g&&(un.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xh(n){Ma.call(this),this.h=n,this.g={}}ri(Xh,Ma);var db=[];function hb(n,e,t,r){Array.isArray(t)||(t&&(db[0]=t.toString()),t=db);for(var i=0;i<t.length;i++){var a=rb(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function eE(n){jv(n.g,function(e,t){this.g.hasOwnProperty(t)&&Pa(e)},n),n.g={}}function sm(){this.g=!0}function kc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function IM(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return im(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Xh.prototype.M=function(){Xh.X.M.call(this),eE(this)},Xh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},sm.prototype.Aa=function(){this.g=!1},sm.prototype.info=function(){};var Yu={},fb=null;function Na(){return fb=fb||new Gr}function tE(n){di.call(this,Yu.Pa,n)}function Fc(n){const e=Na();Lr(e,new tE(e))}function nE(n,e){di.call(this,Yu.STAT_EVENT,n),this.stat=e}function hi(n){const e=Na();Lr(e,new nE(e,n))}function rE(n,e){di.call(this,Yu.Qa,n),this.size=e}function ef(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return un.setTimeout(function(){n()},e)}Yu.Pa="serverreachability",ri(tE,di),Yu.STAT_EVENT="statevent",ri(nE,di),Yu.Qa="timingevent",ri(rE,di);var om={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},bM={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function iE(){}function gb(){}iE.prototype.h=null;var oE,tf={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function sE(){di.call(this,"d")}function Qu(){di.call(this,"c")}function Lc(){}function Oi(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Xh(this),this.O=aE,this.T=new Jh(n=Yg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new mb}function mb(){this.i=null,this.g="",this.h=!1}ri(sE,di),ri(Qu,di),ri(Lc,iE),Lc.prototype.g=function(){return new XMLHttpRequest},Lc.prototype.i=function(){return{}},oE=new Lc;var aE=45e3,Ju={},am={};function uE(n,e,t){n.K=1,n.v=uf(js(e)),n.s=t,n.P=!0,_b(n,null)}function _b(n,e){n.F=Date.now(),sf(n),n.A=js(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),tl(t.i,"t",r),n.C=0,t=n.l.H,n.h=new mb,n.g=BM(n.l,t?e:null,!n.s),0<n.N&&(n.L=new KO(ni(n.La,n,n.g),n.N)),hb(n.S,n.g,"readystatechange",n.ib),e=n.H?Hv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Fc(),function EM(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",f=a.split("&"),m=0;m<f.length;m++){var v=f[m].split("=");if(1<v.length){var b=v[0];v=v[1];var T=b.split("_");l=2<=T.length&&"type"==T[1]?l+(b+"=")+v+"&":l+(b+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function nf(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function rf(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=TM(n,t),i==am){4==e&&(n.o=4,hi(14),r=!1),kc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Ju){n.o=4,hi(15),kc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}kc(n.j,n.m,i,null),cE(n,i)}nf(n)&&i!=am&&i!=Ju&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,hi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),pm(e),e.K=!0,hi(11))):(kc(n.j,n.m,t,"[Invalid Chunked Response]"),Oa(n),Xu(n))}function TM(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?am:(t=Number(e.substring(t,r)),isNaN(t)?Ju:(r+=1)+t>e.length?am:(e=e.substr(r,t),n.C=r+t,e))}function sf(n){n.V=Date.now()+n.O,lE(n,n.O)}function lE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ef(ni(n.gb,n),e)}function af(n){n.B&&(un.clearTimeout(n.B),n.B=null)}function Xu(n){0==n.l.G||n.I||FM(n.l,n)}function Oa(n){af(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Jv(n.T),eE(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function cE(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||fE(t.h,n)))if(!n.J&&fE(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;wE(t),pf(t)}Vb(t),hi(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=ef(ni(t.cb,t),6e3));if(1>=Bc(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Wc(t,11)}else if((n.J||t.g==n)&&wE(t),!xa(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.T=v[0],v=v[1],2==t.G)if("c"==v[0]){t.I=v[1],t.ka=v[2];const b=v[3];null!=b&&(t.ma=b,t.j.info("VER="+t.ma));const T=v[4];null!=T&&(t.Ca=T,t.j.info("SVER="+t.Ca));const x=v[5];null!=x&&"number"==typeof x&&0<x&&(t.J=r=1.5*x,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const G=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var a=r.h;a.g||-1==G.indexOf("spdy")&&-1==G.indexOf("quic")&&-1==G.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(cf(a,a.h),a.h=null))}if(r.D){const ue=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;ue&&(r.za=ue,ar(r.F,r.D,ue))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=UM(r,r.H?r.ka:null,r.V),l.J){Tb(r.h,l);var f=l,m=r.J;m&&f.setTimeout(m),f.B&&(af(f),sf(f)),r.g=l}else Lb(r);0<t.i.length&&gf(t)}else"stop"!=v[0]&&"close"!=v[0]||Wc(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Wc(t,7):vE(t):"noop"!=v[0]&&t.l&&t.l.wa(v),t.A=0)}Fc()}catch{}}function um(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(kv(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function ZO(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(kv(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function DM(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(kv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Ut=Oi.prototype).setTimeout=function(n){this.O=n},Ut.ib=function(n){n=n.target;const e=this.L;e&&3==to(n)?e.l():this.La(n)},Ut.La=function(n){try{if(n==this.g)e:{const b=to(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>b)&&(3!=b||Yg||this.g&&(this.h.h||this.g.fa()||yE(this.g)))){this.I||4!=b||7==e||Fc(),af(this);var t=this.g.aa();this.Y=t;t:if(nf(this)){var r=yE(this.g);n="";var i=r.length,a=4==to(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Oa(this),Xu(this);var l="";break t}this.h.i=new un.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function wM(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,b,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xa(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,hi(12),Oa(this),Xu(this);break e}kc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,cE(this,t)}this.P?(rf(this,b,l),Yg&&this.i&&3==b&&(hb(this.S,this.T,"tick",this.hb),this.T.start())):(kc(this.j,this.m,l,null),cE(this,l)),4==b&&Oa(this),this.i&&!this.I&&(4==b?FM(this.l,this):(this.i=!1,sf(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,hi(12)):(this.o=0,hi(13)),Oa(this),Xu(this)}}}catch{}},Ut.hb=function(){if(this.g){var n=to(this.g),e=this.g.fa();this.C<e.length&&(af(this),rf(this,n,e),this.i&&4!=n&&sf(this))}},Ut.cancel=function(){this.I=!0,Oa(this)},Ut.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function CM(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Fc(),hi(17)),Oa(this),this.o=2,Xu(this)):lE(this,this.V-n)};var lm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ko(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ko){this.h=void 0!==e?e:n.h,cm(this,n.j),this.s=n.s,this.g=n.g,dm(this,n.m),this.l=n.l,e=n.i;var t=new lf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),vb(this,t),this.o=n.o}else n&&(t=String(n).match(lm))?(this.h=!!e,cm(this,t[1]||"",!0),this.s=el(t[2]||""),this.g=el(t[3]||"",!0),dm(this,t[4]),this.l=el(t[5]||"",!0),vb(this,t[6]||"",!0),this.o=el(t[7]||"")):(this.h=!!e,this.i=new lf(null,this.h))}function js(n){return new ko(n)}function cm(n,e,t){n.j=t?el(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function dm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function vb(n,e,t){e instanceof lf?(n.i=e,function MM(n,e){e&&!n.j&&(Fo(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Ib(this,r),tl(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Vc(e,wb)),n.i=new lf(e,n.h))}function ar(n,e,t){n.i.set(e,t)}function uf(n){return ar(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function el(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Vc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,SM),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function SM(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ko.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Vc(e,dE,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Vc(e,dE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Vc(t,"/"==t.charAt(0)?AM:Eb,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Vc(t,Cb)),n.join("")};var dE=/[#\/\?@]/g,Eb=/[#\?:]/g,AM=/[#\?]/g,wb=/[#\?@]/g,Cb=/#/g;function lf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Fo(n){n.g||(n.g=new Map,n.h=0,n.i&&function yb(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ib(n,e){Fo(n),e=Uc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function fi(n,e){return Fo(n),e=Uc(n,e),n.g.has(e)}function tl(n,e,t){Ib(n,e),0<t.length&&(n.i=null,n.g.set(Uc(n,e),Fv(t)),n.h+=t.length)}function Uc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function xM(n){this.l=n||bb,n=un.PerformanceNavigationTiming?0<(n=un.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(un.g&&un.g.Ga&&un.g.Ga()&&un.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ut=lf.prototype).add=function(n,e){Fo(this),this.i=null,n=Uc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ut.forEach=function(n,e){Fo(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Ut.oa=function(){Fo(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Ut.W=function(n){Fo(this);let e=[];if("string"==typeof n)fi(this,n)&&(e=e.concat(this.g.get(Uc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ut.set=function(n,e){return Fo(this),this.i=null,fi(this,n=Uc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ut.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var bb=10;function hE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Bc(n){return n.h?1:n.g?n.g.size:0}function fE(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function cf(n,e){n.g?n.g.add(e):n.h=e}function Tb(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function pE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Fv(n.i)}function gE(){}function RM(){this.g=new gE}function PM(n,e,t){const r=t||"";try{um(n,function(i,a){let l=i;Wg(i)&&(l=im(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function df(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function $c(n){this.l=n.ac||null,this.j=n.jb||!1}function nl(n,e){Gr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=hf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xM.prototype.cancel=function(){if(this.i=pE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},gE.prototype.stringify=function(n){return un.JSON.stringify(n,void 0)},gE.prototype.parse=function(n){return un.JSON.parse(n,void 0)},ri($c,iE),$c.prototype.g=function(){return new nl(this.l,this.j)},$c.prototype.i=function(n){return function(){return n}}({}),ri(nl,Gr);var hf=0;function NM(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function jc(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ff(n)}function ff(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ut=nl.prototype).open=function(n,e){if(this.readyState!=hf)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ff(this)},Ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||un).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jc(this)),this.readyState=hf},Ut.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ff(this)),this.g&&(this.readyState=3,ff(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof un.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;NM(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Ut.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?jc(this):ff(this),3==this.readyState&&NM(this)}},Ut.Va=function(n){this.g&&(this.response=this.responseText=n,jc(this))},Ut.Ua=function(n){this.g&&(this.response=n,jc(this))},Ut.ga=function(){this.g&&jc(this)},Ut.setRequestHeader=function(n,e){this.v.append(n,e)},Ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(nl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Db=un.JSON.parse;function Zn(n){Gr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Sb,this.K=this.L=!1}ri(Zn,Gr);var Sb="",Ab=/^https?$/i,_E=["POST","PUT"];function Mb(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,OM(n),hm(n)}function OM(n){n.D||(n.D=!0,Lr(n,"complete"),Lr(n,"error"))}function xb(n){if(n.h&&typeof Nv<"u"&&(!n.C[1]||4!=to(n)||2!=n.aa()))if(n.v&&4==to(n))Xv(n.Ha,0,n);else if(Lr(n,"readystatechange"),4==to(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(lm)[1]||null;if(!i&&un.self&&un.self.location){var a=un.self.location.protocol;i=a.substr(0,a.length-1)}r=!Ab.test(i?i.toLowerCase():"")}t=r}if(t)Lr(n,"complete"),Lr(n,"success");else{n.m=6;try{var l=2<to(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",OM(n)}}finally{hm(n)}}}function hm(n,e){if(n.g){Rb(n);const t=n.g,r=n.C[0]?Ov:null;n.g=null,n.C=null,e||Lr(n,"ready");try{t.onreadystatechange=r}catch{}}}function Rb(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(un.clearTimeout(n.A),n.A=null)}function to(n){return n.g?n.g.readyState:0}function yE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Sb:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Pb(n){let e="";return jv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function fm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Pb(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ar(n,e,t))}function Hc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Nb(n){this.Ca=0,this.i=[],this.j=new sm,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Hc("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Hc("baseRetryDelayMs",5e3,n),this.bb=Hc("retryDelaySeedMs",1e4,n),this.$a=Hc("forwardChannelMaxRetries",2,n),this.ta=Hc("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new xM(n&&n.concurrentRequestLimit),this.Fa=new RM,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function vE(n){if(Ob(n),3==n.G){var e=n.U++,t=js(n.F);ar(t,"SID",n.I),ar(t,"RID",e),ar(t,"TYPE","terminate"),zc(n,t),(e=new Oi(n,n.j,e,void 0)).K=2,e.v=uf(js(t)),t=!1,un.navigator&&un.navigator.sendBeacon&&(t=un.navigator.sendBeacon(e.v.toString(),"")),!t&&un.Image&&((new Image).src=e.v,t=!0),t||(e.g=BM(e.l,null),e.g.da(e.v)),e.F=Date.now(),sf(e)}VM(n)}function pf(n){n.g&&(pm(n),n.g.cancel(),n.g=null)}function Ob(n){pf(n),n.u&&(un.clearTimeout(n.u),n.u=null),wE(n),n.h.cancel(),n.m&&("number"==typeof n.m&&un.clearTimeout(n.m),n.m=null)}function gf(n){hE(n.h)||n.m||(n.m=!0,cb(n.Ja,n),n.C=0)}function EE(n,e){var t;t=e?e.m:n.U++;const r=js(n.F);ar(r,"SID",n.I),ar(r,"RID",t),ar(r,"AID",n.T),zc(n,r),n.o&&n.s&&fm(r,n.o,n.s),t=new Oi(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Fb(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),cf(n.h,t),uE(t,r,e)}function zc(n,e){n.ia&&jv(n.ia,function(t,r){ar(e,r,t)}),n.l&&um({},function(t,r){ar(e,r,t)})}function Fb(n,e,t){t=Math.min(n.i.length,t);var r=n.l?ni(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let f=!0;for(let m=0;m<t;m++){let v=i[m].h;const b=i[m].g;if(v-=a,0>v)a=Math.max(0,i[m].h-100),f=!1;else try{PM(b,l,"req"+v+"_")}catch{r&&r(b)}}if(f){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Lb(n){n.g||n.u||(n.Z=1,cb(n.Ia,n),n.A=0)}function Vb(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=ef(ni(n.Ia,n),LM(n,n.A)),n.A++,0))}function pm(n){null!=n.B&&(un.clearTimeout(n.B),n.B=null)}function kM(n){n.g=new Oi(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=js(n.sa);ar(e,"RID","rpc"),ar(e,"SID",n.I),ar(e,"CI",n.L?"0":"1"),ar(e,"AID",n.T),ar(e,"TYPE","xmlhttp"),zc(n,e),n.o&&n.s&&fm(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=uf(js(e)),t.s=null,t.P=!0,_b(t,n)}function wE(n){null!=n.v&&(un.clearTimeout(n.v),n.v=null)}function FM(n,e){var t=null;if(n.g==e){wE(n),pm(n),n.g=null;var r=2}else{if(!fE(n.h,e))return;t=e.D,Tb(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Lr(r=Na(),new rE(r,t)),gf(n)}else Lb(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function kb(n,e){return!(Bc(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=ef(ni(n.Ja,n,e),LM(n,n.C)),n.C++,0)))}(n,e)||2==r&&Vb(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Wc(n,5);break;case 4:Wc(n,10);break;case 3:Wc(n,6);break;default:Wc(n,2)}}function LM(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Wc(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=ni(n.kb,n);t||(t=new ko("//www.google.com/images/cleardot.gif"),un.location&&"http"==un.location.protocol||cm(t,"https"),uf(t)),function mE(n,e){const t=new sm;if(un.Image){const r=new Image;r.onload=Aa(df,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Aa(df,t,r,"TestLoadImage: error",!1,e),r.onabort=Aa(df,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Aa(df,t,r,"TestLoadImage: timeout",!1,e),un.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else hi(2);n.G=0,n.l&&n.l.va(e),VM(n),Ob(n)}function VM(n){if(n.G=0,n.la=[],n.l){const e=pE(n.h);(0!=e.length||0!=n.i.length)&&(Lv(n.la,e),Lv(n.la,n.i),n.h.i.length=0,Fv(n.i),n.i.length=0),n.l.ua()}}function UM(n,e,t){var r=t instanceof ko?js(t):new ko(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),dm(r,r.m);else{var i=un.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new ko(null,void 0);r&&cm(a,r),e&&(a.g=e),i&&dm(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&ar(r,t,e),ar(r,"VER",n.ma),zc(n,r),r}function BM(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Zn(t&&n.Da&&!n.ra?new $c({jb:!0}):n.ra)).Ka(n.H),e}function mf(){}function CE(){if(Ra&&!(10<=Number(gM)))throw Error("Environmental error: no available transport.")}function ki(n,e){Gr.call(this),this.g=new Nb(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!xa(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xa(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new rl(this)}function _f(n){sE.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function IE(){Qu.call(this),this.status=1}function rl(n){this.g=n}(Ut=Zn.prototype).Ka=function(n){this.L=n},Ut.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():oE.g(),this.C=function pb(n){return n.h||(n.h=n.i())}(this.u?this.u:oE),this.g.onreadystatechange=ni(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Mb(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=un.FormData&&n instanceof un.FormData,!(0<=qI(_E,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Rb(this),0<this.B&&((this.K=function QO(n){return Ra&&function pM(){return function ZI(n){var e=fM;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=KI(String(Qg)).split("."),t=KI("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Kg(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Kg(0==i[2].length,0==a[2].length)||Kg(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ni(this.qa,this)):this.A=Xv(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Mb(this,a)}},Ut.qa=function(){typeof Nv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Lr(this,"timeout"),this.abort(8))},Ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Lr(this,"complete"),Lr(this,"abort"),hm(this))},Ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hm(this,!0)),Zn.X.M.call(this)},Ut.Ha=function(){this.s||(this.F||this.v||this.l?xb(this):this.fb())},Ut.fb=function(){xb(this)},Ut.aa=function(){try{return 2<to(this)?this.g.status:-1}catch{return-1}},Ut.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ut.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Db(e)}},Ut.Ea=function(){return this.m},Ut.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ut=Nb.prototype).ma=8,Ut.G=1,Ut.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Oi(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=Hv(a),nb(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Fb(this,i,e),ar(t=js(this.F),"RID",n),ar(t,"CVER",22),this.D&&ar(t,"X-HTTP-Session-Id",this.D),zc(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(Pb(a)))+"&"+e:this.o&&fm(t,this.o,a)),cf(this.h,i),this.Ya&&ar(t,"TYPE","init"),this.O?(ar(t,"$req",e),ar(t,"SID","null"),i.Z=!0,uE(i,t,null)):uE(i,t,e),this.G=2}}else 3==this.G&&(n?EE(this,n):0==this.i.length||hE(this.h)||EE(this))},Ut.Ia=function(){if(this.u=null,kM(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=ef(ni(this.eb,this),n)}},Ut.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,hi(10),pf(this),kM(this))},Ut.cb=function(){null!=this.v&&(this.v=null,pf(this),Vb(this),hi(19))},Ut.kb=function(n){n?(this.j.info("Successfully pinged google.com"),hi(2)):(this.j.info("Failed to ping google.com"),hi(1))},(Ut=mf.prototype).xa=function(){},Ut.wa=function(){},Ut.va=function(){},Ut.ua=function(){},Ut.Ra=function(){},CE.prototype.g=function(n,e){return new ki(n,e)},ri(ki,Gr),ki.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;hi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=UM(n,null,n.V),gf(n)},ki.prototype.close=function(){vE(this.g)},ki.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=im(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&gf(e)},ki.prototype.M=function(){this.g.l=null,delete this.j,vE(this.g),delete this.g,ki.X.M.call(this)},ri(_f,sE),ri(IE,Qu),ri(rl,mf),rl.prototype.xa=function(){Lr(this.g,"a")},rl.prototype.wa=function(n){Lr(this.g,new _f(n))},rl.prototype.va=function(n){Lr(this.g,new IE)},rl.prototype.ua=function(){Lr(this.g,"b")},CE.prototype.createWebChannel=CE.prototype.g,ki.prototype.send=ki.prototype.u,ki.prototype.open=ki.prototype.m,ki.prototype.close=ki.prototype.close,om.NO_ERROR=0,om.TIMEOUT=8,om.HTTP_ERROR=6,bM.COMPLETE="complete",gb.EventType=tf,tf.OPEN="a",tf.CLOSE="b",tf.ERROR="c",tf.MESSAGE="d",Gr.prototype.listen=Gr.prototype.N,Zn.prototype.listenOnce=Zn.prototype.O,Zn.prototype.getLastError=Zn.prototype.Oa,Zn.prototype.getLastErrorCode=Zn.prototype.Ea,Zn.prototype.getStatus=Zn.prototype.aa,Zn.prototype.getResponseJson=Zn.prototype.Sa,Zn.prototype.getResponseText=Zn.prototype.fa,Zn.prototype.send=Zn.prototype.da,Zn.prototype.setWithCredentials=Zn.prototype.Ka;var JO=Oo.createWebChannelTransport=function(){return new CE},bE=Oo.getStatEventTarget=function(){return Na()},gm=Oo.ErrorCode=om,$M=Oo.EventType=bM,Ub=Oo.Event=Yu,jM=Oo.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},XO=Oo.FetchXmlHttpFactory=$c,mm=Oo.WebChannel=gb,HM=Oo.XhrIo=Zn;const yf="@firebase/firestore";class qr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qr.UNAUTHENTICATED=new qr(null),qr.GOOGLE_CREDENTIALS=new qr("google-credentials-uid"),qr.FIRST_PARTY=new qr("first-party-uid"),qr.MOCK_USER=new qr("mock-user");let vf="9.20.0";const il=new Ki.Yd("@firebase/firestore");function Bb(){return il.logLevel}function ze(n,...e){if(il.logLevel<=Ki.in.DEBUG){const t=e.map(TE);il.debug(`Firestore (${vf}): ${n}`,...t)}}function Dr(n,...e){if(il.logLevel<=Ki.in.ERROR){const t=e.map(TE);il.error(`Firestore (${vf}): ${n}`,...t)}}function Lo(n,...e){if(il.logLevel<=Ki.in.WARN){const t=e.map(TE);il.warn(`Firestore (${vf}): ${n}`,...t)}}function TE(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Tt(n="Unexpected state"){const e=`FIRESTORE (${vf}) INTERNAL ASSERTION FAILED: `+n;throw Dr(e),new Error(e)}function Bt(n,e){n||Tt()}function rt(n,e){return n}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends J.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Zi{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(qr.UNAUTHENTICATED))}shutdown(){}}class DE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class GM{constructor(e){this.t=e,this.currentUser=qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Vr,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const v=l;e.enqueueRetryable((0,Ce.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Vr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Bt("string"==typeof r.accessToken),new Zi(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Bt(null===e||"string"==typeof e),new qr(e)}}class qM{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=qr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class SE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new qM(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(qr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $b{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.T;return this.T=a.token,ze("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Bt("string"==typeof t.token),this.T=t.token,new AE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function jb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class ME{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=jb(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function ln(n,e){return n<e?-1:n>e?1:0}function sl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Hb(n){return n+"\0"}class Xn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ue(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ue(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ue(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xn.fromMillis(Date.now())}static fromDate(e){return Xn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Xn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ln(this.nanoseconds,e.nanoseconds):ln(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new Xn(0,0))}static max(){return new Mt(new Xn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Gc{constructor(e,t,r){void 0===t?t=0:t>e.length&&Tt(),void 0===r?r=e.length-t:r>e.length-t&&Tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Gc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class An extends Gc{construct(e,t,r){return new An(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new An(t)}static emptyPath(){return new An([])}}const Vo=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vr extends Gc{construct(e,t,r){return new vr(e,t,r)}static isValidIdentifier(e){return Vo.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ue(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Ue(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Ue(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new Ue(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vr(t)}static emptyPath(){return new vr([])}}class gt{constructor(e){this.path=e}static fromPath(e){return new gt(An.fromString(e))}static fromName(e){return new gt(An.fromString(e).popFirst(5))}static empty(){return new gt(An.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===An.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return An.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new gt(new An(e.slice()))}}class _m{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function xE(n){return n.fields.find(e=>2===e.kind)}function ol(n){return n.fields.filter(e=>2!==e.kind)}_m.UNKNOWN_ID=-1;class Ef{constructor(e,t){this.fieldPath=e,this.kind=t}}class qc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new qc(0,_s.min())}}function zb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Mt.fromTimestamp(1e9===r?new Xn(t+1,0):new Xn(t,r));return new _s(i,gt.empty(),e)}function RE(n){return new _s(n.readTime,n.key,-1)}class _s{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _s(Mt.min(),gt.empty(),-1)}static max(){return new _s(Mt.max(),gt.empty(),-1)}}function wf(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=gt.comparator(n.documentKey,e.documentKey),0!==t?t:ln(n.largestBatchId,e.largestBatchId))}const PE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Uo(n){return ym.apply(this,arguments)}function ym(){return ym=(0,Ce.Z)(function*(n){if(n.code!==ve.FAILED_PRECONDITION||n.message!==PE)throw n;ze("LocalStore","Unexpectedly lost primary lease")}),ym.apply(this,arguments)}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let i=0,a=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++a,l&&a===i&&t()},m=>r(m))}),l=!0,a===i&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(i=>i?ce.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ce((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(b=>{l[v]=b,++f,f===a&&r(l)},b=>i(b))}})}static doWhile(e,t){return new ce((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class al{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new Vr,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new Cf(e,t.error)):this.R.resolve()},this.transaction.onerror=r=>{const i=Kb(r.target.error);this.R.reject(new Cf(e,i))}}static open(e,t,r,i){try{return new al(t,e.transaction(i,r))}catch(a){throw new Cf(t,a)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Gb(t)}}class Fi{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Fi.S((0,J.z$)())&&Dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ze("SimpleDb","Removing database:",e),ul(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,J.hl)())return!1;if(Fi.C())return!0;const e=(0,J.z$)(),t=Fi.S(e),r=0<t&&t<10,i=Fi.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static O(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Ce.Z)(function*(){return t.db||(ze("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Cf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new Ue(ve.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ue(ve.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Cf(e,f))},a.onupgradeneeded=l=>{ze("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.M(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{ze("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ce.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.$(e);const m=al.open(a.db,e,l?"readonly":"readwrite",r),v=i(m).next(b=>(m.P(),b)).catch(b=>(m.abort(b),ce.reject(b))).toPromise();return v.catch(()=>{}),yield m.v,v}catch(m){const v=m,b="FirebaseError"!==v.name&&f<3;if(ze("SimpleDb","Transaction failed with error:",v.message,"Retrying:",b),a.close(),!b)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Wb{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return ul(this.L.delete())}}class Cf extends Ue{constructor(e,t){super(ve.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Bo(n){return"IndexedDbTransactionError"===n.name}class Gb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ze("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ul(r)}add(e){return ze("SimpleDb","ADD",this.store.name,e,e),ul(this.store.add(e))}get(e){return ul(this.store.get(e)).next(t=>(void 0===t&&(t=null),ze("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ze("SimpleDb","DELETE",this.store.name,e),ul(this.store.delete(e))}count(){return ze("SimpleDb","COUNT",this.store.name),ul(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(l,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ce((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){ze("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,l,f)=>f.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}X(e){const t=this.cursor({});return new ce((r,i)=>{t.onerror=a=>{const l=Kb(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}W(e,t){const r=[];return new ce((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const m=new Wb(f),v=t(f.primaryKey,f.value,m);if(v instanceof ce){const b=v.catch(T=>(m.done(),ce.reject(T)));r.push(b)}m.isDone?i():null===m.K?f.continue():f.continue(m.K)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ul(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Kb(r.target.error);t(i)}})}let qb=!1;function Kb(n){const e=Fi.S((0,J.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qb||(qb=!0,setTimeout(()=>{throw r},0)),r}}return n}class rk{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;ze("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ce.Z)(function*(){t.task=null;try{ze("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Bo(r)?ze("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Uo(r)}yield t.et(6e4)}))}}class Zb{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ce.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return ce.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return ze("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(f=>{i-=f,r.add(l)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,a)).next(f=>(ze("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=RE(a);wf(l,r)>0&&(r=l)}),new _s(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Yi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function If(n){return null==n}function bf(n){return 0===n&&1/n==-1/0}function ZM(n){return"number"==typeof n&&Number.isInteger(n)&&!bf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Li(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=YM(e)),e=ik(n.get(t),e);return YM(e)}function ik(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function YM(n){return n+"\x01\x01"}function $o(n){const e=n.length;if(Bt(e>=2),2===e)return Bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),An.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&Tt(),n.charAt(l+1)){case"\x01":const f=n.substring(a,l);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:Tt()}a=l+2}return new An(r)}const Yb=["userId","batchId"];function ll(n,e){return[n,Li(e)]}function Qb(n,e,t){return[n,Li(e),t]}const QM={},Jb=["prefixPath","collectionGroup","readTime","documentId"],cl=["prefixPath","collectionGroup","documentId"],Xb=["collectionGroup","readTime","prefixPath","documentId"],OE=["canonicalId","targetId"],kE=["targetId","path"],JM=["path","targetId"],FE=["collectionId","parent"],LE=["indexId","uid"],vm=["uid","sequenceNumber"],sk=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ok=["indexId","uid","orderedDocumentKey"],ak=["userId","collectionPath","documentId"],uk=["userId","collectionPath","largestBatchId"],eT=["userId","collectionGroup","largestBatchId"],tT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],XM=[...tT,"documentOverlays"],nT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rT=nT,iT=[...rT,"indexConfiguration","indexState","indexEntries"];class Em extends NE{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function Ur(n,e){const t=rt(n);return Fi.O(t.at,e)}function sT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function dl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function VE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ur{constructor(e,t){this.comparator=e,this.root=t||Kr.EMPTY}insert(e,t){return new ur(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kr.BLACK,null,null))}remove(e){return new ur(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new UE(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new UE(this.root,e,this.comparator,!1)}getReverseIterator(){return new UE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new UE(this.root,e,this.comparator,!0)}}class UE{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Kr.RED,this.left=i??Kr.EMPTY,this.right=a??Kr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Kr(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Kr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Kr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Tt();const e=this.left.check();if(e!==this.right.check())throw Tt();return e+(this.isRed()?0:1)}}Kr.EMPTY=null,Kr.RED=!0,Kr.BLACK=!1,Kr.EMPTY=new class{constructor(){this.size=0}get key(){throw Tt()}get value(){throw Tt()}get color(){throw Tt()}get left(){throw Tt()}get right(){throw Tt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Kr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jn{constructor(e){this.comparator=e,this.data=new ur(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new oT(this.data.getIterator())}getIteratorFrom(e){return new oT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class oT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Kc(n){return n.hasNext()?n.getNext():void 0}class Qi{constructor(e){this.fields=e,e.sort(vr.comparator)}static empty(){return new Qi([])}unionWith(e){let t=new jn(vr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Qi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class lk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new lk("Invalid base64 string: "+i):i}}(e);return new Br(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Br(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ln(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Br.EMPTY_BYTE_STRING=new Br("");const tx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hl(n){if(Bt(!!n),"string"==typeof n){let e=0;const t=tx.exec(n);if(Bt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Sr(n.seconds),nanos:Sr(n.nanos)}}function Sr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Zc(n){return"string"==typeof n?Br.fromBase64String(n):Br.fromUint8Array(n)}function aT(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function nx(n){const e=n.mapValue.fields.__previous_value__;return aT(e)?nx(e):e}function Tf(n){const e=hl(n.mapValue.fields.__local_write_time__.timestampValue);return new Xn(e.seconds,e.nanos)}class ck{constructor(e,t,r,i,a,l,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class fl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new fl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof fl&&e.projectId===this.projectId&&e.database===this.database}}const pl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},BE={nullValue:"NULL_VALUE"};function Yc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?aT(n)?4:q(n)?9007199254740991:10:Tt()}function jo(n,e){if(n===e)return!0;const t=Yc(n);if(t!==Yc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tf(n).isEqual(Tf(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=hl(r.timestampValue),l=hl(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Zc(n.bytesValue).isEqual(Zc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Sr(r.geoPointValue.latitude)===Sr(i.geoPointValue.latitude)&&Sr(r.geoPointValue.longitude)===Sr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Sr(r.integerValue)===Sr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Sr(r.doubleValue),l=Sr(i.doubleValue);return a===l?bf(a)===bf(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return sl(n.arrayValue.values||[],e.arrayValue.values||[],jo);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(sT(a)!==sT(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===l[f]||!jo(a[f],l[f])))return!1;return!0}(n,e);default:return Tt()}var i}function s(n,e){return void 0!==(n.values||[]).find(t=>jo(t,e))}function o(n,e){if(n===e)return 0;const t=Yc(n),r=Yc(e);if(t!==r)return ln(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ln(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Sr(i.integerValue||i.doubleValue),f=Sr(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return u(n.timestampValue,e.timestampValue);case 4:return u(Tf(n),Tf(e));case 5:return ln(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Zc(i),f=Zc(a);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),f=a.split("/");for(let m=0;m<l.length&&m<f.length;m++){const v=ln(l[m],f[m]);if(0!==v)return v}return ln(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=ln(Sr(i.latitude),Sr(a.latitude));return 0!==l?l:ln(Sr(i.longitude),Sr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],f=a.values||[];for(let m=0;m<l.length&&m<f.length;++m){const v=o(l[m],f[m]);if(v)return v}return ln(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===pl.mapValue&&a===pl.mapValue)return 0;if(i===pl.mapValue)return 1;if(a===pl.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),m=a.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let b=0;b<f.length&&b<v.length;++b){const T=ln(f[b],v[b]);if(0!==T)return T;const x=o(l[f[b]],m[v[b]]);if(0!==x)return x}return ln(f.length,v.length)}(n.mapValue,e.mapValue);default:throw Tt()}}function u(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ln(n,e);const t=hl(n),r=hl(e),i=ln(t.seconds,r.seconds);return 0!==i?i:ln(t.nanos,r.nanos)}function c(n){return h(n)}function h(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=hl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Zc(n.bytesValue).toBase64():"referenceValue"in n?gt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=h(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const f of i)l?l=!1:a+=",",a+=`${f}:${h(r.fields[f])}`;return a+"}"}(n.mapValue):Tt();var e}function g(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function y(n){return!!n&&"integerValue"in n}function C(n){return!!n&&"arrayValue"in n}function I(n){return!!n&&"nullValue"in n}function D(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function R(n){return!!n&&"mapValue"in n}function F(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return dl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=F(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=F(n.arrayValue.values[t]);return e}return Object.assign({},n)}function q(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function ne(n){return"nullValue"in n?BE:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?g(fl.empty(),gt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Tt()}function Pe(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?g(fl.empty(),gt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?pl:Tt()}function Ye(n,e){const t=o(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ct(n,e){const t=o(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class dt{constructor(e){this.value=e}static empty(){return new dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!R(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=F(t)}setAll(e){let t=vr.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=F(l):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());R(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];R(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){dl(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new dt(F(this.value))}}function Gt(n){const e=[];return dl(n.fields,(t,r)=>{const i=new vr([t]);if(R(r)){const a=Gt(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Qi(e)}class Se{constructor(e,t,r,i,a,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new Se(e,0,Mt.min(),Mt.min(),Mt.min(),dt.empty(),0)}static newFoundDocument(e,t,r,i){return new Se(e,1,t,Mt.min(),r,i,0)}static newNoDocument(e,t){return new Se(e,2,t,Mt.min(),Mt.min(),dt.empty(),0)}static newUnknownDocument(e,t){return new Se(e,3,t,Mt.min(),Mt.min(),dt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Mt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Se&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Se(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wt{constructor(e,t){this.position=e,this.inclusive=t}}function Fn(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?gt.comparator(gt.fromName(l.referenceValue),t.key):o(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function tr(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!jo(n.position[t],e.position[t]))return!1;return!0}class ys{constructor(e,t="asc"){this.field=e,this.dir=t}}function $E(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class wm{}class Cn extends wm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new O2(e,t,r):"array-contains"===t?new L2(e,r):"in"===t?new gk(e,r):"not-in"===t?new V2(e,r):"array-contains-any"===t?new U2(e,r):new Cn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new k2(e,r):new F2(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(o(t,this.value)):null!==t&&Yc(this.value)===Yc(t)&&this.matchesComparison(o(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Tt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class $n extends wm{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new $n(e,t)}matches(e){return ka(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ka(n){return"and"===n.op}function Df(n){return"or"===n.op}function Sf(n){return Cm(n)&&ka(n)}function Cm(n){for(const e of n.filters)if(e instanceof $n)return!1;return!0}function Af(n){if(n instanceof Cn)return n.field.canonicalString()+n.op.toString()+c(n.value);if(Sf(n))return n.filters.map(e=>Af(e)).join(",");{const e=n.filters.map(t=>Af(t)).join(",");return`${n.op}(${e})`}}function dk(n,e){return n instanceof Cn?(t=n,(r=e)instanceof Cn&&t.op===r.op&&t.field.isEqual(r.field)&&jo(t.value,r.value)):n instanceof $n?function(t,r){return r instanceof $n&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&dk(a,r.filters[l]),!0)}(n,e):void Tt();var t,r}function hk(n,e){const t=n.filters.concat(e);return $n.create(t,n.op)}function fk(n){return n instanceof Cn?`${(e=n).field.canonicalString()} ${e.op} ${c(e.value)}`:n instanceof $n?function(e){return e.op.toString()+" {"+e.getFilters().map(fk).join(" ,")+"}"}(n):"Filter";var e}class O2 extends Cn{constructor(e,t,r){super(e,t,r),this.key=gt.fromName(r.referenceValue)}matches(e){const t=gt.comparator(e.key,this.key);return this.matchesComparison(t)}}class k2 extends Cn{constructor(e,t){super(e,"in",t),this.keys=pk(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class F2 extends Cn{constructor(e,t){super(e,"not-in",t),this.keys=pk(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function pk(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>gt.fromName(r.referenceValue))}class L2 extends Cn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return C(t)&&s(t.arrayValue,this.value)}}class gk extends Cn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&s(this.value.arrayValue,t)}}class V2 extends Cn{constructor(e,t){super(e,"not-in",t)}matches(e){if(s(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!s(this.value.arrayValue,t)}}class U2 extends Cn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!C(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>s(this.value.arrayValue,r))}}class B2{constructor(e,t=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this.ft=null}}function rx(n,e=null,t=[],r=[],i=null,a=null,l=null){return new B2(n,e,t,r,i,a,l)}function Mf(n){const e=rt(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Af(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),If(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>c(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>c(r)).join(",")),e.ft=t}return e.ft}function jE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$E(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!dk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tr(n.startAt,e.startAt)&&tr(n.endAt,e.endAt)}function uT(n){return gt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function lT(n,e){return n.filters.filter(t=>t instanceof Cn&&t.field.isEqual(e))}function mk(n,e,t){let r=BE,i=!0;for(const a of lT(n,e)){let l=BE,f=!0;switch(a.op){case"<":case"<=":l=ne(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=BE}Ye({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Ye({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function _k(n,e,t){let r=pl,i=!0;for(const a of lT(n,e)){let l=pl,f=!0;switch(a.op){case">=":case">":l=Pe(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=pl}ct({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];ct({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class gl{constructor(e,t=null,r=[],i=[],a=null,l="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=m,this.dt=null,this.wt=null}}function yk(n,e,t,r,i,a,l,f){return new gl(n,e,t,r,i,a,l,f)}function Im(n){return new gl(n)}function vk(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function ix(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function cT(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function sx(n){return null!==n.collectionGroup}function xf(n){const e=rt(n);if(null===e.dt){e.dt=[];const t=cT(e),r=ix(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new ys(t)),e.dt.push(new ys(vr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.dt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new ys(vr.keyField(),a))}}}return e.dt}function Ji(n){const e=rt(n);if(!e.wt)if("F"===e.limitType)e.wt=rx(e.path,e.collectionGroup,xf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of xf(e))t.push(new ys(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Wt(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Wt(e.startAt.position,e.startAt.inclusive):null;e.wt=rx(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function ox(n,e){e.getFirstInequalityField(),cT(n);const t=n.filters.concat([e]);return new gl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function dT(n,e,t){return new gl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function HE(n,e){return jE(Ji(n),Ji(e))&&n.limitType===e.limitType}function Ek(n){return`${Mf(Ji(n))}|lt:${n.limitType}`}function ax(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>fk(r)).join(", ")}]`),If(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>c(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>c(r)).join(",")),`Target(${t})`}(Ji(n))}; limitType=${n.limitType})`}function zE(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):gt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of xf(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const f=Fn(i,a,l);return i.inclusive?f<=0:f<0}(t.startAt,xf(t),r)||t.endAt&&!function(i,a,l){const f=Fn(i,a,l);return i.inclusive?f>=0:f>0}(t.endAt,xf(t),r)));var t,r}function wk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ck(n){return(e,t)=>{let r=!1;for(const i of xf(n)){const a=$2(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function $2(n,e,t){const r=n.field.isKeyField()?gt.comparator(e.key,t.key):function(i,a,l){const f=a.data.field(i),m=l.data.field(i);return null!==f&&null!==m?o(f,m):Tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Tt()}}class Qc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){dl(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return VE(this.inner)}size(){return this.innerSize}}const j2=new ur(gt.comparator);function vs(){return j2}const Ik=new ur(gt.comparator);function WE(...n){let e=Ik;for(const t of n)e=e.insert(t.key,t);return e}function bk(n){let e=Ik;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Fa(){return GE()}function Tk(){return GE()}function GE(){return new Qc(n=>n.toString(),(n,e)=>n.isEqual(e))}const H2=new ur(gt.comparator),z2=new jn(gt.comparator);function mn(...n){let e=z2;for(const t of n)e=e.add(t);return e}const W2=new jn(ln);function hT(){return W2}function Dk(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bf(e)?"-0":e}}function Sk(n){return{integerValue:""+n}}function Ak(n,e){return ZM(e)?Sk(e):Dk(n,e)}class fT{constructor(){this._=void 0}}function G2(n,e,t){return n instanceof bm?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Rf?xk(n,e):n instanceof Pf?Rk(n,e):function(r,i){const a=Mk(r,i),l=Pk(a)+Pk(r._t);return y(a)&&y(r._t)?Sk(l):Dk(r.serializer,l)}(n,e)}function q2(n,e,t){return n instanceof Rf?xk(n,e):n instanceof Pf?Rk(n,e):t}function Mk(n,e){return n instanceof Tm?y(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class bm extends fT{}class Rf extends fT{constructor(e){super(),this.elements=e}}function xk(n,e){const t=Nk(e);for(const r of n.elements)t.some(i=>jo(i,r))||t.push(r);return{arrayValue:{values:t}}}class Pf extends fT{constructor(e){super(),this.elements=e}}function Rk(n,e){let t=Nk(e);for(const r of n.elements)t=t.filter(i=>!jo(i,r));return{arrayValue:{values:t}}}class Tm extends fT{constructor(e,t){super(),this.serializer=e,this._t=t}}function Pk(n){return Sr(n.integerValue||n.doubleValue)}function Nk(n){return C(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class qE{constructor(e,t){this.field=e,this.transform=t}}class Z2{constructor(e,t){this.version=e,this.transformResults=t}}class Er{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Er}static exists(e){return new Er(void 0,e)}static updateTime(e){return new Er(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class gT{}function Ok(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Sm(n.key,Er.none()):new Dm(n.key,n.data,Er.none());{const t=n.data,r=dt.empty();let i=new jn(vr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new ml(n.key,r,new Qi(i.toArray()),Er.none())}}function Y2(n,e,t){n instanceof Dm?function(r,i,a){const l=r.value.clone(),f=Lk(r.fieldTransforms,i,a.transformResults);l.setAll(f),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof ml?function(r,i,a){if(!pT(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Lk(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(Fk(r)),f.setAll(l),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function KE(n,e,t,r){return n instanceof Dm?function(i,a,l,f){if(!pT(i.precondition,a))return l;const m=i.value.clone(),v=Vk(i.fieldTransforms,f,a);return m.setAll(v),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof ml?function(i,a,l,f){if(!pT(i.precondition,a))return l;const m=Vk(i.fieldTransforms,f,a),v=a.data;return v.setAll(Fk(i)),v.setAll(m),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(l=t,pT(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function Q2(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Mk(r.transform,i||null);null!=a&&(null===t&&(t=dt.empty()),t.set(r.field,a))}return t||null}function kk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&sl(t,r,(i,a)=>function K2(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Rf&&r instanceof Rf||t instanceof Pf&&r instanceof Pf?sl(t.elements,r.elements,jo):t instanceof Tm&&r instanceof Tm?jo(t._t,r._t):t instanceof bm&&r instanceof bm);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Dm extends gT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ml extends gT{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Fk(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Lk(n,e,t){const r=new Map;Bt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,q2(l,f,t[i]))}return r}function Vk(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,G2(a,l,e))}return r}class Sm extends gT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ux extends gT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class lx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Y2(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=KE(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=KE(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Tk();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(i.key)?null:f;const m=Ok(l,f);null!==m&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(Mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mn())}isEqual(e){return this.batchId===e.batchId&&sl(this.mutations,e.mutations,(t,r)=>kk(t,r))&&sl(this.baseMutations,e.baseMutations,(t,r)=>kk(t,r))}}class cx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Bt(e.mutations.length===r.length);let i=H2;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new cx(e,t,r,i)}}class dx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class eB{constructor(e){this.count=e}}var Zr,Ln;function Uk(n){switch(n){default:return Tt();case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0}}function Bk(n){if(void 0===n)return Dr("GRPC error has no .code"),ve.UNKNOWN;switch(n){case Zr.OK:return ve.OK;case Zr.CANCELLED:return ve.CANCELLED;case Zr.UNKNOWN:return ve.UNKNOWN;case Zr.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case Zr.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case Zr.INTERNAL:return ve.INTERNAL;case Zr.UNAVAILABLE:return ve.UNAVAILABLE;case Zr.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case Zr.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case Zr.NOT_FOUND:return ve.NOT_FOUND;case Zr.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case Zr.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case Zr.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case Zr.ABORTED:return ve.ABORTED;case Zr.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case Zr.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case Zr.DATA_LOSS:return ve.DATA_LOSS;default:return Tt()}}(Ln=Zr||(Zr={}))[Ln.OK=0]="OK",Ln[Ln.CANCELLED=1]="CANCELLED",Ln[Ln.UNKNOWN=2]="UNKNOWN",Ln[Ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ln[Ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ln[Ln.NOT_FOUND=5]="NOT_FOUND",Ln[Ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ln[Ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ln[Ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ln[Ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ln[Ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ln[Ln.ABORTED=10]="ABORTED",Ln[Ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ln[Ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ln[Ln.INTERNAL=13]="INTERNAL",Ln[Ln.UNAVAILABLE=14]="UNAVAILABLE",Ln[Ln.DATA_LOSS=15]="DATA_LOSS";class fx{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return mT}static getOrCreateInstance(){return null===mT&&(mT=new fx),mT}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let mT=null;class ZE{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,YE.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ZE(Mt.min(),i,hT(),vs(),mn())}}class YE{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new YE(r,t,mn(),mn(),mn())}}class _T{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class $k{constructor(e,t){this.targetId=e,this.Et=t}}class jk{constructor(e,t,r=Br.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Hk{constructor(){this.At=0,this.Rt=Wk(),this.vt=Br.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return 0!==this.At}get St(){return this.Pt}Dt(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}Ct(){let e=mn(),t=mn(),r=mn();return this.Rt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Tt()}}),new YE(this.vt,this.bt,e,t,r)}xt(){this.Pt=!1,this.Rt=Wk()}Nt(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class tB{constructor(e){this.Ft=e,this.Bt=new Map,this.Lt=vs(),this.qt=zk(),this.Ut=new jn(ln)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}zt(e){this.forEachTarget(e,t=>{const r=this.jt(t);switch(e.state){case 0:this.Wt(t)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||this.removeTarget(t);break;case 3:this.Wt(t)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:this.Wt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:Tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.Wt(i)&&t(i)})}Jt(e){var t;const r=e.targetId,i=e.Et.count,a=this.Yt(r);if(a){const l=a.target;if(uT(l))if(0===i){const f=new gt(l.path);this.Qt(r,f,Se.newNoDocument(f,Mt.min()))}else Bt(1===i);else{const f=this.Zt(r);f!==i&&(this.Ht(r),this.Ut=this.Ut.add(r),null===(t=fx.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:f,existenceFilterCount:e.Et.count}))}}}Xt(e){const t=new Map;this.Bt.forEach((a,l)=>{const f=this.Yt(l);if(f){if(a.current&&uT(f.target)){const m=new gt(f.target.path);null!==this.Lt.get(m)||this.te(l,m)||this.Qt(l,m,Se.newNoDocument(m,e))}a.St&&(t.set(l,a.Ct()),a.xt())}});let r=mn();this.qt.forEach((a,l)=>{let f=!0;l.forEachWhile(m=>{const v=this.Yt(m);return!v||2===v.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.Lt.forEach((a,l)=>l.setReadTime(e));const i=new ZE(e,t,this.Ut,this.Lt,r);return this.Lt=vs(),this.qt=zk(),this.Ut=new jn(ln),i}Gt(e,t){if(!this.Wt(e))return;const r=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.Wt(e))return;const i=this.jt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Zt(e){const t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.jt(e).Ot()}jt(e){let t=this.Bt.get(e);return t||(t=new Hk,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new jn(ln),this.qt=this.qt.insert(e,t)),t}Wt(e){const t=null!==this.Yt(e);return t||ze("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}Ht(e){this.Bt.set(e,new Hk),this.Ft.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}function zk(){return new ur(gt.comparator)}function Wk(){return new ur(gt.comparator)}const nB={asc:"ASCENDING",desc:"DESCENDING"},rB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iB={and:"AND",or:"OR"};class sB{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Am(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gk(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function oB(n,e){return Am(n,e.toTimestamp())}function $r(n){return Bt(!!n),Mt.fromTimestamp(function(e){const t=hl(e);return new Xn(t.seconds,t.nanos)}(n))}function px(n,e){return(t=n,new An(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function qk(n){const e=An.fromString(n);return Bt(n1(e)),e}function QE(n,e){return px(n.databaseId,e.path)}function La(n,e){const t=qk(e);if(t.get(1)!==n.databaseId.projectId)throw new Ue(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ue(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new gt(Zk(t))}function gx(n,e){return px(n.databaseId,e)}function Kk(n){const e=qk(n);return 4===e.length?An.emptyPath():Zk(e)}function JE(n){return new An(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Zk(n){return Bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Yk(n,e,t){return{name:QE(n,e),fields:t.value.mapValue.fields}}function Qk(n,e,t){const r=La(n,e.name),i=$r(e.updateTime),a=e.createTime?$r(e.createTime):Mt.min(),l=new dt({mapValue:{fields:e.fields}}),f=Se.newFoundDocument(r,i,a,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function XE(n,e){let t;if(e instanceof Dm)t={update:Yk(n,e.key,e.value)};else if(e instanceof Sm)t={delete:QE(n,e.key)};else if(e instanceof ml)t={update:Yk(n,e.key,e.data),updateMask:pB(e.fieldMask)};else{if(!(e instanceof ux))return Tt();t={verify:QE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof bm)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Rf)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Pf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Tm)return{fieldPath:a.field.canonicalString(),increment:l._t};throw Tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:oB(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Tt()),t;var i}function mx(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Er.updateTime($r(i.updateTime)):void 0!==i.exists?Er.exists(i.exists):Er.none():Er.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let f=null;"setToServerValue"in l?(Bt("REQUEST_TIME"===l.setToServerValue),f=new bm):"appendMissingElements"in l?f=new Rf(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new Pf(l.removeAllFromArray.values||[]):"increment"in l?f=new Tm(a,l.increment):Tt();const m=vr.fromServerFormat(l.fieldPath);return new qE(m,f)}(n,i)):[];var i;if(e.update){const i=La(n,e.update.name),a=new dt({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Qi((e.updateMask.fieldPaths||[]).map(v=>vr.fromServerFormat(v)));return new ml(i,a,l,t,r)}return new Dm(i,a,t,r)}if(e.delete){const i=La(n,e.delete);return new Sm(i,t)}if(e.verify){const i=La(n,e.verify);return new ux(i,t)}return Tt()}function Jk(n,e){return{documents:[gx(n,e.path)]}}function _x(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=gx(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=gx(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return t1($n.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:Jc((b=v).field),direction:dB(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(v=e.limit,n.useProto3Json||If(v)?v:{value:v});var v,f,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function Xk(n){let e=Kk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Bt(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=function(b){const T=e1(b);return T instanceof $n&&Sf(T)?T.getFilters():[T]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(b=>{return new ys(Mm((T=b).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let f=null;t.limit&&(f=function(b){let T;return T="object"==typeof b?b.value:b,If(T)?null:T}(t.limit));let m=null;var b;t.startAt&&(m=new Wt((b=t.startAt).values||[],!!b.before));let v=null;return t.endAt&&(v=function(b){return new Wt(b.values||[],!b.before)}(t.endAt)),yk(e,i,l,a,f,"F",m,v)}function e1(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Mm(e.unaryFilter.field);return Cn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Mm(e.unaryFilter.field);return Cn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Mm(e.unaryFilter.field);return Cn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Mm(e.unaryFilter.field);return Cn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Tt()}}(n):void 0!==n.fieldFilter?Cn.create(Mm((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Tt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return $n.create(e.compositeFilter.filters.map(t=>e1(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Tt()}}(e.compositeFilter.op))}(n):Tt();var e}function dB(n){return nB[n]}function hB(n){return rB[n]}function fB(n){return iB[n]}function Jc(n){return{fieldPath:n.canonicalString()}}function Mm(n){return vr.fromServerFormat(n.fieldPath)}function t1(n){return n instanceof Cn?function(e){if("=="===e.op){if(D(e.value))return{unaryFilter:{field:Jc(e.field),op:"IS_NAN"}};if(I(e.value))return{unaryFilter:{field:Jc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(D(e.value))return{unaryFilter:{field:Jc(e.field),op:"IS_NOT_NAN"}};if(I(e.value))return{unaryFilter:{field:Jc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jc(e.field),op:hB(e.op),value:e.value}}}(n):n instanceof $n?function(e){const t=e.getFilters().map(r=>t1(r));return 1===t.length?t[0]:{compositeFilter:{op:fB(e.op),filters:t}}}(n):Tt()}function pB(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function n1(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Xc{constructor(e,t,r,i,a=Mt.min(),l=Mt.min(),f=Br.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f}withSequenceNumber(e){return new Xc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Xc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Xc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class r1{constructor(e){this.se=e}}function i1(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:yT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:QE(i=n.se,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Am(i,a.version.toTimestamp()),createTime:Am(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Nf(e.version)};else{if(!e.isUnknownDocument())return Tt();r.unknownDocument={path:t.path.toArray(),version:Nf(e.version)}}var i,a;return r}function yT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Nf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Of(n){const e=new Xn(n.seconds,n.nanoseconds);return Mt.fromTimestamp(e)}function kf(n,e){const t=(e.baseMutations||[]).map(a=>mx(n.se,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>mx(n.se,a)),i=Xn.fromMillis(e.localWriteTimeMs);return new lx(e.batchId,i,t,r)}function ew(n){const e=Of(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Of(n.lastLimboFreeSnapshotVersion):Mt.min();let r;var i;return void 0!==n.query.documents?(Bt(1===(i=n.query).documents.length),r=Ji(Im(Kk(i.documents[0])))):r=Ji(Xk(n.query)),new Xc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Br.fromBase64String(n.resumeToken))}function s1(n,e){const t=Nf(e.snapshotVersion),r=Nf(e.lastLimboFreeSnapshotVersion);let i;i=uT(e.target)?Jk(n.se,e.target):_x(n.se,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mf(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function yx(n){const e=Xk({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?dT(e,e.limit,"L"):e}function vx(n,e){return new dx(e.largestBatchId,mx(n.se,e.overlayMutation))}function o1(n,e){const t=e.path.lastSegment();return[n,Li(e.path.popLast()),t]}function a1(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Nf(r.readTime),documentKey:Li(r.documentKey.path),largestBatchId:r.largestBatchId}}class mB{getBundleMetadata(e,t){return u1(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Of(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return u1(e).put({bundleId:(r=t).id,createTime:Nf($r(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return l1(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:yx(i.bundledQuery),readTime:Of(i.readTime)};var i})}saveNamedQuery(e,t){return l1(e).put({name:(r=t).name,readTime:Nf($r(r.readTime)),bundledQuery:r.bundledQuery});var r}}function u1(n){return Ur(n,"bundles")}function l1(n){return Ur(n,"namedQueries")}class vT{constructor(e,t){this.serializer=e,this.userId=t}static ie(e,t){return new vT(e,t.uid||"")}getOverlay(e,t){return tw(e).get(o1(this.userId,t)).next(r=>r?vx(this.serializer,r):null)}getOverlays(e,t){const r=Fa();return ce.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const f=new dx(t,l);i.push(this.re(e,f))}),ce.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Li(l.getCollectionPath())));const a=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(tw(e).J("collectionPathOverlayIndex",f))}),ce.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Fa(),a=Li(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return tw(e).j("collectionPathOverlayIndex",l).next(f=>{for(const m of f){const v=vx(this.serializer,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Fa();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return tw(e).Z({index:"collectionGroupOverlayIndex",range:f},(m,v,b)=>{const T=vx(this.serializer,v);a.size()<i||T.largestBatchId===l?(a.set(T.getKey(),T),l=T.largestBatchId):b.done()}).next(()=>a)}re(e,t){return tw(e).put(function(r,i,a){const[l,f,m]=o1(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:XE(r.se,a.mutation)}}(this.serializer,this.userId,t))}}function tw(n){return Ur(n,"documentOverlays")}class Ff{constructor(){}oe(e,t){this.ue(e,t),t.ce()}ue(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(Sr(e.integerValue));else if("doubleValue"in e){const r=Sr(e.doubleValue);isNaN(r)?this.ae(t,13):(this.ae(t,15),bf(r)?t.he(0):t.he(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le(`${r.seconds||""}`),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(Zc(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ae(t,45),t.he(r.latitude||0),t.he(r.longitude||0)}else"mapValue"in e?q(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):Tt()}fe(e,t){this.ae(t,25),this.ye(e,t)}ye(e,t){t.le(e)}me(e,t){const r=e.fields||{};this.ae(t,55);for(const i of Object.keys(r))this.fe(i,t),this.ue(r[i],t)}ge(e,t){const r=e.values||[];this.ae(t,50);for(const i of r)this.ue(i,t)}_e(e,t){this.ae(t,37),gt.fromName(e).path.forEach(r=>{this.ae(t,60),this.ye(r,t)})}ae(e,t){e.he(t)}de(e){e.he(2)}}function _B(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function c1(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=_B(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Ff.pe=new Ff;class yB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Te(r.value),r=t.next();this.Ee()}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.ve()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Te(r);else if(r<2048)this.Te(960|r>>>6),this.Te(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Te(480|r>>>12),this.Te(128|63&r>>>6),this.Te(128|63&r);else{const i=t.codePointAt(0);this.Te(240|i>>>18),this.Te(128|63&i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i)}}this.Ee()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=t.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.ve()}Ve(e){const t=this.Se(e),r=c1(t);this.De(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ce(e){const t=this.Se(e),r=c1(t);this.De(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Se(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Te(e){const t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}Re(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(e){this.De(1),this.buffer[this.position++]=e}Oe(e){this.De(1),this.buffer[this.position++]=~e}De(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class vB{constructor(e){this.Me=e}we(e){this.Me.Ie(e)}le(e){this.Me.be(e)}he(e){this.Me.Ve(e)}ce(){this.Me.xe()}}class EB{constructor(e){this.Me=e}we(e){this.Me.Ae(e)}le(e){this.Me.Pe(e)}he(e){this.Me.Ce(e)}ce(){this.Me.ke()}}class nw{constructor(){this.Me=new yB,this.Fe=new vB(this.Me),this.Be=new EB(this.Me)}seed(e){this.Me.seed(e)}Le(e){return 0===e?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}class Lf{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}qe(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Lf(this.indexId,this.documentKey,this.arrayValue,r)}}function ed(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=d1(n.arrayValue,e.arrayValue),0!==t?t:(t=d1(n.directionalValue,e.directionalValue),0!==t?t:gt.comparator(n.documentKey,e.documentKey)))}function d1(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class wB{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.Ke=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ge=r:this.Ke.push(r)}}Qe(e){Bt(e.collectionGroup===this.collectionId);const t=xE(e);if(void 0!==t&&!this.ze(t))return!1;const r=ol(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ge){const l=r[i];if(!this.je(this.Ge,l)||!this.We(this.Ue[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ue.length||!this.We(this.Ue[a++],l))return!1}return!0}ze(e){for(const t of this.Ke)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function h1(n){var e,t;if(Bt(n instanceof Cn||n instanceof $n),n instanceof Cn){if(n instanceof gk){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>Cn.create(n.field,"==",a)))||[];return $n.create(i,"or")}return n}const r=n.filters.map(i=>h1(i));return $n.create(r,n.op)}function CB(n){if(0===n.getFilters().length)return[];const e=Cx(h1(n));return Bt(f1(e)),Ex(e)||wx(e)?[e]:e.getFilters()}function Ex(n){return n instanceof Cn}function wx(n){return n instanceof $n&&Sf(n)}function f1(n){return Ex(n)||wx(n)||function(e){if(e instanceof $n&&Df(e)){for(const t of e.getFilters())if(!Ex(t)&&!wx(t))return!1;return!0}return!1}(n)}function Cx(n){if(Bt(n instanceof Cn||n instanceof $n),n instanceof Cn)return n;if(1===n.filters.length)return Cx(n.filters[0]);const e=n.filters.map(r=>Cx(r));let t=$n.create(e,n.op);return t=ET(t),f1(t)?t:(Bt(t instanceof $n),Bt(ka(t)),Bt(t.filters.length>1),t.filters.reduce((r,i)=>Ix(r,i)))}function Ix(n,e){let t;return Bt(n instanceof Cn||n instanceof $n),Bt(e instanceof Cn||e instanceof $n),t=n instanceof Cn?e instanceof Cn?$n.create([n,e],"and"):p1(n,e):e instanceof Cn?p1(e,n):function(r,i){if(Bt(r.filters.length>0&&i.filters.length>0),ka(r)&&ka(i))return hk(r,i.getFilters());const a=Df(r)?r:i,l=Df(r)?i:r,f=a.filters.map(m=>Ix(m,l));return $n.create(f,"or")}(n,e),ET(t)}function p1(n,e){if(ka(e))return hk(e,n.getFilters());{const t=e.filters.map(r=>Ix(n,r));return $n.create(t,"or")}}function ET(n){if(Bt(n instanceof Cn||n instanceof $n),n instanceof Cn)return n;const e=n.getFilters();if(1===e.length)return ET(e[0]);if(Cm(n))return n;const t=e.map(i=>ET(i)),r=[];return t.forEach(i=>{i instanceof Cn?r.push(i):i instanceof $n&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:$n.create(r,n.op)}class IB{constructor(){this.He=new bx}addToCollectionParentIndex(e,t){return this.He.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.He.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(_s.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class bx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new jn(An.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jn(An.comparator)).toArray()}}const wT=new Uint8Array(0);class bB{constructor(e,t){this.user=e,this.databaseId=t,this.Je=new bx,this.Ye=new Qc(r=>Mf(r),(r,i)=>jE(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Je.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Je.add(t)});const a={collectionId:r,parent:Li(i)};return g1(e).put(a)}return ce.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Hb(t),""],!1,!0);return g1(e).j(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push($o(l.parent))}return r})}addFieldIndex(e,t){const r=CT(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=iw(e);return a.next(f=>{l.put(a1(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=CT(e),i=iw(e),a=rw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=rw(e);let i=!0;const a=new Map;return ce.forEach(this.Ze(t),l=>this.Xe(e,l).next(f=>{i&&(i=!!f),a.set(l,f)})).next(()=>{if(i){let l=mn();const f=[];return ce.forEach(a,(m,v)=>{var b;ze("IndexedDbIndexManager",`Using index ${b=m,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Dt=>`${Dt.fieldPath}:${Dt.kind}`).join(",")}`} to execute ${Mf(t)}`);const T=function(Dt,$t){const cn=xE($t);if(void 0===cn)return null;for(const En of lT(Dt,cn.fieldPath))switch(En.op){case"array-contains-any":return En.value.arrayValue.values||[];case"array-contains":return[En.value]}return null}(v,m),x=function(Dt,$t){const cn=new Map;for(const En of ol($t))for(const ii of lT(Dt,En.fieldPath))switch(ii.op){case"==":case"in":cn.set(En.fieldPath.canonicalString(),ii.value);break;case"not-in":case"!=":return cn.set(En.fieldPath.canonicalString(),ii.value),Array.from(cn.values())}return null}(v,m),V=function(Dt,$t){const cn=[];let En=!0;for(const ii of ol($t)){const Is=0===ii.kind?mk(Dt,ii.fieldPath,Dt.startAt):_k(Dt,ii.fieldPath,Dt.startAt);cn.push(Is.value),En&&(En=Is.inclusive)}return new Wt(cn,En)}(v,m),G=function(Dt,$t){const cn=[];let En=!0;for(const ii of ol($t)){const Is=0===ii.kind?_k(Dt,ii.fieldPath,Dt.endAt):mk(Dt,ii.fieldPath,Dt.endAt);cn.push(Is.value),En&&(En=Is.inclusive)}return new Wt(cn,En)}(v,m),ue=this.tn(m,v,V),Ie=this.tn(m,v,G),It=this.en(m,v,x),xt=this.nn(m.indexId,T,ue,V.inclusive,Ie,G.inclusive,It);return ce.forEach(xt,Dt=>r.H(Dt,t.limit).next($t=>{$t.forEach(cn=>{const En=gt.fromSegments(cn.documentKey);l.has(En)||(l=l.add(En),f.push(En))})}))}).next(()=>f)}return ce.resolve(null)})}Ze(e){let t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:CB($n.create(e.filters,"and")).map(r=>rx(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Ye.set(e,t),t)}nn(e,t,r,i,a,l,f){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),b=[];for(let T=0;T<m;++T){const x=t?this.sn(t[T/v]):wT,V=this.rn(e,x,r[T%v],i),G=this.on(e,x,a[T%v],l),ue=f.map(Ie=>this.rn(e,x,Ie,!0));b.push(...this.createRange(V,G,ue))}return b}rn(e,t,r,i){const a=new Lf(e,gt.empty(),t,r);return i?a:a.qe()}on(e,t,r,i){const a=new Lf(e,gt.empty(),t,r);return i?a.qe():a}Xe(e,t){const r=new wB(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const f of a)r.Qe(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;const i=this.Ze(t);return ce.forEach(i,a=>this.Xe(e,a).next(l=>{l?0!==r&&l.fields.length<function(f){let m=new jn(vr.comparator),v=!1;for(const b of f.filters)for(const T of b.getFlattenedFilters())T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?v=!0:m=m.add(T.field));for(const b of f.orderBy)b.field.isKeyField()||(m=m.add(b.field));return m.size+(v?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}un(e,t){const r=new nw;for(const i of ol(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Le(i.kind);Ff.pe.oe(a,l)}return r.$e()}sn(e){const t=new nw;return Ff.pe.oe(e,t.Le(0)),t.$e()}cn(e,t){const r=new nw;return Ff.pe.oe(g(this.databaseId,t),r.Le(function(i){const a=ol(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}en(e,t,r){if(null===r)return[];let i=[];i.push(new nw);let a=0;for(const l of ol(e)){const f=r[a++];for(const m of i)if(this.an(t,l.fieldPath)&&C(f))i=this.hn(i,l,f);else{const v=m.Le(l.kind);Ff.pe.oe(f,v)}}return this.ln(i)}tn(e,t,r){return this.en(e,t,r.position)}ln(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}hn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const m=new nw;m.seed(f.$e()),Ff.pe.oe(l,m.Le(t.kind)),a.push(m)}return a}an(e,t){return!!e.filters.find(r=>r instanceof Cn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=CT(e),i=iw(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const l=[];return ce.forEach(a,f=>i.get([f.indexId,this.uid]).next(m=>{l.push(function(v,b){const T=b?new qc(b.sequenceNumber,new _s(Of(b.readTime),new gt($o(b.documentKey)),b.largestBatchId)):qc.empty(),x=v.fields.map(([V,G])=>new Ef(vr.fromServerFormat(V),G));return new _m(v.indexId,v.collectionGroup,x,T)}(f,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:ln(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=CT(e),a=iw(e);return this.fn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ce.forEach(f,m=>a.put(a1(m.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?ce.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ce.forEach(f,m=>this.dn(e,i,m).next(v=>{const b=this.wn(a,m);return v.isEqual(b)?ce.resolve():this._n(e,a,m,v,b)}))))})}mn(e,t,r,i){return rw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.cn(r,t.key),documentKey:t.key.path.toArray()})}gn(e,t,r,i){return rw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.cn(r,t.key),t.key.path.toArray()])}dn(e,t,r){const i=rw(e);let a=new jn(ed);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.cn(r,t)])},(l,f)=>{a=a.add(new Lf(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}wn(e,t){let r=new jn(ed);const i=this.un(t,e);if(null==i)return r;const a=xE(t);if(null!=a){const l=e.data.field(a.fieldPath);if(C(l))for(const f of l.arrayValue.values||[])r=r.add(new Lf(t.indexId,e.key,this.sn(f),i))}else r=r.add(new Lf(t.indexId,e.key,wT,i));return r}_n(e,t,r,i,a){ze("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,m,v,b,T){const x=f.getIterator(),V=m.getIterator();let G=Kc(x),ue=Kc(V);for(;G||ue;){let Ie=!1,It=!1;if(G&&ue){const xt=v(G,ue);xt<0?It=!0:xt>0&&(Ie=!0)}else null!=G?It=!0:Ie=!0;Ie?(b(ue),ue=Kc(V)):It?(T(G),G=Kc(x)):(G=Kc(x),ue=Kc(V))}}(i,a,ed,f=>{l.push(this.mn(e,t,r,f))},f=>{l.push(this.gn(e,t,r,f))}),ce.waitFor(l)}fn(e){let t=1;return iw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>ed(l,f)).filter((l,f,m)=>!f||0!==ed(l,m[f-1]));const i=[];i.push(e);for(const l of r){const f=ed(l,e),m=ed(l,t);if(0===f)i[0]=e.qe();else if(f>0&&m<0)i.push(l),i.push(l.qe());else if(m>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.yn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,wT,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,wT,[]]))}return a}yn(e,t){return ed(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(m1)}getMinOffset(e,t){return ce.mapArray(this.Ze(t),r=>this.Xe(e,r).next(i=>i||Tt())).next(m1)}}function g1(n){return Ur(n,"collectionParents")}function rw(n){return Ur(n,"indexEntries")}function CT(n){return Ur(n,"indexConfiguration")}function iw(n){return Ur(n,"indexState")}function m1(n){Bt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;wf(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new _s(e.readTime,e.documentKey,t)}const _1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Es{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Es(e,Es.DEFAULT_COLLECTION_PERCENTILE,Es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function y1(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let f=0;const m=r.Z({range:l},(b,T,x)=>(f++,x.delete()));a.push(m.next(()=>{Bt(1===f)}));const v=[];for(const b of t.mutations){const T=Qb(e,b.key.path,t.batchId);a.push(i.delete(T)),v.push(b.key)}return ce.waitFor(a).next(()=>v)}function IT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Tt();e=n.noDocument}return JSON.stringify(e).length}Es.DEFAULT_COLLECTION_PERCENTILE=10,Es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Es.DEFAULT=new Es(41943040,Es.DEFAULT_COLLECTION_PERCENTILE,Es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Es.DISABLED=new Es(-1,0,0);class bT{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.pn={}}static ie(e,t,r,i){Bt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new bT(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return td(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=xm(e),l=td(e);return l.add({}).next(f=>{Bt("number"==typeof f);const m=new lx(f,t,r,i),v=function(x,V,G){const ue=G.baseMutations.map(It=>XE(x.se,It)),Ie=G.mutations.map(It=>XE(x.se,It));return{userId:V,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:ue,mutations:Ie}}(this.serializer,this.userId,m),b=[];let T=new jn((x,V)=>ln(x.canonicalString(),V.canonicalString()));for(const x of i){const V=Qb(this.userId,x.key.path,f);T=T.add(x.key.path.popLast()),b.push(l.put(v)),b.push(a.put(V,QM))}return T.forEach(x=>{b.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.pn[f]=m.keys()}),ce.waitFor(b).next(()=>m)})}lookupMutationBatch(e,t){return td(e).get(t).next(r=>r?(Bt(r.userId===this.userId),kf(this.serializer,r)):null)}In(e,t){return this.pn[t]?ce.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.pn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return td(e).Z({index:"userMutationsIndex",range:i},(l,f,m)=>{f.userId===this.userId&&(Bt(f.batchId>=r),a=kf(this.serializer,f)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return td(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return td(e).j("userMutationsIndex",t).next(r=>r.map(i=>kf(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ll(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return xm(e).Z({range:i},(l,f,m)=>{const[v,b,T]=l,x=$o(b);if(v===this.userId&&t.path.isEqual(x))return td(e).get(T).next(V=>{if(!V)throw Tt();Bt(V.userId===this.userId),a.push(kf(this.serializer,V))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(ln);const i=[];return t.forEach(a=>{const l=ll(this.userId,a.path),f=IDBKeyRange.lowerBound(l),m=xm(e).Z({range:f},(v,b,T)=>{const[x,V,G]=v,ue=$o(V);x===this.userId&&a.path.isEqual(ue)?r=r.add(G):T.done()});i.push(m)}),ce.waitFor(i).next(()=>this.Tn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=ll(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new jn(ln);return xm(e).Z({range:l},(m,v,b)=>{const[T,x,V]=m,G=$o(x);T===this.userId&&r.isPrefixOf(G)?G.length===i&&(f=f.add(V)):b.done()}).next(()=>this.Tn(e,f))}Tn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(td(e).get(a).next(l=>{if(null===l)throw Tt();Bt(l.userId===this.userId),r.push(kf(this.serializer,l))}))}),ce.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return y1(e.at,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.En(t.batchId)}),ce.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}En(e){delete this.pn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return xm(e).Z({range:r},(a,l,f)=>{if(a[0]===this.userId){const m=$o(a[1]);i.push(m)}else f.done()}).next(()=>{Bt(0===i.length)})})}containsKey(e,t){return v1(e,this.userId,t)}An(e){return E1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function v1(n,e,t){const r=ll(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return xm(n).Z({range:a,Y:!0},(f,m,v)=>{const[b,T,x]=f;b===e&&T===i&&(l=!0),v.done()}).next(()=>l)}function td(n){return Ur(n,"mutations")}function xm(n){return Ur(n,"documentMutations")}function E1(n){return Ur(n,"mutationQueues")}class Vf{constructor(e){this.Rn=e}next(){return this.Rn+=2,this.Rn}static vn(){return new Vf(0)}static bn(){return new Vf(-1)}}class TB{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Pn(e).next(t=>{const r=new Vf(t.highestTargetId);return t.highestTargetId=r.next(),this.Vn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Pn(e).next(t=>Mt.fromTimestamp(new Xn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Vn(e,i)))}addTargetData(e,t){return this.Sn(e,t).next(()=>this.Pn(e).next(r=>(r.targetCount+=1,this.Dn(t,r),this.Vn(e,r))))}updateTargetData(e,t){return this.Sn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Rm(e).delete(t.targetId)).next(()=>this.Pn(e)).next(r=>(Bt(r.targetCount>0),r.targetCount-=1,this.Vn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Rm(e).Z((l,f)=>{const m=ew(f);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>ce.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Rm(e).Z((r,i)=>{const a=ew(i);t(a)})}Pn(e){return w1(e).get("targetGlobalKey").next(t=>(Bt(null!==t),t))}Vn(e,t){return w1(e).put("targetGlobalKey",t)}Sn(e,t){return Rm(e).put(s1(this.serializer,t))}Dn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Mf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Rm(e).Z({range:i,index:"queryTargetsIndex"},(l,f,m)=>{const v=ew(f);jE(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=nd(e);return t.forEach(l=>{const f=Li(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),ce.waitFor(i)}removeMatchingKeys(e,t,r){const i=nd(e);return ce.forEach(t,a=>{const l=Li(a.path);return ce.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=nd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=nd(e);let a=mn();return i.Z({range:r,Y:!0},(l,f,m)=>{const v=$o(l[1]),b=new gt(v);a=a.add(b)}).next(()=>a)}containsKey(e,t){const r=Li(t.path),i=IDBKeyRange.bound([r],[Hb(r)],!1,!0);let a=0;return nd(e).Z({index:"documentTargetsIndex",Y:!0,range:i},([l,f],m,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}ne(e,t){return Rm(e).get(t).next(r=>r?ew(r):null)}}function Rm(n){return Ur(n,"targets")}function w1(n){return Ur(n,"targetGlobal")}function nd(n){return Ur(n,"targetDocuments")}function C1([n,e],[t,r]){const i=ln(n,t);return 0===i?ln(e,r):i}class DB{constructor(e){this.Cn=e,this.buffer=new jn(C1),this.xn=0}Nn(){return++this.xn}kn(e){const t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();C1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class SB{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}$n(e){var t=this;ze("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ce.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Bo(r)?ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Uo(r)}yield t.$n(3e5)}))}}class AB{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.Fn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(Yi.ct);const r=new DB(t);return this.Mn.forEachTarget(e,i=>r.kn(i.sequenceNumber)).next(()=>this.Mn.Bn(e,i=>r.kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(_1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_1):this.Ln(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}Ln(e,t){let r,i,a,l,f,m,v;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,l=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,f=Date.now(),this.removeTargets(e,r,t))).next(T=>(a=T,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(v=Date.now(),Bb()<=Ki.in.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${a} targets in `+(m-f)+`ms\n\tRemoved ${T} documents in `+(v-m)+`ms\nTotal Duration: ${v-b}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:T})))}}class MB{constructor(e,t){this.db=e,this.garbageCollector=new AB(this,t)}Fn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Bn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Bn(e,t){return this.Un(e,(r,i)=>t(i))}addReference(e,t,r){return TT(e,r)}removeReference(e,t,r){return TT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return TT(e,t)}Kn(e,t){return function(r,i){let a=!1;return E1(r).X(l=>v1(r,l,i).next(f=>(f&&(a=!0),ce.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Un(e,(l,f)=>{if(f<=t){const m=this.Kn(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Mt.min()),nd(e).delete([0,Li(l.path)])))});i.push(m)}}).next(()=>ce.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return TT(e,t)}Un(e,t){const r=nd(e);let i,a=Yi.ct;return r.Z({index:"documentTargetsIndex"},([l,f],{path:m,sequenceNumber:v})=>{0===l?(a!==Yi.ct&&t(new gt($o(i)),a),a=v,i=m):a=Yi.ct}).next(()=>{a!==Yi.ct&&t(new gt($o(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function TT(n,e){return nd(n).put((r=n.currentSequenceNumber,{targetId:0,path:Li(e.path),sequenceNumber:r}));var r}class I1{constructor(){this.changes=new Qc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Se.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Uf(e).put(r)}removeEntry(e,t,r){return Uf(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],yT(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Gn(e,r)))}getEntry(e,t){let r=Se.newInvalidDocument(t);return Uf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(sw(t))},(i,a)=>{r=this.Qn(t,a)}).next(()=>r)}zn(e,t){let r={size:0,document:Se.newInvalidDocument(t)};return Uf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(sw(t))},(i,a)=>{r={document:this.Qn(t,a),size:IT(a)}}).next(()=>r)}getEntries(e,t){let r=vs();return this.jn(e,t,(i,a)=>{const l=this.Qn(i,a);r=r.insert(i,l)}).next(()=>r)}Wn(e,t){let r=vs(),i=new ur(gt.comparator);return this.jn(e,t,(a,l)=>{const f=this.Qn(a,l);r=r.insert(a,f),i=i.insert(a,IT(l))}).next(()=>({documents:r,Hn:i}))}jn(e,t,r){if(t.isEmpty())return ce.resolve();let i=new jn(S1);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(sw(i.first()),sw(i.last())),l=i.getIterator();let f=l.getNext();return Uf(e).Z({index:"documentKeyIndex",range:a},(m,v,b)=>{const T=gt.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&S1(f,T)<0;)r(f,null),f=l.getNext();f&&f.isEqual(T)&&(r(f,v),f=l.hasNext()?l.getNext():null),f?b.G(sw(f)):b.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),yT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Uf(e).j(IDBKeyRange.bound(l,f,!0)).next(m=>{let v=vs();for(const b of m){const T=this.Qn(gt.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);T.isFoundDocument()&&(zE(t,T)||i.has(T.key))&&(v=v.insert(T.key,T))}return v})}getAllFromCollectionGroup(e,t,r,i){let a=vs();const l=D1(t,r),f=D1(t,_s.max());return Uf(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(m,v,b)=>{const T=this.Qn(gt.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(T.key,T),a.size===i&&b.done()}).next(()=>a)}newChangeBuffer(e){return new RB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return T1(e).get("remoteDocumentGlobalKey").next(t=>(Bt(!!t),t))}Gn(e,t){return T1(e).put("remoteDocumentGlobalKey",t)}Qn(e,t){if(t){const r=function gB(n,e){let t;if(e.document)t=Qk(n.se,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=gt.fromSegments(e.noDocument.path),i=Of(e.noDocument.readTime);t=Se.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Tt();{const r=gt.fromSegments(e.unknownDocument.path),i=Of(e.unknownDocument.version);t=Se.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Xn(r[0],r[1]);return Mt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Mt.min()))return r}return Se.newInvalidDocument(e)}}function b1(n){return new xB(n)}class RB extends I1{constructor(e,t){super(),this.Jn=e,this.trackRemovals=t,this.Yn=new Qc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new jn((a,l)=>ln(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const f=this.Yn.get(a);if(t.push(this.Jn.removeEntry(e,a,f.readTime)),l.isValidDocument()){const m=i1(this.Jn.serializer,l);i=i.add(a.path.popLast()),r+=IT(m)-f.size,t.push(this.Jn.addEntry(e,a,m))}else if(r-=f.size,this.trackRemovals){const m=i1(this.Jn.serializer,l.convertToNoDocument(Mt.min()));t.push(this.Jn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.Jn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Jn.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.Jn.zn(e,t).next(r=>(this.Yn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Jn.Wn(e,t).next(({documents:r,Hn:i})=>(i.forEach((a,l)=>{this.Yn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function T1(n){return Ur(n,"remoteDocumentGlobal")}function Uf(n){return Ur(n,"remoteDocumentsV14")}function sw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function D1(n,e){const t=e.documentKey.path.toArray();return[n,yT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function S1(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=ln(t[a],r[a]),i)return i;return i=ln(t.length,r.length),i||(i=ln(t[t.length-2],r[r.length-2]),i||ln(t[t.length-1],r[r.length-1]))}class PB{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class A1{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&KE(r.mutation,i,Qi.empty(),Xn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,mn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=mn()){const i=Fa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=WE();return a.forEach((f,m)=>{l=l.insert(f,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Fa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,mn()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let a=vs();const l=GE(),f=GE();return t.forEach((m,v)=>{const b=r.get(v.key);i.has(v.key)&&(void 0===b||b.mutation instanceof ml)?a=a.insert(v.key,v):void 0!==b?(l.set(v.key,b.mutation.getFieldMask()),KE(b.mutation,v,b.mutation.getFieldMask(),Xn.now())):l.set(v.key,Qi.empty())}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,b)=>l.set(v,b)),t.forEach((v,b)=>{var T;return f.set(v,new PB(b,null!==(T=l.get(v))&&void 0!==T?T:null))}),f))}recalculateAndSaveOverlays(e,t){const r=GE();let i=new ur((l,f)=>l-f),a=mn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let b=r.get(m)||Qi.empty();b=f.applyToLocalView(v,b),r.set(m,b);const T=(i.get(f.batchId)||mn()).add(m);i=i.insert(f.batchId,T)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,b=m.value,T=Tk();b.forEach(x=>{if(!a.has(x)){const V=Ok(t.get(x),r.get(x));null!==V&&T.set(x,V),a=a.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,T))}return ce.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return gt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):sx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ce.resolve(Fa());let f=-1,m=a;return l.next(v=>ce.forEach(v,(b,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),a.get(b)?ce.resolve():this.remoteDocumentCache.getEntry(e,b).next(x=>{m=m.insert(b,x)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,mn())).next(b=>({batchId:f,changes:bk(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new gt(t)).next(r=>{let i=WE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=WE();return this.indexManager.getCollectionParents(e,i).next(l=>ce.forEach(l,f=>{const m=(v=t,b=f.child(i),new gl(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,b;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((b,T)=>{a=a.insert(b,T)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,m)=>{const v=m.getKey();null===a.get(v)&&(a=a.insert(v,Se.newInvalidDocument(v)))});let l=WE();return a.forEach((f,m)=>{const v=i.get(f);void 0!==v&&KE(v.mutation,m,Qi.empty(),Xn.now()),zE(t,m)&&(l=l.insert(f,m))}),l})}}class NB{constructor(e){this.serializer=e,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return ce.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:$r(r.createTime)}),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(r=t).name,query:yx(r.bundledQuery),readTime:$r(r.readTime)}),ce.resolve();var r}}class OB{constructor(){this.overlays=new ur(gt.comparator),this.ts=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Fa();return ce.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.re(e,t,a)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ts.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ts.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const i=Fa(),a=t.length+1,l=new gt(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return ce.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new ur((v,b)=>v-b);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let b=a.get(v.largestBatchId);null===b&&(b=Fa(),a=a.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const f=Fa(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,b)=>f.set(v,b)),!(f.size()>=i)););return ce.resolve(f)}re(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ts.get(i.largestBatchId).delete(r.key);this.ts.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new dx(t,r));let a=this.ts.get(t);void 0===a&&(a=mn(),this.ts.set(t,a)),this.ts.set(t,a.add(r.key))}}class Tx{constructor(){this.es=new jn(pi.ns),this.ss=new jn(pi.rs)}isEmpty(){return this.es.isEmpty()}addReference(e,t){const r=new pi(e,t);this.es=this.es.add(r),this.ss=this.ss.add(r)}os(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.us(new pi(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}hs(e){const t=new gt(new An([])),r=new pi(t,e),i=new pi(t,e+1),a=[];return this.ss.forEachInRange([r,i],l=>{this.us(l),a.push(l.key)}),a}ls(){this.es.forEach(e=>this.us(e))}us(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}fs(e){const t=new gt(new An([])),r=new pi(t,e),i=new pi(t,e+1);let a=mn();return this.ss.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new pi(e,0),r=this.es.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class pi{constructor(e,t){this.key=e,this.ds=t}static ns(e,t){return gt.comparator(e.key,t.key)||ln(e.ds,t.ds)}static rs(e,t){return ln(e.ds,t.ds)||gt.comparator(e.key,t.key)}}class kB{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this._s=new jn(pi.ns)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new lx(a,t,r,i);this.mutationQueue.push(l);for(const f of i)this._s=this._s.add(new pi(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ce.resolve(l)}lookupMutationBatch(e,t){return ce.resolve(this.gs(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ys(t+1),a=i<0?0:i;return ce.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new pi(t,0),i=new pi(t,Number.POSITIVE_INFINITY),a=[];return this._s.forEachInRange([r,i],l=>{const f=this.gs(l.ds);a.push(f)}),ce.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(ln);return t.forEach(i=>{const a=new pi(i,0),l=new pi(i,Number.POSITIVE_INFINITY);this._s.forEachInRange([a,l],f=>{r=r.add(f.ds)})}),ce.resolve(this.ps(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;gt.isDocumentKey(a)||(a=a.child(""));const l=new pi(new gt(a),0);let f=new jn(ln);return this._s.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(m.ds)),!0)},l),ce.resolve(this.ps(f))}ps(e){const t=[];return e.forEach(r=>{const i=this.gs(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Bt(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();let r=this._s;return ce.forEach(t.mutations,i=>{const a=new pi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this._s=r})}En(e){}containsKey(e,t){const r=new pi(t,0),i=this._s.firstAfterOrEqual(r);return ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ce.resolve()}Is(e,t){return this.ys(e)}ys(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}gs(e){const t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class FB{constructor(e){this.Ts=e,this.docs=new ur(gt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():Se.newInvalidDocument(t))}getEntries(e,t){let r=vs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Se.newInvalidDocument(i))}),ce.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=vs();const l=t.path,f=new gt(l.child("")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:v,value:{document:b}}=m.getNext();if(!l.isPrefixOf(v.path))break;v.path.length>l.length+1||wf(RE(b),r)<=0||(i.has(b.key)||zE(t,b))&&(a=a.insert(b.key,b.mutableCopy()))}return ce.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Tt()}Es(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new LB(this)}getSize(e){return ce.resolve(this.size)}}class LB extends I1{constructor(e){super(),this.Jn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Jn.addEntry(e,i)):this.Jn.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.Jn.getEntry(e,t)}getAllFromCache(e,t){return this.Jn.getEntries(e,t)}}class VB{constructor(e){this.persistence=e,this.As=new Qc(t=>Mf(t),jE),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.Rs=0,this.vs=new Tx,this.targetCount=0,this.bs=Vf.vn()}forEachTarget(e,t){return this.As.forEach((r,i)=>t(i)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Rs)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Rs&&(this.Rs=t),ce.resolve()}Sn(e){this.As.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new Vf(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}addTargetData(e,t){return this.Sn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Sn(t),ce.resolve()}removeTargetData(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.As.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.As.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ce.waitFor(a).next(()=>i)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.As.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.vs.os(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.vs.cs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),ce.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.vs.hs(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.vs.fs(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.vs.containsKey(t))}}class M1{constructor(e,t){this.Ps={},this.overlays={},this.Vs=new Yi(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=e(this),this.Ds=new VB(this),this.indexManager=new IB,this.remoteDocumentCache=new FB(r=>this.referenceDelegate.Cs(r)),this.serializer=new r1(t),this.xs=new NB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new OB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ps[e.toKey()];return r||(r=new kB(t,this.referenceDelegate),this.Ps[e.toKey()]=r),r}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(e,t,r){ze("MemoryPersistence","Starting transaction:",e);const i=new UB(this.Vs.next());return this.referenceDelegate.Ns(),r(i).next(a=>this.referenceDelegate.ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Os(e,t){return ce.or(Object.values(this.Ps).map(r=>()=>r.containsKey(e,t)))}}class UB extends NE{constructor(e){super(),this.currentSequenceNumber=e}}class DT{constructor(e){this.persistence=e,this.$s=new Tx,this.Ms=null}static Fs(e){return new DT(e)}get Bs(){if(this.Ms)return this.Ms;throw Tt()}addReference(e,t,r){return this.$s.addReference(r,t),this.Bs.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.$s.removeReference(r,t),this.Bs.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Bs.add(t.toString()),ce.resolve()}removeTarget(e,t){this.$s.hs(t.targetId).forEach(i=>this.Bs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Bs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ns(){this.Ms=new Set}ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Bs,r=>{const i=gt.fromPath(r);return this.Ls(e,i).next(a=>{a||t.removeEntry(i,Mt.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ls(e,t).next(r=>{r?this.Bs.delete(t.toString()):this.Bs.add(t.toString())})}Cs(e){return 0}Ls(e,t){return ce.or([()=>ce.resolve(this.$s.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class BB{constructor(e){this.serializer=e}M(e,t,r,i){const a=new al("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Yb,{unique:!0}),f.createObjectStore("documentMutations"),x1(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=ce.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),x1(e)),l=l.next(()=>function(f){const m=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,m){return m.store("mutations").j().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Yb,{unique:!0});const b=m.store("mutations"),T=v.map(x=>b.put(x));return ce.waitFor(T)})}(e,a))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(a))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Us(a)))),r<7&&i>=7&&(l=l.next(()=>this.Ks(a))),r<8&&i>=8&&(l=l.next(()=>this.Gs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.Qs(a))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:ak});m.createIndex("collectionPathOverlayIndex",uk,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",eT,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:Jb});m.createIndex("documentKeyIndex",cl),m.createIndex("collectionGroupIndex",Xb)}(e)).next(()=>this.zs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.js(e,a))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:LE}).createIndex("sequenceNumberIndex",vm,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:sk}).createIndex("documentKeyIndex",ok,{unique:!1})}(e))),l}Us(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=IT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ce.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(f=>ce.forEach(f,m=>{Bt(m.userId===a.userId);const v=kf(this.serializer,m);return y1(e,a.userId,v).next(()=>{})}))}))}Ks(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,f)=>{const m=new An(l),v=[0,Li(m)];a.push(t.get(v).next(b=>b?ce.resolve():t.put({targetId:0,path:Li(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ce.waitFor(a))})}Gs(e,t){e.createObjectStore("collectionParents",{keyPath:FE});const r=t.store("collectionParents"),i=new bx,a=l=>{if(i.add(l)){const f=l.lastSegment(),m=l.popLast();return r.put({collectionId:f,parent:Li(m)})}};return t.store("remoteDocuments").Z({Y:!0},(l,f)=>{const m=new An(l);return a(m.popLast())}).next(()=>t.store("documentMutations").Z({Y:!0},([l,f,m],v)=>{const b=$o(f);return a(b.popLast())}))}Qs(e){const t=e.store("targets");return t.Z((r,i)=>{const a=ew(i),l=s1(this.serializer,a);return t.put(l)})}zs(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const f=t.store("remoteDocumentsV14"),m=(v=l,v.document?new gt(An.fromString(v.document.name).popFirst(5)):v.noDocument?gt.fromSegments(v.noDocument.path):v.unknownDocument?gt.fromSegments(v.unknownDocument.path):Tt()).path.toArray();var v;const b={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(b))}).next(()=>ce.waitFor(i))}js(e,t){const r=t.store("mutations"),i=b1(this.serializer),a=new M1(DT.Fs,this.serializer.se);return r.j().next(l=>{const f=new Map;return l.forEach(m=>{var v;let b=null!==(v=f.get(m.userId))&&void 0!==v?v:mn();kf(this.serializer,m).keys().forEach(T=>b=b.add(T)),f.set(m.userId,b)}),ce.forEach(f,(m,v)=>{const b=new qr(v),T=vT.ie(this.serializer,b),x=a.getIndexManager(b),V=bT.ie(b,this.serializer,x,a.referenceDelegate);return new A1(i,V,T,x).recalculateAndSaveOverlaysForDocumentKeys(new Em(t,Yi.ct),m).next()})})}}function x1(n){n.createObjectStore("targetDocuments",{keyPath:kE}).createIndex("documentTargetsIndex",JM,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",OE,{unique:!0}),n.createObjectStore("targetGlobal")}const Dx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Sx{constructor(e,t,r,i,a,l,f,m,v,b,T=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ws=a,this.window=l,this.document=f,this.Hs=v,this.Js=b,this.Ys=T,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=x=>Promise.resolve(),!Sx.D())throw new Ue(ve.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new MB(this,i),this.si=t+"main",this.serializer=new r1(m),this.ii=new Fi(this.si,this.Ys,new BB(this.serializer)),this.Ds=new TB(this.referenceDelegate,this.serializer),this.remoteDocumentCache=b1(this.serializer),this.xs=new mB,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===b&&Dr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ue(ve.FAILED_PRECONDITION,Dx);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ds.getHighestSequenceNumber(e))}).then(e=>{this.Vs=new Yi(e,this.Hs)}).then(()=>{this.Ss=!0}).catch(e=>(this.ii&&this.ii.close(),Promise.reject(e)))}hi(e){var t=this;return this.ni=function(){var r=(0,Ce.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ii.B(function(){var t=(0,Ce.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget((0,Ce.Z)(function*(){t.started&&(yield t.oi())})))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ST(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(e).next(t=>{t||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(e)).next(t=>this.isPrimary&&!t?this.di(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Bo(e))return ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ws.enqueueRetryable(()=>this.ni(e)),this.isPrimary=e})}li(e){return ow(e).get("owner").next(t=>ce.resolve(this._i(t)))}mi(e){return ST(e).delete(this.clientId)}gi(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.yi(e.ei,18e5)){e.ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ur(r,"clientMetadata");return i.j().next(a=>{const l=e.pi(a,18e5),f=a.filter(m=>-1===l.indexOf(m));return ce.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(e.ri)for(const r of t)e.ri.removeItem(e.Ii(r.clientId))}})()}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.Js?ce.resolve(!0):ow(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)){if(this._i(t)&&this.networkEnabled)return!0;if(!this._i(t)){if(!t.allowTabSynchronization)throw new Ue(ve.FAILED_PRECONDITION,Dx);return!1}}return!(!this.networkEnabled||!this.inForeground)||ST(e).j().next(r=>void 0===this.pi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ze("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.Ss=!1,e.Ei(),e.ti&&(e.ti.cancel(),e.ti=null),e.Ai(),e.Ri(),yield e.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Em(t,Yi.ct);return e.di(r).next(()=>e.mi(r))}),e.ii.close(),e.vi()})()}pi(e,t){return e.filter(r=>this.yi(r.updateTimeMs,t)&&!this.Ti(r.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",e=>ST(e).j().next(t=>this.pi(t,18e5).map(r=>r.clientId)))}get started(){return this.Ss}getMutationQueue(e,t){return bT.ie(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bB(e,this.serializer.se.databaseId)}getDocumentOverlayCache(e){return vT.ie(this.serializer,e)}getBundleCache(){return this.xs}runTransaction(e,t,r){ze("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Ys)?iT:14===l?rT:13===l?nT:12===l?XM:11===l?tT:void Tt();var l;let f;return this.ii.runTransaction(e,i,a,m=>(f=new Em(m,this.Vs?this.Vs.next():Yi.ct),"readwrite-primary"===t?this.li(f).next(v=>!!v||this.fi(f)).next(v=>{if(!v)throw Dr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new Ue(ve.FAILED_PRECONDITION,PE);return r(f)}).next(v=>this.wi(f).next(()=>v)):this.Pi(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}Pi(e){return ow(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)&&!this._i(t)&&!(this.Js||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ue(ve.FAILED_PRECONDITION,Dx)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ow(e).put("owner",t)}static D(){return Fi.D()}di(e){const t=ow(e);return t.get("owner").next(r=>this._i(r)?(ze("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}yi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Dr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ui(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ei();const t=/(?:Version|Mobile)\/1[456]/;(0,J.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(e){var t;try{const r=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return ze("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Dr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(e){Dr("Failed to set zombie client id.",e)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ow(n){return Ur(n,"owner")}function ST(n){return Ur(n,"clientMetadata")}function Ax(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Mx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Vi=r,this.Si=i}static Di(e,t){let r=mn(),i=mn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Mx(e,t.fromCache,r,i)}}class R1{constructor(){this.Ci=!1}initialize(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ni(e,t).next(a=>a||this.ki(e,t,i,r)).next(a=>a||this.Oi(e,t))}Ni(e,t){if(vk(t))return ce.resolve(null);let r=Ji(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=dT(t,null,"F"),r=Ji(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=mn(...a);return this.xi.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.$i(t,f);return this.Mi(t,v,l,m.readTime)?this.Ni(e,dT(t,null,"F")):this.Fi(e,v,t,m)}))})))}ki(e,t,r,i){return vk(t)||i.isEqual(Mt.min())?this.Oi(e,t):this.xi.getDocuments(e,r).next(a=>{const l=this.$i(t,a);return this.Mi(t,l,r,i)?this.Oi(e,t):(Bb()<=Ki.in.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ax(t)),this.Fi(e,l,t,zb(i,-1)))})}$i(e,t){let r=new jn(Ck(e));return t.forEach((i,a)=>{zE(e,a)&&(r=r.add(a))}),r}Mi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Oi(e,t){return Bb()<=Ki.in.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",ax(t)),this.xi.getDocumentsMatchingQuery(e,t,_s.min())}Fi(e,t,r,i){return this.xi.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class $B{constructor(e,t,r,i){this.persistence=e,this.Bi=t,this.serializer=i,this.Li=new ur(ln),this.qi=new Qc(a=>Mf(a),jE),this.Ui=new Map,this.Ki=e.getRemoteDocumentCache(),this.Ds=e.getTargetCache(),this.xs=e.getBundleCache(),this.Gi(r)}Gi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new A1(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Li))}}function P1(n,e,t,r){return new $B(n,e,t,r)}function N1(n,e){return xx.apply(this,arguments)}function xx(){return xx=(0,Ce.Z)(function*(n,e){const t=rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Gi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],f=[];let m=mn();for(const v of i){l.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}for(const v of a){f.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}return t.localDocuments.getDocuments(r,m).next(v=>({Qi:v,removedBatchIds:l,addedBatchIds:f}))})})}),xx.apply(this,arguments)}function jB(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Ki.newChangeBuffer({trackRemovals:!0});return function(l,f,m,v){const b=m.batch,T=b.keys();let x=ce.resolve();return T.forEach(V=>{x=x.next(()=>v.getEntry(f,V)).next(G=>{const ue=m.docVersions.get(V);Bt(null!==ue),G.version.compareTo(ue)<0&&(b.applyToRemoteDocument(G,m),G.isValidDocument()&&(G.setReadTime(m.commitVersion),v.addEntry(G)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(f,b))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=mn();for(let m=0;m<l.mutationResults.length;++m)l.mutationResults[m].transformResults.length>0&&(f=f.add(l.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function O1(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ds.getLastRemoteSnapshotVersion(t))}function HB(n,e){const t=rt(n),r=e.snapshotVersion;let i=t.Li;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Ki.newChangeBuffer({trackRemovals:!0});i=t.Li;const f=[];e.targetChanges.forEach((b,T)=>{const x=i.get(T);if(!x)return;f.push(t.Ds.removeMatchingKeys(a,b.removedDocuments,T).next(()=>t.Ds.addMatchingKeys(a,b.addedDocuments,T)));let V=x.withSequenceNumber(a.currentSequenceNumber);var G,ue,Ie;e.targetMismatches.has(T)?V=V.withResumeToken(Br.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):b.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(b.resumeToken,r)),i=i.insert(T,V),ue=V,Ie=b,(0===(G=x).resumeToken.approximateByteSize()||ue.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||Ie.addedDocuments.size+Ie.modifiedDocuments.size+Ie.removedDocuments.size>0)&&f.push(t.Ds.updateTargetData(a,V))});let m=vs(),v=mn();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),f.push(k1(a,l,e.documentUpdates).next(b=>{m=b.zi,v=b.ji})),!r.isEqual(Mt.min())){const b=t.Ds.getLastRemoteSnapshotVersion(a).next(T=>t.Ds.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(b)}return ce.waitFor(f).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.Li=i,a))}function k1(n,e,t){let r=mn(),i=mn();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=vs();return t.forEach((f,m)=>{const v=a.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(Mt.min())?(e.removeEntry(f,m.readTime),l=l.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),l=l.insert(f,m)):ze("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)}),{zi:l,ji:i}})}function zB(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Pm(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ds.getTargetData(r,e).next(a=>a?(i=a,ce.resolve(i)):t.Ds.allocateTargetId(r).next(l=>(i=new Xc(e,l,0,r.currentSequenceNumber),t.Ds.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Li.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Li=t.Li.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Nm(n,e,t){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,Ce.Z)(function*(n,e,t){const r=rt(n),i=r.Li.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Bo(l))throw l;ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Li=r.Li.remove(e),r.qi.delete(i.target)}),Rx.apply(this,arguments)}function AT(n,e,t){const r=rt(n);let i=Mt.min(),a=mn();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,m,v){const b=rt(f),T=b.qi.get(v);return void 0!==T?ce.resolve(b.Li.get(T)):b.Ds.getTargetData(m,v)}(r,l,Ji(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(l,f.targetId).next(m=>{a=m})}).next(()=>r.Bi.getDocumentsMatchingQuery(l,e,t?i:Mt.min(),t?a:mn())).next(f=>(V1(r,wk(e),f),{documents:f,Wi:a})))}function F1(n,e){const t=rt(n),r=rt(t.Ds),i=t.Li.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ne(a,e).next(l=>l?l.target:null))}function L1(n,e){const t=rt(n),r=t.Ui.get(e)||Mt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ki.getAllFromCollectionGroup(i,e,zb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(V1(t,e,i),i))}function V1(n,e,t){let r=n.Ui.get(e)||Mt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ui.set(e,r)}function Px(){return Px=(0,Ce.Z)(function*(n,e,t,r){const i=rt(n);let a=mn(),l=vs();for(const v of t){const b=e.Hi(v.metadata.name);v.document&&(a=a.add(b));const T=e.Ji(v);T.setReadTime(e.Yi(v.metadata.readTime)),l=l.insert(b,T)}const f=i.Ki.newChangeBuffer({trackRemovals:!0}),m=yield Pm(i,(v=r,Ji(Im(An.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>k1(v,f,l).next(b=>(f.apply(v),b)).next(b=>i.Ds.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Ds.addMatchingKeys(v,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,b.zi,b.ji)).next(()=>b.zi)))}),Px.apply(this,arguments)}function GB(n,e){return Nx.apply(this,arguments)}function Nx(){return Nx=(0,Ce.Z)(function*(n,e,t=mn()){const r=yield Pm(n,Ji(yx(e.bundledQuery))),i=rt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=$r(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.xs.saveNamedQuery(a,e);const f=r.withResumeToken(Br.EMPTY_BYTE_STRING,l);return i.Li=i.Li.insert(f.targetId,f),i.Ds.updateTargetData(a,f).next(()=>i.Ds.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Ds.addMatchingKeys(a,t,r.targetId)).next(()=>i.xs.saveNamedQuery(a,e))})}),Nx.apply(this,arguments)}function U1(n,e){return`firestore_clients_${n}_${e}`}function B1(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ox(n,e){return`firestore_targets_${n}_${e}`}class MT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Ue(i.error.code,i.error.message))),l?new MT(e,t,i.state,a):(Dr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class aw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ue(r.error.code,r.error.message))),a?new aw(e,r.state,i):(Dr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=hT();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=ZM(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new xT(e,a):(Dr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class kx{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new kx(t.clientId,t.onlineState):(Dr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Fx{constructor(){this.activeTargetIds=hT()}tr(e){this.activeTargetIds=this.activeTargetIds.add(e)}er(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lx{constructor(e,t,r,i,a){this.window=e,this.Ws=t,this.persistenceKey=r,this.nr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new ur(ln),this.started=!1,this.ur=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.cr=U1(this.persistenceKey,this.nr),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.rr=this.rr.insert(this.nr,new Fx),this.hr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this._r=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.syncEngine.bi();for(const i of t){if(i===e.nr)continue;const a=e.getItem(U1(e.persistenceKey,i));if(a){const l=xT.Zi(i,a);l&&(e.rr=e.rr.insert(l.clientId,l))}}e.mr();const r=e.storage.getItem(e.wr);if(r){const i=e.gr(r);i&&e.yr(i)}for(const i of e.ur)e.ir(i);e.ur=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(e){let t=!1;return this.rr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ir(e,"pending")}updateMutationState(e,t,r){this.Ir(e,t,r),this.Tr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Ox(this.persistenceKey,e));if(r){const i=aw.Zi(e,r);i&&(t=i.state)}}return this.Er.tr(e),this.mr(),t}removeLocalQueryTarget(e){this.Er.er(e),this.mr()}isLocalQueryTarget(e){return this.Er.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ox(this.persistenceKey,e))}updateQueryState(e,t,r){this.Ar(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Tr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Rr(e)}notifyBundleLoaded(e){this.vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ze("SharedClientState","READ",e,t),t}setItem(e,t){ze("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ir(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ze("SharedClientState","EVENT",r.key,r.newValue),r.key===this.cr)return void Dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable((0,Ce.Z)(function*(){if(t.started){if(null!==r.key)if(t.hr.test(r.key)){if(null==r.newValue){const i=t.br(r.key);return t.Pr(i,null)}{const i=t.Vr(r.key,r.newValue);if(i)return t.Pr(i.clientId,i)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.gr(r.newValue);if(i)return t.yr(i)}}else if(r.key===t.ar){const i=function(a){let l=Yi.ct;if(null!=a)try{const f=JSON.parse(a);Bt("number"==typeof f),l=f}catch(f){Dr("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==Yi.ct&&t.sequenceNumberHandler(i)}else if(r.key===t._r){const i=t.kr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Or(a)))}}else t.ur.push(r)}))}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(e,t,r){const i=new MT(this.currentUser,e,t,r),a=B1(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Xi())}Tr(e){const t=B1(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Rr(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.nr,onlineState:e}))}Ar(e,t,r){const i=Ox(this.persistenceKey,e),a=new aw(e,t,r);this.setItem(i,a.Xi())}vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}br(e){const t=this.hr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.br(e);return xT.Zi(r,t)}Sr(e,t){const r=this.lr.exec(e),i=Number(r[1]);return MT.Zi(new qr(void 0!==r[2]?r[2]:null),i,t)}Cr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return aw.Zi(i,t)}gr(e){return kx.Zi(e)}kr(e){return JSON.parse(e)}Dr(e){var t=this;return(0,Ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Nr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}Pr(e,t){const r=t?this.rr.insert(e,t):this.rr.remove(e),i=this.pr(this.rr),a=this.pr(r),l=[],f=[];return a.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{a.has(m)||f.push(m)}),this.syncEngine.Fr(l,f).then(()=>{this.rr=r})}yr(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}pr(e){let t=hT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class $1{constructor(){this.Br=new Fx,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Br.tr(e),this.Lr[e]||"not-current"}updateQueryState(e,t,r){this.Lr[e]=t}removeLocalQueryTarget(e){this.Br.er(e)}isLocalQueryTarget(e){return this.Br.activeTargetIds.has(e)}clearQueryState(e){delete this.Lr[e]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(e){return this.Br.activeTargetIds.has(e)}start(){return this.Br=new Fx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qB{qr(e){}shutdown(){}}class j1{constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Qr(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let RT=null;function Vx(){return null===RT?RT=268435456+Math.round(2147483648*Math.random()):RT++,"0x"+RT.toString(16)}const KB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZB{constructor(e){this.Wr=e.Wr,this.Hr=e.Hr}Jr(e){this.Yr=e}Zr(e){this.Xr=e}onMessage(e){this.eo=e}close(){this.Hr()}send(e){this.Wr(e)}no(){this.Yr()}so(e){this.Xr(e)}io(e){this.eo(e)}}const Vi="WebChannelConnection";class YB extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.ro=(e.ssl?"https":"http")+"://"+e.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(e,t,r,i,a){const l=Vx(),f=this.ao(e,t);ze("RestConnection",`Sending RPC '${e}' ${l}:`,f,r);const m={};return this.ho(m,i,a),this.lo(e,f,m,r).then(v=>(ze("RestConnection",`Received RPC '${e}' ${l}: `,v),v),v=>{throw Lo("RestConnection",`RPC '${e}' ${l} failed with error: `,v,"url: ",f,"request:",r),v})}fo(e,t,r,i,a,l){return this.co(e,t,r,i,a)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+vf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ao(e,t){return`${this.ro}/v1/${t}:${KB[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){const a=Vx();return new Promise((l,f)=>{const m=new HM;m.setWithCredentials(!0),m.listenOnce($M.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case gm.NO_ERROR:const b=m.getResponseJson();ze(Vi,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(b)),l(b);break;case gm.TIMEOUT:ze(Vi,`RPC '${e}' ${a} timed out`),f(new Ue(ve.DEADLINE_EXCEEDED,"Request time out"));break;case gm.HTTP_ERROR:const T=m.getStatus();if(ze(Vi,`RPC '${e}' ${a} failed with status:`,T,"response text:",m.getResponseText()),T>0){let x=m.getResponseJson();Array.isArray(x)&&(x=x[0]);const V=x?.error;if(V&&V.status&&V.message){const G=function(ue){const Ie=ue.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(Ie)>=0?Ie:ve.UNKNOWN}(V.status);f(new Ue(G,V.message))}else f(new Ue(ve.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new Ue(ve.UNAVAILABLE,"Connection failed."));break;default:Tt()}}finally{ze(Vi,`RPC '${e}' ${a} completed.`)}});const v=JSON.stringify(i);ze(Vi,`RPC '${e}' ${a} sending request:`,i),m.send(t,"POST",v,r,15)})}wo(e,t,r){const i=Vx(),a=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=JO(),f=bE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new XO({})),this.ho(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const v=a.join("");ze(Vi,`Creating RPC '${e}' stream ${i}: ${v}`,m);const b=l.createWebChannel(v,m);let T=!1,x=!1;const V=new ZB({Wr:ue=>{x?ze(Vi,`Not sending because RPC '${e}' stream ${i} is closed:`,ue):(T||(ze(Vi,`Opening RPC '${e}' stream ${i} transport.`),b.open(),T=!0),ze(Vi,`RPC '${e}' stream ${i} sending:`,ue),b.send(ue))},Hr:()=>b.close()}),G=(ue,Ie,It)=>{ue.listen(Ie,xt=>{try{It(xt)}catch(Dt){setTimeout(()=>{throw Dt},0)}})};return G(b,mm.EventType.OPEN,()=>{x||ze(Vi,`RPC '${e}' stream ${i} transport opened.`)}),G(b,mm.EventType.CLOSE,()=>{x||(x=!0,ze(Vi,`RPC '${e}' stream ${i} transport closed`),V.so())}),G(b,mm.EventType.ERROR,ue=>{x||(x=!0,Lo(Vi,`RPC '${e}' stream ${i} transport errored:`,ue),V.so(new Ue(ve.UNAVAILABLE,"The operation could not be completed")))}),G(b,mm.EventType.MESSAGE,ue=>{var Ie;if(!x){const It=ue.data[0];Bt(!!It);const xt=It,Dt=xt.error||(null===(Ie=xt[0])||void 0===Ie?void 0:Ie.error);if(Dt){ze(Vi,`RPC '${e}' stream ${i} received error:`,Dt);const $t=Dt.status;let cn=function(ii){const Is=Zr[ii];if(void 0!==Is)return Bk(Is)}($t),En=Dt.message;void 0===cn&&(cn=ve.INTERNAL,En="Unknown error status: "+$t+" with message "+Dt.message),x=!0,V.so(new Ue(cn,En)),b.close()}else ze(Vi,`RPC '${e}' stream ${i} received:`,It),V.io(It)}}),G(f,Ub.STAT_EVENT,ue=>{ue.stat===jM.PROXY?ze(Vi,`RPC '${e}' stream ${i} detected buffering proxy`):ue.stat===jM.NOPROXY&&ze(Vi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{V.no()},0),V}}function H1(){return typeof window<"u"?window:null}function PT(){return typeof document<"u"?document:null}function uw(n){return new sB(n,!0)}class Ux{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Ws=e,this.timerId=t,this._o=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class z1{constructor(e,t,r,i,a,l,f,m){this.Ws=e,this.bo=r,this.Po=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new Ux(e,t)}xo(){return 1===this.state||5===this.state||this.No()}No(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.ko()}stop(){var e=this;return(0,Ce.Z)(function*(){e.xo()&&(yield e.close(0))})()}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(e){this.Bo(),this.stream.send(e)}Mo(){var e=this;return(0,Ce.Z)(function*(){if(e.No())return e.close(0)})()}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}close(e,t){var r=this;return(0,Ce.Z)(function*(){r.Bo(),r.Lo(),r.Co.cancel(),r.Vo++,4!==e?r.Co.reset():t&&t.code===ve.RESOURCE_EXHAUSTED?(Dr(t.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),r.Co.Eo()):t&&t.code===ve.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===t&&this.Ko(r,i)},r=>{e(()=>{const i=new Ue(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Go(i)})})}Ko(e,t){const r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr(()=>{r(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(i=>{r(()=>this.Go(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}ko(){var e=this;this.state=5,this.Co.Ao((0,Ce.Z)(function*(){e.state=0,e.start()}))}Go(e){return ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Ws.enqueueAndForget(()=>this.Vo===e?t():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QB extends z1{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}Qo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Co.reset();const t=function uB(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:Tt(),i=e.targetChange.targetIds||[],a=function(m,v){return m.useProto3Json?(Bt(void 0===v||"string"==typeof v),Br.fromBase64String(v||"")):(Bt(void 0===v||v instanceof Uint8Array),Br.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(m){const v=void 0===m.code?ve.UNKNOWN:Bk(m.code);return new Ue(v,m.message||"")}(l);t=new jk(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=La(n,r.document.name),a=$r(r.document.updateTime),l=r.document.createTime?$r(r.document.createTime):Mt.min(),f=new dt({mapValue:{fields:r.document.fields}}),m=Se.newFoundDocument(i,a,l,f);t=new _T(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=La(n,r.document),a=r.readTime?$r(r.readTime):Mt.min(),l=Se.newNoDocument(i,a);t=new _T([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=La(n,r.document);t=new _T([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Tt();{const r=e.filter,a=new eB(r.count||0);t=new $k(r.targetId,a)}}var m;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Mt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Mt.min():a.readTime?$r(a.readTime):Mt.min()}(e);return this.listener.zo(t,r)}jo(e){const t={};t.database=JE(this.serializer),t.addTarget=function(i,a){let l;const f=a.target;return l=uT(f)?{documents:Jk(i,f)}:{query:_x(i,f)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=Gk(i,a.resumeToken):a.snapshotVersion.compareTo(Mt.min())>0&&(l.readTime=Am(i,a.snapshotVersion.toTimestamp())),l}(this.serializer,e);const r=function cB(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=JE(this.serializer),t.removeTarget=e,this.Fo(t)}}class JB extends z1{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();const t=function lB(n,e){return n&&n.length>0?(Bt(void 0!==e),n.map(t=>function(r,i){let a=$r(r.updateTime?r.updateTime:i);return a.isEqual(Mt.min())&&(a=$r(i)),new Z2(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=$r(e.commitTime);return this.listener.Zo(r,t)}return Bt(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}tu(){const e={};e.database=JE(this.serializer),this.Fo(e)}Yo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>XE(this.serializer,r))};this.Fo(t)}}class XB extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.eu=!1}nu(){if(this.eu)throw new Ue(ve.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ue(ve.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.fo(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ue(ve.UNKNOWN,a.toString())})}terminate(){this.eu=!0}}class t${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.uu("Offline")))}set(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}uu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}cu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(Dr(t),this.ru=!1):ze("OnlineStateTracker",t)}hu(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}class n${constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=a,this._u.qr(f=>{r.enqueueAndForget((0,Ce.Z)(function*(){var m;rd(l)&&(ze("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,Ce.Z)(function*(v){const b=rt(v);b.du.add(4),yield Om(b),b.mu.set("Unknown"),b.du.delete(4),yield lw(b)}),function(v){return m.apply(this,arguments)})(l))}))}),this.mu=new t$(r,i)}}function lw(n){return $x.apply(this,arguments)}function $x(){return $x=(0,Ce.Z)(function*(n){if(rd(n))for(const e of n.wu)yield e(!0)}),$x.apply(this,arguments)}function Om(n){return jx.apply(this,arguments)}function jx(){return jx=(0,Ce.Z)(function*(n){for(const e of n.wu)yield e(!1)}),jx.apply(this,arguments)}function NT(n,e){const t=rt(n);t.fu.has(e.targetId)||(t.fu.set(e.targetId,e),Wx(t)?zx(t):Fm(t).No()&&Hx(t,e))}function cw(n,e){const t=rt(n),r=Fm(t);t.fu.delete(e),r.No()&&W1(t,e),0===t.fu.size&&(r.No()?r.$o():rd(t)&&t.mu.set("Unknown"))}function Hx(n,e){n.gu.Ot(e.targetId),Fm(n).jo(e)}function W1(n,e){n.gu.Ot(e),Fm(n).Wo(e)}function zx(n){n.gu=new tB({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.fu.get(e)||null}),Fm(n).start(),n.mu.ou()}function Wx(n){return rd(n)&&!Fm(n).xo()&&n.fu.size>0}function rd(n){return 0===rt(n).du.size}function G1(n){n.gu=void 0}function r$(n){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,Ce.Z)(function*(n){n.fu.forEach((e,t)=>{Hx(n,e)})}),Gx.apply(this,arguments)}function i$(n,e){return qx.apply(this,arguments)}function qx(){return qx=(0,Ce.Z)(function*(n,e){G1(n),Wx(n)?(n.mu.au(e),zx(n)):n.mu.set("Unknown")}),qx.apply(this,arguments)}function s$(n,e,t){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,Ce.Z)(function*(n,e,t){if(n.mu.set("Online"),e instanceof jk&&2===e.state&&e.cause)try{yield(r=(0,Ce.Z)(function*(i,a){const l=a.cause;for(const f of a.targetIds)i.fu.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.fu.delete(f),i.gu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield OT(n,r)}else if(e instanceof _T?n.gu.Kt(e):e instanceof $k?n.gu.Jt(e):n.gu.zt(e),!t.isEqual(Mt.min()))try{const r=yield O1(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.gu.Xt(a);return l.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.fu.get(m);v&&i.fu.set(m,v.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach(f=>{const m=i.fu.get(f);if(!m)return;i.fu.set(f,m.withResumeToken(Br.EMPTY_BYTE_STRING,m.snapshotVersion)),W1(i,f);const v=new Xc(m.target,f,1,m.sequenceNumber);Hx(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){ze("RemoteStore","Failed to raise snapshot:",r),yield OT(n,r)}var r}),Kx.apply(this,arguments)}function OT(n,e,t){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,Ce.Z)(function*(n,e,t){if(!Bo(e))throw e;n.du.add(1),yield Om(n),n.mu.set("Offline"),t||(t=()=>O1(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){ze("RemoteStore","Retrying IndexedDB access"),yield t(),n.du.delete(1),yield lw(n)}))}),Zx.apply(this,arguments)}function q1(n,e){return e().catch(t=>OT(n,t,e))}function km(n){return Yx.apply(this,arguments)}function Yx(){return Yx=(0,Ce.Z)(function*(n){const e=rt(n),t=id(e);let r=e.lu.length>0?e.lu[e.lu.length-1].batchId:-1;for(;o$(e);)try{const i=yield zB(e.localStore,r);if(null===i){0===e.lu.length&&t.$o();break}r=i.batchId,a$(e,i)}catch(i){yield OT(e,i)}K1(e)&&Z1(e)}),Yx.apply(this,arguments)}function o$(n){return rd(n)&&n.lu.length<10}function a$(n,e){n.lu.push(e);const t=id(n);t.No()&&t.Jo&&t.Yo(e.mutations)}function K1(n){return rd(n)&&!id(n).xo()&&n.lu.length>0}function Z1(n){id(n).start()}function u$(n){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,Ce.Z)(function*(n){id(n).tu()}),Qx.apply(this,arguments)}function l$(n){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,Ce.Z)(function*(n){const e=id(n);for(const t of n.lu)e.Yo(t.mutations)}),Jx.apply(this,arguments)}function c$(n,e,t){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,Ce.Z)(function*(n,e,t){const r=n.lu.shift(),i=cx.from(r,e,t);yield q1(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield km(n)}),Xx.apply(this,arguments)}function d$(n,e){return eR.apply(this,arguments)}function eR(){return eR=(0,Ce.Z)(function*(n,e){var t;e&&id(n).Jo&&(yield(t=(0,Ce.Z)(function*(r,i){if(Uk(a=i.code)&&a!==ve.ABORTED){const l=r.lu.shift();id(r).Oo(),yield q1(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield km(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),K1(n)&&Z1(n)}),eR.apply(this,arguments)}function Y1(n,e){return tR.apply(this,arguments)}function tR(){return tR=(0,Ce.Z)(function*(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const r=rd(t);t.du.add(3),yield Om(t),r&&t.mu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.du.delete(3),yield lw(t)}),tR.apply(this,arguments)}function nR(n,e){return rR.apply(this,arguments)}function rR(){return rR=(0,Ce.Z)(function*(n,e){const t=rt(n);e?(t.du.delete(2),yield lw(t)):e||(t.du.add(2),yield Om(t),t.mu.set("Unknown"))}),rR.apply(this,arguments)}function Fm(n){return n.yu||(n.yu=function(e,t,r){const i=rt(e);return i.nu(),new QB(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Jr:r$.bind(null,n),Zr:i$.bind(null,n),zo:s$.bind(null,n)}),n.wu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.yu.Oo(),Wx(n)?zx(n):n.mu.set("Unknown")):(yield n.yu.stop(),G1(n))});return function(t){return e.apply(this,arguments)}}())),n.yu}function id(n){return n.pu||(n.pu=function(e,t,r){const i=rt(e);return i.nu(),new JB(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Jr:u$.bind(null,n),Zr:d$.bind(null,n),Xo:l$.bind(null,n),Zo:c$.bind(null,n)}),n.wu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.pu.Oo(),yield km(n)):(yield n.pu.stop(),n.lu.length>0&&(ze("RemoteStore",`Stopping write stream with ${n.lu.length} pending writes`),n.lu=[]))});return function(t){return e.apply(this,arguments)}}())),n.pu}class iR{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,f=new iR(e,t,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ue(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lm(n,e){if(Dr("AsyncQueue",`${e}: ${n}`),Bo(n))return new Ue(ve.UNAVAILABLE,`${e}: ${n}`);throw n}class Vm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||gt.comparator(t.key,r.key):(t,r)=>gt.comparator(t.key,r.key),this.keyedMap=WE(),this.sortedSet=new ur(this.comparator)}static emptySet(e){return new Vm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Vm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Q1{constructor(){this.Iu=new ur(gt.comparator)}track(e){const t=e.doc.key,r=this.Iu.get(t);r?0!==e.type&&3===r.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==r.type?this.Iu=this.Iu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Iu=this.Iu.remove(t):1===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):Tt():this.Iu=this.Iu.insert(t,e)}Tu(){const e=[];return this.Iu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Um{constructor(e,t,r,i,a,l,f,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new Um(e,t,Vm.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&HE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class h${constructor(){this.Eu=void 0,this.listeners=[]}}class f${constructor(){this.queries=new Qc(e=>Ek(e),HE),this.onlineState="Unknown",this.Au=new Set}}function sR(n,e){return oR.apply(this,arguments)}function oR(){return oR=(0,Ce.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new h$),i)try{a.Eu=yield t.onListen(r)}catch(l){const f=Lm(l,`Initialization of query '${ax(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Ru(t.onlineState),a.Eu&&e.vu(a.Eu)&&lR(t)}),oR.apply(this,arguments)}function aR(n,e){return uR.apply(this,arguments)}function uR(){return uR=(0,Ce.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),uR.apply(this,arguments)}function p$(n,e){const t=rt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.vu(i)&&(r=!0);l.Eu=i}}r&&lR(t)}function g$(n,e,t){const r=rt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function lR(n){n.Au.forEach(e=>{e.next()})}class cR{constructor(e,t,r){this.query=e,this.bu=t,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Um(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),t=!0):this.Du(e,this.onlineState)&&(this.Cu(e),t=!0),this.Vu=e,t}onError(e){this.bu.error(e)}Ru(e){this.onlineState=e;let t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}Du(e,t){return!e.fromCache||(!this.options.xu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Su(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Cu(e){e=Um.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}class m${constructor(e,t){this.Nu=e,this.byteLength=t}ku(){return"metadata"in this.Nu}}class J1{constructor(e){this.serializer=e}Hi(e){return La(this.serializer,e)}Ji(e){return e.metadata.exists?Qk(this.serializer,e.document,!1):Se.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}Yi(e){return $r(e)}}class _${constructor(e,t,r){this.Ou=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=X1(e)}$u(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;const r=An.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new J1(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.Hi(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||mn()).add(a);t.set(l,f)}}return t}complete(){var e=this;return(0,Ce.Z)(function*(){const t=yield function WB(n,e,t,r){return Px.apply(this,arguments)}(e.localStore,new J1(e.serializer),e.documents,e.Ou.id),r=e.Mu(e.documents);for(const i of e.queries)yield GB(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Fu:e.collectionGroups,Bu:t}})()}}function X1(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class eF{constructor(e){this.key=e}}class tF{constructor(e){this.key=e}}class nF{constructor(e,t){this.query=e,this.Lu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=mn(),this.mutatedKeys=mn(),this.Ku=Ck(e),this.Gu=new Vm(this.Ku)}get Qu(){return this.Lu}zu(e,t){const r=t?t.ju:new Q1,i=t?t.Gu:this.Gu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,T)=>{const x=i.get(b),V=zE(this.query,T)?T:null,G=!!x&&this.mutatedKeys.has(x.key),ue=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Ie=!1;x&&V?x.data.isEqual(V.data)?G!==ue&&(r.track({type:3,doc:V}),Ie=!0):this.Wu(x,V)||(r.track({type:2,doc:V}),Ie=!0,(m&&this.Ku(V,m)>0||v&&this.Ku(V,v)<0)&&(f=!0)):!x&&V?(r.track({type:0,doc:V}),Ie=!0):x&&!V&&(r.track({type:1,doc:x}),Ie=!0,(m||v)&&(f=!0)),Ie&&(V?(l=l.add(V),a=ue?a.add(b):a.delete(b)):(l=l.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{Gu:l,ju:r,Mi:f,mutatedKeys:a}}Wu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const a=e.ju.Tu();a.sort((v,b)=>function(T,x){const V=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tt()}};return V(T)-V(x)}(v.type,b.type)||this.Ku(v.doc,b.doc)),this.Hu(r);const l=t?this.Ju():[],f=0===this.Uu.size&&this.current?1:0,m=f!==this.qu;return this.qu=f,0!==a.length||m?{snapshot:new Um(this.query,e.Gu,i,a,e.mutatedKeys,0===f,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),Yu:l}:{Yu:l}}Ru(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new Q1,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.Uu;this.Uu=mn(),this.Gu.forEach(r=>{this.Zu(r.key)&&(this.Uu=this.Uu.add(r.key))});const t=[];return e.forEach(r=>{this.Uu.has(r)||t.push(new tF(r))}),this.Uu.forEach(r=>{e.has(r)||t.push(new eF(r))}),t}Xu(e){this.Lu=e.Wi,this.Uu=mn();const t=this.zu(e.documents);return this.applyChanges(t,!0)}tc(){return Um.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class y${constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class v${constructor(e){this.key=e,this.ec=!1}}class E${constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.nc={},this.sc=new Qc(f=>Ek(f),HE),this.ic=new Map,this.rc=new Set,this.oc=new ur(gt.comparator),this.uc=new Map,this.cc=new Tx,this.ac={},this.hc=new Map,this.lc=Vf.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function w$(n,e){return dR.apply(this,arguments)}function dR(){return dR=(0,Ce.Z)(function*(n,e){const t=OR(n);let r,i;const a=t.sc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.tc();else{const l=yield Pm(t.localStore,Ji(e));t.isPrimaryClient&&NT(t.remoteStore,l);const f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield hR(t,e,r,"current"===f,l.resumeToken)}return i}),dR.apply(this,arguments)}function hR(n,e,t,r,i){return fR.apply(this,arguments)}function fR(){return fR=(0,Ce.Z)(function*(n,e,t,r,i){n.dc=(T,x,V)=>{return(G=(0,Ce.Z)(function*(ue,Ie,It,xt){let Dt=Ie.view.zu(It);Dt.Mi&&(Dt=yield AT(ue.localStore,Ie.query,!1).then(({documents:En})=>Ie.view.zu(En,Dt)));const $t=xt&&xt.targetChanges.get(Ie.targetId),cn=Ie.view.applyChanges(Dt,ue.isPrimaryClient,$t);return IR(ue,Ie.targetId,cn.Yu),cn.snapshot}),function(ue,Ie,It,xt){return G.apply(this,arguments)})(n,T,x,V);var G};const a=yield AT(n.localStore,e,!0),l=new nF(e,a.Wi),f=l.zu(a.documents),m=YE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=l.applyChanges(f,n.isPrimaryClient,m);IR(n,t,v.Yu);const b=new y$(e,t,l);return n.sc.set(e,b),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),v.snapshot}),fR.apply(this,arguments)}function C$(n,e){return pR.apply(this,arguments)}function pR(){return pR=(0,Ce.Z)(function*(n,e){const t=rt(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(a=>!HE(a,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Nm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),cw(t.remoteStore,r.targetId),Bm(t,r.targetId)}).catch(Uo))):(Bm(t,r.targetId),yield Nm(t.localStore,r.targetId,!0))}),pR.apply(this,arguments)}function gR(){return gR=(0,Ce.Z)(function*(n,e,t){const r=kR(n);try{const i=yield function(a,l){const f=rt(a),m=Xn.now(),v=l.reduce((x,V)=>x.add(V.key),mn());let b,T;return f.persistence.runTransaction("Locally write mutations","readwrite",x=>{let V=vs(),G=mn();return f.Ki.getEntries(x,v).next(ue=>{V=ue,V.forEach((Ie,It)=>{It.isValidDocument()||(G=G.add(Ie))})}).next(()=>f.localDocuments.getOverlayedDocuments(x,V)).next(ue=>{b=ue;const Ie=[];for(const It of l){const xt=Q2(It,b.get(It.key).overlayedDocument);null!=xt&&Ie.push(new ml(It.key,xt,Gt(xt.value.mapValue),Er.exists(!0)))}return f.mutationQueue.addMutationBatch(x,m,Ie,l)}).next(ue=>{T=ue;const Ie=ue.applyToLocalDocumentSet(b,G);return f.documentOverlayCache.saveOverlays(x,ue.batchId,Ie)})}).then(()=>({batchId:T.batchId,changes:bk(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,f){let m=a.ac[a.currentUser.toKey()];m||(m=new ur(ln)),m=m.insert(l,f),a.ac[a.currentUser.toKey()]=m}(r,i.batchId,t),yield _l(r,i.changes),yield km(r.remoteStore)}catch(i){const a=Lm(i,"Failed to persist write");t.reject(a)}}),gR.apply(this,arguments)}function rF(n,e){return mR.apply(this,arguments)}function mR(){return mR=(0,Ce.Z)(function*(n,e){const t=rt(n);try{const r=yield HB(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.uc.get(a);l&&(Bt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.ec=!0:i.modifiedDocuments.size>0?Bt(l.ec):i.removedDocuments.size>0&&(Bt(l.ec),l.ec=!1))}),yield _l(t,r,e)}catch(r){yield Uo(r)}}),mR.apply(this,arguments)}function iF(n,e,t){const r=rt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((a,l)=>{const f=l.view.Ru(e);f.snapshot&&i.push(f.snapshot)}),function(a,l){const f=rt(a);f.onlineState=l;let m=!1;f.queries.forEach((v,b)=>{for(const T of b.listeners)T.Ru(l)&&(m=!0)}),m&&lR(f)}(r.eventManager,e),i.length&&r.nc.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function b$(n,e,t){return _R.apply(this,arguments)}function _R(){return _R=(0,Ce.Z)(function*(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),a=i&&i.key;if(a){let l=new ur(gt.comparator);l=l.insert(a,Se.newNoDocument(a,Mt.min()));const f=mn().add(a),m=new ZE(Mt.min(),new Map,new jn(ln),l,f);yield rF(r,m),r.oc=r.oc.remove(a),r.uc.delete(e),bR(r)}else yield Nm(r.localStore,e,!1).then(()=>Bm(r,e,t)).catch(Uo)}),_R.apply(this,arguments)}function T$(n,e){return yR.apply(this,arguments)}function yR(){return yR=(0,Ce.Z)(function*(n,e){const t=rt(n),r=e.batch.batchId;try{const i=yield jB(t.localStore,e);CR(t,r,null),wR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield _l(t,i)}catch(i){yield Uo(i)}}),yR.apply(this,arguments)}function D$(n,e,t){return vR.apply(this,arguments)}function vR(){return vR=(0,Ce.Z)(function*(n,e,t){const r=rt(n);try{const i=yield function(a,l){const f=rt(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,l).next(b=>(Bt(null!==b),v=b.keys(),f.mutationQueue.removeMutationBatch(m,b))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);CR(r,e,t),wR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield _l(r,i)}catch(i){yield Uo(i)}}),vR.apply(this,arguments)}function ER(){return ER=(0,Ce.Z)(function*(n,e){const t=rt(n);rd(t.remoteStore)||ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=rt(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=Lm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),ER.apply(this,arguments)}function wR(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function CR(n,e,t){const r=rt(n);let i=r.ac[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function Bm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc.wc(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.hs(e).forEach(r=>{n.cc.containsKey(r)||sF(n,r)})}function sF(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(cw(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),bR(n))}function IR(n,e,t){for(const r of t)r instanceof eF?(n.cc.addReference(r.key,e),A$(n,r)):r instanceof tF?(ze("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||sF(n,r.key)):Tt()}function A$(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(ze("SyncEngine","New document in limbo: "+t),n.rc.add(r),bR(n))}function bR(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new gt(An.fromString(e)),r=n.lc.next();n.uc.set(r,new v$(t)),n.oc=n.oc.insert(t,r),NT(n.remoteStore,new Xc(Ji(Im(t.path)),r,2,Yi.ct))}}function _l(n,e,t){return TR.apply(this,arguments)}function TR(){return TR=(0,Ce.Z)(function*(n,e,t){const r=rt(n),i=[],a=[],l=[];var f;r.sc.isEmpty()||(r.sc.forEach((f,m)=>{l.push(r.dc(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const b=Mx.Di(m.targetId,v);a.push(b)}}))}),yield Promise.all(l),r.nc.zo(i),yield(f=(0,Ce.Z)(function*(m,v){const b=rt(m);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ce.forEach(v,x=>ce.forEach(x.Vi,V=>b.persistence.referenceDelegate.addReference(T,x.targetId,V)).next(()=>ce.forEach(x.Si,V=>b.persistence.referenceDelegate.removeReference(T,x.targetId,V)))))}catch(T){if(!Bo(T))throw T;ze("LocalStore","Failed to update sequence numbers: "+T)}for(const T of v){const x=T.targetId;if(!T.fromCache){const V=b.Li.get(x),ue=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);b.Li=b.Li.insert(x,ue)}}}),function(m,v){return f.apply(this,arguments)})(r.localStore,a))}),TR.apply(this,arguments)}function M$(n,e){return DR.apply(this,arguments)}function DR(){return DR=(0,Ce.Z)(function*(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){ze("SyncEngine","User change. New user:",e.toKey());const r=yield N1(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(l=>{l.forEach(f=>{f.reject(new Ue(ve.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield _l(t,r.Qi)}var i}),DR.apply(this,arguments)}function x$(n,e){const t=rt(n),r=t.uc.get(e);if(r&&r.ec)return mn().add(r.key);{let i=mn();const a=t.ic.get(e);if(!a)return i;for(const l of a){const f=t.sc.get(l);i=i.unionWith(f.view.Qu)}return i}}function R$(n,e){return SR.apply(this,arguments)}function SR(){return SR=(0,Ce.Z)(function*(n,e){const t=rt(n),r=yield AT(t.localStore,e.query,!0),i=e.view.Xu(r);return t.isPrimaryClient&&IR(t,e.targetId,i.Yu),i}),SR.apply(this,arguments)}function P$(n,e){return AR.apply(this,arguments)}function AR(){return AR=(0,Ce.Z)(function*(n,e){const t=rt(n);return L1(t.localStore,e).then(r=>_l(t,r))}),AR.apply(this,arguments)}function N$(n,e,t,r){return MR.apply(this,arguments)}function MR(){return MR=(0,Ce.Z)(function*(n,e,t,r){const i=rt(n),a=yield function(l,f){const m=rt(l),v=rt(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",b=>v.In(b,f).next(T=>T?m.localDocuments.getDocuments(b,T):ce.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield km(i.remoteStore):"acknowledged"===t||"rejected"===t?(CR(i,e,r||null),wR(i,e),f=e,rt(rt(i.localStore).mutationQueue).En(f)):Tt(),yield _l(i,a)):ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),MR.apply(this,arguments)}function xR(){return xR=(0,Ce.Z)(function*(n,e){const t=rt(n);if(OR(t),kR(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield oF(t,r.toArray());t.fc=!0,yield nR(t.remoteStore,!0);for(const a of i)NT(t.remoteStore,a)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Bm(t,l),Nm(t.localStore,l,!0))),cw(t.remoteStore,l)}),yield i,yield oF(t,r),function(a){const l=rt(a);l.uc.forEach((f,m)=>{cw(l.remoteStore,m)}),l.cc.ls(),l.uc=new Map,l.oc=new ur(gt.comparator)}(t),t.fc=!1,yield nR(t.remoteStore,!1)}}),xR.apply(this,arguments)}function oF(n,e,t){return RR.apply(this,arguments)}function RR(){return RR=(0,Ce.Z)(function*(n,e,t){const r=rt(n),i=[],a=[];for(const l of e){let f;const m=r.ic.get(l);if(m&&0!==m.length){f=yield Pm(r.localStore,Ji(m[0]));for(const v of m){const b=r.sc.get(v),T=yield R$(r,b);T.snapshot&&a.push(T.snapshot)}}else{const v=yield F1(r.localStore,l);f=yield Pm(r.localStore,v),yield hR(r,aF(v),l,!1,f.resumeToken)}i.push(f)}return r.nc.zo(a),i}),RR.apply(this,arguments)}function aF(n){return yk(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function k$(n){const e=rt(n);return rt(rt(e.localStore).persistence).bi()}function F$(n,e,t,r){return PR.apply(this,arguments)}function PR(){return PR=(0,Ce.Z)(function*(n,e,t,r){const i=rt(n);if(i.fc)return void ze("SyncEngine","Ignoring unexpected query state notification.");const a=i.ic.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield L1(i.localStore,wk(a[0])),f=ZE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Br.EMPTY_BYTE_STRING);yield _l(i,l,f);break}case"rejected":yield Nm(i.localStore,e,!0),Bm(i,e,r);break;default:Tt()}}),PR.apply(this,arguments)}function L$(n,e,t){return NR.apply(this,arguments)}function NR(){return NR=(0,Ce.Z)(function*(n,e,t){const r=OR(n);if(r.fc){for(const i of e){if(r.ic.has(i)){ze("SyncEngine","Adding an already active target "+i);continue}const a=yield F1(r.localStore,i),l=yield Pm(r.localStore,a);yield hR(r,aF(a),l.targetId,!1,l.resumeToken),NT(r.remoteStore,l)}for(const i of t)r.ic.has(i)&&(yield Nm(r.localStore,i,!1).then(()=>{cw(r.remoteStore,i),Bm(r,i)}).catch(Uo))}}),NR.apply(this,arguments)}function OR(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=b$.bind(null,e),e.nc.zo=p$.bind(null,e.eventManager),e.nc.wc=g$.bind(null,e.eventManager),e}function kR(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=T$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=D$.bind(null,e),e}class kT{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ce.Z)(function*(){t.serializer=uw(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return P1(this.persistence,new R1,e.initialUser,this.serializer)}createPersistence(e){return new M1(DT.Fs,this.serializer)}createSharedClientState(e){return new $1}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class FR extends kT{constructor(e,t,r){super(),this.mc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e),yield r.mc.initialize(r,e),yield kR(r.mc.syncEngine),yield km(r.mc.remoteStore),yield r.persistence.hi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return P1(this.persistence,new R1,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new SB(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Zb(t,this.persistence);return new rk(e.asyncQueue,r)}createPersistence(e){const t=Ax(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Es.withCacheSize(this.cacheSizeBytes):Es.DEFAULT;return new Sx(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,H1(),PT(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new $1}}class uF extends FR{constructor(e,t){super(e,t,!1),this.mc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e);const i=r.mc.syncEngine;r.sharedClientState instanceof Lx&&(r.sharedClientState.syncEngine={$r:N$.bind(null,i),Mr:F$.bind(null,i),Fr:L$.bind(null,i),bi:k$.bind(null,i),Or:P$.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.hi(function(){var a=(0,Ce.Z)(function*(l){yield function O$(n,e){return xR.apply(this,arguments)}(r.mc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=H1();if(!Lx.D(t))throw new Ue(ve.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Ax(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class $m{initialize(e,t){var r=this;return(0,Ce.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>iF(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=M$.bind(null,r.syncEngine),yield nR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new f$}createDatastore(e){const t=uw(e.databaseInfo.databaseId),r=new YB(e.databaseInfo);return new XB(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>iF(this.syncEngine,f,0),l=j1.D()?new j1:new qB,new n$(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,f,m,v){const b=new E$(r,i,a,l,f,m);return v&&(b.fc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ce.Z)(function*(t){const r=rt(t);ze("RemoteStore","RemoteStore shutting down."),r.du.add(5),yield Om(r),r._u.shutdown(),r.mu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function lF(n,e=10240){let t=0;return{read:()=>(0,Ce.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class FT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.gc(this.observer.next,e)}error(e){this.observer.error?this.gc(this.observer.error,e):Dr("Uncaught Error in snapshot listener:",e.toString())}yc(){this.muted=!0}gc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class U${constructor(e,t){this.Ic=e,this.serializer=t,this.metadata=new Vr,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(r=>{r&&r.ku()?this.metadata.resolve(r.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Nu)}`))},r=>this.metadata.reject(r))}close(){return this.Ic.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}_c(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Ec()})()}Ec(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Ac();if(null===t)return null;const r=e.Tc.decode(t),i=Number(r);isNaN(i)&&e.Rc(`length string (${r}) is not valid number`);const a=yield e.vc(i);return new m$(JSON.parse(a),t.length+i)})()}bc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ac(){var e=this;return(0,Ce.Z)(function*(){for(;e.bc()<0&&!(yield e.Pc()););if(0===e.buffer.length)return null;const t=e.bc();t<0&&e.Rc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,Ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.Pc())&&t.Rc("Reached the end of bundle when more is expected.");const r=t.Tc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Rc(e){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${e}`)}Pc(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Ic.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class B${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ue(ve.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ce.Z)(function*(a,l){const f=rt(a),m=JE(f.serializer)+"/documents",v={documents:l.map(V=>QE(f.serializer,V))},b=yield f.fo("BatchGetDocuments",m,v,l.length),T=new Map;b.forEach(V=>{const G=function aB(n,e){return"found"in e?function(t,r){Bt(!!r.found);const i=La(t,r.found.name),a=$r(r.found.updateTime),l=r.found.createTime?$r(r.found.createTime):Mt.min(),f=new dt({mapValue:{fields:r.found.fields}});return Se.newFoundDocument(i,a,l,f)}(n,e):"missing"in e?function(t,r){Bt(!!r.missing),Bt(!!r.readTime);const i=La(t,r.missing),a=$r(r.readTime);return Se.newNoDocument(i,a)}(n,e):Tt()}(f.serializer,V);T.set(G.key.toString(),G)});const x=[];return l.forEach(V=>{const G=T.get(V.toString());Bt(!!G),x.push(G)}),x}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Sm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=gt.fromPath(i);e.mutations.push(new ux(a,e.precondition(a)))}),yield(r=(0,Ce.Z)(function*(i,a){const l=rt(i),f=JE(l.serializer)+"/documents",m={writes:a.map(v=>XE(l.serializer,v))};yield l.co("Commit",f,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Tt();t=Mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ue(ve.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Mt.min())?Er.exists(!1):Er.updateTime(t):Er.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Mt.min()))throw new Ue(ve.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Er.updateTime(t)}return Er.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class $${constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Vc=r.maxAttempts,this.Co=new Ux(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){var e=this;this.Co.Ao((0,Ce.Z)(function*(){const t=new B$(e.datastore),r=e.Dc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Cc(a)}))}).catch(i=>{e.Cc(i)})}))}Dc(e){try{const t=this.updateFunction(e);return!If(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Cc(e){this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(e)}xc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Uk(t)}return!1}}class j${constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=qr.UNAUTHENTICATED,this.clientId=ME.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ce.Z)(function*(f){ze("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(ze("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ue(ve.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Lm(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function LT(n,e){return LR.apply(this,arguments)}function LR(){return LR=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ce.Z)(function*(a){r.isEqual(a)||(yield N1(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),LR.apply(this,arguments)}function VR(n,e){return UR.apply(this,arguments)}function UR(){return UR=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield BR(n);ze("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Y1(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>Y1(e.remoteStore,a)),n._onlineComponents=e}),UR.apply(this,arguments)}function cF(n){return"FirebaseError"===n.name?n.code===ve.FAILED_PRECONDITION||n.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function BR(n){return $R.apply(this,arguments)}function $R(){return $R=(0,Ce.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ze("FirestoreClient","Using user provided OfflineComponentProvider");try{yield LT(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!cF(t))throw t;Lo("Error using user provided cache. Falling back to memory cache: "+t),yield LT(n,new kT)}}else ze("FirestoreClient","Using default OfflineComponentProvider"),yield LT(n,new kT);return n._offlineComponents}),$R.apply(this,arguments)}function VT(n){return jR.apply(this,arguments)}function jR(){return jR=(0,Ce.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ze("FirestoreClient","Using user provided OnlineComponentProvider"),yield VR(n,n._uninitializedComponentsProvider._online)):(ze("FirestoreClient","Using default OnlineComponentProvider"),yield VR(n,new $m))),n._onlineComponents}),jR.apply(this,arguments)}function dF(n){return BR(n).then(e=>e.persistence)}function UT(n){return BR(n).then(e=>e.localStore)}function hF(n){return VT(n).then(e=>e.remoteStore)}function HR(n){return VT(n).then(e=>e.syncEngine)}function jm(n){return zR.apply(this,arguments)}function zR(){return zR=(0,Ce.Z)(function*(n){const e=yield VT(n),t=e.eventManager;return t.onListen=w$.bind(null,e.syncEngine),t.onUnlisten=C$.bind(null,e.syncEngine),t}),zR.apply(this,arguments)}function pF(n,e,t={}){const r=new Vr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,a,l,f,m){const v=new FT({next:T=>{a.enqueueAndForget(()=>aR(i,b));const x=T.docs.has(l);!x&&T.fromCache?m.reject(new Ue(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&T.fromCache&&f&&"server"===f.source?m.reject(new Ue(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),b=new cR(Im(l.path),v,{includeMetadataChanges:!0,xu:!0});return sR(i,b)}(yield jm(n),n.asyncQueue,e,t,r)})),r.promise}function gF(n,e,t={}){const r=new Vr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,a,l,f,m){const v=new FT({next:T=>{a.enqueueAndForget(()=>aR(i,b)),T.fromCache&&"server"===f.source?m.reject(new Ue(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),b=new cR(l,v,{includeMetadataChanges:!0,xu:!0});return sR(i,b)}(yield jm(n),n.asyncQueue,e,t,r)})),r.promise}const mF=new Map;function WR(n,e,t){if(!t)throw new Ue(ve.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _F(n,e,t,r){if(!0===e&&!0===r)throw new Ue(ve.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yF(n){if(!gt.isDocumentKey(n))throw new Ue(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vF(n){if(gt.isDocumentKey(n))throw new Ue(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function BT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Tt()}function Pn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ue(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=BT(n);throw new Ue(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function EF(n,e){if(e<=0)throw new Ue(ve.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class wF{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ue(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ue(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,_F("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wF({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ue(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ue(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wF(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new WM;switch(t.type){case"firstParty":return new SE(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ue(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=mF.get(e);t&&(ze("ComponentProvider","Removing Datastore"),mF.delete(e),t.terminate())}(this),Promise.resolve()}}function CF(n,e,t,r={}){var i;const a=(n=Pn(n,dw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Lo("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,f;if("string"==typeof r.mockUserToken)l=r.mockUserToken,f=qr.MOCK_USER;else{l=(0,J.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ue(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new qr(m)}n._authCredentials=new DE(new Zi(l,f))}}class pr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Va(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pr(this.firestore,e,this._key)}}class Ti{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ti(this.firestore,e,this._query)}}class Va extends Ti{constructor(e,t,r){super(e,t,Im(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pr(this.firestore,null,new gt(e))}withConverter(e){return new Va(this.firestore,e,this._path)}}function IF(n,e,...t){if(n=(0,J.m9)(n),WR("collection","path",e),n instanceof dw){const r=An.fromString(e,...t);return vF(r),new Va(n,null,r)}{if(!(n instanceof pr||n instanceof Va))throw new Ue(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(An.fromString(e,...t));return vF(r),new Va(n.firestore,null,r)}}function $T(n,e,...t){if(n=(0,J.m9)(n),1===arguments.length&&(e=ME.A()),WR("doc","path",e),n instanceof dw){const r=An.fromString(e,...t);return yF(r),new pr(n,null,new gt(r))}{if(!(n instanceof pr||n instanceof Va))throw new Ue(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(An.fromString(e,...t));return yF(r),new pr(n.firestore,n instanceof Va?n.converter:null,new gt(r))}}function bF(n,e){return n=(0,J.m9)(n),e=(0,J.m9)(e),(n instanceof pr||n instanceof Va)&&(e instanceof pr||e instanceof Va)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function GR(n,e){return n=(0,J.m9)(n),e=(0,J.m9)(e),n instanceof Ti&&e instanceof Ti&&n.firestore===e.firestore&&HE(n._query,e._query)&&n.converter===e.converter}class J${constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new Ux(this,"async_queue_retry"),this.qc=()=>{const t=PT();t&&ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Co.vo()};const e=PT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Uc(),this.Kc(e)}enterRestrictedMode(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;const t=PT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}enqueue(e){if(this.Uc(),this.Oc)return new Promise(()=>{});const t=new Vr;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.kc.push(e),this.Gc()))}Gc(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.kc.length){try{yield e.kc[0](),e.kc.shift(),e.Co.reset()}catch(t){if(!Bo(t))throw t;ze("AsyncQueue","Operation failed with retryable error: "+t)}e.kc.length>0&&e.Co.Ao(()=>e.Gc())}})()}Kc(e){const t=this.Nc.then(()=>(this.Fc=!0,e().catch(r=>{throw this.Mc=r,this.Fc=!1,Dr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Fc=!1,r))));return this.Nc=t,t}enqueueAfterDelay(e,t,r){this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);const i=iR.createAndSchedule(this,e,t,r,a=>this.Qc(a));return this.$c.push(i),i}Uc(){this.Mc&&Tt()}verifyOperationInProgress(){}zc(){var e=this;return(0,Ce.Z)(function*(){let t;do{t=e.Nc,yield t}while(t!==e.Nc)})()}jc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Wc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Hc(e){this.Lc.push(e)}Qc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function qR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class X${constructor(){this._progressObserver={},this._taskCompletionResolver=new Vr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class gr extends dw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new J$,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||TF(this),this._firestoreClient.terminate()}}function tj(n,e){const t="object"==typeof n?n:(0,On.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,On._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=(0,J.P0)("firestore");a&&CF(i,...a)}return i}function jr(n){return n._firestoreClient||TF(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function TF(n){var e,t,r;const i=n._freezeSettings(),a=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ck(n._databaseId,f,n._persistenceKey,(v=i).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,v.useFetchStreams));var f,v;n._firestoreClient=new j$(n._authCredentials,n._appCheckCredentials,n._queue,a),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function DF(n,e,t){const r=new Vr;return n.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield LT(n,t),yield VR(n,e),r.resolve()}catch(i){const a=i;if(!cF(a))throw a;Lo("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function SF(n){if(n._initialized||n._terminated)throw new Ue(ve.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ua{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ua(Br.fromBase64String(e))}catch(t){throw new Ue(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ua(Br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class yl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ue(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bf{constructor(e){this._methodName=e}}class jT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ue(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ue(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ln(this._lat,e._lat)||ln(this._long,e._long)}}const dj=/^__.*__$/;class hj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ml(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dm(e,this.data,t,this.fieldTransforms)}}class AF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ml(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function MF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tt()}}class HT{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Jc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(e){return new HT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Zc({path:r,ta:!1});return i.ea(e),i}na(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Zc({path:r,ta:!1});return i.Jc(),i}sa(e){return this.Zc({path:void 0,ta:!0})}ia(e){return GT(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Jc(){if(this.path)for(let e=0;e<this.path.length;e++)this.ea(this.path.get(e))}ea(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(MF(this.Yc)&&dj.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}class fj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||uw(e)}ua(e,t,r,i=!1){return new HT({Yc:e,methodName:t,oa:r,path:vr.emptyPath(),ta:!1,ra:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $f(n){const e=n._freezeSettings(),t=uw(n._databaseId);return new fj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function zT(n,e,t,r,i,a={}){const l=n.ua(a.merge||a.mergeFields?2:0,e,t,i);QR("Data must be an object, but it was:",l,r);const f=PF(r,l);let m,v;if(a.merge)m=new Qi(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const b=[];for(const T of a.mergeFields){const x=pw(e,T,t);if(!l.contains(x))throw new Ue(ve.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);OF(b,x)||b.push(x)}m=new Qi(b),v=l.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,v=l.fieldTransforms;return new hj(new dt(f),m,v)}class fw extends Bf{_toFieldTransform(e){if(2!==e.Yc)throw e.ia(1===e.Yc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fw}}function xF(n,e,t){return new HT({Yc:3,oa:e.settings.oa,methodName:n._methodName,ta:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class KR extends Bf{_toFieldTransform(e){return new qE(e.path,new bm)}isEqual(e){return e instanceof KR}}class pj extends Bf{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=xF(this,e,!0),r=this.ca.map(a=>jf(a,t)),i=new Rf(r);return new qE(e.path,i)}isEqual(e){return this===e}}class gj extends Bf{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=xF(this,e,!0),r=this.ca.map(a=>jf(a,t)),i=new Pf(r);return new qE(e.path,i)}isEqual(e){return this===e}}class mj extends Bf{constructor(e,t){super(e),this.aa=t}_toFieldTransform(e){const t=new Tm(e.serializer,Ak(e.serializer,this.aa));return new qE(e.path,t)}isEqual(e){return this===e}}function ZR(n,e,t,r){const i=n.ua(1,e,t);QR("Data must be an object, but it was:",i,r);const a=[],l=dt.empty();dl(r,(m,v)=>{const b=WT(e,m,t);v=(0,J.m9)(v);const T=i.na(b);if(v instanceof fw)a.push(b);else{const x=jf(v,T);null!=x&&(a.push(b),l.set(b,x))}});const f=new Qi(a);return new AF(l,f,i.fieldTransforms)}function YR(n,e,t,r,i,a){const l=n.ua(1,e,t),f=[pw(e,r,t)],m=[i];if(a.length%2!=0)throw new Ue(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)f.push(pw(e,a[x])),m.push(a[x+1]);const v=[],b=dt.empty();for(let x=f.length-1;x>=0;--x)if(!OF(v,f[x])){const V=f[x];let G=m[x];G=(0,J.m9)(G);const ue=l.na(V);if(G instanceof fw)v.push(V);else{const Ie=jf(G,ue);null!=Ie&&(v.push(V),b.set(V,Ie))}}const T=new Qi(v);return new AF(b,T,l.fieldTransforms)}function RF(n,e,t,r=!1){return jf(t,n.ua(r?4:3,e))}function jf(n,e){if(NF(n=(0,J.m9)(n)))return QR("Unsupported field value:",e,n),PF(n,e);if(n instanceof Bf)return function(t,r){if(!MF(r.Yc))throw r.ia(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ia(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ta&&4!==e.Yc)throw e.ia("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let f=jf(l,r.sa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,J.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ak(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Xn.fromDate(t);return{timestampValue:Am(r.serializer,i)}}if(t instanceof Xn){const i=new Xn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Am(r.serializer,i)}}if(t instanceof jT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ua)return{bytesValue:Gk(r.serializer,t._byteString)};if(t instanceof pr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ia(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:px(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ia(`Unsupported field value: ${BT(t)}`)}(n,e)}function PF(n,e){const t={};return VE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):dl(n,(r,i)=>{const a=jf(i,e.Xc(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function NF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Xn||n instanceof jT||n instanceof Ua||n instanceof pr||n instanceof Bf)}function QR(n,e,t){if(!NF(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=BT(t);throw e.ia("an object"===r?n+" a custom object":n+" "+r)}var r}function pw(n,e,t){if((e=(0,J.m9)(e))instanceof yl)return e._internalPath;if("string"==typeof e)return WT(n,e);throw GT("Field path arguments must be of type string or ",n,!1,void 0,t)}const _j=new RegExp("[~\\*/\\[\\]]");function WT(n,e,t){if(e.search(_j)>=0)throw GT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yl(...e.split("."))._internalPath}catch{throw GT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function GT(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new Ue(ve.INVALID_ARGUMENT,f+n+m)}function OF(n,e){return n.some(t=>t.isEqual(e))}class gw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new pr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new yj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class yj extends gw{data(){return super.data()}}function qT(n,e){return"string"==typeof e?WT(n,e):e instanceof yl?e._internalPath:e._delegate._internalPath}function kF(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ue(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class JR{}class mw extends JR{}function sd(n,e,...t){let r=[];e instanceof JR&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof Hm).length,l=i.filter(f=>f instanceof _w).length;if(a>1||a>0&&l>0)throw new Ue(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class _w extends mw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new _w(e,t,r)}_apply(e){const t=this._parse(e);return UF(e._query,t),new Ti(e.firestore,e.converter,ox(e._query,t))}_parse(e){const t=$f(e.firestore);return function(i,a,l,f,m,v,b){let T;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Ue(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){VF(b,v);const x=[];for(const V of b)x.push(LF(f,i,V));T={arrayValue:{values:x}}}else T=LF(f,i,b)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||VF(b,v),T=RF(l,"where",b,"in"===v||"not-in"===v);return Cn.create(m,v,T)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Hm extends JR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hm(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:$n.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const f of l)UF(a,f),a=ox(a,f)}(e._query,t),new Ti(e.firestore,e.converter,ox(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class XR extends mw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new XR(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ue(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ue(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new ys(i,a);return function(f,m){if(null===ix(f)){const v=cT(f);null!==v&&BF(0,v,m.field)}}(r,l),l}(e._query,this._field,this._direction);return new Ti(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new gl(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class KT extends mw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new KT(e,t,r)}_apply(e){return new Ti(e.firestore,e.converter,dT(e._query,this._limit,this._limitType))}}class ZT extends mw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ZT(e,t,r)}_apply(e){const t=FF(e,this.type,this._docOrFields,this._inclusive);return new Ti(e.firestore,e.converter,(i=t,new gl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class YT extends mw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new YT(e,t,r)}_apply(e){const t=FF(e,this.type,this._docOrFields,this._inclusive);return new Ti(e.firestore,e.converter,(i=t,new gl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function FF(n,e,t,r){if(t[0]=(0,J.m9)(t[0]),t[0]instanceof gw)return function(i,a,l,f,m){if(!f)throw new Ue(ve.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const b of xf(i))if(b.field.isKeyField())v.push(g(a,f.key));else{const T=f.data.field(b.field);if(aT(T))throw new Ue(ve.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const x=b.field.canonicalString();throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}v.push(T)}return new Wt(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=$f(n.firestore);return function(a,l,f,m,v,b){const T=a.explicitOrderBy;if(v.length>T.length)throw new Ue(ve.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let V=0;V<v.length;V++){const G=v[V];if(T[V].field.isKeyField()){if("string"!=typeof G)throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof G}`);if(!sx(a)&&-1!==G.indexOf("/"))throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${G}' contains a slash.`);const ue=a.path.child(An.fromString(G));if(!gt.isDocumentKey(ue))throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${ue}' is not because it contains an odd number of segments.`);const Ie=new gt(ue);x.push(g(l,Ie))}else{const ue=RF(f,m,G);x.push(ue)}}return new Wt(x,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function LF(n,e,t){if("string"==typeof(t=(0,J.m9)(t))){if(""===t)throw new Ue(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sx(e)&&-1!==t.indexOf("/"))throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(An.fromString(t));if(!gt.isDocumentKey(r))throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return g(n,new gt(r))}if(t instanceof pr)return g(n,t._key);throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${BT(t)}.`)}function VF(n,e){if(!Array.isArray(n)||0===n.length)throw new Ue(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UF(n,e){if(e.isInequality()){const r=cT(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=ix(n);null!==a&&BF(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ue(ve.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function BF(n,e,t){if(!t.isEqual(e))throw new Ue(ve.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class eP{convertValue(e,t="none"){switch(Yc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Tt()}}convertObject(e,t){const r={};return dl(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new jT(Sr(e.latitude),Sr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=nx(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Tf(e));default:return null}}convertTimestamp(e){const t=hl(e);return new Xn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=An.fromString(e);Bt(n1(r));const i=new fl(r.get(1),r.get(3)),a=new gt(r.popFirst(5));return i.isEqual(t)||Dr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function QT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Sj extends eP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ua(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pr(this.firestore,null,t)}}class Hf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vl extends gw{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(qT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class yw extends vl{data(e={}){return super.data(e)}}class od{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new yw(this._firestore,this._userDataWriter,r.key,r,new Hf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ue(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new yw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Hf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new yw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Hf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==l.type&&(m=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:Mj(l.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Mj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tt()}}function jF(n,e){return n instanceof vl&&e instanceof vl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof od&&e instanceof od&&n._firestore===e._firestore&&GR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class ad extends eP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ua(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pr(this.firestore,null,t)}}function HF(n,e,t){n=Pn(n,pr);const r=Pn(n.firestore,gr),i=QT(n.converter,e,t);return zm(r,[zT($f(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Er.none())])}function zF(n,e,t,...r){n=Pn(n,pr);const i=Pn(n.firestore,gr),a=$f(i);let l;return l="string"==typeof(e=(0,J.m9)(e))||e instanceof yl?YR(a,"updateDoc",n._key,e,t,r):ZR(a,"updateDoc",n._key,e),zm(i,[l.toMutation(n._key,Er.exists(!0))])}function WF(n,...e){var t,r,i;n=(0,J.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||qR(e[l])||(a=e[l],l++);const f={includeMetadataChanges:a.includeMetadataChanges};if(qR(e[l])){const T=e[l];e[l]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[l+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[l+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let m,v,b;if(n instanceof pr)v=Pn(n.firestore,gr),b=Im(n._key.path),m={next:T=>{e[l]&&e[l](tP(v,n,T))},error:e[l+1],complete:e[l+2]};else{const T=Pn(n,Ti);v=Pn(T.firestore,gr),b=T._query;const x=new ad(v);m={next:V=>{e[l]&&e[l](new od(v,x,T,V))},error:e[l+1],complete:e[l+2]},kF(n._query)}return function(T,x,V,G){const ue=new FT(G),Ie=new cR(x,ue,V);return T.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return sR(yield jm(T),Ie)})),()=>{ue.yc(),T.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return aR(yield jm(T),Ie)}))}}(jr(v),b,f,m)}function zm(n,e){return function(t,r){const i=new Vr;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function I$(n,e,t){return gR.apply(this,arguments)}(yield HR(t),r,i)})),i.promise}(jr(n),e)}function tP(n,e,t){const r=t.docs.get(e._key),i=new ad(n);return new vl(n,i,e._key,r,new Hf(t.hasPendingWrites,t.fromCache),e.converter)}const Wj={maxAttempts:5};class GF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$f(e)}set(e,t,r){this._verifyNotCommitted();const i=ud(e,this._firestore),a=QT(i.converter,t,r),l=zT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Er.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=ud(e,this._firestore);let l;return l="string"==typeof(t=(0,J.m9)(t))||t instanceof yl?YR(this._dataReader,"WriteBatch.update",a._key,t,r,i):ZR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Er.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ud(e,this._firestore);return this._mutations=this._mutations.concat(new Sm(t._key,Er.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ud(n,e){if((n=(0,J.m9)(n)).firestore!==e)throw new Ue(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Gj extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=$f(e)}get(e){const t=ud(e,this._firestore),r=new Sj(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Tt();const a=i[0];if(a.isFoundDocument())return new gw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new gw(this._firestore,r,t._key,null,t.converter);throw Tt()})}set(e,t,r){const i=ud(e,this._firestore),a=QT(i.converter,t,r),l=zT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=ud(e,this._firestore);let l;return l="string"==typeof(t=(0,J.m9)(t))||t instanceof yl?YR(this._dataReader,"Transaction.update",a._key,t,r,i):ZR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=ud(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ud(e,this._firestore),r=new ad(this._firestore);return super.get(e).then(i=>new vl(this._firestore,r,t._key,i._document,new Hf(!1,!1),t.converter))}}function nP(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ue("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function KF(){if(typeof Uint8Array>"u")throw new Ue("unimplemented","Uint8Arrays are not available in this environment.")}function ZF(){if(!function ex(){return typeof atob<"u"}())throw new Ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){vf=On.SDK_VERSION,(0,On._registerComponent)(new Po.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new gr(new GM(t.getProvider("auth-internal")),new $b(t.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ue(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(f.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,On.registerVersion)(yf,"3.10.1",n),(0,On.registerVersion)(yf,"3.10.1","esm2017")}();class vw{constructor(e){this._delegate=e}static fromBase64String(e){return ZF(),new vw(Ua.fromBase64String(e))}static fromUint8Array(e){return KF(),new vw(Ua.fromUint8Array(e))}toBase64(){return ZF(),this._delegate.toBase64()}toUint8Array(){return KF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function rP(n){return function tH(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class nH{enableIndexedDbPersistence(e,t){return function nj(n,e){SF(n=Pn(n,gr));const t=jr(n);if(t._uninitializedComponentsProvider)throw new Ue(ve.FAILED_PRECONDITION,"SDK cache is already specified.");Lo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new $m;return DF(t,i,new FR(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function rj(n){SF(n=Pn(n,gr));const e=jr(n);if(e._uninitializedComponentsProvider)throw new Ue(ve.FAILED_PRECONDITION,"SDK cache is already specified.");Lo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new $m;return DF(e,r,new uF(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ij(n){if(n._initialized&&!n._terminated)throw new Ue(ve.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Vr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(t=(0,Ce.Z)(function*(r){if(!Fi.D())return Promise.resolve();const i=r+"main";yield Fi.delete(i)}),function(r){return t.apply(this,arguments)})(Ax(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class YF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof fl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Lo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){CF(this._delegate,e,t,r)}enableNetwork(){return function oj(n){return function H$(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield dF(n),t=yield hF(n);return e.setNetworkEnabled(!0),function(r){const i=rt(r);return i.du.delete(0),lw(i)}(t)}))}(jr(n=Pn(n,gr)))}(this._delegate)}disableNetwork(){return function aj(n){return function z$(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield dF(n),t=yield hF(n);return e.setNetworkEnabled(!1),(r=(0,Ce.Z)(function*(i){const a=rt(i);a.du.add(0),yield Om(a),a.mu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(jr(n=Pn(n,gr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,_F("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function sj(n){return function(e){const t=new Vr;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function S$(n,e){return ER.apply(this,arguments)}(yield HR(e),t)})),t.promise}(jr(n=Pn(n,gr)))}(this._delegate)}onSnapshotsInSync(e){return function Vj(n,e){return function q$(n,e){const t=new FT(e);return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield jm(n),i=t,rt(r).Au.add(i),void i.next();var r,i})),()=>{t.yc(),n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield jm(n),i=t,void rt(r).Au.delete(i);var r,i}))}}(jr(n=Pn(n,gr)),qR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Wm(this,IF(this._delegate,e))}catch(t){throw Xi(t,"collection()","Firestore.collection()")}}doc(e){try{return new no(this,$T(this._delegate,e))}catch(t){throw Xi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new es(this,function Q$(n,e){if(n=Pn(n,dw),WR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ue(ve.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ti(n,null,(t=e,new gl(An.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Xi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function qj(n,e,t){n=Pn(n,gr);const r=Object.assign(Object.assign({},Wj),t);return function(i){if(i.maxAttempts<1)throw new Ue(ve.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const f=new Vr;return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const m=yield function fF(n){return VT(n).then(e=>e.datastore)}(i);new $$(i.asyncQueue,m,l,a,f).run()})),f.promise}(jr(n),i=>e(new Gj(n,i)),r)}(this._delegate,t=>e(new QF(this,t)))}batch(){return jr(this._delegate),new JF(new GF(this._delegate,e=>zm(this._delegate,e)))}loadBundle(e){return function uj(n,e){const t=jr(n=Pn(n,gr)),r=new X$;return function K$(n,e,t,r){const i=function(a,l){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return lF(m,v);if(m instanceof ArrayBuffer)return lF(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new U$(m,l);var m}(t,uw(e));n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function V$(n,e,t){const r=rt(n);var i;(i=(0,Ce.Z)(function*(a,l,f){try{const m=yield l.getMetadata();if(yield function(x,V){const G=rt(x),ue=$r(V.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",Ie=>G.xs.getBundleMetadata(Ie,V.id)).then(Ie=>!!Ie&&Ie.createTime.compareTo(ue)>=0)}(a.localStore,m))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(x=m).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);f._updateProgress(X1(m));const v=new _$(m,a.localStore,l.serializer);let b=yield l._c();for(;b;){const x=yield v.$u(b);x&&f._updateProgress(x),b=yield l._c()}const T=yield v.complete();return yield _l(a,T.Bu,void 0),yield function(x,V){const G=rt(x);return G.persistence.runTransaction("Save bundle","readwrite",ue=>G.xs.saveBundleMetadata(ue,V))}(a.localStore,m),f._completeWith(T.progress),Promise.resolve(T.Fu)}catch(m){return Lo("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var x}),function(a,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield HR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function lj(n,e){return function Z$(n,e){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(t,r){const i=rt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.xs.getNamedQuery(a,r))}(yield UT(n),e)}))}(jr(n=Pn(n,gr)),e).then(t=>t?new Ti(n,null,t.query):null)}(this._delegate,e).then(t=>t?new es(this,t):null)}}class JT extends eP{constructor(e){super(),this.firestore=e}convertBytes(e){return new vw(new Ua(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return no.forKey(t,this.firestore,null)}}class QF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new JT(e)}get(e){const t=Wf(e);return this._delegate.get(t).then(r=>new Ew(this._firestore,new vl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Wf(e);return r?(nP("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Wf(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Wf(e);return this._delegate.delete(t),this}}class JF{constructor(e){this._delegate=e}set(e,t,r){const i=Wf(e);return r?(nP("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Wf(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Wf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class zf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new yw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ww(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=zf.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new zf(e,new JT(e),t),i.set(t,a)),a}}zf.INSTANCES=new WeakMap;class no{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new JT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new no(t,new pr(t._delegate,r,new gt(e)))}static forKey(e,t,r){return new no(t,new pr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Wm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Wm(this.firestore,IF(this._delegate,e))}catch(t){throw Xi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,J.m9)(e))instanceof pr&&bF(this._delegate,e)}set(e,t){t=nP("DocumentReference.set",t);try{return t?HF(this._delegate,e,t):HF(this._delegate,e)}catch(r){throw Xi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?zF(this._delegate,e):zF(this._delegate,e,t,...r)}catch(i){throw Xi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Fj(n){return zm(Pn(n.firestore,gr),[new Sm(n._key,Er.none())])}(this._delegate)}onSnapshot(...e){const t=XF(e),r=eL(e,i=>new Ew(this.firestore,new vl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return WF(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Rj(n){n=Pn(n,pr);const e=Pn(n.firestore,gr),t=jr(e),r=new ad(e);return function W$(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,a,l){try{const f=yield function(m,v){const b=rt(m);return b.persistence.runTransaction("read document","readonly",T=>b.localDocuments.getDocument(T,v))}(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new Ue(ve.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=Lm(f,`Failed to get document '${a} from cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield UT(n),e,t);var r})),t.promise}(t,n._key).then(i=>new vl(e,r,n._key,i,new Hf(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Pj(n){n=Pn(n,pr);const e=Pn(n.firestore,gr);return pF(jr(e),n._key,{source:"server"}).then(t=>tP(e,n,t))}(this._delegate):function xj(n){n=Pn(n,pr);const e=Pn(n.firestore,gr);return pF(jr(e),n._key).then(t=>tP(e,n,t))}(this._delegate),t.then(r=>new Ew(this.firestore,new vl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new no(this.firestore,this._delegate.withConverter(e?zf.getInstance(this.firestore,e):null))}}function Xi(n,e,t){return n.message=n.message.replace(e,t),n}function XF(n){for(const e of n)if("object"==typeof e&&!rP(e))return e;return{}}function eL(n,e){var t,r;let i;return i=rP(n[0])?n[0]:rP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Ew{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new no(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return jF(this._delegate,e._delegate)}}class ww extends Ew{data(e){const t=this._delegate.data(e);return function ek(n,e){n||Tt()}(void 0!==t),t}}class es{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new JT(e)}where(e,t,r){try{return new es(this.firestore,sd(this._delegate,function vj(n,e,t){const r=e,i=qT("where",n);return _w._create(i,r,t)}(e,t,r)))}catch(i){throw Xi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new es(this.firestore,sd(this._delegate,function Ej(n,e="asc"){const t=e,r=qT("orderBy",n);return XR._create(r,t)}(e,t)))}catch(r){throw Xi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new es(this.firestore,sd(this._delegate,function wj(n){return EF("limit",n),KT._create("limit",n,"F")}(e)))}catch(t){throw Xi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new es(this.firestore,sd(this._delegate,function Cj(n){return EF("limitToLast",n),KT._create("limitToLast",n,"L")}(e)))}catch(t){throw Xi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new es(this.firestore,sd(this._delegate,function Ij(...n){return ZT._create("startAt",n,!0)}(...e)))}catch(t){throw Xi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new es(this.firestore,sd(this._delegate,function bj(...n){return ZT._create("startAfter",n,!1)}(...e)))}catch(t){throw Xi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new es(this.firestore,sd(this._delegate,function Tj(...n){return YT._create("endBefore",n,!1)}(...e)))}catch(t){throw Xi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new es(this.firestore,sd(this._delegate,function Dj(...n){return YT._create("endAt",n,!0)}(...e)))}catch(t){throw Xi(t,"endAt()","Query.endAt()")}}isEqual(e){return GR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Oj(n){n=Pn(n,Ti);const e=Pn(n.firestore,gr),t=jr(e),r=new ad(e);return function G$(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,a,l){try{const f=yield AT(i,a,!0),m=new nF(a,f.Wi),v=m.zu(f.documents),b=m.applyChanges(v,!1);l.resolve(b.snapshot)}catch(f){const m=Lm(f,`Failed to execute query '${a} against cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield UT(n),e,t);var r})),t.promise}(t,n._query).then(i=>new od(e,r,n,i))}(this._delegate):"server"===e?.source?function kj(n){n=Pn(n,Ti);const e=Pn(n.firestore,gr),t=jr(e),r=new ad(e);return gF(t,n._query,{source:"server"}).then(i=>new od(e,r,n,i))}(this._delegate):function Nj(n){n=Pn(n,Ti);const e=Pn(n.firestore,gr),t=jr(e),r=new ad(e);return kF(n._query),gF(t,n._query).then(i=>new od(e,r,n,i))}(this._delegate),t.then(r=>new iP(this.firestore,new od(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=XF(e),r=eL(e,i=>new iP(this.firestore,new od(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return WF(this._delegate,t,r)}withConverter(e){return new es(this.firestore,this._delegate.withConverter(e?zf.getInstance(this.firestore,e):null))}}class iH{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ww(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class iP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new es(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ww(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new iH(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ww(this._firestore,r))})}isEqual(e){return jF(this._delegate,e._delegate)}}class Wm extends es{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new no(this.firestore,e):null}doc(e){try{return new no(this.firestore,void 0===e?$T(this._delegate):$T(this._delegate,e))}catch(t){throw Xi(t,"doc()","CollectionReference.doc()")}}add(e){return function Lj(n,e){const t=Pn(n.firestore,gr),r=$T(n),i=QT(n.converter,e);return zm(t,[zT($f(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Er.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new no(this.firestore,t))}isEqual(e){return bF(this._delegate,e._delegate)}withConverter(e){return new Wm(this.firestore,this._delegate.withConverter(e?zf.getInstance(this.firestore,e):null))}}function Wf(n){return Pn(n,pr)}class sP{constructor(...e){this._delegate=new yl(...e)}static documentId(){return new sP(vr.keyField().canonicalString())}isEqual(e){return(e=(0,J.m9)(e))instanceof yl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Gf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Zj(){return new KR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Gf(e)}static delete(){const e=function Kj(){return new fw("deleteField")}();return e._methodName="FieldValue.delete",new Gf(e)}static arrayUnion(...e){const t=function Yj(...n){return new pj("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Gf(t)}static arrayRemove(...e){const t=function Qj(...n){return new gj("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Gf(t)}static increment(e){const t=function Jj(n){return new mj("increment",n)}(e);return t._methodName="FieldValue.increment",new Gf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const sH={Firestore:YF,GeoPoint:jT,Timestamp:Xn,Blob:vw,Transaction:QF,WriteBatch:JF,DocumentReference:no,DocumentSnapshot:Ew,Query:es,QueryDocumentSnapshot:ww,QuerySnapshot:iP,CollectionReference:Wm,FieldPath:sP,FieldValue:Gf,setLogLevel:function rH(n){!function zM(n){il.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function tL(n,e){return function uH(n,e=zh.z){return new ui.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function oP(n,e){return tL(n,e).pipe((0,zt.U)(t=>({payload:t,type:"query"})))}function XT(n,e){return oP(n,e).pipe(Rs(void 0),zg(),(0,zt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const m=i.find(b=>b.doc.ref.isEqual(l.ref)),v=t?.payload.docs.find(b=>b.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),a}))}function nL(n,e,t){return XT(n,t).pipe(vh((r,i)=>function cH(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function dH(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return aP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return aP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return aP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),zI(),(0,zt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function aP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function rL(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function aH(n){(function oH(n,e){n.INTERNAL.registerComponent(new Po.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},sH)))})(n,(e,t)=>new YF(e,t,new nH)),n.registerVersion("@firebase/firestore-compat","0.3.7")}(WI.Z);class iL{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=XT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,zt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Rs(void 0),zg(),zi(([r,i])=>i.length>0||!r),(0,zt.U)(([r,i])=>i),st.iC)}auditTrail(e){return this.stateChanges(e).pipe(vh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=rL(e);return nL(this.query,t,this.afs.schedulers.outsideAngular).pipe(st.iC)}valueChanges(e={}){return oP(this.query,this.afs.schedulers.outsideAngular).pipe((0,zt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),st.iC)}get(e){return(0,Bn.D)(this.query.get(e)).pipe(st.iC)}add(e){return this.ref.add(e)}doc(e){return new sL(this.ref.doc(e),this.afs)}}class sL{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=uL(r,t);return new iL(i,a,this.afs)}snapshotChanges(){return function lH(n,e){return tL(n,e).pipe(Rs(void 0),zg(),(0,zt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(st.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,zt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Bn.D)(this.ref.get(e)).pipe(st.iC)}}class hH{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?XT(this.query,this.afs.schedulers.outsideAngular).pipe((0,zt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),zi(t=>t.length>0),st.iC):XT(this.query,this.afs.schedulers.outsideAngular).pipe(st.iC)}auditTrail(e){return this.stateChanges(e).pipe(vh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=rL(e);return nL(this.query,t,this.afs.schedulers.outsideAngular).pipe(st.iC)}valueChanges(e={}){return oP(this.query,this.afs.schedulers.outsideAngular).pipe((0,zt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),st.iC)}get(e){return(0,Bn.D)(this.query.get(e)).pipe(st.iC)}}const oL=new d.OlP("angularfire2.enableFirestorePersistence"),aL=new d.OlP("angularfire2.firestore.persistenceSettings"),fH=new d.OlP("angularfire2.firestore.settings"),pH=new d.OlP("angularfire2.firestore.use-emulator");function uL(n,e=(t=>t)){return{query:e(n),ref:n}}let eD=(()=>{class n{constructor(t,r,i,a,l,f,m,v,b,T,x,V,G,ue,Ie,It,xt){this.schedulers=m;const Dt=(0,qi.on)(t,f,r),$t=b;T&&BI(Dt,f,x,G,ue,Ie,V,It),[this.firestore,this.persistenceEnabled$]=(0,qi.cc)(`${Dt.name}.firestore`,"AngularFirestore",Dt.name,()=>{const cn=f.runOutsideAngular(()=>Dt.firestore());if(a&&cn.settings(a),$t&&cn.useEmulator(...$t),i&&!Td(l)){const En=()=>{try{return(0,Bn.D)(cn.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(ii){return typeof console<"u"&&console.warn(ii),Nt(!1)}};return[cn,f.runOutsideAngular(En)]}return[cn,Nt(!1)]},[a,$t,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=uL(i,r),f=this.schedulers.ngZone.run(()=>a);return new iL(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new hH(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new sL(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qi.Dh),d.LFG(qi.xv,8),d.LFG(oL,8),d.LFG(fH,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(st.HU),d.LFG(aL,8),d.LFG(pH,8),d.LFG(Pv,8),d.LFG(VI,8),d.LFG(Av,8),d.LFG(Mv,8),d.LFG(xv,8),d.LFG(Rv,8),d.LFG(UI,8),d.LFG(Zu,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gH=(()=>{class n{constructor(){FI.Z.registerVersion("angularfire",st.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:oL,useValue:!0},{provide:aL,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[eD]}),n})();function mH(n,e){1&n&&(d.TgZ(0,"h1"),d._uU(1,"No questions for this module"),d.qZA())}function _H(n,e){if(1&n&&(d.TgZ(0,"div",20),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.hij(" ",t.currentQuestion," ")}}function yH(n,e){if(1&n&&(d.TgZ(0,"div",21),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.hij(" ",t.currentAnswer," ")}}function vH(n,e){if(1&n&&(d.TgZ(0,"h1"),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.hij("",t.module,"!")}}function EH(n,e){1&n&&(d.TgZ(0,"h1"),d._uU(1,"Answer"),d.qZA())}function wH(n,e){if(1&n&&(d.TgZ(0,"div",22),d.YNc(1,vH,2,1,"h1",9),d.YNc(2,EH,2,0,"h1",9),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",!t.cardState),d.xp6(1),d.Q6J("ngIf",t.cardState)}}function CH(n,e){if(1&n&&(d.TgZ(0,"div",23)(1,"h1"),d._uU(2),d.qZA()()),2&n){const t=d.oxw();d.xp6(2),d.hij(" ",t.hint," ")}}function IH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"p",26),d.NdJ("click",function(){const a=d.CHM(t).index,l=d.oxw(2);return d.KtG(l.skip(a))}),d._uU(1),d.qZA()}if(2&n){const t=e.$implicit;d.xp6(1),d.Oqu(t.question)}}function bH(n,e){if(1&n&&(d.TgZ(0,"div",24),d.YNc(1,IH,2,1,"p",25),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",t.question)}}function TH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",27)(1,"button",28),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.changeCardState())}),d._uU(2,"Done"),d.qZA(),d.TgZ(3,"button",29),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.changeCardState())}),d._uU(4,"Skip"),d.qZA()()}}function DH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",30)(1,"button",28),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.next())})("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.changeCardState())}),d._uU(2,"Next"),d.qZA()()}}const SH=function(n){return{"background-color":n}},AH=function(n){return{"background-image":n}};let MH=(()=>{class n{constructor(t,r,i){this.route=t,this.router=r,this.afs=i,this.cardState=!1,this.currentQuestion="",this.currentAnswer="",this.secondDisplay="",this.i=0,this.question=[],this.hint="",this.type="",this.module="",this.bgColour="",this.bgImage=""}ngOnInit(){var t=this;return(0,Ce.Z)(function*(){t.route.params.subscribe(r=>{t.module=r.module,t.type=r.type}),t.checkBg(t.module),t.checkHint(t.type),t.question=yield t.getModuleQuestions()})()}checkBg(t){switch(t){case"Digital Production":this.bgColour="#231F26",this.bgImage="../assets/prog.png",console.log("working");break;case"Security":this.bgColour="#0A2F3C",this.bgImage="../assets/cyb.png";break;case"Business Environments":this.bgColour="#121821",this.bgImage="../assets/bse.png";break;case"Data in Computing":this.bgColour="#232432",this.bgImage="../assets/data.png";break;case"Legislation":this.bgColour="#675052",this.bgImage="../assets/legi.png";break;default:this.bgColour="#231F26",this.bgImage="../assets/prog.png"}}checkHint(t){switch(t){case"Describe":this.hint="Present two (or more) linked descriptive points characteristics, features uses or processes. Do not need to add a justification or reason";break;case"Evaluate":this.hint="Review information then bring it together to form a conclusion, drawing on evidence including strengths, weaknesses, alternativeactions, relevant data or information. Come to a supported judgementof a subject\u2019s qualities and relation to its context. ";break;case"Explain":this.hint="An explanation requires a justification/exemplification of a point. The answer must contain some element of reasoning/justification, this can include mathematical/logical explanations.";break;case"Identify":this.hint="Usually requires some key information to be selected from a givenstimulus/resource.";break;case"State":this.hint="A recall of one or more pieces of information.";break;case"Develop":this.hint="Produce a section of code to provide a solution to a problem";break;default:this.hint="No hint available :("}}home(){window.history.go(-1)}getModuleQuestions(){let t=[];return this.afs.collection(`/Approved/${this.module}/${this.type}`).valueChanges().subscribe(a=>{a.forEach(l=>{t.push(l),this.currentQuestion=t[0].question})}),t}changeCardState(){this.cardState=!this.cardState,this.secondDisplay="feedback",this.currentAnswer=this.question[this.i].answer}next(){this.i<this.question.length-1?this.i+=1:this.i=0,this.currentQuestion=this.question[this.i].question}skip(t){this.i=t,this.currentQuestion=this.question[this.i].question,this.currentAnswer=this.question[this.i].answer}displaySec(t){this.secondDisplay=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Pi),d.Y36(er),d.Y36(eD))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-cards"]],decls:26,vars:14,consts:[[1,"container",3,"ngStyle"],[1,"top"],[3,"click"],[1,"top-contain"],[1,"contain",3,"click"],["src","../../assets/bulb.svg"],["src","../../assets/search.svg"],[1,"flex-contain"],[1,"child1"],[4,"ngIf"],[1,"block-contain"],["class","question",4,"ngIf"],["class","answer",4,"ngIf"],[1,"child2",3,"ngStyle"],[1,"child2-contain"],["class","feedback sec-display",4,"ngIf"],["class","hint sec-display",4,"ngIf"],["class","search sec-display",4,"ngIf"],["class","btn-contain",4,"ngIf"],["class","btn-contain answer",4,"ngIf"],[1,"question"],[1,"answer"],[1,"feedback","sec-display"],[1,"hint","sec-display"],[1,"search","sec-display"],["class","que",3,"click",4,"ngFor","ngForOf"],[1,"que",3,"click"],[1,"btn-contain"],[1,"btn",3,"click"],[1,"btn","sec",3,"click"],[1,"btn-contain","answer"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"button",2),d.NdJ("click",function(){return r.home()}),d._uU(3,"Back"),d.qZA(),d.TgZ(4,"div",3)(5,"div",4),d.NdJ("click",function(){return r.displaySec("hint")}),d.TgZ(6,"p"),d._uU(7,"Hint"),d.qZA(),d._UZ(8,"img",5),d.qZA(),d.TgZ(9,"div",4),d.NdJ("click",function(){return r.displaySec("search")}),d.TgZ(10,"p"),d._uU(11,"Search"),d.qZA(),d._UZ(12,"img",6),d.qZA()()(),d.TgZ(13,"div",7)(14,"div",8),d.YNc(15,mH,2,0,"h1",9),d.TgZ(16,"div",10),d.YNc(17,_H,2,1,"div",11),d.YNc(18,yH,2,1,"div",12),d.qZA()(),d.TgZ(19,"div",13)(20,"div",14),d.YNc(21,wH,3,2,"div",15),d.YNc(22,CH,3,1,"div",16),d.YNc(23,bH,2,1,"div",17),d.YNc(24,TH,5,0,"div",18),d.YNc(25,DH,3,0,"div",19),d.qZA()()()()),2&t&&(d.Q6J("ngStyle",d.VKq(10,SH,r.bgColour)),d.xp6(15),d.Q6J("ngIf",0==r.question.length),d.xp6(2),d.Q6J("ngIf",!r.cardState),d.xp6(1),d.Q6J("ngIf",r.cardState),d.xp6(1),d.Q6J("ngStyle",d.VKq(12,AH,"url("+r.bgImage+")")),d.xp6(2),d.Q6J("ngIf","feedback"==r.secondDisplay),d.xp6(1),d.Q6J("ngIf","hint"==r.secondDisplay),d.xp6(1),d.Q6J("ngIf","search"==r.secondDisplay),d.xp6(1),d.Q6J("ngIf",!r.cardState),d.xp6(1),d.Q6J("ngIf",r.cardState))},dependencies:[bs,mr,Yo],styles:[".container[_ngcontent-%COMP%]{height:100vh;color:#fff;padding:2rem;width:100vw}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(2.5vw,2.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;margin-left:1rem}.container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .top-contain[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:20vw;max-width:350px}.container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .top-contain[_ngcontent-%COMP%]   .contain[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]{height:90%;display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:contain;display:flex;align-items:center;justify-content:center;width:45%}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .block-contain[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-wrap:wrap;flex-direction:column;justify-content:space-around;padding:1rem}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .block-contain[_ngcontent-%COMP%]   .question[_ngcontent-%COMP%]{display:flex;width:100%;height:auto;max-height:40vh;overflow-y:scroll;padding:1rem;min-height:25vh;background-color:#0d6994;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .block-contain[_ngcontent-%COMP%]   .timer[_ngcontent-%COMP%]{width:20%;background-color:#0d6994;font-size:2rem;text-align:center}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .block-contain[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]{background-color:#0d6994;text-align:center;padding:1.5rem 2rem;border-radius:10px;width:40%;margin:.5rem 0;font-size:min(2vw,2em);cursor:pointer}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:contain;align-items:center;justify-content:center;width:45%;height:85vh;display:flex;flex-direction:column;justify-content:flex-end}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .child2-contain[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;flex-direction:column;width:100%;height:50%}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .child2-contain[_ngcontent-%COMP%]   .sec-display[_ngcontent-%COMP%]{max-height:40vh;min-height:10rem;overflow-x:scroll;margin-bottom:25%}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .child2-contain[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{max-height:70vh;min-height:20rem;overflow-x:scroll;margin-bottom:25%;width:100%;background-color:#00000080;padding:1rem}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .child2-contain[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .que[_ngcontent-%COMP%]{width:100%;text-align:center;margin-bottom:.5rem;cursor:pointer}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .child2-contain[_ngcontent-%COMP%]   .btn-contain[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .child2-contain[_ngcontent-%COMP%]   .btn-contain[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem;border:0;background-color:green}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .child2-contain[_ngcontent-%COMP%]   .btn-contain[_ngcontent-%COMP%]   .sec[_ngcontent-%COMP%]{background-color:red}"]}),n})();function xH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",10)(1,"p",2),d.NdJ("click",function(){const a=d.CHM(t).$implicit,l=d.oxw();return d.KtG(l.reviewQuestion(a))})("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.openReview())}),d._uU(2),d.qZA(),d.TgZ(3,"div",11)(4,"button",12),d.NdJ("click",function(){const a=d.CHM(t).$implicit,l=d.oxw();return d.KtG(l.approve(a))}),d._uU(5,"Approve"),d.qZA(),d.TgZ(6,"button",13),d.NdJ("click",function(){const a=d.CHM(t).$implicit,l=d.oxw();return d.KtG(l.del(a))}),d._uU(7,"Delete"),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.question)}}function RH(n,e){1&n&&(d.TgZ(0,"h1",14),d._uU(1,' "Nun" to approve ! '),d.qZA())}function PH(n,e){1&n&&(d.TgZ(0,"h1"),d._uU(1,"Click question to review fully"),d.qZA())}function NH(n,e){if(1&n&&(d.TgZ(0,"div",15),d.YNc(1,PH,2,0,"h1",16),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",t.questions.length>0)}}function OH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",17)(1,"h1",2),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.closeReview())}),d._uU(2,"Close"),d.qZA(),d.TgZ(3,"div",18)(4,"p",19),d._uU(5,"Question:"),d.qZA(),d.TgZ(6,"div",20),d._uU(7),d.qZA(),d.TgZ(8,"p",19),d._uU(9,"Answer:"),d.qZA(),d.TgZ(10,"div",20),d._uU(11),d.qZA(),d.TgZ(12,"p",19),d._uU(13,"Module:"),d.qZA(),d.TgZ(14,"div",20),d._uU(15),d.qZA(),d.TgZ(16,"p",19),d._uU(17,"Category:"),d.qZA(),d.TgZ(18,"div",20),d._uU(19),d.qZA()()()}if(2&n){const t=d.oxw();d.xp6(7),d.hij(" ",t.revQuestion.question," "),d.xp6(4),d.hij(" ",t.revQuestion.answer," "),d.xp6(4),d.hij(" ",t.revQuestion.module," "),d.xp6(4),d.hij(" ",t.revQuestion.category," ")}}let kH=(()=>{class n{constructor(t,r){this.router=t,this.afs=r,this.review=!1,this.revQuestion={answer:"",category:"",id:"",module:"",question:"",similar:0},this.questions=[]}ngOnInit(){var t=this;return(0,Ce.Z)(function*(){t.questions=yield t.getAllQuestions()})()}home(){this.router.navigate([""])}openReview(){this.review=!0}closeReview(){this.review=!1}reviewQuestion(t){this.revQuestion.question=t.question,this.revQuestion.answer=t.answer,this.revQuestion.category=t.category,this.revQuestion.module=t.module}getAllQuestions(){const r=["Describe","Evaluate","Identify","State","Develop","Explain"],i=[];return["Business","Data","Digital","Legislation","Security"].forEach(a=>{r.forEach(l=>{this.afs.collection(`/Pending/${a}/${l}`).valueChanges().subscribe(v=>{v.forEach(b=>{i.push(b)})})})}),i}approve(t){var r=this;return(0,Ce.Z)(function*(){r.reviewQuestion(t);let i=r.afs.createId();r.revQuestion.id=i,r.afs.collection(`/Approved/${r.revQuestion.module}/${r.revQuestion.category}`).doc(i).set(r.revQuestion).then(a=>{console.log(a)}),r.del(t),r.questions=yield r.getAllQuestions()})()}del(t){var r=this;return(0,Ce.Z)(function*(){r.reviewQuestion(t),r.afs.doc(`/Pending/${r.revQuestion.module}/${r.revQuestion.category}/${t.id}`).delete(),r.questions=yield r.getAllQuestions()})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(er),d.Y36(eD))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-admin"]],decls:11,vars:4,consts:[[1,"container"],[1,"nav"],[3,"click"],[1,"flex"],[1,"child1"],[1,"scroll"],["class","block",4,"ngFor","ngForOf"],["class","none",4,"ngIf"],["class","child2",4,"ngIf"],["class","child3",4,"ngIf"],[1,"block"],[1,"btn-contain"],[1,"btn",3,"click"],[1,"btn","sec",3,"click"],[1,"none"],[1,"child2"],[4,"ngIf"],[1,"child3"],[1,"contain"],[1,"tag"],[1,"txtarea"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"button",2),d.NdJ("click",function(){return r.home()}),d._uU(3,"Home"),d.qZA()(),d.TgZ(4,"div",3)(5,"div",4)(6,"div",5),d.YNc(7,xH,8,1,"div",6),d.YNc(8,RH,2,0,"h1",7),d.qZA()(),d.YNc(9,NH,2,1,"div",8),d.YNc(10,OH,20,4,"div",9),d.qZA()()),2&t&&(d.xp6(7),d.Q6J("ngForOf",r.questions),d.xp6(1),d.Q6J("ngIf",r.questions.length<1),d.xp6(1),d.Q6J("ngIf",!r.review),d.xp6(1),d.Q6J("ngIf",r.review))},dependencies:[bs,mr],styles:[".container[_ngcontent-%COMP%]{height:100vh;background-image:url(home.f708dd93b6ce0104.png);background-position:center;background-size:cover;padding:1rem;color:var(--primary-color)}.container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(1.5vw,1.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;margin:0 auto}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{display:flex;align-items:center;height:90vh;max-width:2000px;margin:0 auto;padding:1rem}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;width:50%}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .scroll[_ngcontent-%COMP%]{height:100%;max-height:85vh;overflow-y:scroll}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .scroll[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]{background-color:var(--sec-color);border-radius:5px;padding:1rem;display:flex;justify-content:space-between;flex-direction:column;height:20vh;max-height:200px;margin:2rem 0;overflow-x:scroll}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .scroll[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer;text-overflow:ellipsis;overflow:hidden;height:20%;max-width:90%}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .scroll[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]   .btn-contain[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:65%;margin-left:35%}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .scroll[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]   .btn-contain[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(1.5vw,1.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;margin:0 auto;background-color:green;border:2px solid green}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .scroll[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]   .btn-contain[_ngcontent-%COMP%]   .sec[_ngcontent-%COMP%]{background-color:red;border:2px solid red}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]{width:50%;display:flex;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child3[_ngcontent-%COMP%]{background-color:var(--primary-color);border:2px solid var(--sec-color);padding:1rem;height:100%;width:45%;margin-left:5%;overflow-y:scroll}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child3[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:red;font-size:1.2rem;margin:0 0 10px 90%;cursor:pointer}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child3[_ngcontent-%COMP%]   .contain[_ngcontent-%COMP%]{overflow-y:scroll;max-height:100%}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child3[_ngcontent-%COMP%]   .contain[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--sec-color)}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child3[_ngcontent-%COMP%]   .contain[_ngcontent-%COMP%]   .txtarea[_ngcontent-%COMP%]{background-color:var(--sec-color);padding-bottom:10%;max-height:20vh;overflow-y:scroll}"]}),n})();function FH(n,e){if(1&n&&(d.TgZ(0,"u",25),d._uU(1),d.qZA()),2&n){const t=e.$implicit;d.xp6(1),d.hij("",t,"?")}}const LH=[{path:"",component:$I},{path:"modules",component:wA},{path:"portal/:class",component:Hh},{path:"cards/:module/:type",component:MH},{path:"admin",component:kH},{path:"contribute",component:(()=>{class n{constructor(t,r){this.router=t,this.afs=r,this.suggestion=[],this.newQuestion={answer:"",category:"",id:"",module:"",question:""}}ngOnInit(){var t=this;return(0,Ce.Z)(function*(){t.searchEngineDb=yield t.getAllQuestions()})()}getAllQuestions(){const r=["Describe","Evaluate","Identify","State","Develop"],i=[];return["Business","Data","Digital","Legislation","Security"].forEach(a=>{r.forEach(l=>{this.afs.collection(`/Pending/${a}/${l}`).valueChanges().subscribe(v=>{v.forEach(b=>{i.push(b)})})})}),i}filterSuggest(){this.searchEngineDb.forEach(t=>{t.question.toLowerCase().includes(`${this.newQuestion.question.toLocaleLowerCase()}`)&&this.suggestion.push(t.question)})}reset(){this.newQuestion={answer:"",category:"",id:"",module:"",question:""}}home(){this.router.navigate([""])}contribute(){let t=this.afs.createId();this.newQuestion.id=t,this.afs.collection(`/Pending/${this.newQuestion.module}/${this.newQuestion.category}`).doc(t).set(this.newQuestion).then(r=>{console.log(r)}),this.reset()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(er),d.Y36(eD))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-contribute"]],decls:38,vars:5,consts:[[1,"container"],[1,"nav"],[3,"click"],[1,"flex"],[1,"child1"],[1,"contain"],["name","question","placeholder","Question(Do not contribute if question already exist)",1,"txt1",3,"ngModel","ngModelChange","change"],["placeholder","Answer",1,"txt2",3,"ngModel","ngModelChange"],["name","module",3,"ngModel","ngModelChange"],["value","Digital"],["value","Security"],["value","Business"],["value","Data"],["value","Legislation"],["name","key-word",3,"ngModel","ngModelChange"],["value","Describe"],["value","Evaluate"],["value","Explain"],["value","Identify"],["value","State"],["value","Develop"],[1,"child2"],[1,"suggestion"],["class","child",4,"ngFor","ngForOf"],[1,"submit",3,"click"],[1,"child"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"button",2),d.NdJ("click",function(){return r.home()}),d._uU(3,"Home"),d.qZA()(),d.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"textarea",6),d.NdJ("ngModelChange",function(a){return r.newQuestion.question=a})("change",function(){return r.filterSuggest()}),d.qZA(),d.TgZ(8,"textarea",7),d.NdJ("ngModelChange",function(a){return r.newQuestion.answer=a}),d.qZA(),d.TgZ(9,"select",8),d.NdJ("ngModelChange",function(a){return r.newQuestion.module=a}),d.TgZ(10,"option",9),d._uU(11,"Digital Production"),d.qZA(),d.TgZ(12,"option",10),d._uU(13,"Security"),d.qZA(),d.TgZ(14,"option",11),d._uU(15,"Business Environments"),d.qZA(),d.TgZ(16,"option",12),d._uU(17,"Data in Computing"),d.qZA(),d.TgZ(18,"option",13),d._uU(19,"Legislation"),d.qZA()(),d.TgZ(20,"select",14),d.NdJ("ngModelChange",function(a){return r.newQuestion.category=a}),d.TgZ(21,"option",15),d._uU(22,"Describe"),d.qZA(),d.TgZ(23,"option",16),d._uU(24,"Evaluate"),d.qZA(),d.TgZ(25,"option",17),d._uU(26,"Explain"),d.qZA(),d.TgZ(27,"option",18),d._uU(28,"Identify"),d.qZA(),d.TgZ(29,"option",19),d._uU(30,"State"),d.qZA(),d.TgZ(31,"option",20),d._uU(32,"Develop"),d.qZA()()()(),d.TgZ(33,"div",21)(34,"div",22),d.YNc(35,FH,2,1,"u",23),d.qZA(),d.TgZ(36,"button",24),d.NdJ("click",function(){return r.contribute()}),d._uU(37,"Contribute"),d.qZA()()()()),2&t&&(d.xp6(7),d.Q6J("ngModel",r.newQuestion.question),d.xp6(1),d.Q6J("ngModel",r.newQuestion.answer),d.xp6(1),d.Q6J("ngModel",r.newQuestion.module),d.xp6(11),d.Q6J("ngModel",r.newQuestion.category),d.xp6(15),d.Q6J("ngForOf",r.suggestion))},dependencies:[bs,$0,sS,la,Wp,Jl,dc],styles:["[_ngcontent-%COMP%]::placeholder{font-family:var(--font-family)}.container[_ngcontent-%COMP%]{height:100vh;background-image:url(home.f708dd93b6ce0104.png);background-position:center;background-size:cover;padding:1rem;color:var(--primary-color)}.container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{padding-left:1rem}.container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(1.5vw,1.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;margin:0 auto}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{display:flex;height:90vh;max-width:2000px;margin:0 auto}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]{width:50%;padding:1rem}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .contain[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .contain[_ngcontent-%COMP%]   .txt1[_ngcontent-%COMP%]{resize:none;height:20vh;overflow-y:scroll;margin-bottom:1rem;font-size:1.2rem;padding:1rem}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .contain[_ngcontent-%COMP%]   .txt2[_ngcontent-%COMP%]{resize:none;height:45vh;overflow-y:scroll;margin-bottom:1rem;font-size:1.2rem;padding:1rem}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .contain[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:5vh;margin-bottom:1rem}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]{width:50%;padding:1rem}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .suggestion[_ngcontent-%COMP%]{height:70vh;overflow-y:scroll;width:80%;background-color:var(--primary-color);border-radius:1.5rem;margin-bottom:1rem;padding:1rem}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .suggestion[_ngcontent-%COMP%]   .child[_ngcontent-%COMP%]{color:#000;display:block;margin-bottom:5px}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(1.5vw,1.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;margin:0 auto;background-color:green;border:2px solid green}"]}),n})()}];let VH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[qu.forRoot(LH),qu]}),n})(),UH=(()=>{class n{constructor(){this.title="revise"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[ky]}),n})();const uP_firebase={projectId:"revise-2227b",appId:"1:508824605748:web:151ddf7aab00be229f2661",storageBucket:"revise-2227b.appspot.com",apiKey:"AIzaSyCXzz7Yl-wpp_mzKiJiwH35LcsHHgvZnKw",authDomain:"revise-2227b.firebaseapp.com",messagingSenderId:"508824605748",measurementId:"G-CJGWHSJDP9"};var $H=O(655),lP=O(3008),lL=O(8277);function jH(n){return new ui.y(function(e){return{unsubscribe:(0,lL.x)(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}class tD{constructor(e){return e}}class Cw{constructor(){return(0,st.vb)("auth")}}const cP=new d.OlP("angularfire2.auth-instances");function WH(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new tD(r)}}const GH={provide:Cw,deps:[[new d.FiY,cP]]},qH={provide:tD,useFactory:function zH(n,e){const t=(0,st.JM)("auth",n,e);return t&&new tD(t)},deps:[[new d.FiY,cP],bi]};let KH=(()=>{class n{constructor(){(0,ei.KN)("angularfire",st.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[qH,GH]}),n})();function ZH(n,...e){return{ngModule:KH,providers:[{provide:cP,useFactory:WH(n),multi:!0,deps:[d.R0b,d.zs3,st.HU,ms,[new d.FiY,Zu],...e]}]}}const YH=(0,st.u3)(jH,!0),QH=(0,st.u3)(lL.o,!0);class Iw{constructor(e){return e}}const dL="analytics",hL=st.nk.async,XH=(0,st.u3)(lP.IH,!0),ez=(0,st.u3)(lP.Kz,!0),tz=(0,st.u3)(lP.Iv,!0);let dP=(()=>{class n{constructor(t,r,i){let a;this.disposables=[],(0,ei.KN)("angularfire",st.q4.full,"user-tracking"),this.initialized=r.runOutsideAngular(()=>new Promise(l=>{a=l})),hL().then(()=>{const l=i.get(Iw);l?this.disposables=[YH(t).subscribe(f=>{tz(l,f?.uid),a()})]:a()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(tD),d.LFG(d.R0b),d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const fL="firebase_screen_id",hP="outlet",bw="screen_class",pL="screen_name";let fz=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const fP={},pz=n=>{const e=[n[bw],n[hP]].join("#");if(fP.hasOwnProperty(e))return fP[e];{const t=fz++;return fP[e]=t,t}};let gL=(()=>{class n{constructor(t,r,i,a,l,f){(0,ei.KN)("angularfire",st.q4.full,"screen-tracking"),hL().then(()=>{const m=f.get(Iw);!t||!m||a.runOutsideAngular(()=>{this.disposable=((n,e,t)=>n.events.pipe(zi(i=>i instanceof EC)).pipe(Ir(i=>{var a;const f=(null===(a=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,V=>V.replace("://",":///"))).root.children[i.snapshot.outlet])||void 0===a?void 0:a.toString())||"",m=n.routerState.root.children.map(V=>V).find(V=>V.outlet===i.snapshot.outlet);if(!m)return Nt(null);let v=m;for(;v.firstChild;)v=v.firstChild;const b=v.pathFromRoot.map(V=>{var G;return null===(G=V.routeConfig)||void 0===G?void 0:G.path}).filter(V=>V).join("/")||"/",T={[pL]:b,page_path:`/${f}`,firebase_event_origin:"auto",firebase_screen:b,[hP]:i.snapshot.outlet};e&&(T.page_title=e.getTitle());let x=m.component;if(x){if(x===cg){let V=i.snapshot;for(;V.firstChild;)V=V.firstChild;x=V.component}}else x=i.snapshot.component;if("string"==typeof x)return Nt(Object.assign(Object.assign({},T),{[bw]:x}));if(x){const V=t.resolveComponentFactory(x);return Nt(Object.assign(Object.assign({},T),{[bw]:V.selector}))}return Nt(null)}),zi(i=>!!i),(0,zt.U)(i=>Object.assign({firebase_screen_class:i[bw],[fL]:pz(i)},i)),function BH(n,e,t,r){return(0,Ii.e)((i,a)=>{let l;e&&"function"!=typeof e?({duration:t,element:l,connector:r}=e):l=e;const f=new Map,m=G=>{f.forEach(G),G(a)},v=G=>m(ue=>ue.error(G));let b=0,T=!1;const x=new sr.Q(a,G=>{try{const ue=n(G);let Ie=f.get(ue);if(!Ie){f.set(ue,Ie=r?r():new cs.x);const It=function V(G,ue){const Ie=new ui.y(It=>{b++;const xt=ue.subscribe(It);return()=>{xt.unsubscribe(),0==--b&&T&&x.unsubscribe()}});return Ie.key=G,Ie}(ue,Ie);if(a.next(It),t){const xt=(0,sr.x)(Ie,()=>{Ie.complete(),xt?.unsubscribe()},void 0,void 0,()=>f.delete(ue));x.add((0,oa.Xf)(t(It)).subscribe(xt))}}Ie.next(l?l(G):G)}catch(ue){v(ue)}},()=>m(G=>G.complete()),v,()=>f.clear(),()=>(T=!0,0===b));i.subscribe(x)})}(i=>i[hP]),(0,Wr.z)(i=>i.pipe(zI((a,l)=>JSON.stringify(a)===JSON.stringify(l)),Rs(void 0),zg(),(0,zt.U)(([a,l])=>a?Object.assign({firebase_previous_class:a[bw],firebase_previous_screen:a[pL],firebase_previous_id:a[fL]},l):l)))))(t,r,i).pipe(Ir(v=>(0,$H.mG)(this,void 0,void 0,function*(){return l&&(yield l.initialized),ez(m,"screen_view",v)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(er,8),d.LFG(k_,8),d.LFG(d._Vd),d.LFG(d.R0b),d.LFG(dP,8),d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const pP=new d.OlP("angularfire2.analytics-instances");function _z(n){return(e,t)=>{if(!st.nk.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new Iw(r)}}const yz={provide:class JH{constructor(){return(0,st.vb)(dL)}},deps:[[new d.FiY,pP]]},vz={provide:Iw,useFactory:function mz(n,e){if(!st.nk.sync())return null;const t=(0,st.JM)(dL,n,e);return t&&new Iw(t)},deps:[[new d.FiY,pP],bi]};let Ez=(()=>{class n{constructor(t,r){(0,ei.KN)("angularfire",st.q4.full,"analytics")}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(gL,8),d.LFG(dP,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[vz,yz,{provide:d.ip1,useValue:st.nk.async,multi:!0}]}),n})();function wz(n,...e){return{ngModule:Ez,providers:[{provide:pP,useFactory:_z(n),multi:!0,deps:[d.R0b,d.zs3,st.HU,ms,...e]}]}}const mL="@firebase/database";let gP="";class Iz{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,J.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,J.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class bz{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,J.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const yL=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Iz(e)}}catch{}return new bz},qf=yL("localStorage"),mP=yL("sessionStorage"),Gm=new Ki.Yd("@firebase/database"),vL=function(){let n=1;return function(){return n++}}(),EL=function(n){const e=(0,J.dS)(n),t=new J.gQ;t.update(e);const r=t.digest();return J.US.encodeByteArray(r)},Tw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Tw.apply(null,r):e+="object"==typeof r?(0,J.Wl)(r):r,e+=" "}return e};let Kf=null,wL=!0;const gi=function(...n){if(!0===wL&&(wL=!1,null===Kf&&!0===mP.get("logging_enabled")&&function(n,e){(0,J.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Gm.logLevel=Ki.in.VERBOSE,Kf=Gm.log.bind(Gm),e&&mP.set("logging_enabled",!0)):"function"==typeof n?Kf=n:(Kf=null,mP.remove("logging_enabled"))}(!0)),Kf){const e=Tw.apply(null,n);Kf(e)}},Dw=function(n){return function(...e){gi(n,...e)}},_P=function(...n){const e="FIREBASE INTERNAL ERROR: "+Tw(...n);Gm.error(e)},Ba=function(...n){const e=`FIREBASE FATAL ERROR: ${Tw(...n)}`;throw Gm.error(e),new Error(e)},Ui=function(...n){const e="FIREBASE WARNING: "+Tw(...n);Gm.warn(e)},nD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ld="[MIN_NAME]",El="[MAX_NAME]",Zf=function(n,e){if(n===e)return 0;if(n===ld||e===El)return-1;if(e===ld||n===El)return 1;{const t=TL(n),r=TL(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Sz=function(n,e){return n===e?0:n<e?-1:1},Sw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,J.Wl)(e))},yP=function(n){if("object"!=typeof n||null===n)return(0,J.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,J.Wl)(e[r]),t+=":",t+=yP(n[e[r]]);return t+="}",t},IL=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function mi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const bL=function(n){(0,J.hu)(!nD(n),"Invalid JSON number");const r=1023;let i,a,l,f,m;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,l=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const b=v.join("");let T="";for(m=0;m<64;m+=8){let x=parseInt(b.substr(m,8),2).toString(16);1===x.length&&(x="0"+x),T+=x}return T.toLowerCase()},Rz=new RegExp("^-?(0*)\\d{1,10}$"),TL=function(n){if(Rz.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},qm=function(n){try{n()}catch(e){setTimeout(()=>{throw Ui("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Aw=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class kz{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ui(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Fz{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(gi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ui(e)}}let Mw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const xL=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,NL="websocket",OL="long_polling";class EP{constructor(e,t,r,i,a=!1,l="",f=!1,m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=qf.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&qf.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function kL(n,e,t){let r;if((0,J.hu)("string"==typeof e,"typeof type must == string"),(0,J.hu)("object"==typeof t,"typeof params must == object"),e===NL)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==OL)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Lz(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return mi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class Vz{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,J.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,J.p$)(this.counters_)}}const wP={},CP={};function IP(n){const e=n.toString();return wP[e]||(wP[e]=new Vz),wP[e]}class Bz{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&qm(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class cd{constructor(e,t,r,i,a,l,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Dw(e),this.stats_=IP(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),kL(t,OL,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Bz(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,J.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new bP((...a)=>{const[l,f,m,v,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=f,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&xL.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){cd.forceAllow_=!0}static forceDisallow(){cd.forceDisallow_=!0}static isAvailable(){return!((0,J.Yr)()||!cd.forceAllow_&&(cd.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,J.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,J.h$)(t),i=IL(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,J.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,J.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class bP{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,J.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=vL(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=bP.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){gi("frame writing exception"),f.stack&&gi(f.stack),gi(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||gi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,J.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{gi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let iD=null;typeof MozWebSocket<"u"?iD=MozWebSocket:typeof WebSocket<"u"&&(iD=WebSocket);let Km=(()=>{class n{constructor(t,r,i,a,l,f,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Dw(this.connId),this.stats_=IP(r),this.connURL=n.connectionURL_(r,f,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const f={v:"5"};return!(0,J.Yr)()&&typeof location<"u"&&location.hostname&&xL.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),l&&(f.p=l),kL(t,NL,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,qf.set("previous_websocket_failure",!0);try{let i;if((0,J.Yr)()){i={headers:{"User-Agent":`Firebase/5/${gP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,f=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new iD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==iD&&!n.forceDisallow_}static previouslyFailed(){return qf.isInMemoryStorage||!0===qf.get("previous_websocket_failure")}markConnectionHealthy(){qf.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,J.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,J.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,J.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=IL(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),jL=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[cd,Km]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Km&&Km.isAvailable();let i=r&&!Km.previouslyFailed();if(t.webSocketOnly&&(r||Ui("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Km];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class ZL{constructor(e,t,r,i,a,l,f,m,v,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=f,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Dw("c:"+this.id+":"),this.transportManager_=new jL(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Aw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Sw("t",e),r=Sw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Sw("t",e),r=Sw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Sw("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?_P("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_P("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ui("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Aw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Aw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(qf.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class YL{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class QL{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,J.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,J.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class sD extends QL{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,J.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new sD}getInitialEvent(e){return(0,J.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Gn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Hn(){return new Gn("")}function bn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function dd(n){return n.pieces_.length-n.pieceNum_}function nr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Gn(n.pieces_,e)}function DP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function xw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function eV(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Gn(e,0)}function wr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Gn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Gn(t,0)}function Tn(n){return n.pieceNum_>=n.pieces_.length}function ts(n,e){const t=bn(n),r=bn(e);if(null===t)return e;if(t===r)return ts(nr(n),nr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function SP(n,e){if(dd(n)!==dd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ro(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(dd(n)>dd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class lW{constructor(e,t){this.errorPrefix_=t,this.parts_=xw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,J.ug)(this.parts_[r]);tV(this)}}function tV(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Yf(n))}function Yf(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class AP extends QL{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new AP}getInitialEvent(e){return(0,J.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Rw=1e3;let aD,Qf=(()=>{class n extends YL{constructor(t,r,i,a,l,f,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=Dw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Rw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,J.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");AP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&sD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,J.Wl)(l)),(0,J.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new J.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:f=>{const m=f.d;"ok"===f.s?r.resolve(m):r.reject(m)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),(0,J.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,J.hu)(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const v=m.d,b=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==b&&this.removeListen_(i,a),t.onComplete&&t.onComplete(b,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,J.r3)(t,"w")){const i=(0,J.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Ui(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,J.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,J.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,f=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,J.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const f={p:r,d:i};void 0!==l&&(f.h=l),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,J.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):_P("Unrecognized action received from server: "+(0,J.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,J.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Rw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Rw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Rw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ce.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let m=!1,v=null;const b=function(){v?v.close():(m=!0,a())};t.realtime_={close:b,sendRequest:function(V){(0,J.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(V)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,G]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);m?gi("getToken() completed but was canceled"):(gi("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=G&&G.token,v=new ZL(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ue=>{Ui(ue+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(V){t.log_("Failed to get token: "+V),m||(t.repoInfo_.nodeAdmin&&Ui(V),b())}}})()}interrupt(t){gi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){gi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,J.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Rw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>yP(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Gn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){gi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){gi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,J.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+gP.replace(/\./g,"-")]=1,(0,J.uI)()?t["framework.cordova"]=1:(0,J.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=sD.getInstance().currentlyOnline();return(0,J.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Mn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Mn(e,t)}}class oD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Mn(ld,e),i=new Mn(ld,t);return 0!==this.compare(r,i)}minPost(){return Mn.MIN}}class iV extends oD{static get __EMPTY_NODE(){return aD}static set __EMPTY_NODE(e){aD=e}compare(e,t){return Zf(e.name,t.name)}isDefinedOn(e){throw(0,J.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Mn.MIN}maxPost(){return new Mn(El,aD)}makePost(e,t){return(0,J.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Mn(e,aD)}toString(){return".key"}}const $a=new iV;class uD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let xP,Ho=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??ws.EMPTY_NODE,this.right=l??ws.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return ws.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ws.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ws{constructor(e,t=ws.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ws(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ho.BLACK,null,null))}remove(e){return new ws(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ho.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new uD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new uD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new uD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new uD(this.root_,null,this.comparator_,!0,e)}}function _W(n,e){return Zf(n.name,e.name)}function MP(n,e){return Zf(n,e)}ws.EMPTY_NODE=new class mW{copy(e,t,r,i,a){return this}insert(e,t,r){return new Ho(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const sV=function(n){return"number"==typeof n?"number:"+bL(n):"string:"+n},oV=function(n){if(n.isLeafNode()){const e=n.val();(0,J.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,J.r3)(e,".sv"),"Priority must be a string or number.")}else(0,J.hu)(n===xP||n.isEmpty(),"priority of unexpected type.");(0,J.hu)(n===xP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let aV,uV,lV,Zm=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,J.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),oV(this.priorityNode_)}static set __childrenNodeConstructor(t){aV=t}static get __childrenNodeConstructor(){return aV}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Tn(t)?this:".priority"===bn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=bn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,J.hu)(".priority"!==i||1===dd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(nr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+sV(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?bL(this.value_):this.value_,this.lazyHash_=EL(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,J.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,J.hu)(a>=0,"Unknown leaf type: "+r),(0,J.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const lr=new class wW extends oD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Zf(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Mn.MIN}maxPost(){return new Mn(El,new Zm("[PRIORITY-POST]",lV))}makePost(e,t){const r=uV(e);return new Mn(t,new Zm("[PRIORITY-POST]",r))}toString(){return".priority"}},CW=Math.log(2);class IW{constructor(e){this.count=parseInt(Math.log(e+1)/CW,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const lD=function(n,e,t,r){n.sort(e);const i=function(m,v){const b=v-m;let T,x;if(0===b)return null;if(1===b)return T=n[m],x=t?t(T):T,new Ho(x,T.node,Ho.BLACK,null,null);{const V=parseInt(b/2,10)+m,G=i(m,V),ue=i(V+1,v);return T=n[V],x=t?t(T):T,new Ho(x,T.node,Ho.BLACK,G,ue)}},f=function(m){let v=null,b=null,T=n.length;const x=function(G,ue){const Ie=T-G,It=T;T-=G;const xt=i(Ie+1,It),Dt=n[Ie],$t=t?t(Dt):Dt;V(new Ho($t,Dt.node,ue,null,xt))},V=function(G){v?(v.left=G,v=G):(b=G,v=G)};for(let G=0;G<m.count;++G){const ue=m.nextBitIsOne(),Ie=Math.pow(2,m.count-(G+1));ue?x(Ie,Ho.BLACK):(x(Ie,Ho.BLACK),x(Ie,Ho.RED))}return b}(new IW(n.length));return new ws(r||e,f)};let RP;const Ym={};class wl{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,J.hu)(Ym&&lr,"ChildrenNode.ts has not been loaded"),RP=RP||new wl({".priority":Ym},{".priority":lr}),RP}get(e){const t=(0,J.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ws?t:null}hasIndex(e){return(0,J.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,J.hu)(e!==$a,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Mn.Wrap);let f,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();f=i?lD(r,e.getCompare()):Ym;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const b=Object.assign({},this.indexes_);return b[m]=f,new wl(b,v)}addToIndexes(e,t){const r=(0,J.UI)(this.indexes_,(i,a)=>{const l=(0,J.DV)(this.indexSet_,a);if((0,J.hu)(l,"Missing index implementation for "+a),i===Ym){if(l.isDefinedOn(e.node)){const f=[],m=t.getIterator(Mn.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&f.push(v),v=m.getNext();return f.push(e),lD(f,l.getCompare())}return Ym}{const f=t.get(e.name);let m=i;return f&&(m=m.remove(new Mn(e.name,f))),m.insert(e,e.node)}});return new wl(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,J.UI)(this.indexes_,i=>{if(i===Ym)return i;{const a=t.get(e.name);return a?i.remove(new Mn(e.name,a)):i}});return new wl(r,this.indexSet_)}}let Pw,pn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&oV(this.priorityNode_),this.children_.isEmpty()&&(0,J.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Pw||(Pw=new n(new ws(MP),null,wl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Pw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Pw:r}}getChild(t){const r=bn(t);return null===r?this:this.getImmediateChild(r).getChild(nr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,J.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Mn(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?Pw:this.priorityNode_;return new n(a,f,l)}}updateChild(t,r){const i=bn(t);if(null===i)return r;{(0,J.hu)(".priority"!==bn(t)||1===dd(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(nr(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(lr,(f,m)=>{r[f]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):l=!1}),!t&&l&&a<2*i){const f=[];for(const m in r)f[m]=r[m];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+sV(this.getPriority().val())+":"),this.forEachChild(lr,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":EL(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Mn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Mn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Mn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Mn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Mn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Nw?-1:0}withIndex(t){if(t===$a||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===$a||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(lr),a=r.getIterator(lr);let l=i.getNext(),f=a.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=a.getNext()}return null===l&&null===f}return!1}return!1}}resolveIndex_(t){return t===$a?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Nw=new class bW extends pn{constructor(){super(new ws(MP),pn.EMPTY_NODE,wl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return pn.EMPTY_NODE}isEmpty(){return!1}};function Ar(n,e=null){if(null===n)return pn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,J.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Zm(n,Ar(e));if(n instanceof Array){let t=pn.EMPTY_NODE;return mi(n,(r,i)=>{if((0,J.r3)(n,r)&&"."!==r.substring(0,1)){const a=Ar(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Ar(e))}{const t=[];let r=!1;if(mi(n,(l,f)=>{if("."!==l.substring(0,1)){const m=Ar(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new Mn(l,m)))}}),0===t.length)return pn.EMPTY_NODE;const a=lD(t,_W,l=>l.name,MP);if(r){const l=lD(t,lr.getCompare());return new pn(a,Ar(e),new wl({".priority":l},{".priority":lr}))}return new pn(a,Ar(e),wl.Default)}}Object.defineProperties(Mn,{MIN:{value:new Mn(ld,pn.EMPTY_NODE)},MAX:{value:new Mn(El,Nw)}}),iV.__EMPTY_NODE=pn.EMPTY_NODE,Zm.__childrenNodeConstructor=pn,function yW(n){xP=n}(Nw),function EW(n){lV=n}(Nw),function vW(n){uV=n}(Ar);class PP extends oD{constructor(e){super(),this.indexPath_=e,(0,J.hu)(!Tn(e)&&".priority"!==bn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Zf(e.name,t.name):a}makePost(e,t){const r=Ar(e),i=pn.EMPTY_NODE.updateChild(this.indexPath_,r);return new Mn(t,i)}maxPost(){const e=pn.EMPTY_NODE.updateChild(this.indexPath_,Nw);return new Mn(El,e)}toString(){return xw(this.indexPath_,0).join("/")}}const NP=new class DW extends oD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Zf(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Mn.MIN}maxPost(){return Mn.MAX}makePost(e,t){const r=Ar(e);return new Mn(t,r)}toString(){return".value"}};function kw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class kP{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=lr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,J.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,J.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ld}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,J.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,J.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:El}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,J.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===lr}copy(){const e=new kP;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function dV(n){const e={};if(n.isDefault())return e;let t;if(n.index_===lr?t="$priority":n.index_===NP?t="$value":n.index_===$a?t="$key":((0,J.hu)(n.index_ instanceof PP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,J.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,J.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,J.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,J.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,J.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function hV(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==lr&&(e.i=n.index_.toString()),e}class dD extends YL{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Dw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,J.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=dD.getListenId_(e,r),f={};this.listens_[l]=f;const m=dV(e._queryParams);this.restRequest_(a+".json",m,(v,b)=>{let T=b;if(404===v&&(T=null,v=null),null===v&&this.onDataUpdate_(a,T,!1,r),(0,J.DV)(this.listens_,l)===f){let x;x=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(x,null)}})}unlisten(e,t){const r=dD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=dV(e._queryParams),r=e._path.toString(),i=new J.BH;return this.restRequest_(r+".json",t,(a,l)=>{let f=l;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,J.xO)(t);this.log_("Sending REST request for "+l);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,J.cI)(f.responseText)}catch{Ui("Failed to parse JSON response for "+l+": "+f.responseText)}r(null,m)}else 401!==f.status&&404!==f.status&&Ui("Got unsuccessful REST response for "+l+" Status: "+f.status),r(f.status);r=null}},f.open("GET",l,!0),f.send()})}}class OW{constructor(){this.rootNode_=pn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function hD(){return{value:null,children:new Map}}function Jm(n,e,t){if(Tn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=bn(e);n.children.has(r)||n.children.set(r,hD()),Jm(n.children.get(r),e=nr(e),t)}}function UP(n,e,t){null!==n.value?t(e,n.value):function kW(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{UP(i,new Gn(e.toString()+"/"+r),t)})}class FW{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&mi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class UW{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new FW(e);const r=1e4+2e4*Math.random();Aw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;mi(e,(i,a)=>{a>0&&(0,J.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Aw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var io=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(io||(io={})),io))();function jP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class fD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=io.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Tn(this.path)){if(null!=this.affectedTree.value)return(0,J.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Gn(e));return new fD(Hn(),t,this.revert)}}return(0,J.hu)(bn(this.path)===e,"operationForChild called for unrelated child."),new fD(nr(this.path),this.affectedTree,this.revert)}}class Jf{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=io.OVERWRITE}operationForChild(e){return Tn(this.path)?new Jf(this.source,Hn(),this.snap.getImmediateChild(e)):new Jf(this.source,nr(this.path),this.snap)}}class Xm{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=io.MERGE}operationForChild(e){if(Tn(this.path)){const t=this.children.subtree(new Gn(e));return t.isEmpty()?null:t.value?new Jf(this.source,Hn(),t.value):new Xm(this.source,Hn(),t)}return(0,J.hu)(bn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Xm(this.source,nr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class hd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Tn(e))return this.isFullyInitialized()&&!this.filtered_;const t=bn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Vw(n,e,t,r,i,a){const l=r.filter(f=>f.type===t);l.sort((f,m)=>function HW(n,e,t){if(null==e.childName||null==t.childName)throw(0,J.g5)("Should only compare child_ events.");const r=new Mn(e.childName,e.snapshotNode),i=new Mn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,m)),l.forEach(f=>{const m=function jW(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(v=>{v.respondsTo(f.type)&&e.push(v.createEvent(m,n.query_))})})}function pD(n,e){return{eventCache:n,serverCache:e}}function Uw(n,e,t,r){return pD(new hd(e,t,r),n.serverCache)}function pV(n,e,t,r){return pD(n.eventCache,new hd(e,t,r))}function gD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Xf(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let HP;class cr{constructor(e,t=(()=>(HP||(HP=new ws(Sz)),HP))()){this.value=e,this.children=t}static fromObject(e){let t=new cr(null);return mi(e,(r,i)=>{t=t.set(new Gn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Hn(),value:this.value};if(Tn(e))return null;{const r=bn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(nr(e),t);return null!=a?{path:wr(new Gn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Tn(e))return this;{const t=bn(e),r=this.children.get(t);return null!==r?r.subtree(nr(e)):new cr(null)}}set(e,t){if(Tn(e))return new cr(t,this.children);{const r=bn(e),a=(this.children.get(r)||new cr(null)).set(nr(e),t),l=this.children.insert(r,a);return new cr(this.value,l)}}remove(e){if(Tn(e))return this.children.isEmpty()?new cr(null):new cr(null,this.children);{const t=bn(e),r=this.children.get(t);if(r){const i=r.remove(nr(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new cr(null):new cr(this.value,a)}return this}}get(e){if(Tn(e))return this.value;{const t=bn(e),r=this.children.get(t);return r?r.get(nr(e)):null}}setTree(e,t){if(Tn(e))return t;{const r=bn(e),a=(this.children.get(r)||new cr(null)).setTree(nr(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new cr(this.value,l)}}fold(e){return this.fold_(Hn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(wr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Hn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Tn(e))return null;{const a=bn(e),l=this.children.get(a);return l?l.findOnPath_(nr(e),wr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Hn(),t)}foreachOnPath_(e,t,r){if(Tn(e))return this;{this.value&&r(t,this.value);const i=bn(e),a=this.children.get(i);return a?a.foreachOnPath_(nr(e),wr(t,i),r):new cr(null)}}foreach(e){this.foreach_(Hn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(wr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class zo{constructor(e){this.writeTree_=e}static empty(){return new zo(new cr(null))}}function Bw(n,e,t){if(Tn(e))return new zo(new cr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=ts(i,e);return a=a.updateChild(l,t),new zo(n.writeTree_.set(i,a))}{const i=new cr(t),a=n.writeTree_.setTree(e,i);return new zo(a)}}}function zP(n,e,t){let r=n;return mi(t,(i,a)=>{r=Bw(r,wr(e,i),a)}),r}function gV(n,e){if(Tn(e))return zo.empty();{const t=n.writeTree_.setTree(e,new cr(null));return new zo(t)}}function WP(n,e){return null!=ep(n,e)}function ep(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ts(t.path,e)):null}function mV(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(lr,(r,i)=>{e.push(new Mn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Mn(r,i.value))}),e}function fd(n,e){if(Tn(e))return n;{const t=ep(n,e);return new zo(null!=t?new cr(t):n.writeTree_.subtree(e))}}function GP(n){return n.writeTree_.isEmpty()}function e_(n,e){return _V(Hn(),n.writeTree_,e)}function _V(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,J.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=_V(wr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(wr(n,".priority"),r)),t}}function mD(n,e){return CV(e,n)}function ZW(n,e){if(n.snap)return ro(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ro(wr(n.path,t),e))return!0;return!1}function QW(n){return n.visible}function yV(n,e,t){let r=zo.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let f;if(a.snap)ro(t,l)?(f=ts(t,l),r=Bw(r,f,a.snap)):ro(l,t)&&(f=ts(l,t),r=Bw(r,Hn(),a.snap.getChild(f)));else{if(!a.children)throw(0,J.g5)("WriteRecord should have .snap or .children");if(ro(t,l))f=ts(t,l),r=zP(r,f,a.children);else if(ro(l,t))if(f=ts(l,t),Tn(f))r=zP(r,Hn(),a.children);else{const m=(0,J.DV)(a.children,bn(f));if(m){const v=m.getChild(nr(f));r=Bw(r,Hn(),v)}}}}}return r}function vV(n,e,t,r,i){if(r||i){const a=fd(n.visibleWrites,e);return!i&&GP(a)?t:i||null!=t||WP(a,Hn())?e_(yV(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(ro(v.path,e)||ro(e,v.path))},e),t||pn.EMPTY_NODE):null}{const a=ep(n.visibleWrites,e);if(null!=a)return a;{const l=fd(n.visibleWrites,e);return GP(l)?t:null!=t||WP(l,Hn())?e_(l,t||pn.EMPTY_NODE):null}}}function _D(n,e,t,r){return vV(n.writeTree,n.treePath,e,t,r)}function qP(n,e){return function JW(n,e,t){let r=pn.EMPTY_NODE;const i=ep(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(lr,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=fd(n.visibleWrites,e);return t.forEachChild(lr,(l,f)=>{const m=e_(fd(a,new Gn(l)),f);r=r.updateImmediateChild(l,m)}),mV(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return mV(fd(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function EV(n,e,t,r){return function XW(n,e,t,r,i){(0,J.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=wr(e,t);if(WP(n.visibleWrites,a))return null;{const l=fd(n.visibleWrites,a);return GP(l)?i.getChild(t):e_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function yD(n,e){return function tG(n,e){return ep(n.visibleWrites,e)}(n.writeTree,wr(n.treePath,e))}function KP(n,e,t){return function eG(n,e,t,r){const i=wr(e,t),a=ep(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?e_(fd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function wV(n,e){return CV(wr(n.treePath,e),n.writeTree)}function CV(n,e){return{treePath:n,writeTree:e}}class sG{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,J.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,J.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,kw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,function Ow(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,function Qm(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,J.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,kw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const IV=new class oG{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class ZP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new hd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return KP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Xf(this.viewCache_),a=function iG(n,e,t,r,i,a){return function nG(n,e,t,r,i,a,l){let f;const m=fd(n.visibleWrites,e),v=ep(m,Hn());if(null!=v)f=v;else{if(null==t)return[];f=e_(m,t)}if(f=f.withIndex(l),f.isEmpty()||f.isLeafNode())return[];{const b=[],T=l.getCompare(),x=a?f.getReverseIteratorFrom(r,l):f.getIteratorFrom(r,l);let V=x.getNext();for(;V&&b.length<i;)0!==T(V,r)&&b.push(V),V=x.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function bV(n,e,t,r,i,a){const l=e.eventCache;if(null!=yD(r,t))return e;{let f,m;if(Tn(t))if((0,J.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Xf(e),T=qP(r,v instanceof pn?v:pn.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),T,a)}else{const v=_D(r,Xf(e));f=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=bn(t);if(".priority"===v){(0,J.hu)(1===dd(t),"Can't have a priority with additional path components");const b=l.getNode();m=e.serverCache.getNode();const T=EV(r,t,b,m);f=null!=T?n.filter.updatePriority(b,T):l.getNode()}else{const b=nr(t);let T;if(l.isCompleteForChild(v)){m=e.serverCache.getNode();const x=EV(r,t,l.getNode(),m);T=null!=x?l.getNode().getImmediateChild(v).updateChild(b,x):l.getNode().getImmediateChild(v)}else T=KP(r,v,e.serverCache);f=null!=T?n.filter.updateChild(l.getNode(),v,T,b,i,a):l.getNode()}}return Uw(e,f,l.isFullyInitialized()||Tn(t),n.filter.filtersNodes())}}function vD(n,e,t,r,i,a,l,f){const m=e.serverCache;let v;const b=l?n.filter:n.filter.getIndexedFilter();if(Tn(t))v=b.updateFullNode(m.getNode(),r,null);else if(b.filtersNodes()&&!m.isFiltered()){const V=m.getNode().updateChild(t,r);v=b.updateFullNode(m.getNode(),V,null)}else{const V=bn(t);if(!m.isCompleteForPath(t)&&dd(t)>1)return e;const G=nr(t),Ie=m.getNode().getImmediateChild(V).updateChild(G,r);v=".priority"===V?b.updatePriority(m.getNode(),Ie):b.updateChild(m.getNode(),V,Ie,G,IV,null)}const T=pV(e,v,m.isFullyInitialized()||Tn(t),b.filtersNodes());return bV(n,T,t,i,new ZP(i,T,a),f)}function YP(n,e,t,r,i,a,l){const f=e.eventCache;let m,v;const b=new ZP(i,e,a);if(Tn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=Uw(e,v,!0,n.filter.filtersNodes());else{const T=bn(t);if(".priority"===T)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=Uw(e,v,f.isFullyInitialized(),f.isFiltered());else{const x=nr(t),V=f.getNode().getImmediateChild(T);let G;if(Tn(x))G=r;else{const ue=b.getCompleteChild(T);G=null!=ue?".priority"===DP(x)&&ue.getChild(eV(x)).isEmpty()?ue:ue.updateChild(x,r):pn.EMPTY_NODE}m=V.equals(G)?e:Uw(e,n.filter.updateChild(f.getNode(),T,G,x,b,l),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function TV(n,e){return n.eventCache.isCompleteForChild(e)}function DV(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function QP(n,e,t,r,i,a,l,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=Tn(t)?r:new cr(null).setTree(t,r);const b=e.serverCache.getNode();return v.children.inorderTraversal((T,x)=>{if(b.hasChild(T)){const G=DV(0,e.serverCache.getNode().getImmediateChild(T),x);m=vD(n,m,new Gn(T),G,i,a,l,f)}}),v.children.inorderTraversal((T,x)=>{const V=!e.serverCache.isCompleteForChild(T)&&null===x.value;if(!b.hasChild(T)&&!V){const ue=DV(0,e.serverCache.getNode().getImmediateChild(T),x);m=vD(n,m,new Gn(T),ue,i,a,l,f)}}),m}function yG(n,e){const t=Xf(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Tn(e)&&!t.getImmediateChild(bn(e)).isEmpty())?t.getChild(e):null}function MV(n,e,t,r){e.type===io.MERGE&&null!==e.source.queryId&&((0,J.hu)(Xf(n.viewCache_),"We should always have a full cache before handling merges"),(0,J.hu)(gD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function lG(n,e,t,r,i){const a=new sG;let l,f;if(t.type===io.OVERWRITE){const v=t;v.source.fromUser?l=YP(n,e,v.path,v.snap,r,i,a):((0,J.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered()&&!Tn(v.path),l=vD(n,e,v.path,v.snap,r,i,f,a))}else if(t.type===io.MERGE){const v=t;v.source.fromUser?l=function dG(n,e,t,r,i,a,l){let f=e;return r.foreach((m,v)=>{const b=wr(t,m);TV(e,bn(b))&&(f=YP(n,f,b,v,i,a,l))}),r.foreach((m,v)=>{const b=wr(t,m);TV(e,bn(b))||(f=YP(n,f,b,v,i,a,l))}),f}(n,e,v.path,v.children,r,i,a):((0,J.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered(),l=QP(n,e,v.path,v.children,r,i,f,a))}else if(t.type===io.ACK_USER_WRITE){const v=t;l=v.revert?function pG(n,e,t,r,i,a){let l;if(null!=yD(r,t))return e;{const f=new ZP(r,e,i),m=e.eventCache.getNode();let v;if(Tn(t)||".priority"===bn(t)){let b;if(e.serverCache.isFullyInitialized())b=_D(r,Xf(e));else{const T=e.serverCache.getNode();(0,J.hu)(T instanceof pn,"serverChildren would be complete if leaf node"),b=qP(r,T)}v=n.filter.updateFullNode(m,b,a)}else{const b=bn(t);let T=KP(r,b,e.serverCache);null==T&&e.serverCache.isCompleteForChild(b)&&(T=m.getImmediateChild(b)),v=null!=T?n.filter.updateChild(m,b,T,nr(t),f,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(m,b,pn.EMPTY_NODE,nr(t),f,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=_D(r,Xf(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=yD(r,Hn()),Uw(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function hG(n,e,t,r,i,a,l){if(null!=yD(i,t))return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(Tn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return vD(n,e,t,m.getNode().getChild(t),i,a,f,l);if(Tn(t)){let v=new cr(null);return m.getNode().forEachChild($a,(b,T)=>{v=v.set(new Gn(b),T)}),QP(n,e,t,v,i,a,f,l)}return e}{let v=new cr(null);return r.foreach((b,T)=>{const x=wr(t,b);m.isCompleteForPath(x)&&(v=v.set(b,m.getNode().getChild(x)))}),QP(n,e,t,v,i,a,f,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==io.LISTEN_COMPLETE)throw(0,J.g5)("Unknown operation type: "+t.type);l=function fG(n,e,t,r,i){const a=e.serverCache;return bV(n,pV(e,a.getNode(),a.isFullyInitialized()||Tn(t),a.isFiltered()),t,r,IV,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function cG(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=gD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(function cV(n){return{type:"value",snapshotNode:n}}(gD(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function uG(n,e){(0,J.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,J.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,J.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,function xV(n,e,t,r){return function $W(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function SW(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),Vw(n,i,"child_removed",e,r,t),Vw(n,i,"child_added",e,r,t),Vw(n,i,"child_moved",a,r,t),Vw(n,i,"child_changed",e,r,t),Vw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,a.changes,a.viewCache.eventCache.getNode(),null)}let ED,CD;function JP(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,J.hu)(null!=a,"SyncTree gave us an op for an invalid query."),MV(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(MV(l,e,t,r));return a}}function pd(n,e){let t=null;for(const r of n.views.values())t=t||yG(r,e);return t}class FV{constructor(e){this.listenProvider_=e,this.syncPointTree_=new cr(null),this.pendingWriteTree_=function rG(){return{visibleWrites:zo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function XP(n,e,t,r,i){return function WW(n,e,t,r,i){(0,J.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Bw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?t_(n,new Jf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function md(n,e,t=!1){const r=function qW(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function KW(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,J.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const f=n.allWrites[l];f.visible&&(l>=t&&ZW(f,r.path)?i=!1:ro(r.path,f.path)&&(a=!0)),l--}return!!i&&(a?(function YW(n){n.visibleWrites=yV(n.allWrites,QW,Hn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=gV(n.visibleWrites,r.path):mi(r.children,m=>{n.visibleWrites=gV(n.visibleWrites,wr(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new cr(null);return null!=r.snap?a=a.set(Hn(),!0):mi(r.children,l=>{a=a.set(new Gn(l),!0)}),t_(n,new fD(r.path,a,t))}return[]}function $w(n,e,t){return t_(n,new Jf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function bD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,f)=>{const v=pd(f,ts(l,e));if(v)return v});return vV(i,e,a,t,!0)}function t_(n,e){return VV(e,n.syncPointTree_,null,mD(n.pendingWriteTree_,Hn()))}function VV(n,e,t,r){if(Tn(n.path))return UV(n,e,t,r);{const i=e.get(Hn());null==t&&null!=i&&(t=pd(i,Hn()));let a=[];const l=bn(n.path),f=n.operationForChild(l),m=e.children.get(l);if(m&&f){const v=t?t.getImmediateChild(l):null,b=wV(r,l);a=a.concat(VV(f,m,v,b))}return i&&(a=a.concat(JP(i,n,r,t))),a}}function UV(n,e,t,r){const i=e.get(Hn());null==t&&null!=i&&(t=pd(i,Hn()));let a=[];return e.children.inorderTraversal((l,f)=>{const m=t?t.getImmediateChild(l):null,v=wV(r,l),b=n.operationForChild(l);b&&(a=a.concat(UV(b,f,m,v)))}),i&&(a=a.concat(JP(i,n,r,t))),a}function tN(n,e){return n.tagToQueryMap.get(e)}function nN(n){const e=n.indexOf("$");return(0,J.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Gn(n.substr(0,e))}}function rN(n,e,t){const r=n.syncPointTree_.get(e);return(0,J.hu)(r,"Missing sync point for query tag that we're tracking"),JP(r,t,mD(n.pendingWriteTree_,e),null)}class iN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new iN(t)}node(){return this.node_}}class sN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=wr(this.path_,e);return new sN(this.syncTree_,t)}node(){return bD(this.syncTree_,this.path_)}}const $V=function(n,e,t){return n&&"object"==typeof n?((0,J.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?BG(n[".sv"],e,t):"object"==typeof n[".sv"]?$G(n[".sv"],e):void(0,J.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},BG=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,J.hu)(!1,"Unexpected server value: "+n)},$G=function(n,e,t){n.hasOwnProperty("increment")||(0,J.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,J.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,J.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},oN=function(n,e,t){return aN(n,new iN(e),t)};function aN(n,e,t){const r=n.getPriority().val(),i=$V(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,f=$V(l.getValue(),e,t);return f!==l.getValue()||i!==l.getPriority().val()?new Zm(f,Ar(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new Zm(i))),l.forEachChild(lr,(f,m)=>{const v=aN(m,e.getImmediateChild(f),t);v!==m&&(a=a.updateImmediateChild(f,v))}),a}}class uN{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function DD(n,e){let t=e instanceof Gn?e:new Gn(e),r=n,i=bn(t);for(;null!==i;){const a=(0,J.DV)(r.node.children,i)||{children:{},childCount:0};r=new uN(i,r,a),t=nr(t),i=bn(t)}return r}function tp(n){return n.node.value}function lN(n,e){n.node.value=e,cN(n)}function HV(n){return n.node.childCount>0}function SD(n,e){mi(n.node.children,(t,r)=>{e(new uN(t,n,r))})}function zV(n,e,t,r){t&&!r&&e(n),SD(n,i=>{zV(i,e,!0,r)}),t&&r&&e(n)}function zw(n){return new Gn(null===n.parent?n.name:zw(n.parent)+"/"+n.name)}function cN(n){null!==n.parent&&function zG(n,e,t){const r=function jG(n){return void 0===tp(n)&&!HV(n)}(t),i=(0,J.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,cN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,cN(n))}(n.parent,n.name,n)}const WG=/[\[\].#$\/\u0000-\u001F\u007F]/,GG=/[\[\].#$\u0000-\u001F\u007F]/,dN=10485760,AD=function(n){return"string"==typeof n&&0!==n.length&&!WG.test(n)},Gw=function(n,e,t){const r=t instanceof Gn?new lW(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Yf(r));if("function"==typeof e)throw new Error(n+"contains a function "+Yf(r)+" with contents = "+e.toString());if(nD(e))throw new Error(n+"contains "+e.toString()+" "+Yf(r));if("string"==typeof e&&e.length>dN/3&&(0,J.ug)(e)>dN)throw new Error(n+"contains a string greater than "+dN+" utf8 bytes "+Yf(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(mi(e,(l,f)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!AD(l)))throw new Error(n+" contains an invalid key ("+l+") "+Yf(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function cW(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,J.ug)(e),tV(n)})(r,l),Gw(n,f,r),function dW(n){const e=n.parts_.pop();n.byteLength_-=(0,J.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Yf(r)+" in addition to actual children.")}},qV=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!AD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!GG.test(n)}(n)}(t))throw new Error((0,J.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class YG{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Hs(n,e,t){(function MD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!SP(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function ZV(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(QG(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>ro(r,e)||ro(e,r))}function QG(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Kf&&gi("event: "+t.toString()),qm(r)}}}class XG{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new YG,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=hD(),this.transactionQueueTree_=new uN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function QV(n){const t=n.infoData_.getNode(new Gn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Kw(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:QV(n)})}function JV(n,e,t,r,i){n.dataUpdateCount++;const a=new Gn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,J.UI)(t,v=>Ar(v));l=function NG(n,e,t,r){const i=tN(n,r);if(i){const a=nN(i),l=a.path,f=a.queryId,m=ts(l,e),v=cr.fromObject(t);return rN(n,l,new Xm(jP(f),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Ar(t);l=function LV(n,e,t,r){const i=tN(n,r);if(null!=i){const a=nN(i),l=a.path,f=a.queryId,m=ts(l,e);return rN(n,l,new Jf(jP(f),m,t))}return[]}(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,J.UI)(t,v=>Ar(v));l=function xG(n,e,t){const r=cr.fromObject(t);return t_(n,new Xm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Ar(t);l=$w(n.serverSyncTree_,a,m)}let f=a;l.length>0&&(f=r_(n,a)),Hs(n.eventQueue_,f,l)}function XV(n,e){pN(n,"connected",e),!1===e&&function i3(n){n_(n,"onDisconnectEvents");const e=Kw(n),t=hD();UP(n.onDisconnect_,Hn(),(i,a)=>{const l=function(n,e,t,r){return aN(e,new sN(t,n),r)}(i,a,n.serverSyncTree_,e);Jm(t,i,l)});let r=[];UP(t,Hn(),(i,a)=>{r=r.concat($w(n.serverSyncTree_,i,a));const l=function yN(n,e){const t=zw(nU(n,e)),r=DD(n.transactionQueueTree_,e);return function HG(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{vN(n,i)}),vN(n,r),zV(r,i=>{vN(n,i)}),t}(n,i);r_(n,l)}),n.onDisconnect_=hD(),Hs(n.eventQueue_,Hn(),r)}(n)}function pN(n,e,t){const r=new Gn("/.info/"+e),i=Ar(t);n.infoData_.updateSnapshot(r,i);const a=$w(n.infoSyncTree_,r,i);Hs(n.eventQueue_,r,a)}function xD(n){return n.nextWriteId_++}function n_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),gi(t,...e)}function _N(n,e,t){return bD(n.serverSyncTree_,e,t)||pn.EMPTY_NODE}function RD(n,e=n.transactionQueueTree_){if(e||PD(n,e),tp(e)){const t=rU(n,e);(0,J.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function d3(n,e,t){const r=t.map(v=>v.currentWriteId),i=_N(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const b=t[v];(0,J.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const T=ts(e,b.path);a=a.updateChild(T,b.currentOutputSnapshotRaw)}const f=a.val(!0),m=e;n.server_.put(m.toString(),f,v=>{n_(n,"transaction put response",{path:m.toString(),status:v});let b=[];if("ok"===v){const T=[];for(let x=0;x<t.length;x++)t[x].status=2,b=b.concat(md(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&T.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();PD(n,DD(n.transactionQueueTree_,e)),RD(n,n.transactionQueueTree_),Hs(n.eventQueue_,e,b);for(let x=0;x<T.length;x++)qm(T[x])}else{if("datastale"===v)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{Ui("transaction at "+m.toString()+" failed: "+v);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=v}r_(n,e)}},l)}(n,zw(e),t)}else HV(e)&&SD(e,t=>{RD(n,t)})}function r_(n,e){const t=nU(n,e),r=zw(t);return function h3(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],v=ts(t,m.path);let T,b=!1;if((0,J.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)b=!0,T=m.abortReason,i=i.concat(md(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)b=!0,T="maxretry",i=i.concat(md(n.serverSyncTree_,m.currentWriteId,!0));else{const x=_N(n,m.path,l);m.currentInputSnapshot=x;const V=e[f].update(x.val());if(void 0!==V){Gw("transaction failed: Data returned ",V,m.path);let G=Ar(V);"object"==typeof V&&null!=V&&(0,J.r3)(V,".priority")||(G=G.updatePriority(x.getPriority()));const Ie=m.currentWriteId,It=Kw(n),xt=oN(G,x,It);m.currentOutputSnapshotRaw=G,m.currentOutputSnapshotResolved=xt,m.currentWriteId=xD(n),l.splice(l.indexOf(Ie),1),i=i.concat(XP(n.serverSyncTree_,m.path,xt,m.currentWriteId,m.applyLocally)),i=i.concat(md(n.serverSyncTree_,Ie,!0))}else b=!0,T="nodata",i=i.concat(md(n.serverSyncTree_,m.currentWriteId,!0))}Hs(n.eventQueue_,t,i),i=[],b&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===T?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(T),!1,null)))}PD(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)qm(r[f]);RD(n,n.transactionQueueTree_)}(n,rU(n,t),r),r}function nU(n,e){let t,r=n.transactionQueueTree_;for(t=bn(e);null!==t&&void 0===tp(r);)r=DD(r,t),t=bn(e=nr(e));return r}function rU(n,e){const t=[];return iU(n,e,t),t.sort((r,i)=>r.order-i.order),t}function iU(n,e,t){const r=tp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);SD(e,i=>{iU(n,i,t)})}function PD(n,e){const t=tp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,lN(e,t.length>0?t:void 0)}SD(e,r=>{PD(n,r)})}function vN(n,e){const t=tp(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,J.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,J.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(md(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?lN(e,void 0):t.length=a+1,Hs(n.eventQueue_,zw(e),i);for(let l=0;l<r.length;l++)qm(r[l])}}const EN=function(n,e){const t=g3(n),r=t.namespace;return"firebase.com"===t.domain&&Ba(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ba("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ui("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new EP(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Gn(t.pathString)}},g3=function(n){let e="",t="",r="",i="",a="",l=!0,f="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(f=n.substring(0,v-1),n=n.substring(v+2));let b=n.indexOf("/");-1===b&&(b=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(b,T)),b<T&&(i=function f3(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,T)));const x=function p3(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ui(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));v=e.indexOf(":"),v>=0?(l="https"===f||"wss"===f,m=parseInt(e.substring(v+1),10)):v=e.length;const V=e.slice(0,v);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const G=e.indexOf(".");r=e.substring(0,G).toLowerCase(),t=e.substring(G+1),a=r}"ns"in x&&(a=x.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:f,pathString:i,namespace:a}};class zs{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Tn(this._path)?null:DP(this._path)}get ref(){return new Wo(this._repo,this._path)}get _queryIdentifier(){const e=hV(this._queryParams),t=yP(e);return"{}"===t?"default":t}get _queryObject(){return hV(this._queryParams)}isEqual(e){if(!((e=(0,J.m9)(e))instanceof zs))return!1;const t=this._repo===e._repo,r=SP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function aW(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Wo extends zs{constructor(e,t){super(e,t,new kP,!1)}get parent(){const e=eV(this._path);return null===e?null:new Wo(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function wG(n){(0,J.hu)(!ED,"__referenceConstructor has already been defined"),ED=n})(Wo),function DG(n){(0,J.hu)(!CD,"__referenceConstructor has already been defined"),CD=n}(Wo);const CN={};class k3{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function e3(n,e,t){if(n.stats_=IP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new dD(n.repoInfo_,(r,i,a,l)=>{JV(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>XV(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,J.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Qf(n.repoInfo_,e,(r,i,a,l)=>{JV(n,r,i,a,l)},r=>{XV(n,r)},r=>{!function t3(n,e){mi(e,(t,r)=>{pN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Uz(n,e){const t=n.toString();return CP[t]||(CP[t]=e()),CP[t]}(n.repoInfo_,()=>new UW(n.stats_,n.server_)),n.infoData_=new OW,n.infoSyncTree_=new FV({startListening:(r,i,a,l)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=$w(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),f},stopListening:()=>{}}),pN(n,"connected",!1),n.serverSyncTree_=new FV({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(f,m)=>{const v=l(f,m);Hs(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Wo(this._repo,Hn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function P3(n,e){const t=CN[e];(!t||t[n.key]!==n)&&Ba(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function tU(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ba("Cannot call "+e+" on a deleted database.")}}function F3(n=(0,On.getApp)(),e){const t=(0,On._getProvider)(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(0,J.P0)("database");r&&function L3(n,e,t,r={}){(n=(0,J.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ba("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ba('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Mw(Mw.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,J.Sg)(r.mockUserToken,n.app.options.projectId);a=new Mw(l)}!function x3(n,e,t,r){n.repoInfo_=new EP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(t,...r)}return t}Qf.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Qf.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function V3(n){(function Cz(n){gP=n})(On.SDK_VERSION),(0,On._registerComponent)(new Po.wA("database",(e,{instanceIdentifier:t})=>function R3(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Ba("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,l=EN(a,i),f=l.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${f.namespace}`,l=EN(a,i),f=l.repoInfo):m=!l.repoInfo.secure;const b=i&&m?new Mw(Mw.OWNER):new Fz(n.name,n.options,e);qV("Invalid Firebase Database URL",l),Tn(l.path)||Ba("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function N3(n,e,t,r){let i=CN[e.name];i||(i={},CN[e.name]=i);let a=i[n.toURLString()];return a&&Ba("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new XG(n,!1,t,r),i[n.toURLString()]=a,a}(f,n,b,new kz(n.name,t));return new k3(T,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,On.registerVersion)(mL,"0.14.4",n),(0,On.registerVersion)(mL,"0.14.4","esm2017")}();class IN{constructor(e){return e}}const fU="database",bN=new d.OlP("angularfire2.database-instances");function H3(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new IN(r)}}const z3={provide:class $3{constructor(){return(0,st.vb)(fU)}},deps:[[new d.FiY,bN]]},W3={provide:IN,useFactory:function j3(n,e){const t=(0,st.JM)(fU,n,e);return t&&new IN(t)},deps:[[new d.FiY,bN],bi]};let G3=(()=>{class n{constructor(){(0,ei.KN)("angularfire",st.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[W3,z3]}),n})();function q3(n,...e){return{ngModule:G3,providers:[{provide:bN,useFactory:H3(n),multi:!0,deps:[d.R0b,d.zs3,st.HU,ms,[new d.FiY,Cw],[new d.FiY,Zu],...e]}]}}const K3=(0,st.u3)(F3,!0);class TN{constructor(e){return e}}const pU="firestore",DN=new d.OlP("angularfire2.firestore-instances");function Q3(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new TN(r)}}const J3={provide:class Z3{constructor(){return(0,st.vb)(pU)}},deps:[[new d.FiY,DN]]},X3={provide:TN,useFactory:function Y3(n,e){const t=(0,st.JM)(pU,n,e);return t&&new TN(t)},deps:[[new d.FiY,DN],bi]};let eq=(()=>{class n{constructor(){(0,ei.KN)("angularfire",st.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[X3,J3]}),n})();function tq(n,...e){return{ngModule:eq,providers:[{provide:DN,useFactory:Q3(n),multi:!0,deps:[d.R0b,d.zs3,st.HU,ms,[new d.FiY,Cw],[new d.FiY,Zu],...e]}]}}const nq=(0,st.u3)(tj,!0),AN="functions";class aq{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return(0,Ce.Z)(function*(){if(e.auth)try{return(yield e.auth.getToken())?.accessToken}catch{return}})()}getMessagingToken(){var e=this;return(0,Ce.Z)(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch{return}})()}getAppCheckToken(){var e=this;return(0,Ce.Z)(function*(){if(e.appCheck){const t=yield e.appCheck.getToken();return t.error?null:t.token}return null})()}getContext(){var e=this;return(0,Ce.Z)(function*(){return{authToken:yield e.getAuthToken(),messagingToken:yield e.getMessagingToken(),appCheckToken:yield e.getAppCheckToken()}})()}}const MN="us-central1";class lq{constructor(e,t,r,i,a=MN,l){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new aq(t,r,i),this.cancelAllRequests=new Promise(f=>{this.deleteService=()=>Promise.resolve(f())});try{const f=new URL(a);this.customDomain=f.origin,this.region=MN}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const yU="@firebase/functions";function vq(n=(0,On.getApp)(),e=MN){const r=(0,On._getProvider)((0,J.m9)(n),AN).getImmediate({identifier:e}),i=(0,J.P0)("functions");return i&&function Eq(n,e,t){!function cq(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}((0,J.m9)(n),e,t)}(r,...i),r}!function yq(n,e){(0,On._registerComponent)(new Po.wA(AN,(r,{instanceIdentifier:i})=>{const a=r.getProvider("app").getImmediate(),l=r.getProvider("auth-internal"),f=r.getProvider("messaging-internal"),m=r.getProvider("app-check-internal");return new lq(a,l,f,m,i,n)},"PUBLIC").setMultipleInstances(!0)),(0,On.registerVersion)(yU,"0.9.4",e),(0,On.registerVersion)(yU,"0.9.4","esm2017")}(fetch.bind(self));class PN{constructor(e){return e}}const EU="functions",NN=new d.OlP("angularfire2.functions-instances");function Iq(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new PN(r)}}const bq={provide:class wq{constructor(){return(0,st.vb)(EU)}},deps:[[new d.FiY,NN]]},Tq={provide:PN,useFactory:function Cq(n,e){const t=(0,st.JM)(EU,n,e);return t&&new PN(t)},deps:[[new d.FiY,NN],bi]};let Dq=(()=>{class n{constructor(){(0,ei.KN)("angularfire",st.q4.full,"fn")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Tq,bq]}),n})();function Sq(n,...e){return{ngModule:Dq,providers:[{provide:NN,useFactory:Iq(n),multi:!0,deps:[d.R0b,d.zs3,st.HU,ms,[new d.FiY,Cw],[new d.FiY,Zu],...e]}]}}const Aq=(0,st.u3)(vq,!0);var Mq=O(751);class ON{constructor(e){return e}}const wU="messaging",kN=new d.OlP("angularfire2.messaging-instances");function Pq(n){return(e,t)=>{if(!st.n1.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new ON(r)}}const Nq={provide:class xq{constructor(){return(0,st.vb)(wU)}},deps:[[new d.FiY,kN]]},Oq={provide:ON,useFactory:function Rq(n,e){if(!st.n1.sync())return null;const t=(0,st.JM)(wU,n,e);return t&&new ON(t)},deps:[[new d.FiY,kN],bi]};let kq=(()=>{class n{constructor(){(0,ei.KN)("angularfire",st.q4.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Oq,Nq,{provide:d.ip1,useValue:st.n1.async,multi:!0}]}),n})();function Fq(n,...e){return{ngModule:kq,providers:[{provide:kN,useFactory:Pq(n),multi:!0,deps:[d.R0b,d.zs3,st.HU,ms,...e]}]}}const Lq=(0,st.u3)(Mq.KL,!0);O(2833);const CU="@firebase/performance",FN="0.6.4",LN="FB-PERF-TRACE-MEASURE",AU="@firebase/performance/config",MU="@firebase/performance/configexpire",xU="Performance",Di=new J.LL("performance",xU,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),za=new Ki.Yd(xU);let VN,RU,PU,BN;za.logLevel=Ki.in.INFO;class _i{constructor(e){if(this.window=e,!e)throw Di.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,r){!this.performance||!this.performance.measure||this.performance.measure(e,t,r)}getEntriesByType(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}getEntriesByName(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&(0,J.zI)()?!!(0,J.hl)()||(za.info("IndexedDB is not supported by current browswer"),!1):(za.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(e,t){this.PerformanceObserver&&new this.PerformanceObserver(i=>{for(const a of i.getEntries())t(a)}).observe({entryTypes:[e]})}static getInstance(){return void 0===VN&&(VN=new _i(RU)),VN}}function UN(){return PU}function NU(n,e){const t=n.length-e.length;if(t<0||t>1)throw Di.create("invalid String merger input");const r=[];for(let i=0;i<n.length;i++)r.push(n.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}class Ws{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=NU("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=NU("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===BN&&(BN=new Ws),BN}}var rp=(()=>(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"}(rp||(rp={})),rp))();const Wq=["firebase_","google_","ga_"],Gq=new RegExp("^[a-zA-Z]\\w*$");function Zq(){const n=_i.getInstance().navigator;return n?.serviceWorker?n.serviceWorker.controller?2:3:1}function OU(){switch(_i.getInstance().document.visibilityState){case"visible":return rp.VISIBLE;case"hidden":return rp.HIDDEN;default:return rp.UNKNOWN}}function Yq(){const e=_i.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function kU(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.appId;if(!t)throw Di.create("no app id");return t}const Go={loggingEnabled:!0};const o6="Could not fetch config, will use default configs";function FU(n){if(!n)return n;const e=Ws.getInstance(),t=n.entries||{};return e.loggingEnabled=void 0!==t.fpr_enabled?"true"===String(t.fpr_enabled):Go.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):Go.logSource&&(e.logSource=Go.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:Go.logEndPointUrl&&(e.logEndPointUrl=Go.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:Go.transportKey&&(e.transportKey=Go.transportKey),void 0!==t.fpr_vc_network_request_sampling_rate?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):void 0!==Go.networkRequestsSamplingRate&&(e.networkRequestsSamplingRate=Go.networkRequestsSamplingRate),void 0!==t.fpr_vc_trace_sampling_rate?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):void 0!==Go.tracesSamplingRate&&(e.tracesSamplingRate=Go.tracesSamplingRate),e.logTraceAfterSampling=LU(e.tracesSamplingRate),e.logNetworkAfterSampling=LU(e.networkRequestsSamplingRate),n}function LU(n){return Math.random()<=n}let jN,$N=1;function VU(n){return $N=2,jN=jN||function c6(n){return function d6(){const n=_i.getInstance().document;return new Promise(e=>{if(n&&"complete"!==n.readyState){const t=()=>{"complete"===n.readyState&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}().then(()=>function Hq(n){const e=n.getId();return e.then(t=>{PU=t}),e}(n.installations)).then(e=>function r6(n,e){const t=function i6(){const n=_i.getInstance().localStorage;if(!n)return;const e=n.getItem(MU);if(!e||!function u6(n){return Number(n)>Date.now()}(e))return;const t=n.getItem(AU);if(t)try{return JSON.parse(t)}catch{return}}();return t?(FU(t),Promise.resolve()):function a6(n,e){return function zq(n){const e=n.getToken();return e.then(t=>{}),e}(n.installations).then(t=>{const r=function Xq(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.projectId;if(!t)throw Di.create("no project id");return t}(n.app),i=function e6(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.apiKey;if(!t)throw Di.create("no api key");return t}(n.app),l=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,{method:"POST",headers:{Authorization:`FIREBASE_INSTALLATIONS_AUTH ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:kU(n.app),app_version:"0.6.4",sdk_version:"0.0.1"})});return fetch(l).then(f=>{if(f.ok)return f.json();throw Di.create("RC response not ok")})}).catch(()=>{za.info(o6)})}(n,e).then(FU).then(r=>function s6(n){const e=_i.getInstance().localStorage;!n||!e||(e.setItem(AU,JSON.stringify(n)),e.setItem(MU,String(Date.now()+60*Ws.getInstance().configTimeToLive*60*1e3)))}(r),()=>{})}(n,e)).then(()=>UU(),()=>UU())}(n),jN}function UU(){$N=3}let zN,LD=3,vd=[],$U=!1;function VD(n){setTimeout(()=>{if(0!==LD){if(!vd.length)return VD(1e4);!function g6(){const n=vd.splice(0,1e3),e=n.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}));(function m6(n,e){return function _6(n){const e=Ws.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(n)})}(n).then(t=>(t.ok||za.info("Call to Firebase backend failed."),t.json())).then(t=>{const r=Number(t.nextRequestWaitMillis);let i=1e4;isNaN(r)||(i=Math.max(r,i));const a=t.logResponseDetails;Array.isArray(a)&&a.length>0&&"RETRY_REQUEST_LATER"===a[0].responseAction&&(vd=[...e,...vd],za.info("Retry transport request later.")),LD=3,VD(i)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Ws.getInstance().logSource,log_event:e},n).catch(()=>{vd=[...n,...vd],LD--,za.info(`Tries left: ${LD}.`),VD(1e4)})}()}},n)}function jU(n,e){zN||(zN=function v6(n){return(...e)=>{!function y6(n){if(!n.eventTime||!n.message)throw Di.create("invalid cc log");vd=[...vd,n]}({message:n(...e),eventTime:Date.now()})}}(w6)),zN(n,e)}function UD(n){const e=Ws.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||!_i.getInstance().requiredApisAvailable()||n.isAuto&&OU()!==rp.VISIBLE||(function l6(){return 3===$N}()?WN(n):VU(n.performanceController).then(()=>WN(n),()=>WN(n)))}function WN(n){if(!UN())return;const e=Ws.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>jU(n,1),0)}function w6(n,e){return 0===e?function C6(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:HU(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}(n):function I6(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};0!==Object.keys(n.counters).length&&(e.counters=n.counters);const t=n.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);const r={application_info:HU(n.performanceController.app),trace_metric:e};return JSON.stringify(r)}(n)}function HU(n){return{google_app_id:kU(n),app_instance_id:UN(),web_app_info:{sdk_version:"0.6.4",page_url:_i.getInstance().getUrl(),service_worker_status:Zq(),visibility_state:OU(),effective_connection_type:Yq()},application_process_state:0}}const D6=["_fp","_fcp","_fid"];class Ed{constructor(e,t,r=!1,i){this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=_i.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=i||`${LN}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw Di.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw Di.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),UD(this)}record(e,t,r){if(e<=0)throw Di.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Di.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Math.floor(Number(r.metrics[i])));UD(this)}incrementMetric(e,t=1){this.putMetric(e,void 0===this.counters[e]?t:this.counters[e]+t)}putMetric(e,t){if(!function S6(n,e){return!(0===n.length||n.length>100)&&(e&&e.startsWith("_wt_")&&D6.indexOf(n)>-1||!n.startsWith("_"))}(e,this.name))throw Di.create("invalid custom metric name",{customMetricName:e});this.counters[e]=function A6(n){const e=Math.floor(n);return e<n&&za.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}(t??0)}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const r=function Qq(n){return!(0===n.length||n.length>40||Wq.some(t=>n.startsWith(t))||!n.match(Gq))}(e),i=function Jq(n){return 0!==n.length&&n.length<=100}(t);if(r&&i)this.customAttributes[e]=t;else{if(!r)throw Di.create("invalid attribute name",{attributeName:e});if(!i)throw Di.create("invalid attribute value",{attributeValue:t})}}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))}static createOobTrace(e,t,r,i){const a=_i.getInstance().getUrl();if(!a)return;const l=new Ed(e,"_wt_"+a,!0),f=Math.floor(1e3*_i.getInstance().getTimeOrigin());if(l.setStartTime(f),t&&t[0]&&(l.setDuration(Math.floor(1e3*t[0].duration)),l.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),l.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),l.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),r){const b=r.find(x=>"first-paint"===x.name);b&&b.startTime&&l.putMetric("_fp",Math.floor(1e3*b.startTime));const T=r.find(x=>"first-contentful-paint"===x.name);T&&T.startTime&&l.putMetric("_fcp",Math.floor(1e3*T.startTime)),i&&l.putMetric("_fid",Math.floor(1e3*i))}UD(l)}static createUserTimingTrace(e,t){UD(new Ed(e,t,!1,t))}}function zU(n,e){const t=e;if(!t||void 0===t.responseStart)return;const r=_i.getInstance().getTimeOrigin(),i=Math.floor(1e3*(t.startTime+r)),a=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,l=Math.floor(1e3*(t.responseEnd-t.startTime));!function E6(n){const e=Ws.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];t===r||t===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>jU(n,0),0)}({performanceController:n,url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:i,timeToResponseInitiatedUs:a,timeToResponseCompletedUs:l})}function WU(n){!UN()||(setTimeout(()=>function R6(n){const e=_i.getInstance(),t=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout(()=>{Ed.createOobTrace(n,t,r),i=void 0},5e3);e.onFirstInputDelay(a=>{i&&(clearTimeout(i),Ed.createOobTrace(n,t,r,a))})}else Ed.createOobTrace(n,t,r)}(n),0),setTimeout(()=>function x6(n){const e=_i.getInstance(),t=e.getEntriesByType("resource");for(const r of t)zU(n,r);e.setupObserver("resource",r=>zU(n,r))}(n),0),setTimeout(()=>function P6(n){const e=_i.getInstance(),t=e.getEntriesByType("measure");for(const r of t)GU(n,r);e.setupObserver("measure",r=>GU(n,r))}(n),0))}function GU(n,e){const t=e.name;t.substring(0,LN.length)!==LN&&Ed.createUserTimingTrace(n,t)}class N6{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(void 0!==e?.dataCollectionEnabled&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==e?.instrumentationEnabled&&(this.instrumentationEnabled=e.instrumentationEnabled),_i.getInstance().requiredApisAvailable()?(0,J.eu)().then(t=>{t&&(function p6(){$U||(VD(5500),$U=!0)}(),VU(this).then(()=>WU(this),()=>WU(this)),this.initialized=!0)}).catch(t=>{za.info(`Environment doesn't support IndexedDB: ${t}`)}):za.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){Ws.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return Ws.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){Ws.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return Ws.getInstance().dataCollectionEnabled}}function k6(n=(0,On.getApp)()){return n=(0,J.m9)(n),(0,On._getProvider)(n,"performance").getImmediate()}const F6=(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),r=n.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==t.name)throw Di.create("FB not default");if(typeof window>"u")throw Di.create("no window");!function jq(n){RU=n}(window);const i=new N6(t,r);return i._init(e),i};!function L6(){(0,On._registerComponent)(new Po.wA("performance",F6,"PUBLIC")),(0,On.registerVersion)(CU,FN),(0,On.registerVersion)(CU,FN,"esm2017")}();class GN{constructor(e){return e}}const qU="performance",qN=new d.OlP("angularfire2.performance-instances");function B6(n){return(e,t,r)=>{if(!Jo(t))return null;const i=e.runOutsideAngular(()=>n(r));return new GN(i)}}const $6={provide:class V6{constructor(){return(0,st.vb)(qU)}},deps:[[new d.FiY,qN]]},j6={provide:GN,useFactory:function U6(n,e,t){if(!Jo(t))return null;const r=(0,st.JM)(qU,n,e);return r&&new GN(r)},deps:[[new d.FiY,qN],bi,d.Lbi]};let H6=(()=>{class n{constructor(){(0,ei.KN)("angularfire",st.q4.full,"perf")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[j6,$6]}),n})();function z6(n,...e){return{ngModule:H6,providers:[{provide:qN,useFactory:B6(n),multi:!0,deps:[d.R0b,d.Lbi,d.zs3,st.HU,ms,...e]}]}}const W6=(0,st.u3)(k6,!0);var G6=O(4880);class KN{constructor(e){return e}}const KU="remote-config",ZN=new d.OlP("angularfire2.remote-config-instances");function Z6(n){return(e,t)=>{if(!st._J.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new KN(r)}}const Y6={provide:class q6{constructor(){return(0,st.vb)(KU)}},deps:[[new d.FiY,ZN]]},Q6={provide:KN,useFactory:function K6(n,e){if(!st._J.sync())return null;const t=(0,st.JM)(KU,n,e);return t&&new KN(t)},deps:[[new d.FiY,ZN],bi]};let J6=(()=>{class n{constructor(){(0,ei.KN)("angularfire",st.q4.full,"rc")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Q6,Y6,{provide:d.ip1,useValue:st._J.async,multi:!0}]}),n})();function X6(n,...e){return{ngModule:J6,providers:[{provide:ZN,useFactory:Z6(n),multi:!0,deps:[d.R0b,d.zs3,st.HU,ms,...e]}]}}const e4=(0,st.u3)(G6.sN,!0),ZU="firebasestorage.googleapis.com";class Mr extends J.ZR{constructor(e,t,r=0){super(YN(e),`Firebase Storage: ${t} (${YN(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return YN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var dr=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(dr||(dr={})),dr))();function YN(n){return"storage/"+n}function JN(n){return new Mr(dr.INVALID_ARGUMENT,n)}function e2(){return new Mr(dr.APP_DELETED,"The Firebase app was deleted.")}class ns{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ns.makeFromUrl(e,t)}catch{return new ns(e,"")}if(""===r.path)return r;throw function c4(n){return new Mr(dr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v($t){$t.path_=decodeURIComponent($t.path)}const T=t.replace(/[.]/g,"\\."),Dt=[{regex:f,indices:{bucket:1,path:3},postModify:function a($t){"/"===$t.path.charAt($t.path.length-1)&&($t.path_=$t.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===ZU?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let $t=0;$t<Dt.length;$t++){const cn=Dt[$t],En=cn.regex.exec(e);if(En){let Is=En[cn.indices.path];Is||(Is=""),r=new ns(En[cn.indices.bucket],Is),cn.postModify(r);break}}if(null==r)throw function l4(n){return new Mr(dr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class m4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function eO(n,e,t,r){if(r<e)throw JN(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw JN(`Invalid value for '${n}'. Expected ${t} or less.`)}var wd=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(wd||(wd={})),wd))();class C4{constructor(e,t,r,i,a,l,f,m,v,b,T,x=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=f,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=b,this.connectionFactory_=T,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,G)=>{this.resolve_=V,this.reject_=G,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function v4(n){return void 0!==n}(m)?a():a(m)}catch(m){l(m)}else if(null!==f){const m=function QN(){return new Mr(dr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();m.serverResponse=f.getErrorText(),l(this.errorCallback_?this.errorCallback_(f,m):m)}else l(i.canceled?this.appDelete_?e2():function JU(){return new Mr(dr.CANCELED,"User canceled the upload/download.")}():function QU(){return new Mr(dr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new $D(!1,null,!0)):this.backoffId_=function _4(n,e,t){let r=1,i=null,a=null,l=!1,f=0;function m(){return 2===f}let v=!1;function b(...Ie){v||(v=!0,e.apply(null,Ie))}function T(Ie){i=setTimeout(()=>{i=null,n(V,m())},Ie)}function x(){a&&clearTimeout(a)}function V(Ie,...It){if(v)return void x();if(Ie)return x(),void b.call(null,Ie,...It);if(m()||l)return x(),void b.call(null,Ie,...It);let Dt;r<64&&(r*=2),1===f?(f=2,Dt=0):Dt=1e3*(r+Math.random()),T(Dt)}let G=!1;function ue(Ie){G||(G=!0,x(),!v&&(null!==i?(Ie||(f=2),clearTimeout(i),T(0)):Ie||(f=1)))}return T(0),a=setTimeout(()=>{l=!0,ue(!0)},t),ue}((r,i)=>{if(i)return void r(!1,new $D(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const f=a.getErrorCode()===wd.NO_ERROR,m=a.getStatus();if(!f||function r2(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}(m,this.additionalRetryCodes_)&&this.retry){const b=a.getErrorCode()===wd.ABORT;return void r(!1,new $D(!1,null,b))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new $D(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function y4(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class $D{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class ip{constructor(e,t){this._service=e,this._location=t instanceof ns?t:ns.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ip(e,t)}get root(){const e=new ns(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function u2(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function F4(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ns(this._location.bucket,e);return new ip(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function g4(n){return new Mr(dr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function I2(n,e){const t=e?.storageBucket;return null==t?null:ns.makeFromBucketSpec(t,n)}class aO{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=ZU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ns.makeFromBucketSpec(i,this._host):I2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ns.makeFromBucketSpec(this._url,e):I2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){eO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){eO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ce.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ce.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ip(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new m4(e2());{const l=function S4(n,e,t,r,i,a,l=!0){const f=function n2(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),m=n.url+f,v=Object.assign({},n.headers);return function T4(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function I4(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function b4(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function D4(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new C4(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,Ce.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const b2="@firebase/storage",D2="storage";function wK(n=(0,On.getApp)(),e){n=(0,J.m9)(n);const r=(0,On._getProvider)(n,D2).getImmediate({identifier:e}),i=(0,J.P0)("storage");return i&&function CK(n,e,t,r={}){!function EK(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,J.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function IK(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new aO(t,r,i,e,On.SDK_VERSION)}!function bK(){(0,On._registerComponent)(new Po.wA(D2,IK,"PUBLIC").setMultipleInstances(!0)),(0,On.registerVersion)(b2,"0.11.2",""),(0,On.registerVersion)(b2,"0.11.2","esm2017")}();class uO{constructor(e){return e}}const S2="storage",lO=new d.OlP("angularfire2.storage-instances");function SK(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new uO(r)}}const AK={provide:class TK{constructor(){return(0,st.vb)(S2)}},deps:[[new d.FiY,lO]]},MK={provide:uO,useFactory:function DK(n,e){const t=(0,st.JM)(S2,n,e);return t&&new uO(t)},deps:[[new d.FiY,lO],bi]};let xK=(()=>{class n{constructor(){(0,ei.KN)("angularfire",st.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[MK,AK]}),n})();function RK(n,...e){return{ngModule:xK,providers:[{provide:lO,useFactory:SK(n),multi:!0,deps:[d.R0b,d.zs3,st.HU,ms,[new d.FiY,Cw],[new d.FiY,Zu],...e]}]}}const PK=(0,st.u3)(wK,!0);let NK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[UH]}),n.\u0275inj=d.cJS({providers:[gL,dP],imports:[w0,VH,pS,qi.hO.initializeApp(uP_firebase),gH,DA(()=>lI(uP_firebase)),wz(()=>XH()),ZH(()=>QH()),q3(()=>K3()),tq(()=>nq()),Sq(()=>Aq()),Fq(()=>Lq()),z6(()=>W6()),X6(()=>e4()),RK(()=>PK())]}),n})();(0,d.G48)(),E0().bootstrapModule(NK).catch(n=>console.error(n))},9751:(St,Oe,O)=>{O.d(Oe,{y:()=>le});var d=O(2961),U=O(727),k=O(8822),ee=O(9635),Ee=O(2416),ge=O(576),oe=O(2806);let le=(()=>{class K{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const _e=new K;return _e.source=this,_e.operator=ke,_e}subscribe(ke,_e,qe){const ye=function H(K){return K&&K instanceof d.Lv||function j(K){return K&&(0,ge.m)(K.next)&&(0,ge.m)(K.error)&&(0,ge.m)(K.complete)}(K)&&(0,U.Nn)(K)}(ke)?ke:new d.Hp(ke,_e,qe);return(0,oe.x)(()=>{const{operator:ie,source:ft}=this;ye.add(ie?ie.call(ye,ft):ft?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(ke){try{return this._subscribe(ke)}catch(_e){ke.error(_e)}}forEach(ke,_e){return new(_e=we(_e))((qe,ye)=>{const ie=new d.Hp({next:ft=>{try{ke(ft)}catch(mt){ye(mt),ie.unsubscribe()}},error:ye,complete:qe});this.subscribe(ie)})}_subscribe(ke){var _e;return null===(_e=this.source)||void 0===_e?void 0:_e.subscribe(ke)}[k.L](){return this}pipe(...ke){return(0,ee.U)(ke)(this)}toPromise(ke){return new(ke=we(ke))((_e,qe)=>{let ye;this.subscribe(ie=>ye=ie,ie=>qe(ie),()=>_e(ye))})}}return K.create=Fe=>new K(Fe),K})();function we(K){var Fe;return null!==(Fe=K??Ee.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(St,Oe,O)=>{O.d(Oe,{x:()=>oe});var d=O(9751),U=O(727);const ee=(0,O(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ee=O(8737),ge=O(2806);let oe=(()=>{class we extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const K=new le(this,this);return K.operator=H,K}_throwIfClosed(){if(this.closed)throw new ee}next(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(H)}})}error(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:K}=this;for(;K.length;)K.shift().error(H)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:K,isStopped:Fe,observers:ke}=this;return K||Fe?U.Lc:(this.currentObservers=null,ke.push(H),new U.w0(()=>{this.currentObservers=null,(0,Ee.P)(ke,H)}))}_checkFinalizedStatuses(H){const{hasError:K,thrownError:Fe,isStopped:ke}=this;K?H.error(Fe):ke&&H.complete()}asObservable(){const H=new d.y;return H.source=this,H}}return we.create=(j,H)=>new le(j,H),we})();class le extends oe{constructor(j,H){super(),this.destination=j,this.source=H}next(j){var H,K;null===(K=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===K||K.call(H,j)}error(j){var H,K;null===(K=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===K||K.call(H,j)}complete(){var j,H;null===(H=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===H||H.call(j)}_subscribe(j){var H,K;return null!==(K=null===(H=this.source)||void 0===H?void 0:H.subscribe(j))&&void 0!==K?K:U.Lc}}},2961:(St,Oe,O)=>{O.d(Oe,{Hp:()=>qe,Lv:()=>K});var d=O(576),U=O(727),k=O(2416),ee=O(7849);function Ee(){}const ge=we("C",void 0,void 0);function we(xe,be,De){return{kind:xe,value:be,error:De}}var j=O(3410),H=O(2806);class K extends U.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,U.Nn)(be)&&be.add(this)):this.destination=mt}static create(be,De,je){return new qe(be,De,je)}next(be){this.isStopped?ft(function le(xe){return we("N",xe,void 0)}(be),this):this._next(be)}error(be){this.isStopped?ft(function oe(xe){return we("E",void 0,xe)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?ft(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Fe=Function.prototype.bind;function ke(xe,be){return Fe.call(xe,be)}class _e{constructor(be){this.partialObserver=be}next(be){const{partialObserver:De}=this;if(De.next)try{De.next(be)}catch(je){ye(je)}}error(be){const{partialObserver:De}=this;if(De.error)try{De.error(be)}catch(je){ye(je)}else ye(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(De){ye(De)}}}class qe extends K{constructor(be,De,je){let We;if(super(),(0,d.m)(be)||!be)We={next:be??void 0,error:De??void 0,complete:je??void 0};else{let z;this&&k.v.useDeprecatedNextContext?(z=Object.create(be),z.unsubscribe=()=>this.unsubscribe(),We={next:be.next&&ke(be.next,z),error:be.error&&ke(be.error,z),complete:be.complete&&ke(be.complete,z)}):We=be}this.destination=new _e(We)}}function ye(xe){k.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(xe):(0,ee.h)(xe)}function ft(xe,be){const{onStoppedNotification:De}=k.v;De&&j.z.setTimeout(()=>De(xe,be))}const mt={closed:!0,next:Ee,error:function ie(xe){throw xe},complete:Ee}},727:(St,Oe,O)=>{O.d(Oe,{Lc:()=>ge,w0:()=>Ee,Nn:()=>oe});var d=O(576);const k=(0,O(3888).d)(we=>function(H){we(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((K,Fe)=>`${Fe+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ee=O(8737);class Ee{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const ke of H)ke.remove(this);else H.remove(this);const{initialTeardown:K}=this;if((0,d.m)(K))try{K()}catch(ke){j=ke instanceof k?ke.errors:[ke]}const{_finalizers:Fe}=this;if(Fe){this._finalizers=null;for(const ke of Fe)try{le(ke)}catch(_e){j=j??[],_e instanceof k?j=[...j,..._e.errors]:j.push(_e)}}if(j)throw new k(j)}}add(j){var H;if(j&&j!==this)if(this.closed)le(j);else{if(j instanceof Ee){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(j)}}_hasParent(j){const{_parentage:H}=this;return H===j||Array.isArray(H)&&H.includes(j)}_addParent(j){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(j),H):H?[H,j]:j}_removeParent(j){const{_parentage:H}=this;H===j?this._parentage=null:Array.isArray(H)&&(0,ee.P)(H,j)}remove(j){const{_finalizers:H}=this;H&&(0,ee.P)(H,j),j instanceof Ee&&j._removeParent(this)}}Ee.EMPTY=(()=>{const we=new Ee;return we.closed=!0,we})();const ge=Ee.EMPTY;function oe(we){return we instanceof Ee||we&&"closed"in we&&(0,d.m)(we.remove)&&(0,d.m)(we.add)&&(0,d.m)(we.unsubscribe)}function le(we){(0,d.m)(we)?we():we.unsubscribe()}},2416:(St,Oe,O)=>{O.d(Oe,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(St,Oe,O)=>{O.d(Oe,{E:()=>U});const U=new(O(9751).y)(Ee=>Ee.complete())},8996:(St,Oe,O)=>{O.d(Oe,{D:()=>be});var d=O(8421),U=O(5363),k=O(9468),ge=O(9751),le=O(2202),we=O(576),j=O(9672);function K(De,je){if(!De)throw new Error("Iterable cannot be null");return new ge.y(We=>{(0,j.f)(We,je,()=>{const z=De[Symbol.asyncIterator]();(0,j.f)(We,je,()=>{z.next().then(fe=>{fe.done?We.complete():We.next(fe.value)})},0,!0)})})}var Fe=O(3670),ke=O(8239),_e=O(1144),qe=O(6495),ye=O(2206),ie=O(4532),ft=O(3260);function be(De,je){return je?function xe(De,je){if(null!=De){if((0,Fe.c)(De))return function ee(De,je){return(0,d.Xf)(De).pipe((0,k.R)(je),(0,U.Q)(je))}(De,je);if((0,_e.z)(De))return function oe(De,je){return new ge.y(We=>{let z=0;return je.schedule(function(){z===De.length?We.complete():(We.next(De[z++]),We.closed||this.schedule())})})}(De,je);if((0,ke.t)(De))return function Ee(De,je){return(0,d.Xf)(De).pipe((0,k.R)(je),(0,U.Q)(je))}(De,je);if((0,ye.D)(De))return K(De,je);if((0,qe.T)(De))return function H(De,je){return new ge.y(We=>{let z;return(0,j.f)(We,je,()=>{z=De[le.h](),(0,j.f)(We,je,()=>{let fe,Ge;try{({value:fe,done:Ge}=z.next())}catch(Qe){return void We.error(Qe)}Ge?We.complete():We.next(fe)},0,!0)}),()=>(0,we.m)(z?.return)&&z.return()})}(De,je);if((0,ft.L)(De))return function mt(De,je){return K((0,ft.Q)(De),je)}(De,je)}throw(0,ie.z)(De)}(De,je):(0,d.Xf)(De)}},8421:(St,Oe,O)=>{O.d(Oe,{Xf:()=>Fe});var d=O(655),U=O(1144),k=O(8239),ee=O(9751),Ee=O(3670),ge=O(2206),oe=O(4532),le=O(6495),we=O(3260),j=O(576),H=O(7849),K=O(8822);function Fe(xe){if(xe instanceof ee.y)return xe;if(null!=xe){if((0,Ee.c)(xe))return function ke(xe){return new ee.y(be=>{const De=xe[K.L]();if((0,j.m)(De.subscribe))return De.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,U.z)(xe))return function _e(xe){return new ee.y(be=>{for(let De=0;De<xe.length&&!be.closed;De++)be.next(xe[De]);be.complete()})}(xe);if((0,k.t)(xe))return function qe(xe){return new ee.y(be=>{xe.then(De=>{be.closed||(be.next(De),be.complete())},De=>be.error(De)).then(null,H.h)})}(xe);if((0,ge.D)(xe))return ie(xe);if((0,le.T)(xe))return function ye(xe){return new ee.y(be=>{for(const De of xe)if(be.next(De),be.closed)return;be.complete()})}(xe);if((0,we.L)(xe))return function ft(xe){return ie((0,we.Q)(xe))}(xe)}throw(0,oe.z)(xe)}function ie(xe){return new ee.y(be=>{(function mt(xe,be){var De,je,We,z;return(0,d.mG)(this,void 0,void 0,function*(){try{for(De=(0,d.KL)(xe);!(je=yield De.next()).done;)if(be.next(je.value),be.closed)return}catch(fe){We={error:fe}}finally{try{je&&!je.done&&(z=De.return)&&(yield z.call(De))}finally{if(We)throw We.error}}be.complete()})})(xe,be).catch(De=>be.error(De))})}},6451:(St,Oe,O)=>{O.d(Oe,{T:()=>ge});var d=O(8189),U=O(8421),k=O(515),ee=O(7669),Ee=O(8996);function ge(...oe){const le=(0,ee.yG)(oe),we=(0,ee._6)(oe,1/0),j=oe;return j.length?1===j.length?(0,U.Xf)(j[0]):(0,d.J)(we)((0,Ee.D)(j,le)):k.E}},5403:(St,Oe,O)=>{O.d(Oe,{Q:()=>k,x:()=>U});var d=O(2961);function U(ee,Ee,ge,oe,le){return new k(ee,Ee,ge,oe,le)}class k extends d.Lv{constructor(Ee,ge,oe,le,we,j){super(Ee),this.onFinalize=we,this.shouldUnsubscribe=j,this._next=ge?function(H){try{ge(H)}catch(K){Ee.error(K)}}:super._next,this._error=le?function(H){try{le(H)}catch(K){Ee.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=oe?function(){try{oe()}catch(H){Ee.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ee;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(Ee=this.onFinalize)||void 0===Ee||Ee.call(this))}}}},4004:(St,Oe,O)=>{O.d(Oe,{U:()=>k});var d=O(4482),U=O(5403);function k(ee,Ee){return(0,d.e)((ge,oe)=>{let le=0;ge.subscribe((0,U.x)(oe,we=>{oe.next(ee.call(Ee,we,le++))}))})}},8189:(St,Oe,O)=>{O.d(Oe,{J:()=>k});var d=O(5577),U=O(4671);function k(ee=1/0){return(0,d.z)(U.y,ee)}},5577:(St,Oe,O)=>{O.d(Oe,{z:()=>le});var d=O(4004),U=O(8421),k=O(4482),ee=O(9672),Ee=O(5403),oe=O(576);function le(we,j,H=1/0){return(0,oe.m)(j)?le((K,Fe)=>(0,d.U)((ke,_e)=>j(K,ke,Fe,_e))((0,U.Xf)(we(K,Fe))),H):("number"==typeof j&&(H=j),(0,k.e)((K,Fe)=>function ge(we,j,H,K,Fe,ke,_e,qe){const ye=[];let ie=0,ft=0,mt=!1;const xe=()=>{mt&&!ye.length&&!ie&&j.complete()},be=je=>ie<K?De(je):ye.push(je),De=je=>{ke&&j.next(je),ie++;let We=!1;(0,U.Xf)(H(je,ft++)).subscribe((0,Ee.x)(j,z=>{Fe?.(z),ke?be(z):j.next(z)},()=>{We=!0},void 0,()=>{if(We)try{for(ie--;ye.length&&ie<K;){const z=ye.shift();_e?(0,ee.f)(j,_e,()=>De(z)):De(z)}xe()}catch(z){j.error(z)}}))};return we.subscribe((0,Ee.x)(j,be,()=>{mt=!0,xe()})),()=>{qe?.()}}(K,Fe,we,H)))}},5363:(St,Oe,O)=>{O.d(Oe,{Q:()=>ee});var d=O(9672),U=O(4482),k=O(5403);function ee(Ee,ge=0){return(0,U.e)((oe,le)=>{oe.subscribe((0,k.x)(le,we=>(0,d.f)(le,Ee,()=>le.next(we),ge),()=>(0,d.f)(le,Ee,()=>le.complete(),ge),we=>(0,d.f)(le,Ee,()=>le.error(we),ge)))})}},3099:(St,Oe,O)=>{O.d(Oe,{B:()=>Ee});var d=O(8421),U=O(7579),k=O(2961),ee=O(4482);function Ee(oe={}){const{connector:le=(()=>new U.x),resetOnError:we=!0,resetOnComplete:j=!0,resetOnRefCountZero:H=!0}=oe;return K=>{let Fe,ke,_e,qe=0,ye=!1,ie=!1;const ft=()=>{ke?.unsubscribe(),ke=void 0},mt=()=>{ft(),Fe=_e=void 0,ye=ie=!1},xe=()=>{const be=Fe;mt(),be?.unsubscribe()};return(0,ee.e)((be,De)=>{qe++,!ie&&!ye&&ft();const je=_e=_e??le();De.add(()=>{qe--,0===qe&&!ie&&!ye&&(ke=ge(xe,H))}),je.subscribe(De),!Fe&&qe>0&&(Fe=new k.Hp({next:We=>je.next(We),error:We=>{ie=!0,ft(),ke=ge(mt,we,We),je.error(We)},complete:()=>{ye=!0,ft(),ke=ge(mt,j),je.complete()}}),(0,d.Xf)(be).subscribe(Fe))})(K)}}function ge(oe,le,...we){if(!0===le)return void oe();if(!1===le)return;const j=new k.Hp({next:()=>{j.unsubscribe(),oe()}});return le(...we).subscribe(j)}},9468:(St,Oe,O)=>{O.d(Oe,{R:()=>U});var d=O(4482);function U(k,ee=0){return(0,d.e)((Ee,ge)=>{ge.add(k.schedule(()=>Ee.subscribe(ge),ee))})}},8505:(St,Oe,O)=>{O.d(Oe,{b:()=>Ee});var d=O(576),U=O(4482),k=O(5403),ee=O(4671);function Ee(ge,oe,le){const we=(0,d.m)(ge)||oe||le?{next:ge,error:oe,complete:le}:ge;return we?(0,U.e)((j,H)=>{var K;null===(K=we.subscribe)||void 0===K||K.call(we);let Fe=!0;j.subscribe((0,k.x)(H,ke=>{var _e;null===(_e=we.next)||void 0===_e||_e.call(we,ke),H.next(ke)},()=>{var ke;Fe=!1,null===(ke=we.complete)||void 0===ke||ke.call(we),H.complete()},ke=>{var _e;Fe=!1,null===(_e=we.error)||void 0===_e||_e.call(we,ke),H.error(ke)},()=>{var ke,_e;Fe&&(null===(ke=we.unsubscribe)||void 0===ke||ke.call(we)),null===(_e=we.finalize)||void 0===_e||_e.call(we)}))}):ee.y}},4408:(St,Oe,O)=>{O.d(Oe,{o:()=>Ee});var d=O(727);class U extends d.w0{constructor(oe,le){super()}schedule(oe,le=0){return this}}const k={setInterval(ge,oe,...le){const{delegate:we}=k;return we?.setInterval?we.setInterval(ge,oe,...le):setInterval(ge,oe,...le)},clearInterval(ge){const{delegate:oe}=k;return(oe?.clearInterval||clearInterval)(ge)},delegate:void 0};var ee=O(8737);class Ee extends U{constructor(oe,le){super(oe,le),this.scheduler=oe,this.work=le,this.pending=!1}schedule(oe,le=0){var we;if(this.closed)return this;this.state=oe;const j=this.id,H=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(H,j,le)),this.pending=!0,this.delay=le,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(H,this.id,le),this}requestAsyncId(oe,le,we=0){return k.setInterval(oe.flush.bind(oe,this),we)}recycleAsyncId(oe,le,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return le;null!=le&&k.clearInterval(le)}execute(oe,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(oe,le);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,le){let j,we=!1;try{this.work(oe)}catch(H){we=!0,j=H||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:oe,scheduler:le}=this,{actions:we}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ee.P)(we,this),null!=oe&&(this.id=this.recycleAsyncId(le,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(St,Oe,O)=>{O.d(Oe,{v:()=>k});var d=O(6063);class U{constructor(Ee,ge=U.now){this.schedulerActionCtor=Ee,this.now=ge}schedule(Ee,ge=0,oe){return new this.schedulerActionCtor(this,Ee).schedule(oe,ge)}}U.now=d.l.now;class k extends U{constructor(Ee,ge=U.now){super(Ee,ge),this.actions=[],this._active=!1}flush(Ee){const{actions:ge}=this;if(this._active)return void ge.push(Ee);let oe;this._active=!0;do{if(oe=Ee.execute(Ee.state,Ee.delay))break}while(Ee=ge.shift());if(this._active=!1,oe){for(;Ee=ge.shift();)Ee.unsubscribe();throw oe}}}},4986:(St,Oe,O)=>{O.d(Oe,{z:()=>k});var d=O(4408);const k=new(O(7565).v)(d.o)},6063:(St,Oe,O)=>{O.d(Oe,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(St,Oe,O)=>{O.d(Oe,{z:()=>d});const d={setTimeout(U,k,...ee){const{delegate:Ee}=d;return Ee?.setTimeout?Ee.setTimeout(U,k,...ee):setTimeout(U,k,...ee)},clearTimeout(U){const{delegate:k}=d;return(k?.clearTimeout||clearTimeout)(U)},delegate:void 0}},2202:(St,Oe,O)=>{O.d(Oe,{h:()=>U});const U=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(St,Oe,O)=>{O.d(Oe,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(St,Oe,O)=>{O.d(Oe,{_6:()=>ge,jO:()=>ee,yG:()=>Ee});var d=O(576);function k(oe){return oe[oe.length-1]}function ee(oe){return(0,d.m)(k(oe))?oe.pop():void 0}function Ee(oe){return function U(oe){return oe&&(0,d.m)(oe.schedule)}(k(oe))?oe.pop():void 0}function ge(oe,le){return"number"==typeof k(oe)?oe.pop():le}},8737:(St,Oe,O)=>{function d(U,k){if(U){const ee=U.indexOf(k);0<=ee&&U.splice(ee,1)}}O.d(Oe,{P:()=>d})},3888:(St,Oe,O)=>{function d(U){const ee=U(Ee=>{Error.call(Ee),Ee.stack=(new Error).stack});return ee.prototype=Object.create(Error.prototype),ee.prototype.constructor=ee,ee}O.d(Oe,{d:()=>d})},2806:(St,Oe,O)=>{O.d(Oe,{O:()=>ee,x:()=>k});var d=O(2416);let U=null;function k(Ee){if(d.v.useDeprecatedSynchronousErrorHandling){const ge=!U;if(ge&&(U={errorThrown:!1,error:null}),Ee(),ge){const{errorThrown:oe,error:le}=U;if(U=null,oe)throw le}}else Ee()}function ee(Ee){d.v.useDeprecatedSynchronousErrorHandling&&U&&(U.errorThrown=!0,U.error=Ee)}},9672:(St,Oe,O)=>{function d(U,k,ee,Ee=0,ge=!1){const oe=k.schedule(function(){ee(),ge?U.add(this.schedule(null,Ee)):this.unsubscribe()},Ee);if(U.add(oe),!ge)return oe}O.d(Oe,{f:()=>d})},4671:(St,Oe,O)=>{function d(U){return U}O.d(Oe,{y:()=>d})},1144:(St,Oe,O)=>{O.d(Oe,{z:()=>d});const d=U=>U&&"number"==typeof U.length&&"function"!=typeof U},2206:(St,Oe,O)=>{O.d(Oe,{D:()=>U});var d=O(576);function U(k){return Symbol.asyncIterator&&(0,d.m)(k?.[Symbol.asyncIterator])}},576:(St,Oe,O)=>{function d(U){return"function"==typeof U}O.d(Oe,{m:()=>d})},3670:(St,Oe,O)=>{O.d(Oe,{c:()=>k});var d=O(8822),U=O(576);function k(ee){return(0,U.m)(ee[d.L])}},6495:(St,Oe,O)=>{O.d(Oe,{T:()=>k});var d=O(2202),U=O(576);function k(ee){return(0,U.m)(ee?.[d.h])}},8239:(St,Oe,O)=>{O.d(Oe,{t:()=>U});var d=O(576);function U(k){return(0,d.m)(k?.then)}},3260:(St,Oe,O)=>{O.d(Oe,{L:()=>ee,Q:()=>k});var d=O(655),U=O(576);function k(Ee){return(0,d.FC)(this,arguments,function*(){const oe=Ee.getReader();try{for(;;){const{value:le,done:we}=yield(0,d.qq)(oe.read());if(we)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(le)}}finally{oe.releaseLock()}})}function ee(Ee){return(0,U.m)(Ee?.getReader)}},4482:(St,Oe,O)=>{O.d(Oe,{A:()=>U,e:()=>k});var d=O(576);function U(ee){return(0,d.m)(ee?.lift)}function k(ee){return Ee=>{if(U(Ee))return Ee.lift(function(ge){try{return ee(ge,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(St,Oe,O)=>{O.d(Oe,{U:()=>k,z:()=>U});var d=O(4671);function U(...ee){return k(ee)}function k(ee){return 0===ee.length?d.y:1===ee.length?ee[0]:function(ge){return ee.reduce((oe,le)=>le(oe),ge)}}},7849:(St,Oe,O)=>{O.d(Oe,{h:()=>k});var d=O(2416),U=O(3410);function k(ee){U.z.setTimeout(()=>{const{onUnhandledError:Ee}=d.v;if(!Ee)throw ee;Ee(ee)})}},4532:(St,Oe,O)=>{function d(U){return new TypeError(`You provided ${null!==U&&"object"==typeof U?"an invalid object":`'${U}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Oe,{z:()=>d})},655:(St,Oe,O)=>{function ee(se,pe){var me={};for(var Ne in se)Object.prototype.hasOwnProperty.call(se,Ne)&&pe.indexOf(Ne)<0&&(me[Ne]=se[Ne]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var Me=0;for(Ne=Object.getOwnPropertySymbols(se);Me<Ne.length;Me++)pe.indexOf(Ne[Me])<0&&Object.prototype.propertyIsEnumerable.call(se,Ne[Me])&&(me[Ne[Me]]=se[Ne[Me]])}return me}function K(se,pe,me,Ne){return new(me||(me=Promise))(function(Te,et){function Et(kt){try{tt(Ne.next(kt))}catch(Le){et(Le)}}function Ot(kt){try{tt(Ne.throw(kt))}catch(Le){et(Le)}}function tt(kt){kt.done?Te(kt.value):function Me(Te){return Te instanceof me?Te:new me(function(et){et(Te)})}(kt.value).then(Et,Ot)}tt((Ne=Ne.apply(se,pe||[])).next())})}function xe(se){return this instanceof xe?(this.v=se,this):new xe(se)}function be(se,pe,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,Ne=me.apply(se,pe||[]),Te=[];return Me={},et("next"),et("throw"),et("return"),Me[Symbol.asyncIterator]=function(){return this},Me;function et(Ke){Ne[Ke]&&(Me[Ke]=function(_t){return new Promise(function(jt,en){Te.push([Ke,_t,jt,en])>1||Et(Ke,_t)})})}function Et(Ke,_t){try{!function Ot(Ke){Ke.value instanceof xe?Promise.resolve(Ke.value.v).then(tt,kt):Le(Te[0][2],Ke)}(Ne[Ke](_t))}catch(jt){Le(Te[0][3],jt)}}function tt(Ke){Et("next",Ke)}function kt(Ke){Et("throw",Ke)}function Le(Ke,_t){Ke(_t),Te.shift(),Te.length&&Et(Te[0][0],Te[0][1])}}function je(se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,pe=se[Symbol.asyncIterator];return pe?pe.call(se):(se=function qe(se){var pe="function"==typeof Symbol&&Symbol.iterator,me=pe&&se[pe],Ne=0;if(me)return me.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&Ne>=se.length&&(se=void 0),{value:se&&se[Ne++],done:!se}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(se),me={},Ne("next"),Ne("throw"),Ne("return"),me[Symbol.asyncIterator]=function(){return this},me);function Ne(Te){me[Te]=se[Te]&&function(et){return new Promise(function(Et,Ot){!function Me(Te,et,Et,Ot){Promise.resolve(Ot).then(function(tt){Te({value:tt,done:Et})},et)}(Et,Ot,(et=se[Te](et)).done,et.value)})}}}O.d(Oe,{FC:()=>be,KL:()=>je,_T:()=>ee,mG:()=>K,qq:()=>xe})},4650:(St,Oe,O)=>{O.d(Oe,{$8M:()=>Mp,$Z:()=>xy,AFp:()=>IE,AaK:()=>le,AsE:()=>Nc,CHM:()=>Ml,CRH:()=>Eb,CZH:()=>_f,CqO:()=>aI,D6c:()=>tx,EJc:()=>qr,EpF:()=>sI,F4k:()=>oI,FYo:()=>nC,FiY:()=>yo,G48:()=>qb,GfV:()=>sC,Gpc:()=>H,JOm:()=>ls,KtG:()=>Rd,LFG:()=>or,LSH:()=>cs,Lbi:()=>$M,Lck:()=>_M,MMx:()=>Lr,NdJ:()=>uv,OlP:()=>Un,Oqu:()=>yv,PXZ:()=>xE,Q6J:()=>av,QGY:()=>Bh,QP$:()=>X,Qsj:()=>TS,R0b:()=>Zi,RDi:()=>nS,Rgc:()=>Ju,SBq:()=>br,Sil:()=>ze,Suo:()=>dE,TTD:()=>Za,TgZ:()=>Pc,VKq:()=>eE,X6Q:()=>ul,XFs:()=>Z,Xpm:()=>Ae,Xts:()=>py,Y36:()=>Pi,YKP:()=>Gv,YNc:()=>Uh,Yjl:()=>N,Yz7:()=>tt,Z0I:()=>_t,ZZ4:()=>ur,_Bn:()=>Wv,_UZ:()=>qi,_Vd:()=>mc,_c5:()=>ex,_uU:()=>bI,aQg:()=>jn,c2e:()=>mm,cJS:()=>Le,cg1:()=>NI,dDg:()=>ln,dqk:()=>Kt,eFA:()=>qc,ekj:()=>pv,eoX:()=>sl,f3M:()=>_u,g9A:()=>gm,h0i:()=>Pa,hGG:()=>Br,hij:()=>Fg,iGM:()=>Vc,ifc:()=>pt,ip1:()=>ki,jDz:()=>im,kL8:()=>XA,lG2:()=>B,lqb:()=>Wi,lri:()=>jb,n5z:()=>Vl,oAB:()=>on,oxw:()=>lI,q4F:()=>Ey,qLn:()=>Ps,qOj:()=>tv,qZA:()=>st,rWj:()=>ME,sBO:()=>Yi,sIi:()=>Ia,s_b:()=>rf,soG:()=>yf,tb:()=>Ub,tp0:()=>vu,uIk:()=>iv,vHH:()=>_e,vpe:()=>Oi,wAp:()=>Qt,xp6:()=>hC,z2F:()=>al,zSh:()=>Wr,zs3:()=>Os});var d=O(7579),U=O(727),k=O(9751),ee=O(6451),Ee=O(3099);function ge(s){for(let o in s)if(s[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function oe(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function le(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(le).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function we(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const j=ge({__forward_ref__:ge});function H(s){return s.__forward_ref__=H,s.toString=function(){return le(this())},s}function K(s){return Fe(s)?s():s}function Fe(s){return"function"==typeof s&&s.hasOwnProperty(j)&&s.__forward_ref__===H}class _e extends Error{constructor(o,u){super(function qe(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function ye(s){return"string"==typeof s?s:null==s?"":String(s)}function be(s,o){throw new _e(-201,!1)}function Me(s,o){null==s&&function Te(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function tt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Le(s){return{providers:s.providers||[],imports:s.imports||[]}}function Ke(s){return jt(s,Dn)||jt(s,zn)}function _t(s){return null!==Ke(s)}function jt(s,o){return s.hasOwnProperty(o)?s[o]:null}function xn(s){return s&&(s.hasOwnProperty(Yn)||s.hasOwnProperty(ut))?s[Yn]:null}const Dn=ge({\u0275prov:ge}),Yn=ge({\u0275inj:ge}),zn=ge({ngInjectableDef:ge}),ut=ge({ngInjectorDef:ge});var Z=(()=>((Z=Z||{})[Z.Default=0]="Default",Z[Z.Host=1]="Host",Z[Z.Self=2]="Self",Z[Z.SkipSelf=4]="SkipSelf",Z[Z.Optional=8]="Optional",Z))();let Re;function yt(s){const o=Re;return Re=s,o}function Jt(s,o,u){const c=Ke(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&Z.Optional?null:void 0!==o?o:void be(le(s))}function tn(s){return{toString:s}.toString()}var Xt=(()=>((Xt=Xt||{})[Xt.OnPush=0]="OnPush",Xt[Xt.Default=1]="Default",Xt))(),pt=(()=>{return(s=pt||(pt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",pt;var s})();const Kt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Sn={},Ft=[],Nn=ge({\u0275cmp:ge}),Pt=ge({\u0275dir:ge}),rr=ge({\u0275pipe:ge}),rn=ge({\u0275mod:ge}),qn=ge({\u0275fac:ge}),yn=ge({__NG_ELEMENT_ID__:ge});let ot=0;function Ae(s){return tn(()=>{const u=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Xt.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Ft,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||pt.Emulated,id:"c"+ot++,styles:s.styles||Ft,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,y=s.features;return h.inputs=$(s.inputs,c),h.outputs=$(s.outputs),y&&y.forEach(C=>C(h)),h.directiveDefs=g?()=>("function"==typeof g?g():g).map(Rt).filter(sn):null,h.pipeDefs=g?()=>("function"==typeof g?g():g).map(L).filter(sn):null,h})}function Rt(s){return S(s)||A(s)}function sn(s){return null!==s}function on(s){return tn(()=>({type:s.type,bootstrap:s.bootstrap||Ft,declarations:s.declarations||Ft,imports:s.imports||Ft,exports:s.exports||Ft,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function $(s,o){if(null==s)return Sn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),u[h]=c,o&&(o[h]=g)}return u}const B=Ae;function N(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function S(s){return s[Nn]||null}function A(s){return s[Pt]||null}function L(s){return s[rr]||null}function X(s){const o=S(s)||A(s)||L(s);return null!==o&&o.standalone}function de(s,o){const u=s[rn]||null;if(!u&&!0===o)throw new Error(`Type ${le(s)} does not have '\u0275mod' property.`);return u}function Hr(s){return Array.isArray(s)&&"object"==typeof s[1]}function yi(s){return Array.isArray(s)&&!0===s[1]}function is(s){return 0!=(8&s.flags)}function Ka(s){return 2==(2&s.flags)}function Zo(s){return 1==(1&s.flags)}function Bi(s){return null!==s.template}function Tl(s){return 0!=(256&s[2])}function Or(s,o){return s.hasOwnProperty(qn)?s[qn]:null}class d_{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Za(){return gp}function gp(s){return s.type.prototype.ngOnChanges&&(s.setInput=Id),Ya}function Ya(){const s=h_(this),o=s?.current;if(o){const u=s.previous;if(u===Sn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Id(s,o,u,c){const h=h_(s)||function f_(s,o){return s[Sl]=o}(s,{previous:Sn,current:null}),g=h.current||(h.current={}),y=h.previous,C=this.declaredInputs[u],I=y[C];g[C]=new d_(I&&I.currentValue,o,y===Sn),s[c]=o}Za.ngInherit=!0;const Sl="__ngSimpleChanges__";function h_(s){return s[Sl]||null}function Jn(s){for(;Array.isArray(s);)s=s[0];return s}function Ja(s,o){return Jn(o[s])}function Ei(s,o){return Jn(o[s.index])}function Ks(s,o){return s.data[o]}function xr(s,o){const u=o[s];return Hr(u)?u:u[0]}function uo(s){return 64==(64&s[2])}function Cr(s,o){return null==o?null:s[o]}function Xo(s){s[18]=0}function Sd(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const Yt={lFrame:v_(null),bindingsEnabled:!0};function Al(){return Yt.bindingsEnabled}function Ve(){return Yt.lFrame.lView}function In(){return Yt.lFrame.tView}function Ml(s){return Yt.lFrame.contextLView=s,s[8]}function Rd(s){return Yt.lFrame.contextLView=null,s}function _r(){let s=tu();for(;null!==s&&64===s.type;)s=s.parent;return s}function tu(){return Yt.lFrame.currentTNode}function $i(s,o){const u=Yt.lFrame;u.currentTNode=s,u.isParent=o}function nu(){return Yt.lFrame.isParent}function co(){return Yt.lFrame.bindingIndex++}function oi(s){const o=Yt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function h0(s,o){const u=Yt.lFrame;u.bindingIndex=u.bindingRootIndex=s,kd(o)}function kd(s){Yt.lFrame.currentDirectiveIndex=s}function iu(){return Yt.lFrame.currentQueryIndex}function Ts(s){Yt.lFrame.currentQueryIndex=s}function f0(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Fd(s,o,u){if(u&Z.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||u&Z.Host||(h=f0(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;o=h,s=g}const c=Yt.lFrame=su();return c.currentTNode=o,c.lView=s,!0}function Rl(s){const o=su(),u=s[1];Yt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function su(){const s=Yt.lFrame,o=null===s?null:s.child;return null===o?v_(s):o}function v_(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function E_(){const s=Yt.lFrame;return Yt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Pl=E_;function Nl(){const s=E_();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ai(){return Yt.lFrame.selectedIndex}function Ds(s){Yt.lFrame.selectedIndex=s}function ir(){const s=Yt.lFrame;return Ks(s.tView,s.selectedIndex)}function ou(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:I,ngAfterViewChecked:D,ngOnDestroy:R}=g;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),C&&((s.contentHooks||(s.contentHooks=[])).push(u,C),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,C)),I&&(s.viewHooks||(s.viewHooks=[])).push(-u,I),D&&((s.viewHooks||(s.viewHooks=[])).push(u,D),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,D)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function Ol(s,o,u){C_(s,o,3,u)}function ea(s,o,u,c){(3&s[2])===u&&C_(s,o,u,c)}function Cp(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function C_(s,o,u,c){const g=c??-1,y=o.length-1;let C=0;for(let I=void 0!==c?65535&s[18]:0;I<y;I++)if("number"==typeof o[I+1]){if(C=o[I],null!=c&&C>=c)break}else o[I]<0&&(s[18]+=65536),(C<g||-1==g)&&(I_(s,u,o,I),s[18]=(4294901760&s[18])+I+2),I++}function I_(s,o,u,c){const h=u[c]<0,g=u[c+1],C=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(C)}finally{}}}else try{g.call(C)}finally{}}class kl{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Vd(s,o,u){let c=0;for(;c<u.length;){const h=u[c];if("number"==typeof h){if(0!==h)break;c++;const g=u[c++],y=u[c++],C=u[c++];s.setAttribute(o,y,C,g)}else{const g=h,y=u[++c];Tp(g)?s.setProperty(o,g,y):s.setAttribute(o,g,y),c++}}return c}function uu(s){return 3===s||4===s||6===s}function Tp(s){return 64===s.charCodeAt(0)}function lu(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||D_(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function D_(s,o,u,c,h){let g=0,y=s.length;if(-1===o)y=-1;else for(;g<s.length;){const C=s[g++];if("number"==typeof C){if(C===o){y=-1;break}if(C>o){y=g-1;break}}}for(;g<s.length;){const C=s[g];if("number"==typeof C)break;if(C===u){if(null===c)return void(null!==h&&(s[g+1]=h));if(c===s[g+1])return void(s[g+2]=h)}g++,null!==c&&g++,null!==h&&g++}-1!==y&&(s.splice(y,0,o),g=y+1),s.splice(g++,0,u),null!==c&&s.splice(g++,0,c),null!==h&&s.splice(g++,0,h)}function S_(s){return-1!==s}function cu(s){return 32767&s}function ji(s,o){let u=function y0(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Mi=!0;function ho(s){const o=Mi;return Mi=s,o}let Dp=0;const xi={};function Zs(s,o){const u=Bd(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,du(c.data,s),du(o,null),du(c.blueprint,null));const h=fo(s,o),g=s.injectorIndex;if(S_(h)){const y=cu(h),C=ji(h,o),I=C[1].data;for(let D=0;D<8;D++)o[g+D]=C[y+D]|I[y+D]}return o[g+8]=h,g}function du(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Bd(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function fo(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){if(c=P_(h),null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function hu(s,o,u){!function Sp(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(yn)&&(c=u[yn]),null==c&&(c=u[yn]=Dp++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function $d(s,o,u){if(u&Z.Optional||void 0!==s)return s;be()}function M_(s,o,u,c){if(u&Z.Optional&&void 0===c&&(c=null),0==(u&(Z.Self|Z.Host))){const h=s[9],g=yt(void 0);try{return h?h.get(o,c,u&Z.Optional):Jt(o,c,u&Z.Optional)}finally{yt(g)}}return $d(c,0,u)}function jd(s,o,u,c=Z.Default,h){if(null!==s){if(1024&o[2]){const y=function pu(s,o,u,c,h){let g=s,y=o;for(;null!==g&&null!==y&&1024&y[2]&&!(256&y[2]);){const C=fu(g,y,u,c|Z.Self,xi);if(C!==xi)return C;let I=g.parent;if(!I){const D=y[21];if(D){const R=D.get(u,xi,c);if(R!==xi)return R}I=P_(y),y=y[15]}g=I}return h}(s,o,u,c,xi);if(y!==xi)return y}const g=fu(s,o,u,c,xi);if(g!==xi)return g}return M_(o,u,c,h)}function fu(s,o,u,c,h){const g=function x_(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(yn)?s[yn]:void 0;return"number"==typeof o?o>=0?255&o:R_:o}(u);if("function"==typeof g){if(!Fd(o,s,c))return c&Z.Host?$d(h,0,c):M_(o,u,c,h);try{const y=g(c);if(null!=y||c&Z.Optional)return y;be()}finally{Pl()}}else if("number"==typeof g){let y=null,C=Bd(s,o),I=-1,D=c&Z.Host?o[16][6]:null;for((-1===C||c&Z.SkipSelf)&&(I=-1===C?fo(s,o):o[C+8],-1!==I&&Ap(c,!1)?(y=o[1],C=cu(I),o=ji(I,o)):C=-1);-1!==C;){const R=o[1];if(ra(g,C,R.data)){const F=v0(C,o,u,y,c,D);if(F!==xi)return F}I=o[C+8],-1!==I&&Ap(c,o[1].data[C+8]===D)&&ra(g,C,o)?(y=R,C=cu(I),o=ji(I,o)):C=-1}}return h}function v0(s,o,u,c,h,g){const y=o[1],C=y.data[s+8],R=po(C,y,u,null==c?Ka(C)&&Mi:c!=y&&0!=(3&C.type),h&Z.Host&&g===C);return null!==R?na(o,y,R,C):xi}function po(s,o,u,c,h){const g=s.providerIndexes,y=o.data,C=1048575&g,I=s.directiveStart,R=g>>20,q=h?C+R:s.directiveEnd;for(let ne=c?C:C+R;ne<q;ne++){const Pe=y[ne];if(ne<I&&u===Pe||ne>=I&&Pe.type===u)return ne}if(h){const ne=y[I];if(ne&&Bi(ne)&&ne.type===u)return I}return null}function na(s,o,u,c){let h=s[u];const g=o.data;if(function au(s){return s instanceof kl}(h)){const y=h;y.resolving&&function ft(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new _e(-200,`Circular dependency in DI detected for ${s}${u}`)}(function ie(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ye(s)}(g[u]));const C=ho(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?yt(y.injectImpl):null;Fd(s,c,Z.Default);try{h=s[u]=y.factory(void 0,g,s,c),o.firstCreatePass&&u>=c.directiveStart&&function w_(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(c){const y=gp(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],o)}finally{null!==I&&yt(I),ho(C),y.resolving=!1,Pl()}}return h}function ra(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Ap(s,o){return!(s&Z.Self||s&Z.Host&&o)}class Wn{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return jd(this._tNode,this._lView,o,c,u)}}function R_(){return new Wn(_r(),Ve())}function Vl(s){return tn(()=>{const o=s.prototype.constructor,u=o[qn]||Hd(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const g=h[qn]||Hd(h);if(g&&g!==u)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function Hd(s){return Fe(s)?()=>{const o=Hd(K(s));return o&&o()}:Or(s)}function P_(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Mp(s){return function Ll(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const g=u[h];if(uu(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(g===o)return u[h+1];h+=2}}}return null}(_r(),s)}const gu="__parameters__";function ss(s,o,u){return tn(()=>{const c=function go(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...g){if(this instanceof h)return c.apply(this,g),this;const y=new h(...g);return C.annotation=y,C;function C(I,D,R){const F=I.hasOwnProperty(gu)?I[gu]:Object.defineProperty(I,gu,{value:[]})[gu];for(;F.length<=R;)F.push(null);return(F[R]=F[R]||[]).push(y),I}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Un{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=tt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Yr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Yr(c,o)):o!==s&&o.push(c)}return o}function os(s,o){s.forEach(u=>Array.isArray(u)?os(u,o):o(u))}function qd(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Kd(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function wi(s,o,u){let c=mu(s,o);return c>=0?s[1|c]=u:(c=~c,function T0(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function jl(s,o){const u=mu(s,o);if(u>=0)return s[1|u]}function mu(s,o){return function U_(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const g=c+(h-c>>1),y=s[g<<u];if(o===y)return g<<u;y>o?h=g:c=g+1}return~(h<<u)}(s,o,1)}const mo={},Qd="__NG_DI_FLAG__",Hl="ngTempTokenPath",Jd=/\n/gm,_o="__source";let sr;function zt(s){const o=sr;return sr=s,o}function B_(s,o=Z.Default){if(void 0===sr)throw new _e(-203,!1);return null===sr?Jt(s,void 0,o):sr.get(s,o&Z.Optional?null:void 0,o)}function or(s,o=Z.Default){return(function at(){return Re}()||B_)(K(s),o)}function _u(s,o=Z.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),or(s,o)}function yu(s){const o=[];for(let u=0;u<s.length;u++){const c=K(s[u]);if(Array.isArray(c)){if(0===c.length)throw new _e(900,!1);let h,g=Z.Default;for(let y=0;y<c.length;y++){const C=c[y],I=Hi(C);"number"==typeof I?-1===I?h=C.token:g|=I:h=C}o.push(or(h,g))}else o.push(or(c))}return o}function aa(s,o){return s[Qd]=o,s.prototype[Qd]=o,s}function Hi(s){return s[Qd]}const yo=aa(ss("Optional"),8),vu=aa(ss("SkipSelf"),4);var ls=(()=>((ls=ls||{})[ls.Important=1]="Important",ls[ls.DashCase=2]="DashCase",ls))();const oh=new Map;let M0=0;const ah="__ngContext__";function Pr(s,o){Hr(o)?(s[ah]=o[20],function x0(s){oh.set(s[20],s)}(o)):s[ah]=o}function rc(s,o){return undefined(s,o)}function Nu(s){const o=s[3];return yi(o)?o[3]:o}function E(s){return _(s[13])}function p(s){return _(s[4])}function _(s){for(;null!==s&&!yi(s);)s=s[4];return s}function M(s,o,u,c,h){if(null!=c){let g,y=!1;yi(c)?g=c:Hr(c)&&(y=!0,c=c[0]);const C=Jn(c);0===s&&null!==u?null==h?ha(o,u,C):Js(o,u,C,h||null,!0):1===s&&null!==u?Js(o,u,C,h||null,!0):2===s?function jp(s,o,u){const c=hh(s,o);c&&function Bp(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,C,y):3===s&&o.destroyNode(C),null!=g&&function JD(s,o,u,c,h){const g=u[7];g!==Jn(u)&&M(o,s,c,g,h);for(let C=10;C<u.length;C++){const I=u[C];fh(I[1],I,s,o,c,g)}}(o,s,g,u,h)}}function Je(s,o,u){return s.createElement(o,u)}function oc(s,o){const u=s[9],c=u.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,Sd(h,-1)),u.splice(c,1)}function ac(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&oc(h,c),o>0&&(s[u-1][4]=c[4]);const g=Kd(s,10+o);!function ht(s,o){fh(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=g[19];null!==y&&y.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Ou(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&fh(s,o,u,3,null,null),function ci(s){let o=s[13];if(!o)return uc(s[1],s);for(;o;){let u=null;if(Hr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Hr(o)&&uc(o[1],o),o=o[3];null===o&&(o=s),Hr(o)&&uc(o[1],o),u=o&&o[4]}o=u}}(o)}}function uc(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function cc(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof kl)){const g=u[c+1];if(Array.isArray(g))for(let y=0;y<g.length;y+=2){const C=h[g[y]],I=g[y+1];try{I.call(C)}finally{}}else try{g.call(h)}finally{}}}}(s,o),function lc(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const y=u[g+1],C="function"==typeof y?y(o):Jn(o[y]),I=c[h=u[g+2]],D=u[g+3];"boolean"==typeof D?C.removeEventListener(u[g],I,D):D>=0?c[h=D]():c[h=-D].unsubscribe(),g+=2}else{const y=c[h=u[g+1]];u[g].call(y)}if(null!==c){for(let g=h+1;g<c.length;g++)(0,c[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&yi(o[3])){u!==o[3]&&oc(u,o);const c=o[19];null!==c&&c.detachView(s)}!function R0(s){oh.delete(s[20])}(o)}}function ch(s,o,u){return function dh(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===pt.None||h===pt.Emulated)return null}return Ei(c,u)}(s,o.parent,u)}function Js(s,o,u,c,h){s.insertBefore(o,u,c,h)}function ha(s,o,u){s.appendChild(o,u)}function fa(s,o,u,c,h){null!==c?Js(s,o,u,c,h):ha(s,o,u)}function hh(s,o){return s.parentNode(o)}let gh,ZD=function ey(s,o,u){return 40&s.type?Ei(s,u):null};function ty(s,o,u,c){const h=ch(s,c,o),g=o[11],C=function k0(s,o,u){return ZD(s,o,u)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let I=0;I<u.length;I++)fa(g,h,u[I],C,!1);else fa(g,h,u,C,!1)}function $p(s,o){if(null!==o){const u=o.type;if(3&u)return Ei(o,s);if(4&u)return ry(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return $p(s,c);{const h=s[o.index];return yi(h)?ry(-1,h):Jn(h)}}if(32&u)return rc(o,s)()||Jn(s[o.index]);{const c=ny(s,o);return null!==c?Array.isArray(c)?c[0]:$p(Nu(s[16]),c):$p(s,o.next)}}return null}function ny(s,o){return null!==o?s[16][6].projection[o.projection]:null}function ry(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return $p(c,h)}return o[7]}function dc(s,o,u,c,h,g,y){for(;null!=u;){const C=c[u.index],I=u.type;if(y&&0===o&&(C&&Pr(Jn(C),c),u.flags|=4),64!=(64&u.flags))if(8&I)dc(s,o,u.child,c,h,g,!1),M(o,s,h,C,g);else if(32&I){const D=rc(u,c);let R;for(;R=D();)M(o,s,h,R,g);M(o,s,h,C,g)}else 16&I?iy(s,o,c,u,h,g):M(o,s,h,C,g);u=y?u.projectionNext:u.next}}function fh(s,o,u,c,h,g){dc(u,c,s.firstChild,o,h,g,!1)}function iy(s,o,u,c,h,g){const y=u[16],I=y[6].projection[c.projection];if(Array.isArray(I))for(let D=0;D<I.length;D++)M(o,s,h,I[D],g);else dc(s,o,I,y[3],h,g,!0)}function sy(s,o,u){s.setAttribute(o,"style",u)}function oy(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function nS(s){gh=s}class U0{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Io(s){return s instanceof U0?s.changingThisBreaksApplicationSecurity:s}const lS=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Fr=(()=>((Fr=Fr||{})[Fr.NONE=0]="NONE",Fr[Fr.HTML=1]="HTML",Fr[Fr.STYLE=2]="STYLE",Fr[Fr.SCRIPT=3]="SCRIPT",Fr[Fr.URL=4]="URL",Fr[Fr.RESOURCE_URL=5]="RESOURCE_URL",Fr))();function cs(s){const o=function bo(){const s=Ve();return s&&s[12]}();return o?o.sanitize(Fr.URL,s)||"":function _h(s,o){const u=function fO(s){return s instanceof U0&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?Io(s):function cy(s){return(s=String(s)).match(lS)?s:"unsafe:"+s}(ye(s))}const py=new Un("ENVIRONMENT_INITIALIZER"),Kp=new Un("INJECTOR",-1),gy=new Un("INJECTOR_DEF_TYPES");class Y0{get(o,u=mo){if(u===mo){const c=new Error(`NullInjectorError: No provider for ${le(o)}!`);throw c.name="NullInjectorError",c}return u}}function my(...s){return{\u0275providers:pc(0,s)}}function pc(s,...o){const u=[],c=new Set;let h;return os(o,g=>{const y=g;Zp(y,u,[],c)&&(h||(h=[]),h.push(y))}),void 0!==h&&ga(h,u),u}function ga(s,o){for(let u=0;u<s.length;u++){const{providers:h}=s[u];os(h,g=>{o.push(g)})}}function Zp(s,o,u,c){if(!(s=K(s)))return!1;let h=null,g=xn(s);const y=!g&&S(s);if(g||y){if(y&&!y.standalone)return!1;h=s}else{const I=s.ngModule;if(g=xn(I),!g)return!1;h=I}const C=c.has(h);if(y){if(C)return!1;if(c.add(h),y.dependencies){const I="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const D of I)Zp(D,o,u,c)}}else{if(!g)return!1;{if(null!=g.imports&&!C){let D;c.add(h);try{os(g.imports,R=>{Zp(R,o,u,c)&&(D||(D=[]),D.push(R))})}finally{}void 0!==D&&ga(D,o)}if(!C){const D=Or(h)||(()=>new h);o.push({provide:h,useFactory:D,deps:Ft},{provide:gy,useValue:h,multi:!0},{provide:py,useValue:()=>or(h),multi:!0})}const I=g.providers;null==I||C||os(I,R=>{o.push(R)})}}return h!==s&&void 0!==s.providers}const _y=ge({provide:String,useValue:ge});function Yp(s){return null!==s&&"object"==typeof s&&_y in s}function Rs(s){return"function"==typeof s}const Wr=new Un("Set Injector scope."),ku={},Q0={};let yy;function hs(){return void 0===yy&&(yy=new Y0),yy}class Wi{}class Jr extends Wi{constructor(o,u,c,h){super(),this.parent=u,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Lu(o,y=>this.processProvider(y)),this.records.set(Kp,Fu(void 0,this)),h.has("environment")&&this.records.set(Wi,Fu(void 0,this));const g=this.records.get(Wr);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(gy.multi,Ft,Z.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=zt(this),c=yt(void 0);try{return o()}finally{zt(u),yt(c)}}get(o,u=mo,c=Z.Default){this.assertNotDestroyed();const h=zt(this),g=yt(void 0);try{if(!(c&Z.SkipSelf)){let C=this.records.get(o);if(void 0===C){const I=function vy(s){return"function"==typeof s||"object"==typeof s&&s instanceof Un}(o)&&Ke(o);C=I&&this.injectableDefInScope(I)?Fu(Xs(o),ku):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(c&Z.Self?hs():this.parent).get(o,u=c&Z.Optional&&u===mo?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[Hl]=y[Hl]||[]).unshift(le(o)),h)throw y;return function as(s,o,u,c){const h=s[Hl];throw o[_o]&&h.unshift(o[_o]),s.message=function $_(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=le(o);if(Array.isArray(o))h=o.map(le).join(" -> ");else if("object"==typeof o){let g=[];for(let y in o)if(o.hasOwnProperty(y)){let C=o[y];g.push(y+":"+("string"==typeof C?JSON.stringify(C):le(C)))}h=`{${g.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(Jd,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[Hl]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{yt(g),zt(h)}}resolveInjectorInitializers(){const o=zt(this),u=yt(void 0);try{const c=this.get(py.multi,Ft,Z.Self);for(const h of c)h()}finally{zt(o),yt(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(le(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(o){let u=Rs(o=K(o))?o:K(o&&o.provide);const c=function vh(s){return Yp(s)?Fu(void 0,s.useValue):Fu(Qp(s),ku)}(o);if(Rs(o)||!0!==o.multi)this.records.get(u);else{let h=this.records.get(u);h||(h=Fu(void 0,ku,!0),h.factory=()=>yu(h.multi),this.records.set(u,h)),u=o,h.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===ku&&(u.value=Q0,u.value=u.factory()),"object"==typeof u.value&&u.value&&function CS(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=K(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Xs(s){const o=Ke(s),u=null!==o?o.factory:Or(s);if(null!==u)return u;if(s instanceof Un)throw new _e(204,!1);if(s instanceof Function)return function ES(s){const o=s.length;if(o>0)throw function $l(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new _e(204,!1);const u=function en(s){const o=s&&(s[Dn]||s[zn]);if(o){const u=function qt(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new _e(204,!1)}function Qp(s,o,u){let c;if(Rs(s)){const h=K(s);return Or(h)||Xs(h)}if(Yp(s))c=()=>K(s.useValue);else if(function gc(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...yu(s.deps||[]));else if(function Ir(s){return!(!s||!s.useExisting)}(s))c=()=>or(K(s.useExisting));else{const h=K(s&&(s.useClass||s.provide));if(!function wS(s){return!!s.deps}(s))return Or(h)||Xs(h);c=()=>new h(...yu(s.deps))}return c}function Fu(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function vn(s){return!!s.\u0275providers}function Lu(s,o){for(const u of s)Array.isArray(u)?Lu(u,o):vn(u)?Lu(u.\u0275providers,o):o(u)}class Vu{}class X0{resolveComponentFactory(o){throw function bS(s){const o=Error(`No component factory found for ${le(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let mc=(()=>{class s{}return s.NULL=new X0,s})();function eC(){return Eh(_r(),Ve())}function Eh(s,o){return new br(Ei(s,o))}let br=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=eC,s})();function ma(s){return s instanceof br?s.nativeElement:s}class nC{}let TS=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function rC(){const s=Ve(),u=xr(_r().index,s);return(Hr(u)?u:s)[11]}(),s})(),iC=(()=>{class s{}return s.\u0275prov=tt({token:s,providedIn:"root",factory:()=>null}),s})();class sC{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Ey=new sC("14.3.0"),wy={};function _c(s){return s.ngOriginalError}class Ps{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&_c(o);for(;u&&_c(u);)u=_c(u);return u||null}}function fs(s){return s instanceof Function?s():s}function Ty(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===c||s.charCodeAt(h+g)<=32)return h}u=h+1}}const lC="ng-template";function MS(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==Ty(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function cC(s){return 4===s.type&&s.value!==lC}function eg(s,o,u){return o===(4!==s.type||u?s.value:lC)}function xS(s,o,u){let c=4;const h=s.attrs||[],g=function Dy(s){for(let o=0;o<s.length;o++)if(uu(s[o]))return o;return s.length}(h);let y=!1;for(let C=0;C<o.length;C++){const I=o[C];if("number"!=typeof I){if(!y)if(4&c){if(c=2|1&c,""!==I&&!eg(s,I,u)||""===I&&1===o.length){if(Ns(c))return!1;y=!0}}else{const D=8&c?I:o[++C];if(8&c&&null!==s.attrs){if(!MS(s.attrs,D,u)){if(Ns(c))return!1;y=!0}continue}const F=RS(8&c?"class":I,h,cC(s),u);if(-1===F){if(Ns(c))return!1;y=!0;continue}if(""!==D){let q;q=F>g?"":h[F+1].toLowerCase();const ne=8&c?q:null;if(ne&&-1!==Ty(ne,D,0)||2&c&&D!==q){if(Ns(c))return!1;y=!0}}}}else{if(!y&&!Ns(c)&&!Ns(I))return!1;if(y&&Ns(I))continue;y=!1,c=I|1&c}}return Ns(c)||y}function Ns(s){return 0==(1&s)}function RS(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let g=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)g=!0;else{if(1===y||2===y){let C=o[++h];for(;"string"==typeof C;)C=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=g?1:2}return-1}return function tg(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function dC(s,o,u=!1){for(let c=0;c<o.length;c++)if(xS(s,o[c],u))return!0;return!1}function _a(s,o){return s?":not("+o.trim()+")":o}function Sy(s){let o=s[0],u=1,c=2,h="",g=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const C=s[++u];h+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!Ns(y)&&(o+=_a(g,h),h=""),c=y,g=g||!Ns(c);u++}return""!==h&&(o+=_a(g,h)),o}const hn={};function hC(s){vc(In(),Ve(),ai()+s,!1)}function vc(s,o,u,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&Ol(o,g,u)}else{const g=s.preOrderHooks;null!==g&&ea(o,g,0,u)}Ds(u)}function gC(s,o=null,u=null,c){const h=ng(s,o,u,c);return h.resolveInjectorInitializers(),h}function ng(s,o=null,u=null,c,h=new Set){const g=[u||Ft,my(s)];return c=c||("object"==typeof s?void 0:le(s)),new Jr(g,o||hs(),c||null,h)}let Os=(()=>{class s{static create(u,c){if(Array.isArray(u))return gC({name:""},c,u,"");{const h=u.name??"";return gC({name:h},u.parent,u.providers,h)}}}return s.THROW_IF_NOT_FOUND=mo,s.NULL=new Y0,s.\u0275prov=tt({token:s,providedIn:"any",factory:()=>or(Kp)}),s.__NG_ELEMENT_ID__=-1,s})();function Pi(s,o=Z.Default){const u=Ve();return null===u?or(s,o):jd(_r(),u,K(s),o)}function xy(){throw new Error("invalid")}function ju(s,o){return s<<17|o<<2}function ps(s){return s>>17&32767}function Dh(s){return 2|s}function Fs(s){return(131068&s)>>2}function Ry(s,o){return-131069&s|o<<2}function Py(s){return 1|s}function xC(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],g=u[c+1];if(-1!==g){const y=s.data[g];Ts(h),y.contentQueries(2,o[g],g)}}}function Tc(s,o,u,c,h,g,y,C,I,D,R){const F=o.blueprint.slice();return F[0]=h,F[2]=76|c,(null!==R||s&&1024&s[2])&&(F[2]|=1024),Xo(F),F[3]=F[15]=s,F[8]=u,F[10]=y||s&&s[10],F[11]=C||s&&s[11],F[12]=I||s&&s[12]||null,F[9]=D||s&&s[9]||null,F[6]=g,F[20]=function Q_(){return M0++}(),F[21]=R,F[16]=2==o.type?s[16]:F,F}function Do(s,o,u,c,h){let g=s.data[o];if(null===g)g=function Ca(s,o,u,c,h){const g=tu(),y=nu(),I=s.data[o]=function Gy(s,o,u,c,h,g){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?g:g&&g.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=I),null!==g&&(y?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(s,o,u,c,h),function d0(){return Yt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=u,g.value=c,g.attrs=h;const y=function lo(){const s=Yt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===y?-1:y.injectorIndex}return $i(g,!0),g}function Dc(s,o,u,c){if(0===u)return-1;const h=o.length;for(let g=0;g<u;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function By(s,o,u){Rl(o);try{const c=s.viewQuery;null!==c&&Yy(1,c,u);const h=s.template;null!==h&&RC(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&xC(s,o),s.staticViewQueries&&Yy(2,s.viewQuery,u);const g=s.components;null!==g&&function rA(s,o){for(let u=0;u<o.length;u++)WC(s,o[u])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Nl()}}function fg(s,o,u,c){const h=o[2];if(128!=(128&h)){Rl(o);try{Xo(o),function Nd(s){return Yt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&RC(s,o,u,2,c);const y=3==(3&h);if(y){const D=s.preOrderCheckHooks;null!==D&&Ol(o,D,null)}else{const D=s.preOrderHooks;null!==D&&ea(o,D,0,null),Cp(o,0)}if(function HC(s){for(let o=E(s);null!==o;o=p(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],g=h[3];0==(512&h[2])&&Sd(g,1),h[2]|=512}}}(o),function hA(s){for(let o=E(s);null!==o;o=p(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];uo(c)&&fg(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&xC(s,o),y){const D=s.contentCheckHooks;null!==D&&Ol(o,D)}else{const D=s.contentHooks;null!==D&&ea(o,D,1),Cp(o,1)}!function nA(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)Ds(~h);else{const g=h,y=u[++c],C=u[++c];h0(y,g),C(2,o[g])}}}finally{Ds(-1)}}(s,o);const C=s.components;null!==C&&function MO(s,o){for(let u=0;u<o.length;u++)zC(s,o[u])}(o,C);const I=s.viewQuery;if(null!==I&&Yy(2,I,c),y){const D=s.viewCheckHooks;null!==D&&Ol(o,D)}else{const D=s.viewHooks;null!==D&&ea(o,D,2),Cp(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Sd(o[3],-1))}finally{Nl()}}}function RC(s,o,u,c,h){const g=ai(),y=2&c;try{Ds(-1),y&&o.length>22&&vc(s,o,22,!1),u(c,h)}finally{Ds(g)}}function $y(s,o,u){!Al()||(function Ph(s,o,u,c){const h=u.directiveStart,g=u.directiveEnd;s.firstCreatePass||Zs(u,o),Pr(c,o);const y=u.initialInputs;for(let C=h;C<g;C++){const I=s.data[C],D=Bi(I);D&&lA(o,u,I);const R=na(o,s,C,u);Pr(R,o),null!==y&&cA(0,C-h,R,I,0,y),D&&(xr(u.index,o)[8]=R)}}(s,o,u,Ei(u,o)),128==(128&u.flags)&&function UC(s,o,u){const c=u.directiveStart,h=u.directiveEnd,g=u.index,y=function xl(){return Yt.lFrame.currentDirectiveIndex}();try{Ds(g);for(let C=c;C<h;C++){const I=s.data[C],D=o[C];kd(C),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&BC(I,D)}}finally{Ds(-1),kd(y)}}(s,o,u))}function jy(s,o,u=Ei){const c=o.localNames;if(null!==c){let h=o.index+1;for(let g=0;g<c.length;g+=2){const y=c[g+1],C=-1===y?u(o,s):s[y];s[h++]=C}}}function NC(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Hy(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Hy(s,o,u,c,h,g,y,C,I,D){const R=22+c,F=R+h,q=function OC(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:hn);return u}(R,F),ne="function"==typeof D?D():D;return q[1]={type:s,blueprint:q,template:u,queries:null,viewQuery:C,declTNode:o,data:q.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:ne,incompleteFirstPass:!1}}function Wy(s,o,u,c){const h=Qy(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&yg(s).push(c,h.length-1))}function xh(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function kC(s,o){const c=o.directiveEnd,h=s.data,g=o.attrs,y=[];let C=null,I=null;for(let D=o.directiveStart;D<c;D++){const R=h[D],F=R.inputs,q=null===g||cC(o)?null:dA(F,g);y.push(q),C=xh(F,D,C),I=xh(R.outputs,D,I)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=16),C.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=C,o.outputs=I}function FC(s,o){const u=xr(o,s);16&u[2]||(u[2]|=32)}function Sc(s,o,u,c){let h=!1;if(Al()){const g=function oA(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let g=0;g<c.length;g++){const y=c[g];dC(u,y.selectors,!1)&&(h||(h=[]),hu(Zs(u,o),s,y.type),Bi(y)?($C(s,u),h.unshift(y)):h.push(y))}return h}(s,o,u),y=null===c?null:{"":-1};if(null!==g){h=!0,Nh(u,s.data.length,g.length);for(let R=0;R<g.length;R++){const F=g[R];F.providersResolver&&F.providersResolver(F)}let C=!1,I=!1,D=Dc(s,o,g.length,null);for(let R=0;R<g.length;R++){const F=g[R];u.mergedAttrs=lu(u.mergedAttrs,F.hostAttrs),jC(s,u,o,D,F),uA(D,F,y),null!==F.contentQueries&&(u.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(u.flags|=128);const q=F.type.prototype;!C&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),C=!0),!I&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),D++}kC(s,u)}y&&function aA(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=u[o[h+1]];if(null==g)throw new _e(-301,!1);c.push(o[h],g)}}}(u,c,y)}return u.mergedAttrs=lu(u.mergedAttrs,u.attrs),h}function Rh(s,o,u,c,h,g){const y=g.hostBindings;if(y){let C=s.hostBindingOpCodes;null===C&&(C=s.hostBindingOpCodes=[]);const I=~o.index;(function VC(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(C)!=I&&C.push(I),C.push(c,h,y)}}function BC(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function $C(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function uA(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Bi(o)&&(u[""]=s)}}function Nh(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function jC(s,o,u,c,h){s.data[c]=h;const g=h.factory||(h.factory=Or(h.type)),y=new kl(g,Bi(h),Pi);s.blueprint[c]=y,u[c]=y,Rh(s,o,0,c,Dc(s,u,h.hostVars,hn),h)}function lA(s,o,u){const c=Ei(o,s),h=NC(u),g=s[10],y=mg(s,Tc(s,h,null,u.onPush?32:16,c,o,g,g.createRenderer(c,u),null,null,null));s[o.index]=y}function eo(s,o,u,c,h,g){const y=Ei(s,o);!function qy(s,o,u,c,h,g,y){if(null==g)s.removeAttribute(o,h,u);else{const C=null==y?ye(g):y(g,c||"",h);s.setAttribute(o,h,C,u)}}(o[11],y,g,s.value,u,c,h)}function cA(s,o,u,c,h,g){const y=g[o];if(null!==y){const C=c.setInput;for(let I=0;I<y.length;){const D=y[I++],R=y[I++],F=y[I++];null!==C?c.setInput(u,F,D,R):u[R]=F}}}function dA(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function Ky(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function zC(s,o){const u=xr(o,s);if(uo(u)){const c=u[1];48&u[2]?fg(c,u,c.template,u[8]):u[5]>0&&gg(u)}}function gg(s){for(let c=E(s);null!==c;c=p(c))for(let h=10;h<c.length;h++){const g=c[h];if(uo(g))if(512&g[2]){const y=g[1];fg(y,g,y.template,g[8])}else g[5]>0&&gg(g)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=xr(u[c],s);uo(h)&&h[5]>0&&gg(h)}}function WC(s,o){const u=xr(o,s),c=u[1];(function GC(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),By(c,u,u[8])}function mg(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Zy(s){for(;s;){s[2]|=32;const o=Nu(s);if(Tl(s)&&!o)return s;s=o}return null}function _g(s,o,u,c=!0){const h=o[10];h.begin&&h.begin();try{fg(s,o,s.template,u)}catch(y){throw c&&Xy(o,y),y}finally{h.end&&h.end()}}function Yy(s,o,u){Ts(0),o(s,u)}function Qy(s){return s[7]||(s[7]=[])}function yg(s){return s.cleanup||(s.cleanup=[])}function Xy(s,o){const u=s[9],c=u?u.get(Ps,null):null;c&&c.handleError(o)}function qC(s,o,u,c,h){for(let g=0;g<u.length;){const y=u[g++],C=u[g++],I=o[y],D=s.data[y];null!==D.setInput?D.setInput(I,h,c,C):I[C]=h}}function So(s,o,u){const c=Ja(o,s);!function Q(s,o,u){s.setValue(o,u)}(s[11],c,u)}function vg(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,g=0;if(null!==o)for(let y=0;y<o.length;y++){const C=o[y];"number"==typeof C?g=C:1==g?h=we(h,C):2==g&&(c=we(c,C+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}function Eg(s,o,u,c,h=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&c.push(Jn(g)),yi(g))for(let C=10;C<g.length;C++){const I=g[C],D=I[1].firstChild;null!==D&&Eg(I[1],I,D,c)}const y=u.type;if(8&y)Eg(s,o,u.child,c);else if(32&y){const C=rc(u,o);let I;for(;I=C();)c.push(I)}else if(16&y){const C=ny(o,u);if(Array.isArray(C))c.push(...C);else{const I=Nu(o[16]);Eg(I[1],I,C,c,!0)}}u=h?u.projectionNext:u.next}return c}class Oh{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Eg(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(yi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(ac(o,c),Kd(u,c))}this._attachedToViewContainer=!1}Ou(this._lView[1],this._lView)}onDestroy(o){Wy(this._lView[1],this._lView,null,o)}markForCheck(){Zy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){_g(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dn(s,o){fh(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=o}}class wg extends Oh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;_g(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Cg extends mc{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=S(o);return new kh(u,this.ngModule)}}function Ig(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class fA{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){const h=this.injector.get(o,wy,c);return h!==wy||u===wy?h:this.parentInjector.get(o,u,c)}}class kh extends Vu{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function wO(s){return s.map(Sy).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Ig(this.componentDef.inputs)}get outputs(){return Ig(this.componentDef.outputs)}create(o,u,c,h){let g=(h=h||this.ngModule)instanceof Wi?h:h?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const y=g?new fA(o,g):o,C=y.get(nC,null);if(null===C)throw new _e(407,!1);const I=y.get(iC,null),D=C.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",F=c?function zy(s,o,u){return s.selectRootElement(o,u===pt.ShadowDom)}(D,c,this.componentDef.encapsulation):Je(D,R,function ev(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),q=this.componentDef.onPush?288:272,ne=Hy(0,null,null,1,0,null,null,null,null,null),Pe=Tc(null,ne,null,q,null,null,C,D,I,y,null);let Ye,ct;Rl(Pe);try{const dt=function gA(s,o,u,c,h,g){const y=u[1];u[22]=s;const I=Do(y,22,2,"#host",null),D=I.mergedAttrs=o.hostAttrs;null!==D&&(vg(I,D,!0),null!==s&&(Vd(h,s,D),null!==I.classes&&oy(h,s,I.classes),null!==I.styles&&sy(h,s,I.styles)));const R=c.createRenderer(s,o),F=Tc(u,NC(o),null,o.onPush?32:16,u[22],I,c,R,g||null,null,null);return y.firstCreatePass&&(hu(Zs(I,u),y,o.type),$C(y,I),Nh(I,u.length,1)),mg(u,F),u[22]=F}(F,this.componentDef,Pe,C,D);if(F)if(c)Vd(D,F,["ng-version",Ey.full]);else{const{attrs:Gt,classes:Se}=function OS(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++c]):8===h&&u.push(g);else{if(!Ns(h))break;h=g}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Gt&&Vd(D,F,Gt),Se&&Se.length>0&&oy(D,F,Se.join(" "))}if(ct=Ks(ne,22),void 0!==u){const Gt=ct.projection=[];for(let Se=0;Se<this.ngContentSelectors.length;Se++){const Wt=u[Se];Gt.push(null!=Wt?Array.from(Wt):null)}}Ye=function mA(s,o,u,c){const h=u[1],g=function LC(s,o,u){const c=_r();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),jC(s,c,o,Dc(s,o,1,null),u),kC(s,c));const h=na(o,s,c.directiveStart,c);Pr(h,o);const g=Ei(c,o);return g&&Pr(g,o),h}(h,u,o);if(s[8]=u[8]=g,null!==c)for(const C of c)C(g,o);if(o.contentQueries){const C=_r();o.contentQueries(1,g,C.directiveStart)}const y=_r();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Ds(y.index),Rh(u[1],y,0,y.directiveStart,y.directiveEnd,o),BC(o,g)),g}(dt,this.componentDef,Pe,[KC]),By(ne,Pe,null)}finally{Nl()}return new pA(this.componentType,Ye,Eh(ct,Pe),Pe,ct)}}class pA extends class IS{}{constructor(o,u,c,h,g){super(),this.location=c,this._rootLView=h,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new wg(h),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const g=this._rootLView;qC(g[1],g,h,o,u),FC(g,this._tNode.index)}}get injector(){return new Wn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function KC(){const s=_r();ou(Ve()[1],s)}function tv(s){let o=function er(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let h;if(Bi(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new _e(903,!1);h=o.\u0275dir}if(h){if(u){c.push(h);const y=s;y.inputs=Fh(s.inputs),y.declaredInputs=Fh(s.declaredInputs),y.outputs=Fh(s.outputs);const C=h.hostBindings;C&&yA(s,C);const I=h.viewQuery,D=h.contentQueries;if(I&&nv(s,I),D&&_A(s,D),oe(s.inputs,h.inputs),oe(s.declaredInputs,h.declaredInputs),oe(s.outputs,h.outputs),Bi(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let y=0;y<g.length;y++){const C=g[y];C&&C.ngInherit&&C(s),C===tv&&(u=!1)}}o=Object.getPrototypeOf(o)}!function ZC(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=lu(h.hostAttrs,u=lu(u,h.hostAttrs))}}(c)}function Fh(s){return s===Sn?{}:s===Ft?[]:s}function nv(s,o){const u=s.viewQuery;s.viewQuery=u?(c,h)=>{o(c,h),u(c,h)}:o}function _A(s,o){const u=s.contentQueries;s.contentQueries=u?(c,h,g)=>{o(c,h,g),u(c,h,g)}:o}function yA(s,o){const u=s.hostBindings;s.hostBindings=u?(c,h)=>{o(c,h),u(c,h)}:o}let Tg=null;function Ao(){if(!Tg){const s=Kt.Symbol;if(s&&s.iterator)Tg=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Tg=c)}}}return Tg}function Ia(s){return!!ba(s)&&(Array.isArray(s)||!(s instanceof Map)&&Ao()in s)}function ba(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Xr(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function iv(s,o,u,c){const h=Ve();return Xr(h,co(),o)&&(In(),eo(ir(),h,s,o,u,c)),iv}function Lh(s,o,u,c,h,g){const C=function xo(s,o,u,c){const h=Xr(s,o,u);return Xr(s,o+1,c)||h}(s,function Ai(){return Yt.lFrame.bindingIndex}(),u,h);return oi(2),C?o+ye(u)+c+ye(h)+g:hn}function Uh(s,o,u,c,h,g,y,C){const I=Ve(),D=In(),R=s+22,F=D.firstCreatePass?function CA(s,o,u,c,h,g,y,C,I){const D=o.consts,R=Do(o,s,4,y||null,Cr(D,C));Sc(o,u,R,Cr(D,I)),ou(o,R);const F=R.tViews=Hy(2,R,c,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,D);return null!==o.queries&&(o.queries.template(o,R),F.queries=o.queries.embeddedTView(R)),R}(R,D,I,o,u,c,h,g,y):D.data[R];$i(F,!1);const q=I[11].createComment("");ty(D,I,q,F),Pr(q,I),mg(I,I[R]=Ky(q,I,q,F)),Zo(F)&&$y(D,I,F),null!=y&&jy(I,F,C)}function av(s,o,u){const c=Ve();return Xr(c,co(),o)&&function Gi(s,o,u,c,h,g,y,C){const I=Ei(o,u);let R,D=o.inputs;!C&&null!=D&&(R=D[c])?(qC(s,u,R,c,h),Ka(o)&&FC(u,o.index)):3&o.type&&(c=function iA(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=y?y(h,o.value||"",c):h,g.setProperty(I,c,h))}(In(),ir(),c,s,o,c[11],u,!1),av}function Sg(s,o,u,c,h){const y=h?"class":"style";qC(s,u,o.inputs[y],y,c)}function Pc(s,o,u,c){const h=Ve(),g=In(),y=22+s,C=h[11],I=h[y]=Je(C,o,function wp(){return Yt.lFrame.currentNamespace}()),D=g.firstCreatePass?function iI(s,o,u,c,h,g,y){const C=o.consts,D=Do(o,s,2,h,Cr(C,g));return Sc(o,u,D,Cr(C,y)),null!==D.attrs&&vg(D,D.attrs,!1),null!==D.mergedAttrs&&vg(D,D.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,D),D}(y,g,h,0,o,u,c):g.data[y];$i(D,!0);const R=D.mergedAttrs;null!==R&&Vd(C,I,R);const F=D.classes;null!==F&&oy(C,I,F);const q=D.styles;return null!==q&&sy(C,I,q),64!=(64&D.flags)&&ty(g,h,I,D),0===function g_(){return Yt.lFrame.elementDepthCount}()&&Pr(I,h),function m_(){Yt.lFrame.elementDepthCount++}(),Zo(D)&&($y(g,h,D),function PC(s,o,u){if(is(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const y=s.data[g];y.contentQueries&&y.contentQueries(1,u[g],g)}}}(g,D,h)),null!==c&&jy(h,D),Pc}function st(){let s=_r();nu()?function Pd(){Yt.lFrame.isParent=!1}():(s=s.parent,$i(s,!1));const o=s;!function Ad(){Yt.lFrame.elementDepthCount--}();const u=In();return u.firstCreatePass&&(ou(u,s),is(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function _0(s){return 0!=(16&s.flags)}(o)&&Sg(u,o,Ve(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function T_(s){return 0!=(32&s.flags)}(o)&&Sg(u,o,Ve(),o.stylesWithoutHost,!1),st}function qi(s,o,u,c){return Pc(s,o,u,c),st(),qi}function sI(){return Ve()}function Bh(s){return!!s&&"function"==typeof s.then}function oI(s){return!!s&&"function"==typeof s.subscribe}const aI=oI;function uv(s,o,u,c){const h=Ve(),g=In(),y=_r();return function SA(s,o,u,c,h,g,y,C){const I=Zo(c),R=s.firstCreatePass&&yg(s),F=o[8],q=Qy(o);let ne=!0;if(3&c.type||C){const ct=Ei(c,o),dt=C?C(ct):ct,Gt=q.length,Se=C?Fn=>C(Jn(Fn[c.index])):c.index;let Wt=null;if(!C&&I&&(Wt=function DA(s,o,u,c){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const y=h[g];if(y===u&&h[g+1]===c){const C=o[7],I=h[g+2];return C.length>I?C[I]:null}"string"==typeof y&&(g+=2)}return null}(s,o,h,c.index)),null!==Wt)(Wt.__ngLastListenerFn__||Wt).__ngNextListenerFn__=g,Wt.__ngLastListenerFn__=g,ne=!1;else{g=MA(c,o,F,g,!1);const Fn=u.listen(dt,h,g);q.push(g,Fn),R&&R.push(h,Se,Gt,Gt+1)}}else g=MA(c,o,F,g,!1);const Pe=c.outputs;let Ye;if(ne&&null!==Pe&&(Ye=Pe[h])){const ct=Ye.length;if(ct)for(let dt=0;dt<ct;dt+=2){const tr=o[Ye[dt]][Ye[dt+1]].subscribe(g),ys=q.length;q.push(g,tr),R&&R.push(h,c.index,ys,-(ys+1))}}}(g,h,h[11],y,s,o,0,c),uv}function AA(s,o,u,c){try{return!1!==u(c)}catch(h){return Xy(s,h),!1}}function MA(s,o,u,c,h){return function g(y){if(y===Function)return c;Zy(2&s.flags?xr(s.index,o):o);let I=AA(o,0,c,y),D=g.__ngNextListenerFn__;for(;D;)I=AA(o,0,D,y)&&I,D=D.__ngNextListenerFn__;return h&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function lI(s=1){return function p0(s){return(Yt.lFrame.contextLView=function yp(s,o){for(;s>0;)o=o[15],s--;return o}(s,Yt.lFrame.contextLView))[8]}(s)}function hI(s,o,u,c,h){const g=s[u+1],y=null===o;let C=c?ps(g):Fs(g),I=!1;for(;0!==C&&(!1===I||y);){const R=s[C+1];RA(s[C],o)&&(I=!0,s[C+1]=c?Py(R):Dh(R)),C=c?ps(R):Fs(R)}I&&(s[u+1]=c?Dh(g):Py(g))}function RA(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&mu(s,o)>=0}function pv(s,o){return function Us(s,o,u,c){const h=Ve(),g=In(),y=oi(2);g.firstUpdatePass&&function vI(s,o,u,c){const h=s.data;if(null===h[u+1]){const g=h[ai()],y=function yI(s,o){return o>=s.expandoStartIndex}(s,u);(function kg(s,o){return 0!=(s.flags&(o?16:32))})(g,c)&&null===o&&!y&&(o=!1),o=function EI(s,o,u,c){const h=function ru(s){const o=Yt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=No(u=Pg(null,s,o,u,c),o.attrs,c),g=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(u=Pg(h,s,o,u,c),null===g){let I=function gv(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Fs(c))return s[ps(c)]}(s,o,c);void 0!==I&&Array.isArray(I)&&(I=Pg(null,s,o,I[1],c),I=No(I,o.attrs,c),function wI(s,o,u,c){s[ps(u?o.classBindings:o.styleBindings)]=c}(s,o,c,I))}else g=function mv(s,o,u){let c;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)c=No(c,s[g].hostAttrs,u);return No(c,o.attrs,u)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),u}(h,g,o,c),function dv(s,o,u,c,h,g){let y=g?o.classBindings:o.styleBindings,C=ps(y),I=Fs(y);s[c]=u;let R,D=!1;if(Array.isArray(u)){const F=u;R=F[1],(null===R||mu(F,R)>0)&&(D=!0)}else R=u;if(h)if(0!==I){const q=ps(s[C+1]);s[c+1]=ju(q,C),0!==q&&(s[q+1]=Ry(s[q+1],c)),s[C+1]=function DC(s,o){return 131071&s|o<<17}(s[C+1],c)}else s[c+1]=ju(C,0),0!==C&&(s[C+1]=Ry(s[C+1],c)),C=c;else s[c+1]=ju(I,0),0===C?C=c:s[I+1]=Ry(s[I+1],c),I=c;D&&(s[c+1]=Dh(s[c+1])),hI(s,R,c,!0),hI(s,R,c,!1),function xA(s,o,u,c,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&mu(g,o)>=0&&(u[c+1]=Py(u[c+1]))}(o,R,s,c,g),y=ju(C,I),g?o.classBindings=y:o.styleBindings=y}(h,g,o,u,y,c)}}(g,s,y,c),o!==hn&&Xr(h,y,o)&&function CI(s,o,u,c,h,g,y,C){if(!(3&o.type))return;const I=s.data,D=I[C+1];jh(function Ic(s){return 1==(1&s)}(D)?Og(I,o,u,h,Fs(D),y):void 0)||(jh(g)||function ag(s){return 2==(2&s)}(D)&&(g=Og(I,null,u,h,C,y)),function hO(s,o,u,c,h){if(o)h?s.addClass(u,c):s.removeClass(u,c);else{let g=-1===c.indexOf("-")?void 0:ls.DashCase;null==h?s.removeStyle(u,c,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=ls.Important),s.setStyle(u,c,h,g))}}(c,y,Ja(ai(),u),h,g))}(g,g.data[ai()],h,h[11],s,h[y+1]=function II(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=le(Io(s)))),s}(o,u),c,y)}(s,o,null,!0),pv}function Pg(s,o,u,c,h){let g=null;const y=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<y&&(g=o[C],c=No(c,g.hostAttrs,h),g!==s);)C++;return null!==s&&(u.directiveStylingLast=C),c}function No(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const y=o[g];"number"==typeof y?h=y:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),wi(s,y,!!u||o[++g]))}return void 0===s?null:s}function Og(s,o,u,c,h,g){const y=null===o;let C;for(;h>0;){const I=s[h],D=Array.isArray(I),R=D?I[1]:I,F=null===R;let q=u[h+1];q===hn&&(q=F?Ft:void 0);let ne=F?jl(q,c):R===c?q:void 0;if(D&&!jh(ne)&&(ne=jl(I,c)),jh(ne)&&(C=ne,y))return C;const Pe=s[h+1];h=y?ps(Pe):Fs(Pe)}if(null!==o){let I=g?o.residualClasses:o.residualStyles;null!=I&&(C=jl(I,c))}return C}function jh(s){return void 0!==s}function bI(s,o=""){const u=Ve(),c=In(),h=s+22,g=c.firstCreatePass?Do(c,h,1,o,null):c.data[h],y=u[h]=function P(s,o){return s.createText(o)}(u[11],o);ty(c,u,y,g),$i(g,!1)}function yv(s){return Fg("",s,""),yv}function Fg(s,o,u){const c=Ve(),h=function Mc(s,o,u,c){return Xr(s,co(),u)?o+ye(u)+c:hn}(c,s,o,u);return h!==hn&&So(c,ai(),h),Fg}function Nc(s,o,u,c,h){const g=Ve(),y=Lh(g,s,o,u,c,h);return y!==hn&&So(g,ai(),y),Nc}const Da=void 0;var PI=["en",[["a","p"],["AM","PM"],Da],[["AM","PM"],Da,Da],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Da,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Da,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Da,"{1} 'at' {0}",Da],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function JA(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Sa={};function NI(s){const o=function eM(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=kI(o);if(u)return u;const c=o.split("-")[0];if(u=kI(c),u)return u;if("en"===c)return PI;throw new _e(701,!1)}function XA(s){return NI(s)[Qt.PluralCase]}function kI(s){return s in Sa||(Sa[s]=Kt.ng&&Kt.ng.common&&Kt.ng.common.locales&&Kt.ng.common.locales[s]),Sa[s]}var Qt=(()=>((Qt=Qt||{})[Qt.LocaleId=0]="LocaleId",Qt[Qt.DayPeriodsFormat=1]="DayPeriodsFormat",Qt[Qt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Qt[Qt.DaysFormat=3]="DaysFormat",Qt[Qt.DaysStandalone=4]="DaysStandalone",Qt[Qt.MonthsFormat=5]="MonthsFormat",Qt[Qt.MonthsStandalone=6]="MonthsStandalone",Qt[Qt.Eras=7]="Eras",Qt[Qt.FirstDayOfWeek=8]="FirstDayOfWeek",Qt[Qt.WeekendRange=9]="WeekendRange",Qt[Qt.DateFormat=10]="DateFormat",Qt[Qt.TimeFormat=11]="TimeFormat",Qt[Qt.DateTimeFormat=12]="DateTimeFormat",Qt[Qt.NumberSymbols=13]="NumberSymbols",Qt[Qt.NumberFormats=14]="NumberFormats",Qt[Qt.CurrencyCode=15]="CurrencyCode",Qt[Qt.CurrencySymbol=16]="CurrencySymbol",Qt[Qt.CurrencyName=17]="CurrencyName",Qt[Qt.Currencies=18]="Currencies",Qt[Qt.Directionality=19]="Directionality",Qt[Qt.PluralCase=20]="PluralCase",Qt[Qt.ExtraData=21]="ExtraData",Qt))();const Oc="en-US";let FI=Oc;function Kh(s,o,u,c,h){if(s=K(s),Array.isArray(s))for(let g=0;g<s.length;g++)Kh(s[g],o,u,c,h);else{const g=In(),y=Ve();let C=Rs(s)?s:K(s.provide),I=Qp(s);const D=_r(),R=1048575&D.providerIndexes,F=D.directiveStart,q=D.providerIndexes>>20;if(Rs(s)||!s.multi){const ne=new kl(I,h,Pi),Pe=Yh(C,o,h?R:R+q,F);-1===Pe?(hu(Zs(D,y),g,C),Zh(g,s,o.length),o.push(C),D.directiveStart++,D.directiveEnd++,h&&(D.providerIndexes+=1048576),u.push(ne),y.push(ne)):(u[Pe]=ne,y[Pe]=ne)}else{const ne=Yh(C,o,R+q,F),Pe=Yh(C,o,R,R+q),Ye=ne>=0&&u[ne],ct=Pe>=0&&u[Pe];if(h&&!ct||!h&&!Ye){hu(Zs(D,y),g,C);const dt=function sb(s,o,u,c,h){const g=new kl(s,u,Pi);return g.multi=[],g.index=o,g.componentProviders=0,tm(g,h,c&&!u),g}(h?ib:rb,u.length,h,c,I);!h&&ct&&(u[Pe].providerFactory=dt),Zh(g,s,o.length,0),o.push(C),D.directiveStart++,D.directiveEnd++,h&&(D.providerIndexes+=1048576),u.push(dt),y.push(dt)}else Zh(g,s,ne>-1?ne:Pe,tm(u[h?Pe:ne],I,!h&&c));!h&&c&&ct&&u[Pe].componentProviders++}}}function Zh(s,o,u,c){const h=Rs(o),g=function zi(s){return!!s.useClass}(o);if(h||g){const I=(g?K(o.useClass):o).prototype.ngOnDestroy;if(I){const D=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=D.indexOf(u);-1===R?D.push(u,[c,I]):D[R+1].push(c,I)}else D.push(u,I)}}}function tm(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Yh(s,o,u,c){for(let h=u;h<c;h++)if(o[h]===s)return h;return-1}function rb(s,o,u,c){return zv(this.multi,[])}function ib(s,o,u,c){const h=this.multi;let g;if(this.providerFactory){const y=this.providerFactory.componentProviders,C=na(u,u[1],this.providerFactory.index,c);g=C.slice(0,y),zv(h,g);for(let I=y;I<C.length;I++)g.push(C[I])}else g=[],zv(h,g);return g}function zv(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function Wv(s,o=[]){return u=>{u.providersResolver=(c,h)=>function em(s,o,u){const c=In();if(c.firstCreatePass){const h=Bi(s);Kh(u,c.data,c.blueprint,h,!0),Kh(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class Pa{}class Gv{}function _M(s,o){return new nm(s,o??null)}class nm extends Pa{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Cg(this);const c=de(o);this._bootstrapComponents=fs(c.bootstrap),this._r3Injector=ng(o,u,[{provide:Pa,useValue:this},{provide:mc,useValue:this.componentFactoryResolver}],le(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Qh extends Gv{constructor(o){super(),this.moduleType=o}create(o){return new nm(this.moduleType,o)}}class Gr extends Pa{constructor(o,u,c){super(),this.componentFactoryResolver=new Cg(this),this.instance=null;const h=new Jr([...o,{provide:Pa,useValue:this},{provide:mc,useValue:this.componentFactoryResolver}],u||hs(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Lr(s,o,u=null){return new Gr(s,o,u).injector}let rm=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=pc(0,u.type),h=c.length>0?Lr([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,h)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=tt({token:s,providedIn:"environment",factory:()=>new s(or(Wi))}),s})();function im(s){s.getStandaloneInjector=o=>o.get(rm).getOrCreateStandaloneInjector(s)}function eE(s,o,u,c){return function tE(s,o,u,c,h,g){const y=o+u;return Xr(s,y,h)?function Mo(s,o,u){return s[o]=u}(s,y+1,g?c.call(g,h):c(h)):function Na(s,o){const u=s[o];return u===hn?void 0:u}(s,y+1)}(Ve(),function zr(){const s=Yt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),s,o,u,c)}function Lc(s){return o=>{setTimeout(s,void 0,o)}}const Oi=class oE extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let h=o,g=u||(()=>null),y=c;if(o&&"object"==typeof o){const I=o;h=I.next?.bind(I),g=I.error?.bind(I),y=I.complete?.bind(I)}this.__isAsync&&(g=Lc(g),h&&(h=Lc(h)),y&&(y=Lc(y)));const C=super.subscribe({next:h,error:g,complete:y});return o instanceof U.w0&&o.add(C),C}};function mb(){return this._results[Ao()]()}class aE{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Ao(),c=aE.prototype;c[u]||(c[u]=mb)}get changes(){return this._changes||(this._changes=new Oi)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=Yr(o);(this._changesDetected=!function F_(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],g=o[c];if(u&&(h=u(h),g=u(g)),g!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ju=(()=>{class s{}return s.__NG_ELEMENT_ID__=_b,s})();const am=Ju,uE=class extends am{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,h=Tc(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(c)),By(c,h,o),new Oh(h)}};function _b(){return nf(_r(),Ve())}function nf(s,o){return 4&s.type?new uE(o,s,Eh(s,o)):null}let rf=(()=>{class s{}return s.__NG_ELEMENT_ID__=TM,s})();function TM(){return Oa(_r(),Ve())}const sf=rf,lE=class extends sf{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Eh(this._hostTNode,this._hostLView)}get injector(){return new Wn(this._hostTNode,this._hostLView)}get parentInjector(){const o=fo(this._hostTNode,this._hostLView);if(S_(o)){const u=ji(o,this._hostLView),c=cu(o);return new Wn(u[1].data[c+8],u)}return new Wn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=af(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let h,g;"number"==typeof c?h=c:null!=c&&(h=c.index,g=c.injector);const y=o.createEmbeddedView(u||{},g);return this.insert(y,h),y}createComponent(o,u,c,h,g){const y=o&&!function Ri(s){return"function"==typeof s}(o);let C;if(y)C=u;else{const F=u||{};C=F.index,c=F.injector,h=F.projectableNodes,g=F.environmentInjector||F.ngModuleRef}const I=y?o:new kh(S(o)),D=c||this.parentInjector;if(!g&&null==I.ngModule){const q=(y?D:this.parentInjector).get(Wi,null);q&&(g=q)}const R=I.create(D,h,void 0,g);return this.insert(R.hostView,C),R}insert(o,u){const c=o._lView,h=c[1];if(function Dd(s){return yi(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const F=c[3],q=new lE(F,F[6],F[3]);q.detach(q.indexOf(o))}}const g=this._adjustIndex(u),y=this._lContainer;!function Co(s,o,u,c){const h=10+c,g=u.length;c>0&&(u[h-1][4]=o),c<g-10?(o[4]=u[h],qd(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function sc(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const C=o[19];null!==C&&C.insertView(s),o[2]|=64}(h,c,y,g);const C=ry(g,y),I=c[11],D=hh(I,y[7]);return null!==D&&function Vt(s,o,u,c,h,g){c[0]=h,c[6]=o,fh(s,c,u,1,h,g)}(h,y[6],I,c,D,C),o.attachToViewContainerRef(),qd(Xu(y),g,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=af(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=ac(this._lContainer,u);c&&(Kd(Xu(this._lContainer),u),Ou(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=ac(this._lContainer,u);return c&&null!=Kd(Xu(this._lContainer),u)?new Oh(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function af(s){return s[8]}function Xu(s){return s[8]||(s[8]=[])}function Oa(s,o){let u;const c=o[s.index];if(yi(c))u=c;else{let h;if(8&s.type)h=Jn(c);else{const g=o[11];h=g.createComment("");const y=Ei(s,o);Js(g,hh(g,y),h,function dO(s,o){return s.nextSibling(o)}(g,y),!1)}o[s.index]=u=Ky(c,o,h,s),mg(o,u)}return new lE(u,s,o)}class um{constructor(o){this.queryList=o,this.matches=null}clone(){return new um(this.queryList)}setDirty(){this.queryList.setDirty()}}class lm{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let g=0;g<c;g++){const y=u.getByIndex(g);h.push(this.queries[y.indexInDeclarationView].clone())}return new lm(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Fo(o,u).matches&&this.queries[u].setDirty()}}class yb{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class ko{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,g=this.getByIndex(c).embeddedTView(o,h);g&&(g.indexInDeclarationView=c,null!==u?u.push(g):u=[g])}return null!==u?new ko(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class js{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new js(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const g=c[h];this.matchTNodeWithReadOption(o,u,cm(u,g)),this.matchTNodeWithReadOption(o,u,po(u,o,g,!1,!1))}else c===Ju?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,po(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===br||h===rf||h===Ju&&4&u.type)this.addMatch(u.index,-2);else{const g=po(u,o,h,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function cm(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function vb(s,o,u,c){return-1===u?function dm(s,o){return 11&s.type?Eh(s,o):4&s.type?nf(s,o):null}(o,s):-2===u?function ar(s,o,u){return u===br?Eh(o,s):u===Ju?nf(o,s):u===rf?Oa(o,s):void 0}(s,o,c):na(s,s[1],u,o)}function uf(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const g=s.data,y=u.matches,C=[];for(let I=0;I<y.length;I+=2){const D=y[I];C.push(D<0?null:vb(o,g[D],y[I+1],u.metadata.read))}h.matches=C}return h.matches}function el(s,o,u,c){const h=s.queries.getByIndex(u),g=h.matches;if(null!==g){const y=uf(s,o,h,u);for(let C=0;C<g.length;C+=2){const I=g[C];if(I>0)c.push(y[C/2]);else{const D=g[C+1],R=o[-I];for(let F=10;F<R.length;F++){const q=R[F];q[17]===q[3]&&el(q[1],q,D,c)}if(null!==R[9]){const F=R[9];for(let q=0;q<F.length;q++){const ne=F[q];el(ne[1],ne,D,c)}}}}}return c}function Vc(s){const o=Ve(),u=In(),c=iu();Ts(c+1);const h=Fo(u,c);if(s.dirty&&function c0(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?el(u,o,c,[]):uf(u,o,h,c);s.reset(g,ma),s.notifyOnChanges()}return!0}return!1}function dE(s,o,u,c){const h=In();if(h.firstCreatePass){const g=_r();(function Cb(s,o,u){null===s.queries&&(s.queries=new ko),s.queries.track(new js(o,u))})(h,new yb(o,u,c),g.index),function lf(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function wb(s,o,u){const c=new aE(4==(4&u));Wy(s,o,c,c.destroy),null===o[19]&&(o[19]=new lm),o[19].queries.push(new um(c))}(h,Ve(),u)}function Eb(){return function AM(s,o){return s[19].queries[o].queryList}(Ve(),iu())}function Fo(s,o){return s.queries.getByIndex(o)}function mf(...s){}const ki=new Un("Application Initializer");let _f=(()=>{class s{constructor(u){this.appInits=u,this.resolve=mf,this.reject=mf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(Bh(g))u.push(g);else if(aI(g)){const y=new Promise((C,I)=>{g.subscribe({complete:C,error:I})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(or(ki,8))},s.\u0275prov=tt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const IE=new Un("AppId",{providedIn:"root",factory:function rl(){return`${bE()}${bE()}${bE()}`}});function bE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gm=new Un("Platform Initializer"),$M=new Un("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ub=new Un("appBootstrapListener");let mm=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const yf=new Un("LocaleId",{providedIn:"root",factory:()=>_u(yf,Z.Optional|Z.SkipSelf)||function HM(){return typeof $localize<"u"&&$localize.locale||Oc}()}),qr=new Un("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class zM{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let ze=(()=>{class s{compileModuleSync(u){return new Qh(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),g=fs(de(u).declarations).reduce((y,C)=>{const I=S(C);return I&&y.push(new kh(I)),y},[]);return new zM(c,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const ve=(()=>Promise.resolve(0))();function Ue(s){typeof Zone>"u"?ve.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Zi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Oi(!1),this.onMicrotaskEmpty=new Oi(!1),this.onStable=new Oi(!1),this.onError=new Oi(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Vr(){let s=Kt.requestAnimationFrame,o=Kt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function qM(s){const o=()=>{!function GM(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Kt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,SE(s),s.isCheckStableRunning=!0,DE(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),SE(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,g,y,C)=>{try{return AE(s),u.invokeTask(h,g,y,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),$b(s)}},onInvoke:(u,c,h,g,y,C,I)=>{try{return AE(s),u.invoke(h,g,y,C,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),$b(s)}},onHasTask:(u,c,h,g)=>{u.hasTask(h,g),c===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,SE(s),DE(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,c,h,g)=>(u.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zi.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(Zi.isInAngularZone())throw new _e(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const g=this._inner,y=g.scheduleEventTask("NgZoneEvent: "+h,o,WM,mf,mf);try{return g.runTask(y,u,c)}finally{g.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const WM={};function DE(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function SE(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function AE(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function $b(s){s._nesting--,DE(s)}class tk{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Oi,this.onMicrotaskEmpty=new Oi,this.onStable=new Oi,this.onError=new Oi}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}const jb=new Un(""),ME=new Un("");let Xn,ln=(()=>{class s{constructor(u,c,h){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Xn||(function Hb(s){Xn=s}(h),h.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zi.assertNotInAngularZone(),Ue(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ue(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==g),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(or(Zi),or(sl),or(ME))},s.\u0275prov=tt({token:s,factory:s.\u0275fac}),s})(),sl=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return Xn?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Mt=null;const Gc=new Un("AllowMultipleToken"),An=new Un("PlatformDestroyListeners");class xE{constructor(o,u){this.name=o,this.token=u}}function qc(s,o,u=[]){const c=`Platform: ${o}`,h=new Un(c);return(g=[])=>{let y=wf();if(!y||y.injector.get(Gc,!1)){const C=[...u,...g,{provide:h,useValue:!0}];s?s(C):function ol(s){if(Mt&&!Mt.get(Gc,!1))throw new _e(400,!1);Mt=s;const o=s.get(PE);(function Ef(s){const o=s.get(gm,null);o&&o.forEach(u=>u())})(s)}(function RE(s=[],o){return Os.create({name:o,providers:[{provide:Wr,useValue:"platform"},{provide:An,useValue:new Set([()=>Mt=null])},...s]})}(C,c))}return function zb(s){const o=wf();if(!o)throw new _e(401,!1);return o}()}}function wf(){return Mt?.get(PE)??null}let PE=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const h=function Uo(s,o){let u;return u="noop"===s?new tk:("zone.js"===s?void 0:s)||new Zi(o),u}(c?.ngZone,function NE(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:Zi,useValue:h}];return h.run(()=>{const y=Os.create({providers:g,parent:this.injector,name:u.moduleType.name}),C=u.create(y),I=C.injector.get(Ps,null);if(!I)throw new _e(402,!1);return h.runOutsideAngular(()=>{const D=h.onError.subscribe({next:R=>{I.handleError(R)}});C.onDestroy(()=>{Fi(this._modules,C),D.unsubscribe()})}),function ym(s,o,u){try{const c=u();return Bh(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(I,h,()=>{const D=C.injector.get(_f);return D.runInitializers(),D.donePromise.then(()=>(function LI(s){Me(s,"Expected localeId to be defined"),"string"==typeof s&&(FI=s.toLowerCase().replace(/_/g,"-"))}(C.injector.get(yf,Oc)||Oc),this._moduleDoBootstrap(C),C))})})}bootstrapModule(u,c=[]){const h=ce({},c);return function vr(s,o,u){const c=new Qh(u);return Promise.resolve(c)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(u){const c=u.injector.get(al);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new _e(403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(An,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(or(Os))},s.\u0275prov=tt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function ce(s,o){return Array.isArray(o)?o.reduce(ce,s):{...s,...o}}let al=(()=>{class s{constructor(u,c,h){this._zone=u,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new k.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),y=new k.y(C=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Zi.assertNotInAngularZone(),Ue(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const D=this._zone.onUnstable.subscribe(()=>{Zi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{I.unsubscribe(),D.unsubscribe()}});this.isStable=(0,ee.T)(g,y.pipe((0,Ee.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const h=u instanceof Vu;if(!this._injector.get(_f).done)throw!h&&X(u),new _e(405,false);let y;y=h?u:this._injector.get(mc).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const C=function _m(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Pa),D=y.create(Os.NULL,[],c||y.selector,C),R=D.location.nativeElement,F=D.injector.get(jb,null);return F?.registerApplication(R),D.onDestroy(()=>{this.detachView(D.hostView),Fi(this.components,D),F?.unregisterApplication(R)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Fi(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(Ub,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Fi(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new _e(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(or(Zi),or(Wi),or(Ps))},s.\u0275prov=tt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Fi(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let Bo=!0,Gb=!1;function ul(){return Gb=!0,Bo}function qb(){if(Gb)throw new Error("Cannot enable prod mode after platform setup.");Bo=!1}let Yi=(()=>{class s{}return s.__NG_ELEMENT_ID__=If,s})();function If(s){return function bf(s,o,u){if(Ka(s)&&!u){const c=xr(s.index,o);return new Oh(c,c)}return 47&s.type?new Oh(o[16],o):null}(_r(),Ve(),16==(16&s))}class eT{constructor(){}supports(o){return Ia(o)}create(o){return new XM(o)}}const tT=(s,o)=>o;class XM{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||tT}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,g=null;for(;u||c;){const y=!c||u&&u.currentIndex<Em(c,h,g)?u:c,C=Em(y,h,g),I=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)h++;else{g||(g=[]);const D=C-h,R=I-h;if(D!=R){for(let q=0;q<D;q++){const ne=q<g.length?g[q]:g[q]=0,Pe=ne+q;R<=Pe&&Pe<D&&(g[q]=ne+1)}g[y.previousIndex]=R-D}}C!==I&&o(y,C,I)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Ia(o))throw new _e(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)g=o[C],y=this._trackByFn(C,g),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,g,y,C)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,y,C),c=!0),u=u._next}else h=0,function QC(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Ao()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,C=>{y=this._trackByFn(h,C),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,C,y,h)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,y,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,h)):o=this._addAfter(new nT(u,c),g,h),o}_verifyReinsertion(o,u,c,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new iT),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new iT),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class nT{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rT{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class iT{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new rT,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Em(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class Ur{constructor(){}supports(o){return o instanceof Map||ba(o)}create(){return new sT}}class sT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||ba(o)))throw new _e(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const g=h._prev,y=h._next;return g&&(g._next=y),y&&(y._prev=g),h._next=null,h._prev=null,h}const c=new dl(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class dl{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function VE(){return new ur([new eT])}let ur=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||VE()),deps:[[s,new vu,new yo]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new _e(901,!1)}}return s.\u0275prov=tt({token:s,providedIn:"root",factory:VE}),s})();function Kr(){return new jn([new Ur])}let jn=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Kr()),deps:[[s,new vu,new yo]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new _e(901,!1)}}return s.\u0275prov=tt({token:s,providedIn:"root",factory:Kr}),s})();const ex=qc(null,"core",[]);let Br=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(or(al))},s.\u0275mod=on({type:s}),s.\u0275inj=Le({}),s})();function tx(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(St,Oe,O)=>{O.d(Oe,{Z:()=>_e});var d=O(2090),U=O(4859),k=O(9681),ee=O(1877);class Ee{constructor(ye,ie){this._delegate=ye,this.firebase=ie,(0,k._addComponent)(ye,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(ye,ie=k._DEFAULT_ENTRY_NAME){var ft;this._delegate.checkDestroyed();const mt=this._delegate.container.getProvider(ye);return!mt.isInitialized()&&"EXPLICIT"===(null===(ft=mt.getComponent())||void 0===ft?void 0:ft.instantiationMode)&&mt.initialize(),mt.getImmediate({identifier:ie})}_removeServiceInstance(ye,ie=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(ie)}_addComponent(ye){(0,k._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,k._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function we(){const qe=function le(qe){const ye={},ie={__esModule:!0,initializeApp:function xe(We,z={}){const fe=k.initializeApp(We,z);if((0,d.r3)(ye,fe.name))return ye[fe.name];const Ge=new qe(fe,ie);return ye[fe.name]=Ge,Ge},app:mt,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function De(We){const z=We.name,fe=z.replace("-compat","");if(k._registerComponent(We)&&"PUBLIC"===We.type){const Ge=(Qe=mt())=>{if("function"!=typeof Qe[fe])throw oe.create("invalid-app-argument",{appName:z});return Qe[fe]()};void 0!==We.serviceProps&&(0,d.ZB)(Ge,We.serviceProps),ie[fe]=Ge,qe.prototype[fe]=function(...Qe){return this._getService.bind(this,z).apply(this,We.multipleInstances?Qe:[])}}return"PUBLIC"===We.type?ie[fe]:null},removeApp:function ft(We){delete ye[We]},useAsService:function je(We,z){return"serverAuth"===z?null:z},modularAPIs:k}};function mt(We){if(!(0,d.r3)(ye,We=We||k._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:We});return ye[We]}return ie.default=ie,Object.defineProperty(ie,"apps",{get:function be(){return Object.keys(ye).map(We=>ye[We])}}),mt.App=qe,ie}(Ee);return qe.INTERNAL=Object.assign(Object.assign({},qe.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function ye(ie){(0,d.ZB)(qe,ie)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),qe}(),H=new ee.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const qe=self.firebase.SDK_VERSION;qe&&qe.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const _e=j;!function ke(qe){(0,k.registerVersion)("@firebase/app-compat","0.2.8",qe)}()},9681:(St,Oe,O)=>{O.r(Oe),O.d(Oe,{FirebaseError:()=>ee.ZR,SDK_VERSION:()=>xn,_DEFAULT_ENTRY_NAME:()=>Me,_addComponent:()=>Ot,_addOrOverwriteComponent:()=>tt,_apps:()=>et,_clearComponents:()=>_t,_components:()=>Et,_getProvider:()=>Le,_registerComponent:()=>kt,_removeServiceInstance:()=>Ke,deleteApp:()=>ut,getApp:()=>Yn,getApps:()=>zn,initializeApp:()=>Dn,onLog:()=>at,registerVersion:()=>Re,setLogLevel:()=>yt});var d=O(5861),U=O(4859),k=O(1877),ee=O(2090),Ee=O(8766);class ge{constructor(Ae){this.container=Ae}getPlatformInfoString(){return this.container.getProviders().map(vt=>{if(function oe(ot){return"VERSION"===ot.getComponent()?.type}(vt)){const Rt=vt.getImmediate();return`${Rt.library}/${Rt.version}`}return null}).filter(vt=>vt).join(" ")}}const le="@firebase/app",j=new k.Yd("@firebase/app"),Me="[DEFAULT]",Te={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},et=new Map,Et=new Map;function Ot(ot,Ae){try{ot.container.addComponent(Ae)}catch(vt){j.debug(`Component ${Ae.name} failed to register with FirebaseApp ${ot.name}`,vt)}}function tt(ot,Ae){ot.container.addOrOverwriteComponent(Ae)}function kt(ot){const Ae=ot.name;if(Et.has(Ae))return j.debug(`There were multiple attempts to register component ${Ae}.`),!1;Et.set(Ae,ot);for(const vt of et.values())Ot(vt,ot);return!0}function Le(ot,Ae){const vt=ot.container.getProvider("heartbeat").getImmediate({optional:!0});return vt&&vt.triggerHeartbeat(),ot.container.getProvider(Ae)}function Ke(ot,Ae,vt=Me){Le(ot,Ae).clearInstance(vt)}function _t(){Et.clear()}const en=new ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qt{constructor(Ae,vt,Rt){this._isDeleted=!1,this._options=Object.assign({},Ae),this._config=Object.assign({},vt),this._name=vt.name,this._automaticDataCollectionEnabled=vt.automaticDataCollectionEnabled,this._container=Rt,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ae){this._isDeleted=Ae}checkDestroyed(){if(this.isDeleted)throw en.create("app-deleted",{appName:this._name})}}const xn="9.20.0";function Dn(ot,Ae={}){let vt=ot;"object"!=typeof Ae&&(Ae={name:Ae});const Rt=Object.assign({name:Me,automaticDataCollectionEnabled:!1},Ae),sn=Rt.name;if("string"!=typeof sn||!sn)throw en.create("bad-app-name",{appName:String(sn)});if(vt||(vt=(0,ee.aH)()),!vt)throw en.create("no-options");const on=et.get(sn);if(on){if((0,ee.vZ)(vt,on.options)&&(0,ee.vZ)(Rt,on.config))return on;throw en.create("duplicate-app",{appName:sn})}const Vn=new U.H0(sn);for(const B of Et.values())Vn.addComponent(B);const $=new qt(vt,Rt,Vn);return et.set(sn,$),$}function Yn(ot=Me){const Ae=et.get(ot);if(!Ae&&ot===Me)return Dn();if(!Ae)throw en.create("no-app",{appName:ot});return Ae}function zn(){return Array.from(et.values())}function ut(ot){return Z.apply(this,arguments)}function Z(){return(Z=(0,d.Z)(function*(ot){const Ae=ot.name;et.has(Ae)&&(et.delete(Ae),yield Promise.all(ot.container.getProviders().map(vt=>vt.delete())),ot.isDeleted=!0)})).apply(this,arguments)}function Re(ot,Ae,vt){var Rt;let sn=null!==(Rt=Te[ot])&&void 0!==Rt?Rt:ot;vt&&(sn+=`-${vt}`);const on=sn.match(/\s|\//),Vn=Ae.match(/\s|\//);if(on||Vn){const $=[`Unable to register library "${sn}" with version "${Ae}":`];return on&&$.push(`library name "${sn}" contains illegal characters (whitespace or "/")`),on&&Vn&&$.push("and"),Vn&&$.push(`version name "${Ae}" contains illegal characters (whitespace or "/")`),void j.warn($.join(" "))}kt(new U.wA(`${sn}-version`,()=>({library:sn,version:Ae}),"VERSION"))}function at(ot,Ae){if(null!==ot&&"function"!=typeof ot)throw en.create("invalid-log-argument");(0,k.Am)(ot,Ae)}function yt(ot){(0,k.Ub)(ot)}const tn="firebase-heartbeat-store";let Xt=null;function At(){return Xt||(Xt=(0,Ee.X3)("firebase-heartbeat-database",1,{upgrade:(ot,Ae)=>{0===Ae&&ot.createObjectStore(tn)}}).catch(ot=>{throw en.create("idb-open",{originalErrorMessage:ot.message})})),Xt}function pt(){return(pt=(0,d.Z)(function*(ot){try{return(yield At()).transaction(tn).objectStore(tn).get(_n(ot))}catch(Ae){if(Ae instanceof ee.ZR)j.warn(Ae.message);else{const vt=en.create("idb-get",{originalErrorMessage:Ae?.message});j.warn(vt.message)}}})).apply(this,arguments)}function Kt(ot,Ae){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,d.Z)(function*(ot,Ae){try{const Rt=(yield At()).transaction(tn,"readwrite");return yield Rt.objectStore(tn).put(Ae,_n(ot)),Rt.done}catch(vt){if(vt instanceof ee.ZR)j.warn(vt.message);else{const Rt=en.create("idb-set",{originalErrorMessage:vt?.message});j.warn(Rt.message)}}})).apply(this,arguments)}function _n(ot){return`${ot.name}!${ot.options.appId}`}class Nn{constructor(Ae){this.container=Ae,this._heartbeatsCache=null;const vt=this.container.getProvider("app").getImmediate();this._storage=new rn(vt),this._heartbeatsCachePromise=this._storage.read().then(Rt=>(this._heartbeatsCache=Rt,Rt))}triggerHeartbeat(){var Ae=this;return(0,d.Z)(function*(){const Rt=Ae.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),sn=Pt();if(null===Ae._heartbeatsCache&&(Ae._heartbeatsCache=yield Ae._heartbeatsCachePromise),Ae._heartbeatsCache.lastSentHeartbeatDate!==sn&&!Ae._heartbeatsCache.heartbeats.some(on=>on.date===sn))return Ae._heartbeatsCache.heartbeats.push({date:sn,agent:Rt}),Ae._heartbeatsCache.heartbeats=Ae._heartbeatsCache.heartbeats.filter(on=>{const Vn=new Date(on.date).valueOf();return Date.now()-Vn<=2592e6}),Ae._storage.overwrite(Ae._heartbeatsCache)})()}getHeartbeatsHeader(){var Ae=this;return(0,d.Z)(function*(){if(null===Ae._heartbeatsCache&&(yield Ae._heartbeatsCachePromise),null===Ae._heartbeatsCache||0===Ae._heartbeatsCache.heartbeats.length)return"";const vt=Pt(),{heartbeatsToSend:Rt,unsentEntries:sn}=function rr(ot,Ae=1024){const vt=[];let Rt=ot.slice();for(const sn of ot){const on=vt.find(Vn=>Vn.agent===sn.agent);if(on){if(on.dates.push(sn.date),qn(vt)>Ae){on.dates.pop();break}}else if(vt.push({agent:sn.agent,dates:[sn.date]}),qn(vt)>Ae){vt.pop();break}Rt=Rt.slice(1)}return{heartbeatsToSend:vt,unsentEntries:Rt}}(Ae._heartbeatsCache.heartbeats),on=(0,ee.L)(JSON.stringify({version:2,heartbeats:Rt}));return Ae._heartbeatsCache.lastSentHeartbeatDate=vt,sn.length>0?(Ae._heartbeatsCache.heartbeats=sn,yield Ae._storage.overwrite(Ae._heartbeatsCache)):(Ae._heartbeatsCache.heartbeats=[],Ae._storage.overwrite(Ae._heartbeatsCache)),on})()}}function Pt(){return(new Date).toISOString().substring(0,10)}class rn{constructor(Ae){this.app=Ae,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ee.hl)()&&(0,ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ae=this;return(0,d.Z)(function*(){return(yield Ae._canUseIndexedDBPromise)&&(yield function it(ot){return pt.apply(this,arguments)}(Ae.app))||{heartbeats:[]}})()}overwrite(Ae){var vt=this;return(0,d.Z)(function*(){var Rt;if(yield vt._canUseIndexedDBPromise){const on=yield vt.read();return Kt(vt.app,{lastSentHeartbeatDate:null!==(Rt=Ae.lastSentHeartbeatDate)&&void 0!==Rt?Rt:on.lastSentHeartbeatDate,heartbeats:Ae.heartbeats})}})()}add(Ae){var vt=this;return(0,d.Z)(function*(){var Rt;if(yield vt._canUseIndexedDBPromise){const on=yield vt.read();return Kt(vt.app,{lastSentHeartbeatDate:null!==(Rt=Ae.lastSentHeartbeatDate)&&void 0!==Rt?Rt:on.lastSentHeartbeatDate,heartbeats:[...on.heartbeats,...Ae.heartbeats]})}})()}}function qn(ot){return(0,ee.L)(JSON.stringify({version:2,heartbeats:ot})).length}!function yn(ot){kt(new U.wA("platform-logger",Ae=>new ge(Ae),"PRIVATE")),kt(new U.wA("heartbeat",Ae=>new Nn(Ae),"PRIVATE")),Re(le,"0.9.8",ot),Re(le,"0.9.8","esm2017"),Re("fire-js","")}("")},4859:(St,Oe,O)=>{O.d(Oe,{H0:()=>le,wA:()=>k});var d=O(5861),U=O(2090);class k{constructor(j,H,K){this.name=j,this.instanceFactory=H,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const ee="[DEFAULT]";class Ee{constructor(j,H){this.name=j,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const H=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(H)){const K=new U.BH;if(this.instancesDeferred.set(H,K),this.isInitialized(H)||this.shouldAutoInitialize())try{const Fe=this.getOrInitializeService({instanceIdentifier:H});Fe&&K.resolve(Fe)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(j){var H;const K=this.normalizeInstanceIdentifier(j?.identifier),Fe=null!==(H=j?.optional)&&void 0!==H&&H;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Fe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(ke){if(Fe)return null;throw ke}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function oe(we){return"EAGER"===we.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[H,K]of this.instancesDeferred.entries()){const Fe=this.normalizeInstanceIdentifier(H);try{const ke=this.getOrInitializeService({instanceIdentifier:Fe});K.resolve(ke)}catch{}}}}clearInstance(j=ee){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,d.Z)(function*(){const H=Array.from(j.instances.values());yield Promise.all([...H.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...H.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=ee){return this.instances.has(j)}getOptions(j=ee){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:H={}}=j,K=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Fe=this.getOrInitializeService({instanceIdentifier:K,options:H});for(const[ke,_e]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(ke)&&_e.resolve(Fe);return Fe}onInit(j,H){var K;const Fe=this.normalizeInstanceIdentifier(H),ke=null!==(K=this.onInitCallbacks.get(Fe))&&void 0!==K?K:new Set;ke.add(j),this.onInitCallbacks.set(Fe,ke);const _e=this.instances.get(Fe);return _e&&j(_e,Fe),()=>{ke.delete(j)}}invokeOnInitCallbacks(j,H){const K=this.onInitCallbacks.get(H);if(K)for(const Fe of K)try{Fe(j,H)}catch{}}getOrInitializeService({instanceIdentifier:j,options:H={}}){let K=this.instances.get(j);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(we=j,we===ee?void 0:we),options:H}),this.instances.set(j,K),this.instancesOptions.set(j,H),this.invokeOnInitCallbacks(K,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,K)}catch{}var we;return K||null}normalizeInstanceIdentifier(j=ee){return this.component?this.component.multipleInstances?j:ee:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const H=this.getProvider(j.name);if(H.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);H.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const H=new Ee(j,this);return this.providers.set(j,H),H}getProviders(){return Array.from(this.providers.values())}}},2833:(St,Oe,O)=>{var d=O(5861),U=O(9681),k=O(4859),ee=O(2090),Ee=O(8766);const ge="@firebase/installations",we="w:0.6.4",j="FIS_v2",qe=new ee.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ye(W){return W instanceof ee.ZR&&W.code.includes("request-failed")}function ie({projectId:W}){return`https://firebaseinstallations.googleapis.com/v1/projects/${W}/installations`}function ft(W){return{token:W.token,requestStatus:2,expiresIn:z(W.expiresIn),creationTime:Date.now()}}function mt(W,ae){return xe.apply(this,arguments)}function xe(){return(xe=(0,d.Z)(function*(W,ae){const Ct=(yield ae.json()).error;return qe.create("request-failed",{requestName:W,serverCode:Ct.code,serverMessage:Ct.message,serverStatus:Ct.status})})).apply(this,arguments)}function be({apiKey:W}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":W})}function De(W,{refreshToken:ae}){const He=be(W);return He.append("Authorization",function fe(W){return`${j} ${W}`}(ae)),He}function je(W){return We.apply(this,arguments)}function We(){return(We=(0,d.Z)(function*(W){const ae=yield W();return ae.status>=500&&ae.status<600?W():ae})).apply(this,arguments)}function z(W){return Number(W.replace("s","000"))}function Ge(W,ae){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,d.Z)(function*({appConfig:W,heartbeatServiceProvider:ae},{fid:He}){const Ct=ie(W),nn=be(W),gn=ae.getImmediate({optional:!0});if(gn){const hr=yield gn.getHeartbeatsHeader();hr&&nn.append("x-firebase-client",hr)}const Kn={method:"POST",headers:nn,body:JSON.stringify({fid:He,authVersion:j,appId:W.appId,sdkVersion:we})},si=yield je(()=>fetch(Ct,Kn));if(si.ok){const hr=yield si.json();return{fid:hr.fid||He,registrationStatus:2,refreshToken:hr.refreshToken,authToken:ft(hr.authToken)}}throw yield mt("Create Installation",si)})).apply(this,arguments)}function bt(W){return new Promise(ae=>{setTimeout(ae,W)})}const se=/^[cdef][\w-]{21}$/;function me(){try{const W=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(W),W[0]=112+W[0]%16;const He=function Ne(W){return function Xe(W){return btoa(String.fromCharCode(...W)).replace(/\+/g,"-").replace(/\//g,"_")}(W).substr(0,22)}(W);return se.test(He)?He:""}catch{return""}}function Me(W){return`${W.appName}!${W.appId}`}const Te=new Map;function et(W,ae){const He=Me(W);tt(He,ae),function kt(W,ae){const He=function Ke(){return!Le&&"BroadcastChannel"in self&&(Le=new BroadcastChannel("[Firebase] FID Change"),Le.onmessage=W=>{tt(W.data.key,W.data.fid)}),Le}();He&&He.postMessage({key:W,fid:ae}),function _t(){0===Te.size&&Le&&(Le.close(),Le=null)}()}(He,ae)}function tt(W,ae){const He=Te.get(W);if(He)for(const Ct of He)Ct(ae)}let Le=null;const qt="firebase-installations-store";let xn=null;function Dn(){return xn||(xn=(0,Ee.X3)("firebase-installations-database",1,{upgrade:(W,ae)=>{0===ae&&W.createObjectStore(qt)}})),xn}function Yn(W,ae){return zn.apply(this,arguments)}function zn(){return(zn=(0,d.Z)(function*(W,ae){const He=Me(W),nn=(yield Dn()).transaction(qt,"readwrite"),gn=nn.objectStore(qt),Zt=yield gn.get(He);return yield gn.put(ae,He),yield nn.done,(!Zt||Zt.fid!==ae.fid)&&et(W,ae.fid),ae})).apply(this,arguments)}function ut(W){return Z.apply(this,arguments)}function Z(){return(Z=(0,d.Z)(function*(W){const ae=Me(W),Ct=(yield Dn()).transaction(qt,"readwrite");yield Ct.objectStore(qt).delete(ae),yield Ct.done})).apply(this,arguments)}function Re(W,ae){return at.apply(this,arguments)}function at(){return(at=(0,d.Z)(function*(W,ae){const He=Me(W),nn=(yield Dn()).transaction(qt,"readwrite"),gn=nn.objectStore(qt),Zt=yield gn.get(He),Kn=ae(Zt);return void 0===Kn?yield gn.delete(He):yield gn.put(Kn,He),yield nn.done,Kn&&(!Zt||Zt.fid!==Kn.fid)&&et(W,Kn.fid),Kn})).apply(this,arguments)}function yt(W){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,d.Z)(function*(W){let ae;const He=yield Re(W.appConfig,Ct=>{const nn=fn(Ct),gn=tn(W,nn);return ae=gn.registrationPromise,gn.installationEntry});return""===He.fid?{installationEntry:yield ae}:{installationEntry:He,registrationPromise:ae}})).apply(this,arguments)}function fn(W){return Rn(W||{fid:me(),registrationStatus:0})}function tn(W,ae){if(0===ae.registrationStatus){if(!navigator.onLine)return{installationEntry:ae,registrationPromise:Promise.reject(qe.create("app-offline"))};const He={fid:ae.fid,registrationStatus:1,registrationTime:Date.now()},Ct=function Xt(W,ae){return At.apply(this,arguments)}(W,He);return{installationEntry:He,registrationPromise:Ct}}return 1===ae.registrationStatus?{installationEntry:ae,registrationPromise:it(W)}:{installationEntry:ae}}function At(){return(At=(0,d.Z)(function*(W,ae){try{const He=yield Ge(W,ae);return Yn(W.appConfig,He)}catch(He){throw ye(He)&&409===He.customData.serverCode?yield ut(W.appConfig):yield Yn(W.appConfig,{fid:ae.fid,registrationStatus:0}),He}})).apply(this,arguments)}function it(W){return pt.apply(this,arguments)}function pt(){return(pt=(0,d.Z)(function*(W){let ae=yield Kt(W.appConfig);for(;1===ae.registrationStatus;)yield bt(100),ae=yield Kt(W.appConfig);if(0===ae.registrationStatus){const{installationEntry:He,registrationPromise:Ct}=yield yt(W);return Ct||He}return ae})).apply(this,arguments)}function Kt(W){return Re(W,ae=>{if(!ae)throw qe.create("installation-not-found");return Rn(ae)})}function Rn(W){return function _n(W){return 1===W.registrationStatus&&W.registrationTime+1e4<Date.now()}(W)?{fid:W.fid,registrationStatus:0}:W}function Sn(W,ae){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,d.Z)(function*({appConfig:W,heartbeatServiceProvider:ae},He){const Ct=Nn(W,He),nn=De(W,He),gn=ae.getImmediate({optional:!0});if(gn){const hr=yield gn.getHeartbeatsHeader();hr&&nn.append("x-firebase-client",hr)}const Kn={method:"POST",headers:nn,body:JSON.stringify({installation:{sdkVersion:we,appId:W.appId}})},si=yield je(()=>fetch(Ct,Kn));if(si.ok)return ft(yield si.json());throw yield mt("Generate Auth Token",si)})).apply(this,arguments)}function Nn(W,{fid:ae}){return`${ie(W)}/${ae}/authTokens:generate`}function Pt(W){return rr.apply(this,arguments)}function rr(){return(rr=(0,d.Z)(function*(W,ae=!1){let He;const Ct=yield Re(W.appConfig,gn=>{if(!vt(gn))throw qe.create("not-registered");const Zt=gn.authToken;if(!ae&&Rt(Zt))return gn;if(1===Zt.requestStatus)return He=rn(W,ae),gn;{if(!navigator.onLine)throw qe.create("app-offline");const Kn=on(gn);return He=ot(W,Kn),Kn}});return He?yield He:Ct.authToken})).apply(this,arguments)}function rn(W,ae){return qn.apply(this,arguments)}function qn(){return(qn=(0,d.Z)(function*(W,ae){let He=yield yn(W.appConfig);for(;1===He.authToken.requestStatus;)yield bt(100),He=yield yn(W.appConfig);const Ct=He.authToken;return 0===Ct.requestStatus?Pt(W,ae):Ct})).apply(this,arguments)}function yn(W){return Re(W,ae=>{if(!vt(ae))throw qe.create("not-registered");return function Vn(W){return 1===W.requestStatus&&W.requestTime+1e4<Date.now()}(ae.authToken)?Object.assign(Object.assign({},ae),{authToken:{requestStatus:0}}):ae})}function ot(W,ae){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,d.Z)(function*(W,ae){try{const He=yield Sn(W,ae),Ct=Object.assign(Object.assign({},ae),{authToken:He});return yield Yn(W.appConfig,Ct),He}catch(He){if(!ye(He)||401!==He.customData.serverCode&&404!==He.customData.serverCode){const Ct=Object.assign(Object.assign({},ae),{authToken:{requestStatus:0}});yield Yn(W.appConfig,Ct)}else yield ut(W.appConfig);throw He}})).apply(this,arguments)}function vt(W){return void 0!==W&&2===W.registrationStatus}function Rt(W){return 2===W.requestStatus&&!function sn(W){const ae=Date.now();return ae<W.creationTime||W.creationTime+W.expiresIn<ae+36e5}(W)}function on(W){const ae={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},W),{authToken:ae})}function B(){return(B=(0,d.Z)(function*(W){const ae=W,{installationEntry:He,registrationPromise:Ct}=yield yt(ae);return Ct?Ct.catch(console.error):Pt(ae).catch(console.error),He.fid})).apply(this,arguments)}function S(){return(S=(0,d.Z)(function*(W,ae=!1){const He=W;return yield A(He),(yield Pt(He,ae)).token})).apply(this,arguments)}function A(W){return L.apply(this,arguments)}function L(){return(L=(0,d.Z)(function*(W){const{registrationPromise:ae}=yield yt(W);ae&&(yield ae)})).apply(this,arguments)}function an(W){return qe.create("missing-app-config-values",{valueName:W})}const Y="installations",lt=W=>{const ae=W.getProvider("app").getImmediate(),He=function Lt(W){if(!W||!W.options)throw an("App Configuration");if(!W.name)throw an("App Name");const ae=["projectId","apiKey","appId"];for(const He of ae)if(!W.options[He])throw an(He);return{appName:W.name,projectId:W.options.projectId,apiKey:W.options.apiKey,appId:W.options.appId}}(ae);return{app:ae,appConfig:He,heartbeatServiceProvider:(0,U._getProvider)(ae,"heartbeat"),_delete:()=>Promise.resolve()}},wt=W=>{const ae=W.getProvider("app").getImmediate(),He=(0,U._getProvider)(ae,Y).getImmediate();return{getId:()=>function $(W){return B.apply(this,arguments)}(He),getToken:nn=>function N(W){return S.apply(this,arguments)}(He,nn)}};(function nt(){(0,U._registerComponent)(new k.wA(Y,lt,"PUBLIC")),(0,U._registerComponent)(new k.wA("installations-internal",wt,"PRIVATE"))})(),(0,U.registerVersion)(ge,"0.6.4"),(0,U.registerVersion)(ge,"0.6.4","esm2017")},1877:(St,Oe,O)=>{O.d(Oe,{Am:()=>we,Ub:()=>le,Yd:()=>oe,in:()=>U});const d=[];var U=(()=>{return(j=U||(U={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",U;var j})();const k={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},ee=U.INFO,Ee={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},ge=(j,H,...K)=>{if(H<j.logLevel)return;const Fe=(new Date).toISOString(),ke=Ee[H];if(!ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[ke](`[${Fe}]  ${j.name}:`,...K)};class oe{constructor(H){this.name=H,this._logLevel=ee,this._logHandler=ge,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in U))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?k[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...H),this._logHandler(this,U.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...H),this._logHandler(this,U.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,U.INFO,...H),this._logHandler(this,U.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,U.WARN,...H),this._logHandler(this,U.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...H),this._logHandler(this,U.ERROR,...H)}}function le(j){d.forEach(H=>{H.setLogLevel(j)})}function we(j,H){for(const K of d){let Fe=null;H&&H.level&&(Fe=k[H.level]),K.userLogHandler=null===j?null:(ke,_e,...qe)=>{const ye=qe.map(ie=>{if(null==ie)return null;if("string"==typeof ie)return ie;if("number"==typeof ie||"boolean"==typeof ie)return ie.toString();if(ie instanceof Error)return ie.message;try{return JSON.stringify(ie)}catch{return null}}).filter(ie=>ie).join(" ");_e>=(Fe??ke.logLevel)&&j({level:U[_e].toLowerCase(),message:ye,args:qe,type:ke.name})}}}},3008:(St,Oe,O)=>{O.d(Oe,{IH:()=>rr,Gb:()=>qn,Kz:()=>on,Iv:()=>Ae});var d=O(5861),U=O(9681),k=O(1877),ee=O(2090),Ee=O(4859);O(2833);const oe="analytics",le="firebase_id",H="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",K="https://www.googletagmanager.com/gtag/js",Fe=new k.Yd("@firebase/analytics"),_e=new ee.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function qe(S){if(!S.startsWith(K)){const A=_e.create("invalid-gtag-resource",{gtagURL:S});return Fe.warn(A.message),""}return S}function ye(S){return Promise.all(S.map(A=>A.catch(L=>L)))}function ft(S,A){const L=function ie(S,A){let L;return window.trustedTypes&&(L=window.trustedTypes.createPolicy(S,A)),L}("firebase-js-sdk-policy",{createScriptURL:qe}),X=document.createElement("script"),de=`${K}?l=${S}&id=${A}`;X.src=L?L?.createScriptURL(de):de,X.async=!0,document.head.appendChild(X)}function xe(S,A,L,X,de,Be){return be.apply(this,arguments)}function be(){return(be=(0,d.Z)(function*(S,A,L,X,de,Be){const re=X[de];try{if(re)yield A[re];else{const Ze=(yield ye(L)).find(Ht=>Ht.measurementId===de);Ze&&(yield A[Ze.appId])}}catch($e){Fe.error($e)}S("config",de,Be)})).apply(this,arguments)}function De(S,A,L,X,de){return je.apply(this,arguments)}function je(){return(je=(0,d.Z)(function*(S,A,L,X,de){try{let Be=[];if(de&&de.send_to){let re=de.send_to;Array.isArray(re)||(re=[re]);const $e=yield ye(L);for(const Ze of re){const Ht=$e.find(an=>an.measurementId===Ze),Lt=Ht&&A[Ht.appId];if(!Lt){Be=[];break}Be.push(Lt)}}0===Be.length&&(Be=Object.values(A)),yield Promise.all(Be),S("event",X,de||{})}catch(Be){Fe.error(Be)}})).apply(this,arguments)}function fe(S){const A=window.document.getElementsByTagName("script");for(const L of Object.values(A))if(L.src&&L.src.includes(K)&&L.src.includes(S))return L;return null}const Xe=new class bt{constructor(A={},L=1e3){this.throttleMetadata=A,this.intervalMillis=L}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,L){this.throttleMetadata[A]=L}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function se(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function pe(S){return me.apply(this,arguments)}function me(){return(me=(0,d.Z)(function*(S){var A;const{appId:L,apiKey:X}=S,de={method:"GET",headers:se(X)},Be=H.replace("{app-id}",L),re=yield fetch(Be,de);if(200!==re.status&&304!==re.status){let $e="";try{const Ze=yield re.json();null!==(A=Ze.error)&&void 0!==A&&A.message&&($e=Ze.error.message)}catch{}throw _e.create("config-fetch-failed",{httpStatus:re.status,responseMessage:$e})}return re.json()})).apply(this,arguments)}function Ne(S){return Me.apply(this,arguments)}function Me(){return(Me=(0,d.Z)(function*(S,A=Xe,L){const{appId:X,apiKey:de,measurementId:Be}=S.options;if(!X)throw _e.create("no-app-id");if(!de){if(Be)return{measurementId:Be,appId:X};throw _e.create("no-api-key")}const re=A.getThrottleMetadata(X)||{backoffCount:0,throttleEndTimeMillis:Date.now()},$e=new tt;return setTimeout((0,d.Z)(function*(){$e.abort()}),void 0!==L?L:6e4),Te({appId:X,apiKey:de,measurementId:Be},re,$e,A)})).apply(this,arguments)}function Te(S,A,L){return et.apply(this,arguments)}function et(){return(et=(0,d.Z)(function*(S,{throttleEndTimeMillis:A,backoffCount:L},X,de=Xe){var Be;const{appId:re,measurementId:$e}=S;try{yield Et(X,A)}catch(Ze){if($e)return Fe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${$e} provided in the "measurementId" field in the local Firebase config. [${Ze?.message}]`),{appId:re,measurementId:$e};throw Ze}try{const Ze=yield pe(S);return de.deleteThrottleMetadata(re),Ze}catch(Ze){const Ht=Ze;if(!Ot(Ht)){if(de.deleteThrottleMetadata(re),$e)return Fe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${$e} provided in the "measurementId" field in the local Firebase config. [${Ht?.message}]`),{appId:re,measurementId:$e};throw Ze}const Lt=503===Number(null===(Be=Ht?.customData)||void 0===Be?void 0:Be.httpStatus)?(0,ee.$s)(L,de.intervalMillis,30):(0,ee.$s)(L,de.intervalMillis),an={throttleEndTimeMillis:Date.now()+Lt,backoffCount:L+1};return de.setThrottleMetadata(re,an),Fe.debug(`Calling attemptFetch again in ${Lt} millis`),Te(S,an,X,de)}})).apply(this,arguments)}function Et(S,A){return new Promise((L,X)=>{const de=Math.max(A-Date.now(),0),Be=setTimeout(L,de);S.addEventListener(()=>{clearTimeout(Be),X(_e.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function Ot(S){if(!(S instanceof ee.ZR&&S.customData))return!1;const A=Number(S.customData.httpStatus);return 429===A||500===A||503===A||504===A}class tt{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}let kt,ut;function Ke(){return(Ke=(0,d.Z)(function*(S,A,L,X,de){if(de&&de.global)S("event",L,X);else{const Be=yield A;S("event",L,Object.assign(Object.assign({},X),{send_to:Be}))}})).apply(this,arguments)}function qt(){return(qt=(0,d.Z)(function*(S,A,L,X){if(X&&X.global)return S("set",{user_id:L}),Promise.resolve();S("config",yield A,{update:!0,user_id:L})})).apply(this,arguments)}function Z(S){ut=S}function Re(S){kt=S}function at(){return yt.apply(this,arguments)}function yt(){return(yt=(0,d.Z)(function*(){if(!(0,ee.hl)())return Fe.warn(_e.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ee.eu)()}catch(S){return Fe.warn(_e.create("indexeddb-unavailable",{errorInfo:S?.toString()}).message),!1}return!0})).apply(this,arguments)}function fn(){return(fn=(0,d.Z)(function*(S,A,L,X,de,Be,re){var $e;const Ze=Ne(S);Ze.then(te=>{L[te.measurementId]=te.appId,S.options.measurementId&&te.measurementId!==S.options.measurementId&&Fe.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${te.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(te=>Fe.error(te)),A.push(Ze);const Ht=at().then(te=>{if(te)return X.getId()}),[Lt,an]=yield Promise.all([Ze,Ht]);fe(Be)||ft(Be,Lt.measurementId),ut&&(de("consent","default",ut),Z(void 0)),de("js",new Date);const Y=null!==($e=re?.config)&&void 0!==$e?$e:{};return Y.origin="firebase",Y.update=!0,null!=an&&(Y[le]=an),de("config",Lt.measurementId,Y),kt&&(de("set",kt),Re(void 0)),Lt.measurementId})).apply(this,arguments)}class tn{constructor(A){this.app=A}_delete(){return delete Xt[this.app.options.appId],Promise.resolve()}}let Xt={},At=[];const it={};let Rn,_n,pt="dataLayer",Sn=!1;function Pt(S,A,L){!function Nn(){const S=[];if((0,ee.ru)()&&S.push("This is a browser extension environment."),(0,ee.zI)()||S.push("Cookies are not available."),S.length>0){const A=S.map((X,de)=>`(${de+1}) ${X}`).join(" "),L=_e.create("invalid-analytics-context",{errorInfo:A});Fe.warn(L.message)}}();const X=S.options.appId;if(!X)throw _e.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw _e.create("no-api-key");Fe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xt[X])throw _e.create("already-exists",{id:X});if(!Sn){!function mt(S){let A=[];Array.isArray(window[S])?A=window[S]:window[S]=A}(pt);const{wrappedGtag:Be,gtagCore:re}=function z(S,A,L,X,de){let Be=function(...re){window[X].push(arguments)};return window[de]&&"function"==typeof window[de]&&(Be=window[de]),window[de]=function We(S,A,L,X){function Be(){return(Be=(0,d.Z)(function*(re,$e,Ze){try{"event"===re?yield De(S,A,L,$e,Ze):"config"===re?yield xe(S,A,L,X,$e,Ze):"consent"===re?S("consent","update",Ze):S("set",$e)}catch(Ht){Fe.error(Ht)}})).apply(this,arguments)}return function de(re,$e,Ze){return Be.apply(this,arguments)}}(Be,S,A,L),{gtagCore:Be,wrappedGtag:window[de]}}(Xt,At,it,pt,"gtag");_n=Be,Rn=re,Sn=!0}return Xt[X]=function Jt(S,A,L,X,de,Be,re){return fn.apply(this,arguments)}(S,At,it,A,Rn,pt,L),new tn(S)}function rr(S=(0,U.getApp)()){S=(0,ee.m9)(S);const A=(0,U._getProvider)(S,oe);return A.isInitialized()?A.getImmediate():function rn(S,A={}){const L=(0,U._getProvider)(S,oe);if(L.isInitialized()){const de=L.getImmediate();if((0,ee.vZ)(A,L.getOptions()))return de;throw _e.create("already-initialized")}return L.initialize({options:A})}(S)}function qn(){return yn.apply(this,arguments)}function yn(){return(yn=(0,d.Z)(function*(){if((0,ee.ru)()||!(0,ee.zI)()||!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch{return!1}})).apply(this,arguments)}function Ae(S,A,L){S=(0,ee.m9)(S),function en(S,A,L,X){return qt.apply(this,arguments)}(_n,Xt[S.app.options.appId],A,L).catch(X=>Fe.error(X))}function on(S,A,L,X){S=(0,ee.m9)(S),function Le(S,A,L,X,de){return Ke.apply(this,arguments)}(_n,Xt[S.app.options.appId],A,L,X).catch(de=>Fe.error(de))}const $="@firebase/analytics",B="0.9.5";!function N(){(0,U._registerComponent)(new Ee.wA(oe,(A,{options:L})=>Pt(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),L),"PUBLIC")),(0,U._registerComponent)(new Ee.wA("analytics-internal",function S(A){try{const L=A.getProvider(oe).getImmediate();return{logEvent:(X,de,Be)=>on(L,X,de,Be)}}catch(L){throw _e.create("interop-component-reg-failed",{reason:L})}},"PRIVATE")),(0,U.registerVersion)($,B),(0,U.registerVersion)($,B,"esm2017")}()},259:(St,Oe,O)=>{O.d(Oe,{C6:()=>d.getApps,KN:()=>d.registerVersion,Mq:()=>d.getApp,ZF:()=>d.initializeApp});var d=O(9681);(0,d.registerVersion)("firebase","9.20.0","app")},9260:(St,Oe,O)=>{O.d(Oe,{Z:()=>d.Z});var d=O(3942);d.Z.registerVersion("firebase","9.20.0","app-compat")},9568:(St,Oe,O)=>{O.r(Oe);var d=O(5861),U=O(3942),k=O(8277),ee=O(2090),oe=(O(9681),O(1877),O(4859));function le(){return window}function H(){return(H=(0,d.Z)(function*(N,S,A){var L;const{BuildInfo:X}=le();(0,k.as)(S.sessionId,"AuthEvent did not contain a session ID");const de=yield ie(S.sessionId),Be={};return(0,k.at)()?Be.ibi=X.packageName:(0,k.au)()?Be.apn=X.packageName:(0,k.av)(N,"operation-not-supported-in-this-environment"),X.displayName&&(Be.appDisplayName=X.displayName),Be.sessionId=de,(0,k.aw)(N,A,S.type,void 0,null!==(L=S.eventId)&&void 0!==L?L:void 0,Be)})).apply(this,arguments)}function Fe(){return(Fe=(0,d.Z)(function*(N){const{BuildInfo:S}=le(),A={};(0,k.at)()?A.iosBundleId=S.packageName:(0,k.au)()?A.androidPackageName=S.packageName:(0,k.av)(N,"operation-not-supported-in-this-environment"),yield(0,k.ax)(N,A)})).apply(this,arguments)}function qe(){return(qe=(0,d.Z)(function*(N,S,A){const{cordova:L}=le();let X=()=>{};try{yield new Promise((de,Be)=>{let re=null;function $e(){var Lt;de();const an=null===(Lt=L.plugins.browsertab)||void 0===Lt?void 0:Lt.close;"function"==typeof an&&an(),"function"==typeof A?.close&&A.close()}function Ze(){re||(re=window.setTimeout(()=>{Be((0,k.az)(N,"redirect-cancelled-by-user"))},2e3))}function Ht(){"visible"===document?.visibilityState&&Ze()}S.addPassiveListener($e),document.addEventListener("resume",Ze,!1),(0,k.au)()&&document.addEventListener("visibilitychange",Ht,!1),X=()=>{S.removePassiveListener($e),document.removeEventListener("resume",Ze,!1),document.removeEventListener("visibilitychange",Ht,!1),re&&window.clearTimeout(re)}})}finally{X()}})).apply(this,arguments)}function ie(N){return ft.apply(this,arguments)}function ft(){return(ft=(0,d.Z)(function*(N){const S=mt(N),A=yield crypto.subtle.digest("SHA-256",S);return Array.from(new Uint8Array(A)).map(X=>X.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function mt(N){if((0,k.as)(/[0-9a-zA-Z]+/.test(N),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(N);const S=new ArrayBuffer(N.length),A=new Uint8Array(S);for(let L=0;L<N.length;L++)A[L]=N.charCodeAt(L);return A}class be extends k.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(S=>{this.resolveInialized=S})}addPassiveListener(S){this.passiveListeners.add(S)}removePassiveListener(S){this.passiveListeners.delete(S)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(S){return this.resolveInialized(),this.passiveListeners.forEach(A=>A(S)),super.onEvent(S)}initialized(){var S=this;return(0,d.Z)(function*(){yield S.initPromise})()}}function We(N){return z.apply(this,arguments)}function z(){return(z=(0,d.Z)(function*(N){const S=yield Qe()._get(bt(N));return S&&(yield Qe()._remove(bt(N))),S})).apply(this,arguments)}function Ge(){const N=[],S="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<20;A++){const L=Math.floor(Math.random()*S.length);N.push(S.charAt(L))}return N.join("")}function Qe(){return(0,k.aC)(k.b)}function bt(N){return(0,k.aD)("authEvent",N.config.apiKey,N.name)}function pe(N){if(!N?.includes("?"))return{};const[S,...A]=N.split("?");return(0,ee.zd)(A.join("?"))}function Te(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.az)("no-auth-event")}}function kt(){var N;return(null===(N=self?.location)||void 0===N?void 0:N.protocol)||null}function Ke(N=(0,ee.z$)()){return!("file:"!==kt()&&"ionic:"!==kt()&&"capacitor:"!==kt()||!N.toLowerCase().match(/iphone|ipad|ipod|android/))}function xn(){try{const N=self.localStorage,S=k.aL();if(N)return N.setItem(S,"1"),N.removeItem(S),!function qt(N=(0,ee.z$)()){return function jt(){return(0,ee.w1)()&&11===document?.documentMode}()||function en(N=(0,ee.z$)()){return/Edge\/\d+/.test(N)}(N)}()||(0,ee.hl)()}catch{return Dn()&&(0,ee.hl)()}return!1}function Dn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Yn(){return(function Le(){return"http:"===kt()||"https:"===kt()}()||(0,ee.ru)()||Ke())&&!function _t(){return(0,ee.b$)()||(0,ee.UG)()}()&&xn()&&!Dn()}function zn(){return Ke()&&typeof document<"u"}function Z(){return(Z=(0,d.Z)(function*(){return!!zn()&&new Promise(N=>{const S=setTimeout(()=>{N(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(S),N(!0)})})})).apply(this,arguments)}const at={LOCAL:"local",NONE:"none",SESSION:"session"},yt=k.aA,Jt="persistence";function tn(N){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,d.Z)(function*(N){yield N._initializationPromise;const S=it(),A=k.aD(Jt,N.config.apiKey,N.name);S&&S.setItem(A,N._getPersistence())})).apply(this,arguments)}function it(){var N;try{return(null===(N=function Re(){return typeof window<"u"?window:null}())||void 0===N?void 0:N.sessionStorage)||null}catch{return null}}const pt=k.aA;class Kt{constructor(){this.browserResolver=k.aC(k.k),this.cordovaResolver=k.aC(class Ne{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aE,this._overrideRedirectResult=k.aF}_initialize(S){var A=this;return(0,d.Z)(function*(){const L=S._key();let X=A.eventManagers.get(L);return X||(X=new be(S),A.eventManagers.set(L,X),A.attachCallbackListeners(S,X)),X})()}_openPopup(S){(0,k.av)(S,"operation-not-supported-in-this-environment")}_openRedirect(S,A,L,X){var de=this;return(0,d.Z)(function*(){!function ye(N){var S,A,L,X,de,Be,re,$e,Ze,Ht;const Lt=le();(0,k.aA)("function"==typeof(null===(S=Lt?.universalLinks)||void 0===S?void 0:S.subscribe),N,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.aA)(typeof(null===(A=Lt?.BuildInfo)||void 0===A?void 0:A.packageName)<"u",N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.aA)("function"==typeof(null===(de=null===(X=null===(L=Lt?.cordova)||void 0===L?void 0:L.plugins)||void 0===X?void 0:X.browsertab)||void 0===de?void 0:de.openUrl),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aA)("function"==typeof(null===($e=null===(re=null===(Be=Lt?.cordova)||void 0===Be?void 0:Be.plugins)||void 0===re?void 0:re.browsertab)||void 0===$e?void 0:$e.isAvailable),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aA)("function"==typeof(null===(Ht=null===(Ze=Lt?.cordova)||void 0===Ze?void 0:Ze.InAppBrowser)||void 0===Ht?void 0:Ht.open),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(S);const Be=yield de._initialize(S);yield Be.initialized(),Be.resetRedirect(),(0,k.aG)(),yield de._originValidation(S);const re=function De(N,S,A=null){return{type:S,eventId:A,urlResponse:null,sessionId:Ge(),postBody:null,tenantId:N.tenantId,error:(0,k.az)(N,"no-auth-event")}}(S,L,X);yield function je(N,S){return Qe()._set(bt(N),S)}(S,re);const $e=yield function j(N,S,A){return H.apply(this,arguments)}(S,re,A),Ze=yield function ke(N){const{cordova:S}=le();return new Promise(A=>{S.plugins.browsertab.isAvailable(L=>{let X=null;L?S.plugins.browsertab.openUrl(N):X=S.InAppBrowser.open(N,(0,k.ay)()?"_blank":"_system","location=yes"),A(X)})})}($e);return function _e(N,S,A){return qe.apply(this,arguments)}(S,Be,Ze)})()}_isIframeWebStorageSupported(S,A){throw new Error("Method not implemented.")}_originValidation(S){const A=S._key();return this.originValidationPromises[A]||(this.originValidationPromises[A]=function K(N){return Fe.apply(this,arguments)}(S)),this.originValidationPromises[A]}attachCallbackListeners(S,A){const{universalLinks:L,handleOpenURL:X,BuildInfo:de}=le(),Be=setTimeout((0,d.Z)(function*(){yield We(S),A.onEvent(Te())}),500),re=function(){var Ht=(0,d.Z)(function*(Lt){clearTimeout(Be);const an=yield We(S);let Y=null;an&&Lt?.url&&(Y=function fe(N,S){var A,L;const X=function se(N){const S=pe(N),A=S.link?decodeURIComponent(S.link):void 0,L=pe(A).link,X=S.deep_link_id?decodeURIComponent(S.deep_link_id):void 0;return pe(X).link||X||L||A||N}(S);if(X.includes("/__/auth/callback")){const de=pe(X),Be=de.firebaseError?function Xe(N){try{return JSON.parse(N)}catch{return null}}(decodeURIComponent(de.firebaseError)):null,re=null===(L=null===(A=Be?.code)||void 0===A?void 0:A.split("auth/"))||void 0===L?void 0:L[1],$e=re?(0,k.az)(re):null;return $e?{type:N.type,eventId:N.eventId,tenantId:N.tenantId,error:$e,urlResponse:null,sessionId:null,postBody:null}:{type:N.type,eventId:N.eventId,tenantId:N.tenantId,sessionId:N.sessionId,urlResponse:X,postBody:null}}return null}(an,Lt.url)),A.onEvent(Y||Te())});return function(an){return Ht.apply(this,arguments)}}();typeof L<"u"&&"function"==typeof L.subscribe&&L.subscribe(null,re);const $e=X,Ze=`${de.packageName.toLowerCase()}://`;le().handleOpenURL=function(){var Ht=(0,d.Z)(function*(Lt){if(Lt.toLowerCase().startsWith(Ze)&&re({url:Lt}),"function"==typeof $e)try{$e(Lt)}catch(an){console.error(an)}});return function(Lt){return Ht.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aE,this._overrideRedirectResult=k.aF}_initialize(S){var A=this;return(0,d.Z)(function*(){return yield A.selectUnderlyingResolver(),A.assertedUnderlyingResolver._initialize(S)})()}_openPopup(S,A,L,X){var de=this;return(0,d.Z)(function*(){return yield de.selectUnderlyingResolver(),de.assertedUnderlyingResolver._openPopup(S,A,L,X)})()}_openRedirect(S,A,L,X){var de=this;return(0,d.Z)(function*(){return yield de.selectUnderlyingResolver(),de.assertedUnderlyingResolver._openRedirect(S,A,L,X)})()}_isIframeWebStorageSupported(S,A){this.assertedUnderlyingResolver._isIframeWebStorageSupported(S,A)}_originValidation(S){return this.assertedUnderlyingResolver._originValidation(S)}get _shouldInitProactively(){return zn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return pt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var S=this;return(0,d.Z)(function*(){if(S.underlyingResolver)return;const A=yield function ut(){return Z.apply(this,arguments)}();S.underlyingResolver=A?S.cordovaResolver:S.browserResolver})()}}function Rn(N){return N.unwrap()}function Sn(N){return Nn(N)}function Nn(N){const{_tokenResponse:S}=N instanceof ee.ZR?N.customData:N;if(!S)return null;if(!(N instanceof ee.ZR)&&"temporaryProof"in S&&"phoneNumber"in S)return k.P.credentialFromResult(N);const A=S.providerId;if(!A||A===k.p.PASSWORD)return null;let L;switch(A){case k.p.GOOGLE:L=k.V;break;case k.p.FACEBOOK:L=k.U;break;case k.p.GITHUB:L=k.W;break;case k.p.TWITTER:L=k.Z;break;default:const{oauthIdToken:X,oauthAccessToken:de,oauthTokenSecret:Be,pendingToken:re,nonce:$e}=S;return de||Be||X||re?re?A.startsWith("saml.")?k.aO._create(A,re):k.L._fromParams({providerId:A,signInMethod:A,pendingToken:re,idToken:X,accessToken:de}):new k.X(A).credential({idToken:X,accessToken:de,rawNonce:$e}):null}return N instanceof ee.ZR?L.credentialFromError(N):L.credentialFromResult(N)}function Pt(N,S){return S.catch(A=>{throw A instanceof ee.ZR&&function Ft(N,S){var A;const L=null===(A=S.customData)||void 0===A?void 0:A._tokenResponse;if("auth/multi-factor-auth-required"===S?.code)S.resolver=new qn(N,k.aq(N,S));else if(L){const X=Nn(S),de=S;X&&(de.credential=X,de.tenantId=L.tenantId||void 0,de.email=L.email||void 0,de.phoneNumber=L.phoneNumber||void 0)}}(N,A),A}).then(A=>{const X=A.user;return{operationType:A.operationType,credential:Sn(A),additionalUserInfo:k.ao(A),user:yn.getOrCreate(X)}})}function rr(N,S){return rn.apply(this,arguments)}function rn(){return(rn=(0,d.Z)(function*(N,S){const A=yield S;return{verificationId:A.verificationId,confirm:L=>Pt(N,A.confirm(L))}})).apply(this,arguments)}class qn{constructor(S,A){this.resolver=A,this.auth=function _n(N){return N.wrapped()}(S)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(S){return Pt(Rn(this.auth),this.resolver.resolveSignIn(S))}}class yn{constructor(S){this._delegate=S,this.multiFactor=k.ar(S)}static getOrCreate(S){return yn.USER_MAP.has(S)||yn.USER_MAP.set(S,new yn(S)),yn.USER_MAP.get(S)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(S){return this._delegate.getIdTokenResult(S)}getIdToken(S){return this._delegate.getIdToken(S)}linkAndRetrieveDataWithCredential(S){return this.linkWithCredential(S)}linkWithCredential(S){var A=this;return(0,d.Z)(function*(){return Pt(A.auth,k.a0(A._delegate,S))})()}linkWithPhoneNumber(S,A){var L=this;return(0,d.Z)(function*(){return rr(L.auth,k.l(L._delegate,S,A))})()}linkWithPopup(S){var A=this;return(0,d.Z)(function*(){return Pt(A.auth,k.d(A._delegate,S,Kt))})()}linkWithRedirect(S){var A=this;return(0,d.Z)(function*(){return yield tn(k.aH(A.auth)),k.g(A._delegate,S,Kt)})()}reauthenticateAndRetrieveDataWithCredential(S){return this.reauthenticateWithCredential(S)}reauthenticateWithCredential(S){var A=this;return(0,d.Z)(function*(){return Pt(A.auth,k.a1(A._delegate,S))})()}reauthenticateWithPhoneNumber(S,A){return rr(this.auth,k.r(this._delegate,S,A))}reauthenticateWithPopup(S){return Pt(this.auth,k.e(this._delegate,S,Kt))}reauthenticateWithRedirect(S){var A=this;return(0,d.Z)(function*(){return yield tn(k.aH(A.auth)),k.h(A._delegate,S,Kt)})()}sendEmailVerification(S){return k.ae(this._delegate,S)}unlink(S){var A=this;return(0,d.Z)(function*(){return yield k.an(A._delegate,S),A})()}updateEmail(S){return k.aj(this._delegate,S)}updatePassword(S){return k.ak(this._delegate,S)}updatePhoneNumber(S){return k.u(this._delegate,S)}updateProfile(S){return k.ai(this._delegate,S)}verifyBeforeUpdateEmail(S,A){return k.af(this._delegate,S,A)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}yn.USER_MAP=new WeakMap;const ot=k.aA;let Ae=(()=>{class N{constructor(A,L){if(this.app=A,L.isInitialized())return this._delegate=L.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:X}=A.options;ot(X,"invalid-api-key",{appName:A.name}),ot(X,"invalid-api-key",{appName:A.name});const de=typeof window<"u"?Kt:void 0;this._delegate=L.initialize({options:{persistence:Rt(X,A.name),popupRedirectResolver:de}}),this._delegate._updateErrorMap(k.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?yn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(A){this._delegate.languageCode=A}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(A){this._delegate.tenantId=A}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(A,L){k.I(this._delegate,A,L)}applyActionCode(A){return k.a5(this._delegate,A)}checkActionCode(A){return k.a6(this._delegate,A)}confirmPasswordReset(A,L){return k.a4(this._delegate,A,L)}createUserWithEmailAndPassword(A,L){var X=this;return(0,d.Z)(function*(){return Pt(X._delegate,k.a8(X._delegate,A,L))})()}fetchProvidersForEmail(A){return this.fetchSignInMethodsForEmail(A)}fetchSignInMethodsForEmail(A){return k.ad(this._delegate,A)}isSignInWithEmailLink(A){return k.ab(this._delegate,A)}getRedirectResult(){var A=this;return(0,d.Z)(function*(){ot(Yn(),A._delegate,"operation-not-supported-in-this-environment");const L=yield k.j(A._delegate,Kt);return L?Pt(A._delegate,Promise.resolve(L)):{credential:null,user:null}})()}addFrameworkForLogging(A){!function et(N,S){(0,k.aH)(N)._logFramework(S)}(this._delegate,A)}onAuthStateChanged(A,L,X){const{next:de,error:Be,complete:re}=vt(A,L,X);return this._delegate.onAuthStateChanged(de,Be,re)}onIdTokenChanged(A,L,X){const{next:de,error:Be,complete:re}=vt(A,L,X);return this._delegate.onIdTokenChanged(de,Be,re)}sendSignInLinkToEmail(A,L){return k.aa(this._delegate,A,L)}sendPasswordResetEmail(A,L){return k.a3(this._delegate,A,L||void 0)}setPersistence(A){var L=this;return(0,d.Z)(function*(){let X;switch(function fn(N,S){yt(Object.values(at).includes(S),N,"invalid-persistence-type"),(0,ee.b$)()?yt(S!==at.SESSION,N,"unsupported-persistence-type"):(0,ee.UG)()?yt(S===at.NONE,N,"unsupported-persistence-type"):Dn()?yt(S===at.NONE||S===at.LOCAL&&(0,ee.hl)(),N,"unsupported-persistence-type"):yt(S===at.NONE||xn(),N,"unsupported-persistence-type")}(L._delegate,A),A){case at.SESSION:X=k.a;break;case at.LOCAL:X=(yield k.aC(k.i)._isAvailable())?k.i:k.b;break;case at.NONE:X=k.N;break;default:return k.av("argument-error",{appName:L._delegate.name})}return L._delegate.setPersistence(X)})()}signInAndRetrieveDataWithCredential(A){return this.signInWithCredential(A)}signInAnonymously(){return Pt(this._delegate,k._(this._delegate))}signInWithCredential(A){return Pt(this._delegate,k.$(this._delegate,A))}signInWithCustomToken(A){return Pt(this._delegate,k.a2(this._delegate,A))}signInWithEmailAndPassword(A,L){return Pt(this._delegate,k.a9(this._delegate,A,L))}signInWithEmailLink(A,L){return Pt(this._delegate,k.ac(this._delegate,A,L))}signInWithPhoneNumber(A,L){return rr(this._delegate,k.s(this._delegate,A,L))}signInWithPopup(A){var L=this;return(0,d.Z)(function*(){return ot(Yn(),L._delegate,"operation-not-supported-in-this-environment"),Pt(L._delegate,k.c(L._delegate,A,Kt))})()}signInWithRedirect(A){var L=this;return(0,d.Z)(function*(){return ot(Yn(),L._delegate,"operation-not-supported-in-this-environment"),yield tn(L._delegate),k.f(L._delegate,A,Kt)})()}updateCurrentUser(A){return this._delegate.updateCurrentUser(A)}verifyPasswordResetCode(A){return k.a7(this._delegate,A)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return N.Persistence=at,N})();function vt(N,S,A){let L=N;"function"!=typeof N&&({next:L,error:S,complete:A}=N);const X=L;return{next:Be=>X(Be&&yn.getOrCreate(Be)),error:S,complete:A}}function Rt(N,S){const A=function At(N,S){const A=it();if(!A)return[];const L=k.aD(Jt,N,S);switch(A.getItem(L)){case at.NONE:return[k.N];case at.LOCAL:return[k.i,k.a];case at.SESSION:return[k.a];default:return[]}}(N,S);if(typeof self<"u"&&!A.includes(k.i)&&A.push(k.i),typeof window<"u")for(const L of[k.b,k.a])A.includes(L)||A.push(L);return A.includes(k.N)||A.push(k.N),A}class sn{constructor(){this.providerId="phone",this._delegate=new k.P(Rn(U.Z.auth()))}static credential(S,A){return k.P.credential(S,A)}verifyPhoneNumber(S,A){return this._delegate.verifyPhoneNumber(S,A)}unwrap(){return this._delegate}}sn.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,sn.PROVIDER_ID=k.P.PROVIDER_ID;const on=k.aA;class Vn{constructor(S,A,L=U.Z.app()){var X;on(null===(X=L.options)||void 0===X?void 0:X.apiKey,"invalid-api-key",{appName:L.name}),this._delegate=new k.R(S,A,L.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function B(N){N.INTERNAL.registerComponent(new oe.wA("auth-compat",S=>{const A=S.getProvider("app-compat").getImmediate(),L=S.getProvider("auth");return new Ae(A,L)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.Q,FacebookAuthProvider:k.U,GithubAuthProvider:k.W,GoogleAuthProvider:k.V,OAuthProvider:k.X,SAMLAuthProvider:k.Y,PhoneAuthProvider:sn,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:Vn,TwitterAuthProvider:k.Z,Auth:Ae,AuthCredential:k.J,Error:ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),N.registerVersion("@firebase/auth-compat","0.4.0")}(U.Z)},751:(St,Oe,O)=>{O.d(Oe,{KL:()=>$e,Gb:()=>L});var d=O(5861),k=(O(2833),O(4859)),ee=O(8766),Ee=O(2090),ge=O(9681);const oe="/firebase-messaging-sw.js",le="/firebase-cloud-messaging-push-scope",we="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",H="google.c.a.c_id",K="google.c.a.c_l",Fe="google.c.a.ts",ke="google.c.a.e";var qe=(()=>{return(Y=qe||(qe={})).PUSH_RECEIVED="push-received",Y.NOTIFICATION_CLICKED="notification-clicked",qe;var Y})();function ye(Y){const te=new Uint8Array(Y);return btoa(String.fromCharCode(...te)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ie(Y){const lt=(Y+"=".repeat((4-Y.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),wt=atob(lt),nt=new Uint8Array(wt.length);for(let W=0;W<wt.length;++W)nt[W]=wt.charCodeAt(W);return nt}const ft="fcm_token_details_db",xe="fcm_token_object_Store";function be(Y){return De.apply(this,arguments)}function De(){return De=(0,d.Z)(function*(Y){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(W=>W.name).includes(ft))return null;let te=null;return(yield(0,ee.X3)(ft,5,{upgrade:(wt=(0,d.Z)(function*(nt,W,ae,He){var Ct;if(W<2||!nt.objectStoreNames.contains(xe))return;const nn=He.objectStore(xe),gn=yield nn.index("fcmSenderId").get(Y);if(yield nn.clear(),gn)if(2===W){const Zt=gn;if(!Zt.auth||!Zt.p256dh||!Zt.endpoint)return;te={token:Zt.fcmToken,createTime:null!==(Ct=Zt.createTime)&&void 0!==Ct?Ct:Date.now(),subscriptionOptions:{auth:Zt.auth,p256dh:Zt.p256dh,endpoint:Zt.endpoint,swScope:Zt.swScope,vapidKey:"string"==typeof Zt.vapidKey?Zt.vapidKey:ye(Zt.vapidKey)}}}else if(3===W){const Zt=gn;te={token:Zt.fcmToken,createTime:Zt.createTime,subscriptionOptions:{auth:ye(Zt.auth),p256dh:ye(Zt.p256dh),endpoint:Zt.endpoint,swScope:Zt.swScope,vapidKey:ye(Zt.vapidKey)}}}else if(4===W){const Zt=gn;te={token:Zt.fcmToken,createTime:Zt.createTime,subscriptionOptions:{auth:ye(Zt.auth),p256dh:ye(Zt.p256dh),endpoint:Zt.endpoint,swScope:Zt.swScope,vapidKey:ye(Zt.vapidKey)}}}}),function(W,ae,He,Ct){return wt.apply(this,arguments)})})).close(),yield(0,ee.Lj)(ft),yield(0,ee.Lj)("fcm_vapid_details_db"),yield(0,ee.Lj)("undefined"),je(te)?te:null;var wt}),De.apply(this,arguments)}function je(Y){if(!Y||!Y.subscriptionOptions)return!1;const{subscriptionOptions:te}=Y;return"number"==typeof Y.createTime&&Y.createTime>0&&"string"==typeof Y.token&&Y.token.length>0&&"string"==typeof te.auth&&te.auth.length>0&&"string"==typeof te.p256dh&&te.p256dh.length>0&&"string"==typeof te.endpoint&&te.endpoint.length>0&&"string"==typeof te.swScope&&te.swScope.length>0&&"string"==typeof te.vapidKey&&te.vapidKey.length>0}const fe="firebase-messaging-store";let Ge=null;function Qe(){return Ge||(Ge=(0,ee.X3)("firebase-messaging-database",1,{upgrade:(Y,te)=>{0===te&&Y.createObjectStore(fe)}})),Ge}function bt(Y){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,d.Z)(function*(Y){const te=Me(Y),wt=yield(yield Qe()).transaction(fe).objectStore(fe).get(te);if(wt)return wt;{const nt=yield be(Y.appConfig.senderId);if(nt)return yield se(Y,nt),nt}})).apply(this,arguments)}function se(Y,te){return pe.apply(this,arguments)}function pe(){return(pe=(0,d.Z)(function*(Y,te){const lt=Me(Y),nt=(yield Qe()).transaction(fe,"readwrite");return yield nt.objectStore(fe).put(te,lt),yield nt.done,te})).apply(this,arguments)}function me(Y){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,d.Z)(function*(Y){const te=Me(Y),wt=(yield Qe()).transaction(fe,"readwrite");yield wt.objectStore(fe).delete(te),yield wt.done})).apply(this,arguments)}function Me({appConfig:Y}){return Y.appId}const et=new Ee.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Et(Y,te){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,d.Z)(function*(Y,te){const lt=yield jt(Y),wt=qt(te),nt={method:"POST",headers:lt,body:JSON.stringify(wt)};let W;try{W=yield(yield fetch(_t(Y.appConfig),nt)).json()}catch(ae){throw et.create("token-subscribe-failed",{errorInfo:ae?.toString()})}if(W.error)throw et.create("token-subscribe-failed",{errorInfo:W.error.message});if(!W.token)throw et.create("token-subscribe-no-token");return W.token})).apply(this,arguments)}function tt(Y,te){return kt.apply(this,arguments)}function kt(){return(kt=(0,d.Z)(function*(Y,te){const lt=yield jt(Y),wt=qt(te.subscriptionOptions),nt={method:"PATCH",headers:lt,body:JSON.stringify(wt)};let W;try{W=yield(yield fetch(`${_t(Y.appConfig)}/${te.token}`,nt)).json()}catch(ae){throw et.create("token-update-failed",{errorInfo:ae?.toString()})}if(W.error)throw et.create("token-update-failed",{errorInfo:W.error.message});if(!W.token)throw et.create("token-update-no-token");return W.token})).apply(this,arguments)}function Le(Y,te){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,d.Z)(function*(Y,te){const wt={method:"DELETE",headers:yield jt(Y)};try{const W=yield(yield fetch(`${_t(Y.appConfig)}/${te}`,wt)).json();if(W.error)throw et.create("token-unsubscribe-failed",{errorInfo:W.error.message})}catch(nt){throw et.create("token-unsubscribe-failed",{errorInfo:nt?.toString()})}})).apply(this,arguments)}function _t({projectId:Y}){return`https://fcmregistrations.googleapis.com/v1/projects/${Y}/registrations`}function jt(Y){return en.apply(this,arguments)}function en(){return(en=(0,d.Z)(function*({appConfig:Y,installations:te}){const lt=yield te.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Y.apiKey,"x-goog-firebase-installations-auth":`FIS ${lt}`})})).apply(this,arguments)}function qt({p256dh:Y,auth:te,endpoint:lt,vapidKey:wt}){const nt={web:{endpoint:lt,auth:te,p256dh:Y}};return wt!==we&&(nt.web.applicationPubKey=wt),nt}const xn=6048e5;function Dn(Y){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,d.Z)(function*(Y){const te=yield Jt(Y.swRegistration,Y.vapidKey),lt={vapidKey:Y.vapidKey,swScope:Y.swRegistration.scope,endpoint:te.endpoint,auth:ye(te.getKey("auth")),p256dh:ye(te.getKey("p256dh"))},wt=yield bt(Y.firebaseDependencies);if(wt){if(tn(wt.subscriptionOptions,lt))return Date.now()>=wt.createTime+xn?Z(Y,{token:wt.token,createTime:Date.now(),subscriptionOptions:lt}):wt.token;try{yield Le(Y.firebaseDependencies,wt.token)}catch(nt){console.warn(nt)}return at(Y.firebaseDependencies,lt)}return at(Y.firebaseDependencies,lt)})).apply(this,arguments)}function zn(Y){return ut.apply(this,arguments)}function ut(){return(ut=(0,d.Z)(function*(Y){const te=yield bt(Y.firebaseDependencies);te&&(yield Le(Y.firebaseDependencies,te.token),yield me(Y.firebaseDependencies));const lt=yield Y.swRegistration.pushManager.getSubscription();return!lt||lt.unsubscribe()})).apply(this,arguments)}function Z(Y,te){return Re.apply(this,arguments)}function Re(){return(Re=(0,d.Z)(function*(Y,te){try{const lt=yield tt(Y.firebaseDependencies,te),wt=Object.assign(Object.assign({},te),{token:lt,createTime:Date.now()});return yield se(Y.firebaseDependencies,wt),lt}catch(lt){throw yield zn(Y),lt}})).apply(this,arguments)}function at(Y,te){return yt.apply(this,arguments)}function yt(){return(yt=(0,d.Z)(function*(Y,te){const wt={token:yield Et(Y,te),createTime:Date.now(),subscriptionOptions:te};return yield se(Y,wt),wt.token})).apply(this,arguments)}function Jt(Y,te){return fn.apply(this,arguments)}function fn(){return(fn=(0,d.Z)(function*(Y,te){return(yield Y.pushManager.getSubscription())||Y.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ie(te)})})).apply(this,arguments)}function tn(Y,te){return te.vapidKey===Y.vapidKey&&te.endpoint===Y.endpoint&&te.auth===Y.auth&&te.p256dh===Y.p256dh}function Xt(Y){const te={from:Y.from,collapseKey:Y.collapse_key,messageId:Y.fcmMessageId};return function At(Y,te){if(!te.notification)return;Y.notification={};const lt=te.notification.title;lt&&(Y.notification.title=lt);const wt=te.notification.body;wt&&(Y.notification.body=wt);const nt=te.notification.image;nt&&(Y.notification.image=nt);const W=te.notification.icon;W&&(Y.notification.icon=W)}(te,Y),function it(Y,te){!te.data||(Y.data=te.data)}(te,Y),function pt(Y,te){var lt,wt,nt,W,ae;if(!(te.fcmOptions||null!==(lt=te.notification)&&void 0!==lt&&lt.click_action))return;Y.fcmOptions={};const He=null!==(nt=null===(wt=te.fcmOptions)||void 0===wt?void 0:wt.link)&&void 0!==nt?nt:null===(W=te.notification)||void 0===W?void 0:W.click_action;He&&(Y.fcmOptions.link=He);const Ct=null===(ae=te.fcmOptions)||void 0===ae?void 0:ae.analytics_label;Ct&&(Y.fcmOptions.analyticsLabel=Ct)}(te,Y),te}function Kt(Y){return"object"==typeof Y&&!!Y&&H in Y}function Rn(Y,te){const lt=[];for(let wt=0;wt<Y.length;wt++)lt.push(Y.charAt(wt)),wt<te.length&&lt.push(te.charAt(wt));return lt.join("")}function Sn(Y){return et.create("missing-app-config-values",{valueName:Y})}Rn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Rn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ft{constructor(te,lt,wt){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const nt=function _n(Y){if(!Y||!Y.options)throw Sn("App Configuration Object");if(!Y.name)throw Sn("App Name");const te=["projectId","apiKey","appId","messagingSenderId"],{options:lt}=Y;for(const wt of te)if(!lt[wt])throw Sn(wt);return{appName:Y.name,projectId:lt.projectId,apiKey:lt.apiKey,appId:lt.appId,senderId:lt.messagingSenderId}}(te);this.firebaseDependencies={app:te,appConfig:nt,installations:lt,analyticsProvider:wt}}_delete(){return Promise.resolve()}}function Nn(Y){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,d.Z)(function*(Y){try{Y.swRegistration=yield navigator.serviceWorker.register(oe,{scope:le}),Y.swRegistration.update().catch(()=>{})}catch(te){throw et.create("failed-service-worker-registration",{browserErrorMessage:te?.message})}})).apply(this,arguments)}function rr(Y,te){return rn.apply(this,arguments)}function rn(){return(rn=(0,d.Z)(function*(Y,te){if(!te&&!Y.swRegistration&&(yield Nn(Y)),te||!Y.swRegistration){if(!(te instanceof ServiceWorkerRegistration))throw et.create("invalid-sw-registration");Y.swRegistration=te}})).apply(this,arguments)}function qn(Y,te){return yn.apply(this,arguments)}function yn(){return(yn=(0,d.Z)(function*(Y,te){te?Y.vapidKey=te:Y.vapidKey||(Y.vapidKey=we)})).apply(this,arguments)}function Ae(){return(Ae=(0,d.Z)(function*(Y,te){if(!navigator)throw et.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw et.create("permission-blocked");return yield qn(Y,te?.vapidKey),yield rr(Y,te?.serviceWorkerRegistration),Dn(Y)})).apply(this,arguments)}function vt(Y,te,lt){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,d.Z)(function*(Y,te,lt){const wt=sn(te);(yield Y.firebaseDependencies.analyticsProvider.get()).logEvent(wt,{message_id:lt[H],message_name:lt[K],message_time:lt[Fe],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function sn(Y){switch(Y){case qe.NOTIFICATION_CLICKED:return"notification_open";case qe.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Vn(){return(Vn=(0,d.Z)(function*(Y,te){const lt=te.data;if(!lt.isFirebaseMessaging)return;Y.onMessageHandler&&lt.messageType===qe.PUSH_RECEIVED&&("function"==typeof Y.onMessageHandler?Y.onMessageHandler(Xt(lt)):Y.onMessageHandler.next(Xt(lt)));const wt=lt.data;Kt(wt)&&"1"===wt[ke]&&(yield vt(Y,lt.messageType,wt))})).apply(this,arguments)}const $="@firebase/messaging",B="0.12.4",N=Y=>{const te=new Ft(Y.getProvider("app").getImmediate(),Y.getProvider("installations-internal").getImmediate(),Y.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",lt=>function on(Y,te){return Vn.apply(this,arguments)}(te,lt)),te},S=Y=>{const te=Y.getProvider("messaging").getImmediate();return{getToken:wt=>function ot(Y,te){return Ae.apply(this,arguments)}(te,wt)}};function L(){return X.apply(this,arguments)}function X(){return(X=(0,d.Z)(function*(){try{yield(0,Ee.eu)()}catch{return!1}return typeof window<"u"&&(0,Ee.hl)()&&(0,Ee.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function $e(Y=(0,ge.getApp)()){return L().then(te=>{if(!te)throw et.create("unsupported-browser")},te=>{throw et.create("indexed-db-unsupported")}),(0,ge._getProvider)((0,Ee.m9)(Y),"messaging").getImmediate()}!function A(){(0,ge._registerComponent)(new k.wA("messaging",N,"PUBLIC")),(0,ge._registerComponent)(new k.wA("messaging-internal",S,"PRIVATE")),(0,ge.registerVersion)($,B),(0,ge.registerVersion)($,B,"esm2017")}()},4880:(St,Oe,O)=>{O.d(Oe,{sN:()=>ft,Gb:()=>Yn});var d=O(5861),U=O(9681),k=O(2090),ee=O(4859),Ee=O(1877);O(2833);const oe="@firebase/remote-config",j="remote-config",K=new k.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});function ft(ut=(0,U.getApp)()){return ut=(0,k.m9)(ut),(0,U._getProvider)(ut,j).getImmediate()}class se{constructor(Z,Re,at,yt){this.client=Z,this.storage=Re,this.storageCache=at,this.logger=yt}isCachedDataFresh(Z,Re){if(!Re)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const at=Date.now()-Re,yt=at<=Z;return this.logger.debug(`Config fetch cache check. Cache age millis: ${at}. Cache max age millis (minimumFetchIntervalMillis setting): ${Z}. Is cache hit: ${yt}.`),yt}fetch(Z){var Re=this;return(0,d.Z)(function*(){const[at,yt]=yield Promise.all([Re.storage.getLastSuccessfulFetchTimestampMillis(),Re.storage.getLastSuccessfulFetchResponse()]);if(yt&&Re.isCachedDataFresh(Z.cacheMaxAgeMillis,at))return yt;Z.eTag=yt&&yt.eTag;const Jt=yield Re.client.fetch(Z),fn=[Re.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Jt.status&&fn.push(Re.storage.setLastSuccessfulFetchResponse(Jt)),yield Promise.all(fn),Jt})()}}function pe(ut=navigator){return ut.languages&&ut.languages[0]||ut.language}class me{constructor(Z,Re,at,yt,Jt,fn){this.firebaseInstallations=Z,this.sdkVersion=Re,this.namespace=at,this.projectId=yt,this.apiKey=Jt,this.appId=fn}fetch(Z){var Re=this;return(0,d.Z)(function*(){const[at,yt]=yield Promise.all([Re.firebaseInstallations.getId(),Re.firebaseInstallations.getToken()]),fn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Re.projectId}/namespaces/${Re.namespace}:fetch?key=${Re.apiKey}`,tn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Z.eTag||"*"},Xt={sdk_version:Re.sdkVersion,app_instance_id:at,app_instance_id_token:yt,app_id:Re.appId,language_code:pe()},At={method:"POST",headers:tn,body:JSON.stringify(Xt)},it=fetch(fn,At),pt=new Promise((Nn,Pt)=>{Z.signal.addEventListener(()=>{const rr=new Error("The operation was aborted.");rr.name="AbortError",Pt(rr)})});let Kt;try{yield Promise.race([it,pt]),Kt=yield it}catch(Nn){let Pt="fetch-client-network";throw"AbortError"===Nn?.name&&(Pt="fetch-timeout"),K.create(Pt,{originalErrorMessage:Nn?.message})}let Rn=Kt.status;const _n=Kt.headers.get("ETag")||void 0;let Sn,Ft;if(200===Kt.status){let Nn;try{Nn=yield Kt.json()}catch(Pt){throw K.create("fetch-client-parse",{originalErrorMessage:Pt?.message})}Sn=Nn.entries,Ft=Nn.state}if("INSTANCE_STATE_UNSPECIFIED"===Ft?Rn=500:"NO_CHANGE"===Ft?Rn=304:("NO_TEMPLATE"===Ft||"EMPTY_CONFIG"===Ft)&&(Sn={}),304!==Rn&&200!==Rn)throw K.create("fetch-status",{httpStatus:Rn});return{status:Rn,eTag:_n,config:Sn}})()}}class Te{constructor(Z,Re){this.client=Z,this.storage=Re}fetch(Z){var Re=this;return(0,d.Z)(function*(){const at=(yield Re.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Re.attemptFetch(Z,at)})()}attemptFetch(Z,{throttleEndTimeMillis:Re,backoffCount:at}){var yt=this;return(0,d.Z)(function*(){yield function Ne(ut,Z){return new Promise((Re,at)=>{const yt=Math.max(Z-Date.now(),0),Jt=setTimeout(Re,yt);ut.addEventListener(()=>{clearTimeout(Jt),at(K.create("fetch-throttle",{throttleEndTimeMillis:Z}))})})}(Z.signal,Re);try{const Jt=yield yt.client.fetch(Z);return yield yt.storage.deleteThrottleMetadata(),Jt}catch(Jt){if(!function Me(ut){if(!(ut instanceof k.ZR&&ut.customData))return!1;const Z=Number(ut.customData.httpStatus);return 429===Z||500===Z||503===Z||504===Z}(Jt))throw Jt;const fn={throttleEndTimeMillis:Date.now()+(0,k.$s)(at),backoffCount:at+1};return yield yt.storage.setThrottleMetadata(fn),yt.attemptFetch(Z,fn)}})()}}class Ot{constructor(Z,Re,at,yt,Jt){this.app=Z,this._client=Re,this._storageCache=at,this._storage=yt,this._logger=Jt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function tt(ut,Z){const Re=ut.target.error||void 0;return K.create(Z,{originalErrorMessage:Re&&Re?.message})}const kt="app_namespace_store";class jt{constructor(Z,Re,at,yt=function _t(){return new Promise((ut,Z)=>{try{const Re=indexedDB.open("firebase_remote_config",1);Re.onerror=at=>{Z(tt(at,"storage-open"))},Re.onsuccess=at=>{ut(at.target.result)},Re.onupgradeneeded=at=>{0===at.oldVersion&&at.target.result.createObjectStore(kt,{keyPath:"compositeKey"})}}catch(Re){Z(K.create("storage-open",{originalErrorMessage:Re?.message}))}})}()){this.appId=Z,this.appName=Re,this.namespace=at,this.openDbPromise=yt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(Z){return this.set("last_fetch_status",Z)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(Z){return this.set("last_successful_fetch_timestamp_millis",Z)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(Z){return this.set("last_successful_fetch_response",Z)}getActiveConfig(){return this.get("active_config")}setActiveConfig(Z){return this.set("active_config",Z)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(Z){return this.set("active_config_etag",Z)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(Z){return this.set("throttle_metadata",Z)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(Z){var Re=this;return(0,d.Z)(function*(){const at=yield Re.openDbPromise;return new Promise((yt,Jt)=>{const tn=at.transaction([kt],"readonly").objectStore(kt),Xt=Re.createCompositeKey(Z);try{const At=tn.get(Xt);At.onerror=it=>{Jt(tt(it,"storage-get"))},At.onsuccess=it=>{const pt=it.target.result;yt(pt?pt.value:void 0)}}catch(At){Jt(K.create("storage-get",{originalErrorMessage:At?.message}))}})})()}set(Z,Re){var at=this;return(0,d.Z)(function*(){const yt=yield at.openDbPromise;return new Promise((Jt,fn)=>{const Xt=yt.transaction([kt],"readwrite").objectStore(kt),At=at.createCompositeKey(Z);try{const it=Xt.put({compositeKey:At,value:Re});it.onerror=pt=>{fn(tt(pt,"storage-set"))},it.onsuccess=()=>{Jt()}}catch(it){fn(K.create("storage-set",{originalErrorMessage:it?.message}))}})})()}delete(Z){var Re=this;return(0,d.Z)(function*(){const at=yield Re.openDbPromise;return new Promise((yt,Jt)=>{const tn=at.transaction([kt],"readwrite").objectStore(kt),Xt=Re.createCompositeKey(Z);try{const At=tn.delete(Xt);At.onerror=it=>{Jt(tt(it,"storage-delete"))},At.onsuccess=()=>{yt()}}catch(At){Jt(K.create("storage-delete",{originalErrorMessage:At?.message}))}})})()}createCompositeKey(Z){return[this.appId,this.appName,this.namespace,Z].join()}}class en{constructor(Z){this.storage=Z}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var Z=this;return(0,d.Z)(function*(){const Re=Z.storage.getLastFetchStatus(),at=Z.storage.getLastSuccessfulFetchTimestampMillis(),yt=Z.storage.getActiveConfig(),Jt=yield Re;Jt&&(Z.lastFetchStatus=Jt);const fn=yield at;fn&&(Z.lastSuccessfulFetchTimestampMillis=fn);const tn=yield yt;tn&&(Z.activeConfig=tn)})()}setLastFetchStatus(Z){return this.lastFetchStatus=Z,this.storage.setLastFetchStatus(Z)}setLastSuccessfulFetchTimestampMillis(Z){return this.lastSuccessfulFetchTimestampMillis=Z,this.storage.setLastSuccessfulFetchTimestampMillis(Z)}setActiveConfig(Z){return this.activeConfig=Z,this.storage.setActiveConfig(Z)}}function Yn(){return zn.apply(this,arguments)}function zn(){return(zn=(0,d.Z)(function*(){if(!(0,k.hl)())return!1;try{return yield(0,k.eu)()}catch{return!1}})).apply(this,arguments)}!function qt(){(0,U._registerComponent)(new ee.wA(j,function ut(Z,{instanceIdentifier:Re}){const at=Z.getProvider("app").getImmediate(),yt=Z.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw K.create("registration-window");if(!(0,k.hl)())throw K.create("indexed-db-unavailable");const{projectId:Jt,apiKey:fn,appId:tn}=at.options;if(!Jt)throw K.create("registration-project-id");if(!fn)throw K.create("registration-api-key");if(!tn)throw K.create("registration-app-id");const Xt=new jt(tn,at.name,Re=Re||"firebase"),At=new en(Xt),it=new Ee.Yd(oe);it.logLevel=Ee.in.ERROR;const pt=new me(yt,U.SDK_VERSION,Re,Jt,fn,tn),Kt=new Te(pt,Xt),Rn=new se(Kt,Xt,At,it),_n=new Ot(at,Rn,At,Xt,it);return function be(ut){const Z=(0,k.m9)(ut);Z._initializePromise||(Z._initializePromise=Z._storageCache.loadFromStorage().then(()=>{Z._isInitializationComplete=!0}))}(_n),_n},"PUBLIC").setMultipleInstances(!0)),(0,U.registerVersion)(oe,"0.4.4"),(0,U.registerVersion)(oe,"0.4.4","esm2017")}()},8766:(St,Oe,O)=>{O.d(Oe,{Lj:()=>xe,X3:()=>mt});var d=O(5861);let k,ee;const oe=new WeakMap,le=new WeakMap,we=new WeakMap,j=new WeakMap,H=new WeakMap;let ke={get(z,fe,Ge){if(z instanceof IDBTransaction){if("done"===fe)return le.get(z);if("objectStoreNames"===fe)return z.objectStoreNames||we.get(z);if("store"===fe)return Ge.objectStoreNames[1]?void 0:Ge.objectStore(Ge.objectStoreNames[0])}return ie(z[fe])},set:(z,fe,Ge)=>(z[fe]=Ge,!0),has:(z,fe)=>z instanceof IDBTransaction&&("done"===fe||"store"===fe)||fe in z};function ye(z){return"function"==typeof z?function qe(z){return z!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(z)?function(...fe){return z.apply(ft(this),fe),ie(oe.get(this))}:function(...fe){return ie(z.apply(ft(this),fe))}:function(fe,...Ge){const Qe=z.call(ft(this),fe,...Ge);return we.set(Qe,fe.sort?fe.sort():[fe]),ie(Qe)}}(z):(z instanceof IDBTransaction&&function Fe(z){if(le.has(z))return;const fe=new Promise((Ge,Qe)=>{const bt=()=>{z.removeEventListener("complete",Xe),z.removeEventListener("error",se),z.removeEventListener("abort",se)},Xe=()=>{Ge(),bt()},se=()=>{Qe(z.error||new DOMException("AbortError","AbortError")),bt()};z.addEventListener("complete",Xe),z.addEventListener("error",se),z.addEventListener("abort",se)});le.set(z,fe)}(z),((z,fe)=>fe.some(Ge=>z instanceof Ge))(z,function Ee(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(z,ke):z)}function ie(z){if(z instanceof IDBRequest)return function K(z){const fe=new Promise((Ge,Qe)=>{const bt=()=>{z.removeEventListener("success",Xe),z.removeEventListener("error",se)},Xe=()=>{Ge(ie(z.result)),bt()},se=()=>{Qe(z.error),bt()};z.addEventListener("success",Xe),z.addEventListener("error",se)});return fe.then(Ge=>{Ge instanceof IDBCursor&&oe.set(Ge,z)}).catch(()=>{}),H.set(fe,z),fe}(z);if(j.has(z))return j.get(z);const fe=ye(z);return fe!==z&&(j.set(z,fe),H.set(fe,z)),fe}const ft=z=>H.get(z);function mt(z,fe,{blocked:Ge,upgrade:Qe,blocking:bt,terminated:Xe}={}){const se=indexedDB.open(z,fe),pe=ie(se);return Qe&&se.addEventListener("upgradeneeded",me=>{Qe(ie(se.result),me.oldVersion,me.newVersion,ie(se.transaction))}),Ge&&se.addEventListener("blocked",()=>Ge()),pe.then(me=>{Xe&&me.addEventListener("close",()=>Xe()),bt&&me.addEventListener("versionchange",()=>bt())}).catch(()=>{}),pe}function xe(z,{blocked:fe}={}){const Ge=indexedDB.deleteDatabase(z);return fe&&Ge.addEventListener("blocked",()=>fe()),ie(Ge).then(()=>{})}const be=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],je=new Map;function We(z,fe){if(!(z instanceof IDBDatabase)||fe in z||"string"!=typeof fe)return;if(je.get(fe))return je.get(fe);const Ge=fe.replace(/FromIndex$/,""),Qe=fe!==Ge,bt=De.includes(Ge);if(!(Ge in(Qe?IDBIndex:IDBObjectStore).prototype)||!bt&&!be.includes(Ge))return;const Xe=function(){var se=(0,d.Z)(function*(pe,...me){const Ne=this.transaction(pe,bt?"readwrite":"readonly");let Me=Ne.store;return Qe&&(Me=Me.index(me.shift())),(yield Promise.all([Me[Ge](...me),bt&&Ne.done]))[0]});return function(me){return se.apply(this,arguments)}}();return je.set(fe,Xe),Xe}!function _e(z){ke=z(ke)}(z=>({...z,get:(fe,Ge,Qe)=>We(fe,Ge)||z.get(fe,Ge,Qe),has:(fe,Ge)=>!!We(fe,Ge)||z.has(fe,Ge)}))},5861:(St,Oe,O)=>{function d(k,ee,Ee,ge,oe,le,we){try{var j=k[le](we),H=j.value}catch(K){return void Ee(K)}j.done?ee(H):Promise.resolve(H).then(ge,oe)}function U(k){return function(){var ee=this,Ee=arguments;return new Promise(function(ge,oe){var le=k.apply(ee,Ee);function we(H){d(le,ge,oe,we,j,"next",H)}function j(H){d(le,ge,oe,we,j,"throw",H)}we(void 0)})}}O.d(Oe,{Z:()=>U})}},St=>{St(St.s=9356)}]);