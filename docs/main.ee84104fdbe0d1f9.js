"use strict";(self.webpackChunkrevise=self.webpackChunkrevise||[]).push([[179],{2011:(At,Ne,O)=>{O.d(Ne,{Dh:()=>ce,GT:()=>me,cc:()=>Oe,hO:()=>ke,on:()=>j,pX:()=>Ee,xv:()=>we});var d=O(4650),U=O(9260),k=O(4027);At=O.hmd(At);const ee=["ngOnDestroy"],Ee=(ie,dt,gt,Me={})=>new Proxy(ie,{get:(be,De)=>gt.runOutsideAngular(()=>{var je;if(ie[De])return!(null===(je=Me?.spy)||void 0===je)&&je.get&&Me.spy.get(De,ie[De]),ie[De];if(ee.indexOf(De)>-1)return()=>{};const We=dt.toPromise().then(z=>{const fe=z&&z[De];return"function"==typeof fe?fe.bind(z):fe&&fe.then?fe.then(Ge=>gt.run(()=>Ge)):gt.run(()=>fe)});return new Proxy(()=>{},{get:(z,fe)=>We[fe],apply:(z,fe,Ge)=>We.then(Ye=>{var Tt;const Xe=Ye&&Ye(...Ge);return!(null===(Tt=Me?.spy)||void 0===Tt)&&Tt.apply&&Me.spy.apply(De,Ge,Xe),Xe})})})}),me=(ie,dt)=>{dt.forEach(gt=>{Object.getOwnPropertyNames(gt.prototype||gt).forEach(Me=>{Object.defineProperty(ie.prototype,Me,Object.getOwnPropertyDescriptor(gt.prototype||gt,Me))})})};class oe{constructor(dt){return dt}}const ce=new d.OlP("angularfire2.app.options"),we=new d.OlP("angularfire2.app.name");function j(ie,dt,gt){const be="object"==typeof gt&&gt||{};be.name=be.name||"string"==typeof gt&&gt||"[DEFAULT]";const je=U.Z.apps.filter(We=>We&&We.name===be.name)[0]||dt.runOutsideAngular(()=>U.Z.initializeApp(ie,be));try{JSON.stringify(ie)!==JSON.stringify(je.options)&&H("error",`${je.name} Firebase App already initialized with different options${At.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new oe(je)}const H=(ie,...dt)=>{(0,d.X6Q)()&&typeof console<"u"&&console[ie](...dt)},K={provide:oe,useFactory:j,deps:[ce,d.R0b,[new d.FiY,we]]};let ke=(()=>{class ie{constructor(gt){U.Z.registerVersion("angularfire",k.q4.full,"core"),U.Z.registerVersion("angularfire",k.q4.full,"app-compat"),U.Z.registerVersion("angular",d.q4F.full,gt.toString())}static initializeApp(gt,Me){return{ngModule:ie,providers:[{provide:ce,useValue:gt},{provide:we,useValue:Me}]}}}return ie.\u0275fac=function(gt){return new(gt||ie)(d.LFG(d.Lbi))},ie.\u0275mod=d.oAB({type:ie}),ie.\u0275inj=d.cJS({providers:[K]}),ie})();function Oe(ie,dt,gt,Me,be){const[,De,je]=globalThis.\u0275AngularfireInstanceCache.find(We=>We[0]===ie)||[];if(De)return function ye(ie,dt){try{return ie.toString()===dt.toString()}catch{return ie===dt}}(be,je)||(ve("error",`${dt} was already initialized on the ${gt} Firebase App with different settings.${qe?" You may need to reload as Firebase is not HMR aware.":""}`),ve("warn",{is:be,was:je})),De;{const We=Me();return globalThis.\u0275AngularfireInstanceCache.push([ie,We,be]),We}}const qe=!!At.hot,ve=(ie,...dt)=>{(0,d.X6Q)()&&typeof console<"u"&&console[ie](...dt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4027:(At,Ne,O)=>{O.d(Ne,{q4:()=>ve,iC:()=>Et,HU:()=>pe,vb:()=>Ye,JM:()=>Ge,nk:()=>fe,n1:()=>We,_J:()=>z,u3:()=>Ft});var d=O(4650),U=O(259),k=O(4880),ee=O(751),Ee=O(3008),me=O(4408),ce=O(7565);const j=new class we extends ce.v{}(class oe extends me.o{constructor(Ke,mt){super(Ke,mt),this.scheduler=Ke,this.work=mt}schedule(Ke,mt=0){return mt>0?super.schedule(Ke,mt):(this.delay=mt,this.state=Ke,this.scheduler.flush(this),this)}execute(Ke,mt){return mt>0||this.closed?super.execute(Ke,mt):this._execute(Ke,mt)}requestAsyncId(Ke,mt,jt=0){return null!=jt&&jt>0||null==jt&&this.delay>0?super.requestAsyncId(Ke,mt,jt):(Ke.flush(this),0)}});var K=O(4986),ke=O(9751),Oe=O(8505),ye=O(9468),qe=O(5363);const ve=new d.GfV("7.5.0"),ie="__angularfire_symbol__analyticsIsSupportedValue",dt="__angularfire_symbol__analyticsIsSupported",gt="__angularfire_symbol__remoteConfigIsSupportedValue",Me="__angularfire_symbol__remoteConfigIsSupported",be="__angularfire_symbol__messagingIsSupportedValue",De="__angularfire_symbol__messagingIsSupported";globalThis[dt]||(globalThis[dt]=(0,Ee.Gb)().then(Fe=>globalThis[ie]=Fe).catch(()=>globalThis[ie]=!1)),globalThis[De]||(globalThis[De]=(0,ee.Gb)().then(Fe=>globalThis[be]=Fe).catch(()=>globalThis[be]=!1)),globalThis[Me]||(globalThis[Me]=(0,k.Gb)().then(Fe=>globalThis[gt]=Fe).catch(()=>globalThis[gt]=!1));const je=Fe=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${Fe} in the constructor, first ensure that ${Fe} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${Fe})\`.`,We={async:()=>globalThis[De],sync:()=>{const Fe=globalThis[be];if(void 0===Fe)throw new Error(je("Messaging"));return Fe}},z={async:()=>globalThis[Me],sync:()=>{const Fe=globalThis[gt];if(void 0===Fe)throw new Error(je("RemoteConfig"));return Fe}},fe={async:()=>globalThis[dt],sync:()=>{const Fe=globalThis[ie];if(void 0===Fe)throw new Error(je("Analytics"));return Fe}};function Ge(Fe,Ke,mt){if(Ke){if(1===Ke.length)return Ke[0];const qt=Ke.filter(Rn=>Rn.app===mt);if(1===qt.length)return qt[0]}return mt.container.getProvider(Fe).getImmediate({optional:!0})}const Ye=(Fe,Ke)=>{const mt=Ke?[Ke]:(0,U.C6)(),jt=[];return mt.forEach(en=>{en.container.getProvider(Fe).instances.forEach(Rn=>{jt.includes(Rn)||jt.push(Rn)})}),jt};function Tt(){}class Xe{constructor(Ke,mt=j){this.zone=Ke,this.delegate=mt}now(){return this.delegate.now()}schedule(Ke,mt,jt){const en=this.zone;return this.delegate.schedule(function(Rn){en.runGuarded(()=>{Ke.apply(this,[Rn])})},mt,jt)}}class se{constructor(Ke){this.zone=Ke,this.task=null}call(Ke,mt){const jt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Tt,{},Tt,Tt)),mt.pipe((0,Oe.b)({next:jt,complete:jt,error:jt})).subscribe(Ke).add(jt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let pe=(()=>{class Fe{constructor(mt){this.ngZone=mt,this.outsideAngular=mt.runOutsideAngular(()=>new Xe(Zone.current)),this.insideAngular=mt.run(()=>new Xe(Zone.current,K.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return Fe.\u0275fac=function(mt){return new(mt||Fe)(d.LFG(d.R0b))},Fe.\u0275prov=d.Yz7({token:Fe,factory:Fe.\u0275fac,providedIn:"root"}),Fe})();function _e(){const Fe=globalThis.\u0275AngularFireScheduler;if(!Fe)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Fe}function Pe(Fe){return _e().ngZone.runOutsideAngular(()=>Fe())}function Ae(Fe){return _e().ngZone.run(()=>Fe())}function Et(Fe){return _e(),function kt(Fe){return function(mt){return(mt=mt.lift(new se(Fe.ngZone))).pipe((0,ye.R)(Fe.outsideAngular),(0,qe.Q)(Fe.insideAngular))}}(_e())(Fe)}const tt=(Fe,Ke)=>function(){const jt=arguments;return Ke&&setTimeout(()=>{"scheduled"===Ke.state&&Ke.invoke()},10),Ae(()=>Fe.apply(void 0,jt))},Ft=(Fe,Ke)=>function(){let mt;const jt=arguments;for(let qt=0;qt<arguments.length;qt++)"function"==typeof jt[qt]&&(Ke&&(mt||(mt=Ae(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Tt,{},Tt,Tt)))),jt[qt]=tt(jt[qt],mt));const en=Pe(()=>Fe.apply(this,jt));if(!Ke){if(en instanceof ke.y){const qt=_e();return en.pipe((0,ye.R)(qt.outsideAngular),(0,qe.Q)(qt.insideAngular))}return Ae(()=>en)}return en instanceof ke.y?en.pipe(Et):en instanceof Promise?Ae(()=>new Promise((qt,Rn)=>en.then(An=>Ae(()=>qt(An)),An=>Ae(()=>Rn(An))))):"function"==typeof en&&mt?function(){return setTimeout(()=>{mt&&"scheduled"===mt.state&&mt.invoke()},10),en.apply(this,arguments)}:Ae(()=>en)}},8277:(At,Ne,O)=>{O.d(Ne,{$:()=>Ya,A:()=>H,D:()=>Oe,I:()=>Hs,J:()=>rs,L:()=>Lr,N:()=>an,P:()=>ui,Q:()=>fp,R:()=>H_,U:()=>p0,V:()=>qa,W:()=>wi,X:()=>Ga,Y:()=>xr,Z:()=>m0,_:()=>Td,a:()=>go,a0:()=>Bi,a1:()=>xd,a2:()=>b_,a3:()=>_0,a4:()=>y0,a5:()=>Nd,a6:()=>Xa,a7:()=>v0,a8:()=>wl,a9:()=>T_,aA:()=>z,aB:()=>th,aC:()=>Pt,aD:()=>Vn,aE:()=>kl,aF:()=>sa,aG:()=>pu,aH:()=>Jn,aL:()=>Xo,aO:()=>Ws,aa:()=>D_,ab:()=>Il,ac:()=>E0,ad:()=>sr,ae:()=>w0,af:()=>C0,ai:()=>bl,aj:()=>vp,ak:()=>A_,an:()=>C_,ao:()=>wp,aq:()=>O_,ar:()=>Vd,as:()=>Ge,at:()=>re,au:()=>X,av:()=>Me,aw:()=>Cu,ax:()=>Np,ay:()=>$e,az:()=>be,b:()=>uu,c:()=>or,d:()=>Qd,e:()=>G_,f:()=>gu,g:()=>Rp,h:()=>K_,i:()=>ea,j:()=>Pp,k:()=>Tu,l:()=>W_,m:()=>wo,o:()=>B0,p:()=>ce,r:()=>N0,s:()=>du,u:()=>O0,x:()=>iu});var d=O(5861),U=O(2090),k=O(9681),ee=O(655),Ee=O(1877),me=O(4859);const ce={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},H={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Oe=function K(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},ye=function ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qe=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ie=new Ee.Yd("@firebase/auth");function gt(E,...p){ie.logLevel<=Ee.in.ERROR&&ie.error(`Auth (${k.SDK_VERSION}): ${E}`,...p)}function Me(E,...p){throw We(E,...p)}function be(E,...p){return We(E,...p)}function De(E,p,_){const w=Object.assign(Object.assign({},ye()),{[p]:_});return new U.LL("auth","Firebase",w).create(p,{appName:E.name})}function je(E,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&Me(E,"argument-error"),De(E,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function We(E,...p){if("string"!=typeof E){const _=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=E.name),E._errorFactory.create(_,...w)}return qe.create(E,...p)}function z(E,p,..._){if(!E)throw We(p,..._)}function fe(E){const p="INTERNAL ASSERTION FAILED: "+E;throw gt(p),new Error(p)}function Ge(E,p){E||fe(p)}function Ye(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Tt(){return"http:"===Xe()||"https:"===Xe()}function Xe(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class _e{constructor(p,_){this.shortDelay=p,this.longDelay=_,Ge(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function se(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Tt()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pe(E,p){Ge(E.emulator,"Emulator should always be set here");const{url:_}=E.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class Ae{static initialize(p,_,w){this.fetchImpl=p,_&&(this.headersImpl=_),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Te={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},et=new _e(3e4,6e4);function Et(E,p){return E.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:E.tenantId}):p}function kt(E,p,_,w){return tt.apply(this,arguments)}function tt(){return(tt=(0,d.Z)(function*(E,p,_,w,M={}){return Ft(E,M,(0,d.Z)(function*(){let P={},Q={};w&&("GET"===p?Q=w:P={body:JSON.stringify(w)});const he=(0,U.xO)(Object.assign({key:E.config.apiKey},Q)).slice(1),Je=yield E._getAdditionalHeaders();return Je["Content-Type"]="application/json",E.languageCode&&(Je["X-Firebase-Locale"]=E.languageCode),Ae.fetch()(jt(E,E.config.apiHost,_,he),Object.assign({method:p,headers:Je,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Ft(E,p,_){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,d.Z)(function*(E,p,_){E._canInitEmulator=!1;const w=Object.assign(Object.assign({},Te),p);try{const M=new en(E),P=yield Promise.race([_(),M.promise]);M.clearNetworkTimeout();const Q=yield P.json();if("needConfirmation"in Q)throw qt(E,"account-exists-with-different-credential",Q);if(P.ok&&!("errorMessage"in Q))return Q;{const he=P.ok?Q.errorMessage:Q.error.message,[Je,ct]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Je)throw qt(E,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Je)throw qt(E,"email-already-in-use",Q);if("USER_DISABLED"===Je)throw qt(E,"user-disabled",Q);const Ut=w[Je]||Je.toLowerCase().replace(/[_\s]+/g,"-");if(ct)throw De(E,Ut,ct);Me(E,Ut)}}catch(M){if(M instanceof U.ZR)throw M;Me(E,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function Ke(E,p,_,w){return mt.apply(this,arguments)}function mt(){return(mt=(0,d.Z)(function*(E,p,_,w,M={}){const P=yield kt(E,p,_,w,M);return"mfaPendingCredential"in P&&Me(E,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function jt(E,p,_,w){const M=`${p}${_}?${w}`;return E.config.emulator?Pe(E.config,M):`${E.config.apiScheme}://${M}`}class en{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,w)=>{this.timer=setTimeout(()=>w(be(this.auth,"network-request-failed")),et.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qt(E,p,_){const w={appName:E.name};_.email&&(w.email=_.email),_.phoneNumber&&(w.phoneNumber=_.phoneNumber);const M=be(E,p,w);return M.customData._tokenResponse=_,M}function An(){return(An=(0,d.Z)(function*(E,p){return kt(E,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Qn(E,p){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,d.Z)(function*(E,p){return kt(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function at(E,p){return Z.apply(this,arguments)}function Z(){return(Z=(0,d.Z)(function*(E,p){return kt(E,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function xe(E){if(E)try{const p=new Date(Number(E));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Jt(){return(Jt=(0,d.Z)(function*(E,p=!1){const _=(0,U.m9)(E),w=yield _.getIdToken(p),M=tn(w);z(M&&M.exp&&M.auth_time&&M.iat,_.auth,"internal-error");const P="object"==typeof M.firebase?M.firebase:void 0,Q=P?.sign_in_provider;return{claims:M,token:w,authTime:xe(pn(M.auth_time)),issuedAtTime:xe(pn(M.iat)),expirationTime:xe(pn(M.exp)),signInProvider:Q||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function pn(E){return 1e3*Number(E)}function tn(E){const[p,_,w]=E.split(".");if(void 0===p||void 0===_||void 0===w)return gt("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,U.tV)(_);return M?JSON.parse(M):(gt("Failed to decode base64 JWT payload"),null)}catch(M){return gt("Caught error parsing JWT payload as JSON",M?.toString()),null}}function Mt(E,p){return rt.apply(this,arguments)}function rt(){return(rt=(0,d.Z)(function*(E,p,_=!1){if(_)return p;try{return yield p}catch(w){throw w instanceof U.ZR&&ft(w)&&E.auth.currentUser===E&&(yield E.auth.signOut()),w}})).apply(this,arguments)}function ft({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class Kt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const M=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),w)}iteration(){var p=this;return(0,d.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&p.schedule(!0))}p.schedule()})()}}class Pn{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=xe(this.lastLoginAt),this.creationTime=xe(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function yn(E){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,d.Z)(function*(E){var p;const _=E.auth,w=yield E.getIdToken(),M=yield Mt(E,at(_,{idToken:w}));z(M?.users.length,_,"internal-error");const P=M.users[0];E._notifyReloadListener(P);const Q=null!==(p=P.providerUserInfo)&&void 0!==p&&p.length?ir(P.providerUserInfo):[],he=Nt(E.providerData,Q),Ut=!!E.isAnonymous&&!(E.email&&P.passwordHash||he?.length),cn={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:he,metadata:new Pn(P.createdAt,P.lastLoginAt),isAnonymous:Ut};Object.assign(E,cn)})).apply(this,arguments)}function On(){return(On=(0,d.Z)(function*(E){const p=(0,U.m9)(E);yield yn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Nt(E,p){return[...E.filter(w=>!p.some(M=>M.providerId===w.providerId)),...p]}function ir(E){return E.map(p=>{var{providerId:_}=p,w=(0,ee._T)(p,["providerId"]);return{providerId:_,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Zn(){return(Zn=(0,d.Z)(function*(E,p){const _=yield Ft(E,{},(0,d.Z)(function*(){const w=(0,U.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:M,apiKey:P}=E.config,Q=jt(E,M,"/v1/token",`key=${P}`),he=yield E._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",Ae.fetch()(Q,{method:"POST",headers:he,body:w})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class vn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){z(p.idToken,"internal-error"),z(typeof p.idToken<"u","internal-error"),z(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Xt(E){const p=tn(E);return z(p,"internal-error"),z(typeof p.exp<"u","internal-error"),z(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var w=this;return(0,d.Z)(function*(){return z(!w.accessToken||w.refreshToken,p,"user-token-expired"),_||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var w=this;return(0,d.Z)(function*(){const{accessToken:M,refreshToken:P,expiresIn:Q}=yield function sn(E,p){return Zn.apply(this,arguments)}(p,_);w.updateTokensAndExpiration(M,P,Number(Q))})()}updateTokensAndExpiration(p,_,w){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,_){const{refreshToken:w,accessToken:M,expirationTime:P}=_,Q=new vn;return w&&(z("string"==typeof w,"internal-error",{appName:p}),Q.refreshToken=w),M&&(z("string"==typeof M,"internal-error",{appName:p}),Q.accessToken=M),P&&(z("number"==typeof P,"internal-error",{appName:p}),Q.expirationTime=P),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new vn,this.toJSON())}_performRefresh(){return fe("not implemented")}}function st(E,p){z("string"==typeof E||typeof E>"u","internal-error",{appName:p})}class Se{constructor(p){var{uid:_,auth:w,stsTokenManager:M}=p,P=(0,ee._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=w,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Pn(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,d.Z)(function*(){const w=yield Mt(_,_.stsTokenManager.getToken(_.auth,p));return z(w,_.auth,"internal-error"),_.accessToken!==w&&(_.accessToken=w,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),w})()}getIdTokenResult(p){return function _t(E){return Jt.apply(this,arguments)}(this,p)}reload(){return function Lt(E){return On.apply(this,arguments)}(this)}_assign(p){this!==p&&(z(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const _=new Se(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(p){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var w=this;return(0,d.Z)(function*(){let M=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),M=!0),_&&(yield yn(w)),yield w.auth._persistUserIfCurrent(w),M&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,d.Z)(function*(){const _=yield p.getIdToken();return yield Mt(p,function Rn(E,p){return An.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var w,M,P,Q,he,Je,ct,Ut;const cn=null!==(w=_.displayName)&&void 0!==w?w:void 0,ci=null!==(M=_.email)&&void 0!==M?M:void 0,Io=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,Zl=null!==(Q=_.photoURL)&&void 0!==Q?Q:void 0,Yl=null!==(he=_.tenantId)&&void 0!==he?he:void 0,Ql=null!==(Je=_._redirectEventId)&&void 0!==Je?Je:void 0,Mu=null!==(ct=_.createdAt)&&void 0!==ct?ct:void 0,Jl=null!==(Ut=_.lastLoginAt)&&void 0!==Ut?Ut:void 0,{uid:Xl,emailVerified:ec,isAnonymous:uh,providerData:lh,stsTokenManager:Zs}=_;z(Xl&&Zs,p,"internal-error");const ua=vn.fromJSON(this.name,Zs);z("string"==typeof Xl,p,"internal-error"),st(cn,p.name),st(ci,p.name),z("boolean"==typeof ec,p,"internal-error"),z("boolean"==typeof uh,p,"internal-error"),st(Io,p.name),st(Zl,p.name),st(Yl,p.name),st(Ql,p.name),st(Mu,p.name),st(Jl,p.name);const la=new Se({uid:Xl,auth:p,email:ci,emailVerified:ec,displayName:cn,isAnonymous:uh,photoURL:Zl,phoneNumber:Io,tenantId:Yl,stsTokenManager:ua,createdAt:Mu,lastLoginAt:Jl});return lh&&Array.isArray(lh)&&(la.providerData=lh.map(Lp=>Object.assign({},Lp))),Ql&&(la._redirectEventId=Ql),la}static _fromIdTokenResponse(p,_,w=!1){return(0,d.Z)(function*(){const M=new vn;M.updateFromServerResponse(_);const P=new Se({uid:_.localId,auth:p,stsTokenManager:M,isAnonymous:w});return yield yn(P),P})()}}const yt=new Map;function Pt(E){Ge(E instanceof Function,"Expected a class definition");let p=yt.get(E);return p?(Ge(p instanceof E,"Instance stored in cache mismatched with class"),p):(p=new E,yt.set(E,p),p)}const an=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,w){var M=this;return(0,d.Z)(function*(){M.storage[_]=w})()}_get(_){var w=this;return(0,d.Z)(function*(){const M=w.storage[_];return void 0===M?null:M})()}_remove(_){var w=this;return(0,d.Z)(function*(){delete w.storage[_]})()}_addListener(_,w){}_removeListener(_,w){}}return E.type="NONE",E})();function Vn(E,p,_){return`firebase:${E}:${p}:${_}`}class ${constructor(p,_,w){this.persistence=p,this.auth=_,this.userKey=w;const{config:M,name:P}=this.auth;this.fullUserKey=Vn(this.userKey,M.apiKey,P),this.fullPersistenceKey=Vn("persistence",M.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?Se._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,d.Z)(function*(){if(_.persistence===p)return;const w=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,w?_.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,w="authUser"){return(0,d.Z)(function*(){if(!_.length)return new $(Pt(an),p,w);const M=(yield Promise.all(_.map(function(){var ct=(0,d.Z)(function*(Ut){if(yield Ut._isAvailable())return Ut});return function(Ut){return ct.apply(this,arguments)}}()))).filter(ct=>ct);let P=M[0]||Pt(an);const Q=Vn(w,p.config.apiKey,p.name);let he=null;for(const ct of _)try{const Ut=yield ct._get(Q);if(Ut){const cn=Se._fromJSON(p,Ut);ct!==P&&(he=cn),P=ct;break}}catch{}const Je=M.filter(ct=>ct._shouldAllowMigration);return P._shouldAllowMigration&&Je.length?(P=Je[0],he&&(yield P._set(Q,he.toJSON())),yield Promise.all(_.map(function(){var ct=(0,d.Z)(function*(Ut){if(Ut!==P)try{yield Ut._remove(Q)}catch{}});return function(Ut){return ct.apply(this,arguments)}}())),new $(P,p,w)):new $(P,p,w)})()}}function B(E){const p=E.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(L(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(N(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(de(p))return"Blackberry";if(Ue(p))return"Webos";if(S(p))return"Safari";if((p.includes("chrome/")||A(p))&&!p.includes("edge/"))return"Chrome";if(X(p))return"Android";{const w=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function N(E=(0,U.z$)()){return/firefox\//i.test(E)}function S(E=(0,U.z$)()){const p=E.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function A(E=(0,U.z$)()){return/crios\//i.test(E)}function L(E=(0,U.z$)()){return/iemobile/i.test(E)}function X(E=(0,U.z$)()){return/android/i.test(E)}function de(E=(0,U.z$)()){return/blackberry/i.test(E)}function Ue(E=(0,U.z$)()){return/webos/i.test(E)}function re(E=(0,U.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function $e(E=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function Vt(E=(0,U.z$)()){return re(E)||X(E)||Ue(E)||de(E)||/windows phone/i.test(E)||L(E)}function Y(E,p=[]){let _;switch(E){case"Browser":_=B((0,U.z$)());break;case"Worker":_=`${B((0,U.z$)())}-${E}`;break;default:_=E}const w=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${k.SDK_VERSION}/${w}`}function ut(){return(ut=(0,d.Z)(function*(E){return(yield kt(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function wt(E,p){return nt.apply(this,arguments)}function nt(){return(nt=(0,d.Z)(function*(E,p){return kt(E,"GET","/v2/recaptchaConfig",Et(E,p))})).apply(this,arguments)}function W(E){return void 0!==E&&void 0!==E.getResponse}function ae(E){return void 0!==E&&void 0!==E.enterprise}class He{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function nn(E){return new Promise((p,_)=>{const w=document.createElement("script");w.setAttribute("src",E),w.onload=p,w.onerror=M=>{const P=be("internal-error");P.customData=M,_(P)},w.type="text/javascript",w.charset="UTF-8",function It(){var E,p;return null!==(p=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==p?p:document}().appendChild(w)})}function mn(E){return`__${E}${Math.floor(1e6*Math.random())}`}class si{constructor(p){this.type="recaptcha-enterprise",this.auth=Jn(p)}verify(p="verify",_=!1){var w=this;return(0,d.Z)(function*(){function P(){return P=(0,d.Z)(function*(he){if(!_){if(null==he.tenantId&&null!=he._agentRecaptchaConfig)return he._agentRecaptchaConfig.siteKey;if(null!=he.tenantId&&void 0!==he._tenantRecaptchaConfigs[he.tenantId])return he._tenantRecaptchaConfigs[he.tenantId].siteKey}return new Promise(function(){var Je=(0,d.Z)(function*(ct,Ut){wt(he,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(cn=>{if(void 0!==cn.recaptchaKey){const ci=new He(cn);return null==he.tenantId?he._agentRecaptchaConfig=ci:he._tenantRecaptchaConfigs[he.tenantId]=ci,ct(ci.siteKey)}Ut(new Error("recaptcha Enterprise site key undefined"))}).catch(cn=>{Ut(cn)})});return function(ct,Ut){return Je.apply(this,arguments)}}())}),P.apply(this,arguments)}function Q(he,Je,ct){const Ut=window.grecaptcha;ae(Ut)?Ut.enterprise.ready(()=>{try{Ut.enterprise.execute(he,{action:p}).then(cn=>{Je(cn)}).catch(cn=>{ct(cn)})}catch(cn){ct(cn)}}):ct(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((he,Je)=>{(function M(he){return P.apply(this,arguments)})(w.auth).then(ct=>{if(!_&&ae(window.grecaptcha))Q(ct,he,Je);else{if(typeof window>"u")return void Je(new Error("RecaptchaVerifier is only supported in browser"));nn("https://www.google.com/recaptcha/enterprise.js?render="+ct).then(()=>{Q(ct,he,Je)}).catch(Ut=>{Je(Ut)})}}).catch(ct=>{Je(ct)})})})()}}function dr(E,p,_){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,d.Z)(function*(E,p,_,w=!1){const M=new si(E);let P;try{P=yield M.verify(_)}catch{P=yield M.verify(_,!0)}const Q=Object.assign({},p);return Object.assign(Q,w?{captchaResp:P}:{captchaResponse:P}),Object.assign(Q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Q})).apply(this,arguments)}class p_{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const w=P=>new Promise((Q,he)=>{try{Q(p(P))}catch(Je){he(Je)}});w.onAbort=_,this.queue.push(w);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,d.Z)(function*(){if(_.auth.currentUser===p)return;const w=[];try{for(const M of _.queue)yield M(p),M.onAbort&&w.push(M.onAbort)}catch(M){w.reverse();for(const P of w)try{P()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class np{constructor(p,_,w,M){this.app=p,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=w,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pl(this),this.idTokenSubscription=new pl(this),this.beforeStateQueue=new p_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(p,_){var w=this;return _&&(this._popupRedirectResolver=Pt(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var M,P;if(!w._deleted&&(w.persistenceManager=yield $.create(w,p),!w._deleted)){if(null!==(M=w._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(_),w.lastNotifiedUid=(null===(P=w.currentUser)||void 0===P?void 0:P.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,d.Z)(function*(){var w;const M=yield _.assertedPersistence.getCurrentUser();let P=M,Q=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const he=null===(w=_.redirectUser)||void 0===w?void 0:w._redirectEventId,Je=P?._redirectEventId,ct=yield _.tryRedirectSignIn(p);(!he||he===Je)&&ct?.user&&(P=ct.user,Q=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(Q)try{yield _.beforeStateQueue.runMiddleware(P)}catch(he){P=M,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(he))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return z(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(p){var _=this;return(0,d.Z)(function*(){let w=null;try{w=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,d.Z)(function*(){try{yield yn(p)}catch(w){if("auth/network-request-failed"!==w?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function pe(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var p=this;return(0,d.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,d.Z)(function*(){const w=p?(0,U.m9)(p):null;return w&&z(w.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(w&&w._clone(_))})()}_updateCurrentUser(p,_=!1){var w=this;return(0,d.Z)(function*(){if(!w._deleted)return p&&z(w.tenantId===p.tenantId,w,"tenant-id-mismatch"),_||(yield w.beforeStateQueue.runMiddleware(p)),w.queue((0,d.Z)(function*(){yield w.directlySetCurrentUser(p),w.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(Pt(p))}))}initializeRecaptchaConfig(){var p=this;return(0,d.Z)(function*(){const _=yield wt(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),w=new He(_);null==p.tenantId?p._agentRecaptchaConfig=w:p._tenantRecaptchaConfigs[p.tenantId]=w,w.emailPasswordEnabled&&new si(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new U.LL("auth","Firebase",p())}onAuthStateChanged(p,_,w){return this.registerStateListener(this.authStateSubscription,p,_,w)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,w){return this.registerStateListener(this.idTokenSubscription,p,_,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var w=this;return(0,d.Z)(function*(){const M=yield w.getOrInitRedirectPersistenceManager(_);return null===p?M.removeCurrentUser():M.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const w=p&&Pt(p)||_._popupRedirectResolver;z(w,_,"argument-error"),_.redirectPersistenceManager=yield $.create(_,[Pt(w._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,d.Z)(function*(){var w,M;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(w=_._currentUser)||void 0===w?void 0:w._redirectEventId)===p?_._currentUser:(null===(M=_.redirectUser)||void 0===M?void 0:M._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,d.Z)(function*(){if(p===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,w,M){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return z(Q,this,"internal-error"),Q.then(()=>P(this.currentUser)),"function"==typeof _?p.addObserver(_,w,M):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Y(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,d.Z)(function*(){var _;const w={"X-Client-Version":p.clientVersion};p.app.options.appId&&(w["X-Firebase-gmpid"]=p.app.options.appId);const M=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();M&&(w["X-Firebase-Client"]=M);const P=yield p._getAppCheckToken();return P&&(w["X-Firebase-AppCheck"]=P),w})()}_getAppCheckToken(){var p=this;return(0,d.Z)(function*(){var _;const w=yield null===(_=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return w?.error&&function dt(E,...p){ie.logLevel<=Ee.in.WARN&&ie.warn(`Auth (${k.SDK_VERSION}): ${E}`,...p)}(`Error while retrieving App Check token: ${w.error}`),w?.token})()}}function Jn(E){return(0,U.m9)(E)}class pl{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,U.ne)(_=>this.observer=_)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Hs(E,p,_){const w=Jn(E);z(w._canInitEmulator,w,"emulator-config-failed"),z(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const M=!!_?.disableWarnings,P=gr(p),{host:Q,port:he}=function g_(E){const p=gr(E),_=/(\/\/)?([^?#/]+)/.exec(E.substr(p.length));if(!_)return{host:"",port:null};const w=_[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(w);if(M){const P=M[1];return{host:P,port:zr(w.substr(P.length+1))}}{const[P,Q]=w.split(":");return{host:P,port:zr(Q)}}}(p);w.config.emulator={url:`${P}//${Q}${null===he?"":`:${he}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Q,port:he,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function vi(){function E(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function gr(E){const p=E.indexOf(":");return p<0?"":E.substr(0,p+1)}function zr(E){if(!E)return null;const p=Number(E);return isNaN(p)?null:p}class rs{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return fe("not implemented")}_getIdTokenResponse(p){return fe("not implemented")}_linkToIdToken(p,_){return fe("not implemented")}_getReauthenticationResolver(p){return fe("not implemented")}}function Ha(E,p){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,d.Z)(function*(E,p){return kt(E,"POST","/v1/accounts:resetPassword",Et(E,p))})).apply(this,arguments)}function Ui(E,p){return gl.apply(this,arguments)}function gl(){return(gl=(0,d.Z)(function*(E,p){return kt(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function u0(E,p){return Go.apply(this,arguments)}function Go(){return(Go=(0,d.Z)(function*(E,p){return kt(E,"POST","/v1/accounts:update",Et(E,p))})).apply(this,arguments)}function Ed(E,p){return m_.apply(this,arguments)}function m_(){return(m_=(0,d.Z)(function*(E,p){return Ke(E,"POST","/v1/accounts:signInWithPassword",Et(E,p))})).apply(this,arguments)}function Ei(E,p){return rp.apply(this,arguments)}function rp(){return(rp=(0,d.Z)(function*(E,p){return kt(E,"POST","/v1/accounts:sendOobCode",Et(E,p))})).apply(this,arguments)}function l0(E,p){return ip.apply(this,arguments)}function ip(){return(ip=(0,d.Z)(function*(E,p){return Ei(E,p)})).apply(this,arguments)}function sp(E,p){return op.apply(this,arguments)}function op(){return(op=(0,d.Z)(function*(E,p){return Ei(E,p)})).apply(this,arguments)}function ap(E,p){return up.apply(this,arguments)}function up(){return(up=(0,d.Z)(function*(E,p){return Ei(E,p)})).apply(this,arguments)}function c0(E,p){return lp.apply(this,arguments)}function lp(){return(lp=(0,d.Z)(function*(E,p){return Ei(E,p)})).apply(this,arguments)}function cp(){return(cp=(0,d.Z)(function*(E,p){return Ke(E,"POST","/v1/accounts:signInWithEmailLink",Et(E,p))})).apply(this,arguments)}function ml(){return(ml=(0,d.Z)(function*(E,p){return Ke(E,"POST","/v1/accounts:signInWithEmailLink",Et(E,p))})).apply(this,arguments)}class oo extends rs{constructor(p,_,w,M=null){super("password",w),this._email=p,this._password=_,this._tenantId=M}static _fromEmailAndPassword(p,_){return new oo(p,_,"password")}static _fromEmailAndCode(p,_,w=null){return new oo(p,_,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,d.Z)(function*(){var w;switch(_.signInMethod){case"password":const M={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=p._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const P=yield dr(p,M,"signInWithPassword");return Ed(p,P)}return Ed(p,M).catch(function(){var P=(0,d.Z)(function*(Q){if("auth/missing-recaptcha-token"===Q.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const he=yield dr(p,M,"signInWithPassword");return Ed(p,he)}return Promise.reject(Q)});return function(Q){return P.apply(this,arguments)}}());case"emailLink":return function d0(E,p){return cp.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:Me(p,"internal-error")}})()}_linkToIdToken(p,_){var w=this;return(0,d.Z)(function*(){switch(w.signInMethod){case"password":return Ui(p,{idToken:_,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function h0(E,p){return ml.apply(this,arguments)}(p,{idToken:_,email:w._email,oobCode:w._password});default:Me(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function zs(E,p){return dp.apply(this,arguments)}function dp(){return(dp=(0,d.Z)(function*(E,p){return Ke(E,"POST","/v1/accounts:signInWithIdp",Et(E,p))})).apply(this,arguments)}class Lr extends rs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new Lr(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):Me("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:M}=_,P=(0,ee._T)(_,["providerId","signInMethod"]);if(!w||!M)return null;const Q=new Lr(w,M);return Q.idToken=P.idToken||void 0,Q.accessToken=P.accessToken||void 0,Q.secret=P.secret,Q.nonce=P.nonce,Q.pendingToken=P.pendingToken||null,Q}_getIdTokenResponse(p){return zs(p,this.buildRequest())}_linkToIdToken(p,_){const w=this.buildRequest();return w.idToken=_,zs(p,w)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,zs(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,U.xO)(_)}return p}}function __(E,p){return za.apply(this,arguments)}function za(){return(za=(0,d.Z)(function*(E,p){return kt(E,"POST","/v1/accounts:sendVerificationCode",Et(E,p))})).apply(this,arguments)}function Wa(){return(Wa=(0,d.Z)(function*(E,p){return Ke(E,"POST","/v1/accounts:signInWithPhoneNumber",Et(E,p))})).apply(this,arguments)}function _l(){return(_l=(0,d.Z)(function*(E,p){const _=yield Ke(E,"POST","/v1/accounts:signInWithPhoneNumber",Et(E,p));if(_.temporaryProof)throw qt(E,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const y_={USER_NOT_FOUND:"user-not-found"};function qo(){return(qo=(0,d.Z)(function*(E,p){return Ke(E,"POST","/v1/accounts:signInWithPhoneNumber",Et(E,Object.assign(Object.assign({},p),{operation:"REAUTH"})),y_)})).apply(this,arguments)}class ao extends rs{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new ao({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new ao({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function hp(E,p){return Wa.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function wd(E,p){return _l.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function v_(E,p){return qo.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:w,verificationCode:M}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:w,code:M}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:w,phoneNumber:M,temporaryProof:P}=p;return w||_||M||P?new ao({verificationId:_,verificationCode:w,phoneNumber:M,temporaryProof:P}):null}}class Ko{constructor(p){var _,w,M,P,Q,he;const Je=(0,U.zd)((0,U.pd)(p)),ct=null!==(_=Je.apiKey)&&void 0!==_?_:null,Ut=null!==(w=Je.oobCode)&&void 0!==w?w:null,cn=function Mi(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Je.mode)&&void 0!==M?M:null);z(ct&&Ut&&cn,"argument-error"),this.apiKey=ct,this.operation=cn,this.code=Ut,this.continueUrl=null!==(P=Je.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Q=Je.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(he=Je.tenantId)&&void 0!==he?he:null}static parseLink(p){const _=function Cd(E){const p=(0,U.zd)((0,U.pd)(E)).link,_=p?(0,U.zd)((0,U.pd)(p)).deep_link_id:null,w=(0,U.zd)((0,U.pd)(E)).deep_link_id;return(w?(0,U.zd)((0,U.pd)(w)).link:null)||w||_||p||E}(p);try{return new Ko(_)}catch{return null}}}let fp=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(_,w){return oo._fromEmailAndPassword(_,w)}static credentialWithLink(_,w){const M=Ko.parseLink(w);return z(M,"argument-error"),oo._fromEmailAndCode(_,M.code,M.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class uo{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Xn extends uo{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Ga extends Xn{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return z("providerId"in _&&"signInMethod"in _,"argument-error"),Lr._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return z(p.idToken||p.accessToken,"argument-error"),Lr._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Ga.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Ga.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:w,oauthTokenSecret:M,pendingToken:P,nonce:Q,providerId:he}=p;if(!w&&!M&&!_&&!P||!he)return null;try{return new Ga(he)._credential({idToken:_,accessToken:w,nonce:Q,pendingToken:P})}catch{return null}}}let p0=(()=>{class E extends Xn{constructor(){super("facebook.com")}static credential(_){return Lr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),qa=(()=>{class E extends Xn{constructor(){super("google.com"),this.addScope("profile")}static credential(_,w){return Lr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:w})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:M}=_;if(!w&&!M)return null;try{return E.credential(w,M)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),wi=(()=>{class E extends Xn{constructor(){super("github.com")}static credential(_){return Lr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Ws extends rs{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return zs(p,this.buildRequest())}_linkToIdToken(p,_){const w=this.buildRequest();return w.idToken=_,zs(p,w)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,zs(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:M,pendingToken:P}=_;return w&&M&&P&&w===M?new Ws(w,P):null}static _create(p,_){return new Ws(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xr extends uo{constructor(p){z(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return xr.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return xr.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=Ws.fromJSON(p);return z(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:w}=p;if(!_||!w)return null;try{return Ws._create(w,_)}catch{return null}}}let m0=(()=>{class E extends Xn{constructor(){super("twitter.com")}static credential(_,w){return Lr._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:w})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:w,oauthTokenSecret:M}=_;if(!w||!M)return null;try{return E.credential(w,M)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function lo(E,p){return bd.apply(this,arguments)}function bd(){return(bd=(0,d.Z)(function*(E,p){return Ke(E,"POST","/v1/accounts:signUp",Et(E,p))})).apply(this,arguments)}class wr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,w,M=!1){return(0,d.Z)(function*(){const P=yield Se._fromIdTokenResponse(p,w,M),Q=Zo(w);return new wr({user:P,providerId:Q,_tokenResponse:w,operationType:_})})()}static _forOperation(p,_,w){return(0,d.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const M=Zo(w);return new wr({user:p,providerId:M,_tokenResponse:w,operationType:_})})()}}function Zo(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function Td(E){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,d.Z)(function*(E){var p;const _=Jn(E);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new wr({user:_.currentUser,providerId:null,operationType:"signIn"});const w=yield lo(_,{returnSecureToken:!0}),M=yield wr._fromIdTokenResponse(_,"signIn",w,!0);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class Za extends U.ZR{constructor(p,_,w,M){var P;super(_.code,_.message),this.operationType=w,this.user=M,Object.setPrototypeOf(this,Za.prototype),this.customData={appName:p.name,tenantId:null!==(P=p.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,_,w,M){return new Za(p,_,w,M)}}function E_(E,p,_,w){return("reauthenticate"===p?_._getReauthenticationResolver(E):_._getIdTokenResponse(E)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Za._fromErrorAndOperation(E,P,p,w):P})}function w_(E){return new Set(E.map(({providerId:p})=>p).filter(p=>!!p))}function C_(E,p){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,d.Z)(function*(E,p){const _=(0,U.m9)(E);yield Ad(!0,_,p);const{providerUserInfo:w}=yield Qn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),M=w_(w||[]);return _.providerData=_.providerData.filter(P=>M.has(P.providerId)),M.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function yl(E,p){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,d.Z)(function*(E,p,_=!1){const w=yield Mt(E,p._linkToIdToken(E.auth,yield E.getIdToken()),_);return wr._forOperation(E,"link",w)})).apply(this,arguments)}function Ad(E,p,_){return Le.apply(this,arguments)}function Le(){return(Le=(0,d.Z)(function*(E,p,_){yield yn(p);const M=!1===E?"provider-already-linked":"no-such-provider";z(w_(p.providerData).has(_)===E,p.auth,M)})).apply(this,arguments)}function Tn(E,p){return vl.apply(this,arguments)}function vl(){return(vl=(0,d.Z)(function*(E,p,_=!1){const{auth:w}=E,M="reauthenticate";try{const P=yield Mt(E,E_(w,M,p,E),_);z(P.idToken,w,"internal-error");const Q=tn(P.idToken);z(Q,w,"internal-error");const{sub:he}=Q;return z(E.uid===he,w,"user-mismatch"),wr._forOperation(E,M,P)}catch(P){throw"auth/user-not-found"===P?.code&&Me(w,"user-mismatch"),P}})).apply(this,arguments)}function Md(E,p){return mr.apply(this,arguments)}function mr(){return(mr=(0,d.Z)(function*(E,p,_=!1){const w="signIn",M=yield E_(E,w,p),P=yield wr._fromIdTokenResponse(E,w,M);return _||(yield E._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Ya(E,p){return co.apply(this,arguments)}function co(){return(co=(0,d.Z)(function*(E,p){return Md(Jn(E),p)})).apply(this,arguments)}function Bi(E,p){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,d.Z)(function*(E,p){const _=(0,U.m9)(E);return yield Ad(!1,_,p.providerId),yl(_,p)})).apply(this,arguments)}function xd(E,p){return pp.apply(this,arguments)}function pp(){return(pp=(0,d.Z)(function*(E,p){return Tn((0,U.m9)(E),p)})).apply(this,arguments)}function hr(E,p){return I_.apply(this,arguments)}function I_(){return(I_=(0,d.Z)(function*(E,p){return Ke(E,"POST","/v1/accounts:signInWithCustomToken",Et(E,p))})).apply(this,arguments)}function b_(E,p){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,d.Z)(function*(E,p){const _=Jn(E),w=yield hr(_,{token:p,returnSecureToken:!0}),M=yield wr._fromIdTokenResponse(_,"signIn",w);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class xi{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?Rd._fromServerResponse(p,_):"totpInfo"in _?ho._fromServerResponse(p,_):Me(p,"internal-error")}}class Rd extends xi{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new Rd(_)}}class ho extends xi{constructor(p){super("totp",p)}static _fromServerResponse(p,_){return new ho(_)}}function oi(E,p,_){var w;z((null===(w=_.url)||void 0===w?void 0:w.length)>0,E,"invalid-continue-uri"),z(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(z(_.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(z(_.android.packageName.length>0,E,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function _0(E,p,_){return Pd.apply(this,arguments)}function Pd(){return Pd=(0,d.Z)(function*(E,p,_){var w;const M=Jn(E),P={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=M._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const Q=yield dr(M,P,"getOobCode",!0);_&&oi(M,Q,_),yield sp(M,Q)}else _&&oi(M,P,_),yield sp(M,P).catch(function(){var Q=(0,d.Z)(function*(he){if("auth/missing-recaptcha-token"!==he.code)return Promise.reject(he);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Je=yield dr(M,P,"getOobCode",!0);_&&oi(M,Je,_),yield sp(M,Je)}});return function(he){return Q.apply(this,arguments)}}())}),Pd.apply(this,arguments)}function y0(E,p,_){return El.apply(this,arguments)}function El(){return(El=(0,d.Z)(function*(E,p,_){yield Ha((0,U.m9)(E),{oobCode:p,newPassword:_})})).apply(this,arguments)}function Nd(E,p){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,d.Z)(function*(E,p){yield u0((0,U.m9)(E),{oobCode:p})})).apply(this,arguments)}function Xa(E,p){return Is.apply(this,arguments)}function Is(){return(Is=(0,d.Z)(function*(E,p){const _=(0,U.m9)(E),w=yield Ha(_,{oobCode:p}),M=w.requestType;switch(z(M,_,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":z(w.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":z(w.mfaInfo,_,"internal-error");default:z(w.email,_,"internal-error")}let P=null;return w.mfaInfo&&(P=xi._fromServerResponse(Jn(_),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:P},operation:M}})).apply(this,arguments)}function v0(E,p){return Od.apply(this,arguments)}function Od(){return(Od=(0,d.Z)(function*(E,p){const{data:_}=yield Xa((0,U.m9)(E),p);return _.email})).apply(this,arguments)}function wl(E,p,_){return eu.apply(this,arguments)}function eu(){return eu=(0,d.Z)(function*(E,p,_){var w;const M=Jn(E),P={returnSecureToken:!0,email:p,password:_,clientType:"CLIENT_TYPE_WEB"};let Q;if(null!==(w=M._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const ct=yield dr(M,P,"signUpPassword");Q=lo(M,ct)}else Q=lo(M,P).catch(function(){var ct=(0,d.Z)(function*(Ut){if("auth/missing-recaptcha-token"===Ut.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const cn=yield dr(M,P,"signUpPassword");return lo(M,cn)}return Promise.reject(Ut)});return function(Ut){return ct.apply(this,arguments)}}());const he=yield Q.catch(ct=>Promise.reject(ct)),Je=yield wr._fromIdTokenResponse(M,"signIn",he);return yield M._updateCurrentUser(Je.user),Je}),eu.apply(this,arguments)}function T_(E,p,_){return Ya((0,U.m9)(E),fp.credential(p,_))}function D_(E,p,_){return Cl.apply(this,arguments)}function Cl(){return Cl=(0,d.Z)(function*(E,p,_){var w;const M=Jn(E),P={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function Q(he,Je){z(Je.handleCodeInApp,M,"argument-error"),Je&&oi(M,he,Je)}if(null!==(w=M._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const he=yield dr(M,P,"getOobCode",!0);Q(he,_),yield ap(M,he)}else Q(P,_),yield ap(M,P).catch(function(){var he=(0,d.Z)(function*(Je){if("auth/missing-recaptcha-token"!==Je.code)return Promise.reject(Je);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ct=yield dr(M,P,"getOobCode",!0);Q(ct,_),yield ap(M,ct)}});return function(Je){return he.apply(this,arguments)}}())}),Cl.apply(this,arguments)}function Il(E,p){return"EMAIL_SIGNIN"===Ko.parseLink(p)?.operation}function E0(E,p,_){return gp.apply(this,arguments)}function gp(){return(gp=(0,d.Z)(function*(E,p,_){const w=(0,U.m9)(E),M=fp.credentialWithLink(p,_||Ye());return z(M._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Ya(w,M)})).apply(this,arguments)}function ai(E,p){return bs.apply(this,arguments)}function bs(){return(bs=(0,d.Z)(function*(E,p){return kt(E,"POST","/v1/accounts:createAuthUri",Et(E,p))})).apply(this,arguments)}function sr(E,p){return mp.apply(this,arguments)}function mp(){return(mp=(0,d.Z)(function*(E,p){const w={identifier:p,continueUri:Tt()?Ye():"http://localhost"},{signinMethods:M}=yield ai((0,U.m9)(E),w);return M||[]})).apply(this,arguments)}function w0(E,p){return _p.apply(this,arguments)}function _p(){return(_p=(0,d.Z)(function*(E,p){const _=(0,U.m9)(E),M={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};p&&oi(_.auth,M,p);const{email:P}=yield l0(_.auth,M);P!==E.email&&(yield E.reload())})).apply(this,arguments)}function C0(E,p,_){return yp.apply(this,arguments)}function yp(){return(yp=(0,d.Z)(function*(E,p,_){const w=(0,U.m9)(E),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:p};_&&oi(w.auth,P,_);const{email:Q}=yield c0(w.auth,P);Q!==E.email&&(yield E.reload())})).apply(this,arguments)}function S_(E,p){return tu.apply(this,arguments)}function tu(){return(tu=(0,d.Z)(function*(E,p){return kt(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function bl(E,p){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,d.Z)(function*(E,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const w=(0,U.m9)(E),P={idToken:yield w.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},Q=yield Mt(w,S_(w.auth,P));w.displayName=Q.displayName||null,w.photoURL=Q.photoUrl||null;const he=w.providerData.find(({providerId:Je})=>"password"===Je);he&&(he.displayName=w.displayName,he.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Q)})).apply(this,arguments)}function vp(E,p){return M_((0,U.m9)(E),p,null)}function A_(E,p){return M_((0,U.m9)(E),null,p)}function M_(E,p,_){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,d.Z)(function*(E,p,_){const{auth:w}=E,P={idToken:yield E.getIdToken(),returnSecureToken:!0};p&&(P.email=p),_&&(P.password=_);const Q=yield Mt(E,Ui(w,P));yield E._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class nu{constructor(p,_,w={}){this.isNewUser=p,this.providerId=_,this.profile=w}}class x_ extends nu{constructor(p,_,w,M){super(p,_,w),this.username=M}}class Dl extends nu{constructor(p,_){super(p,"facebook.com",_)}}class Ep extends x_{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class I0 extends nu{constructor(p,_){super(p,"google.com",_)}}class R_ extends x_{constructor(p,_,w){super(p,"twitter.com",_,w)}}function wp(E){const{user:p,_tokenResponse:_}=E;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Tl(E){var p,_;if(!E)return null;const{providerId:w}=E,M=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},P=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!w&&E?.idToken){const Q=null===(_=null===(p=tn(E.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(Q)return new nu(P,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!w)return null;switch(w){case"facebook.com":return new Dl(P,M);case"github.com":return new Ep(P,M);case"google.com":return new I0(P,M);case"twitter.com":return new R_(P,M,E.screenName||null);case"custom":case"anonymous":return new nu(P,null);default:return new nu(P,w,M)}}(_)}function iu(E,p,_,w){return(0,U.m9)(E).onAuthStateChanged(p,_,w)}class Ri{constructor(p,_,w){this.type=p,this.credential=_,this.auth=w}static _fromIdtoken(p,_){return new Ri("enroll",p,_)}static _fromMfaPendingCredential(p){return new Ri("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,w;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Ri._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(w=p.multiFactorSession)&&void 0!==w&&w.idToken)return Ri._fromIdtoken(p.multiFactorSession.idToken)}return null}}class fo{constructor(p,_,w){this.session=p,this.hints=_,this.signInResolver=w}static _fromError(p,_){const w=Jn(p),M=_.customData._serverResponse,P=(M.mfaInfo||[]).map(he=>xi._fromServerResponse(w,he));z(M.mfaPendingCredential,w,"internal-error");const Q=Ri._fromMfaPendingCredential(M.mfaPendingCredential);return new fo(Q,P,function(){var he=(0,d.Z)(function*(Je){const ct=yield Je._process(w,Q);delete M.mfaInfo,delete M.mfaPendingCredential;const Ut=Object.assign(Object.assign({},M),{idToken:ct.idToken,refreshToken:ct.refreshToken});switch(_.operationType){case"signIn":const cn=yield wr._fromIdTokenResponse(w,_.operationType,Ut);return yield w._updateCurrentUser(cn.user),cn;case"reauthenticate":return z(_.user,w,"internal-error"),wr._forOperation(_.user,_.operationType,Ut);default:Me(w,"internal-error")}});return function(Je){return he.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,d.Z)(function*(){return _.signInResolver(p)})()}}function O_(E,p){var _;const w=(0,U.m9)(E),M=p;return z(p.customData.operationType,w,"argument-error"),z(null===(_=M.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,w,"argument-error"),fo._fromError(w,M)}function Qo(E,p){return kt(E,"POST","/v2/accounts/mfaEnrollment:start",Et(E,p))}class Gs{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(w=>xi._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new Gs(p)}getSession(){var p=this;return(0,d.Z)(function*(){return Ri._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,_){var w=this;return(0,d.Z)(function*(){const M=p,P=yield w.getSession(),Q=yield Mt(w.user,M._process(w.user.auth,P,_));return yield w.user._updateTokensIfNecessary(Q),w.user.reload()})()}unenroll(p){var _=this;return(0,d.Z)(function*(){const w="string"==typeof p?p:p.uid,M=yield _.user.getIdToken();try{const P=yield Mt(_.user,function bp(E,p){return kt(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Et(E,p))}(_.user.auth,{idToken:M,mfaEnrollmentId:w}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Q})=>Q!==w),yield _.user._updateTokensIfNecessary(P),yield _.user.reload()}catch(P){throw P}})()}}const ou=new WeakMap;function Vd(E){const p=(0,U.m9)(E);return ou.has(p)||ou.set(p,Gs._fromUser(p)),ou.get(p)}const po="__sak";class au{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(po,"1"),this.storage.removeItem(po),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const uu=(()=>{class E extends au{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,w)=>this.onStorageEvent(_,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Sl(){const E=(0,U.z$)();return S(E)||re(E)}()&&function un(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Vt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const w of Object.keys(this.listeners)){const M=this.storage.getItem(w),P=this.localCache[w];M!==P&&_(w,P,M)}}onStorageEvent(_,w=!1){if(!_.key)return void this.forAllChangedKeys((he,Je,ct)=>{this.notifyListeners(he,ct)});const M=_.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(M);if(_.newValue!==he)null!==_.newValue?this.storage.setItem(M,_.newValue):this.storage.removeItem(M);else if(this.localCache[M]===_.newValue&&!w)return}const P=()=>{const he=this.storage.getItem(M);!w&&this.localCache[M]===he||this.notifyListeners(M,he)},Q=this.storage.getItem(M);!function Ht(){return(0,U.w1)()&&10===document.documentMode}()||Q===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,w){this.localCache[_]=w;const M=this.listeners[_];if(M)for(const P of Array.from(M))P(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,w,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:w,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,w){var M=()=>super._set,P=this;return(0,d.Z)(function*(){yield M().call(P,_,w),P.localCache[_]=JSON.stringify(w)})()}_get(_){var w=()=>super._get,M=this;return(0,d.Z)(function*(){const P=yield w().call(M,_);return M.localCache[_]=JSON.stringify(P),P})()}_remove(_){var w=()=>super._remove,M=this;return(0,d.Z)(function*(){yield w().call(M,_),delete M.localCache[_]})()}}return E.type="LOCAL",E})(),go=(()=>{class E extends au{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,w){}_removeListener(_,w){}}return E.type="SESSION",E})();let F_=(()=>{class E{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const w=this.receivers.find(P=>P.isListeningto(_));if(w)return w;const M=new E(_);return this.receivers.push(M),M}isListeningto(_){return this.eventTarget===_}handleEvent(_){var w=this;return(0,d.Z)(function*(){const M=_,{eventId:P,eventType:Q,data:he}=M.data,Je=w.handlersMap[Q];if(!Je?.size)return;M.ports[0].postMessage({status:"ack",eventId:P,eventType:Q});const ct=Array.from(Je).map(function(){var cn=(0,d.Z)(function*(ci){return ci(M.origin,he)});return function(ci){return cn.apply(this,arguments)}}()),Ut=yield function Jo(E){return Promise.all(E.map(function(){var p=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(w){return{fulfilled:!1,reason:w}}});return function(_){return p.apply(this,arguments)}}()))}(ct);M.ports[0].postMessage({status:"done",eventId:P,eventType:Q,response:Ut})})()}_subscribe(_,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(w)}_unsubscribe(_,w){this.handlersMap[_]&&w&&this.handlersMap[_].delete(w),(!w||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Xo(E="",p=10){let _="";for(let w=0;w<p;w++)_+=Math.floor(10*Math.random());return E+_}class Tp{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,w=50){var M=this;return(0,d.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Q,he;return new Promise((Je,ct)=>{const Ut=Xo("",20);P.port1.start();const cn=setTimeout(()=>{ct(new Error("unsupported_event"))},w);he={messageChannel:P,onMessage(ci){const Io=ci;if(Io.data.eventId===Ut)switch(Io.data.status){case"ack":clearTimeout(cn),Q=setTimeout(()=>{ct(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Je(Io.data.response);break;default:clearTimeout(cn),clearTimeout(Q),ct(new Error("invalid_response"))}}},M.handlers.add(he),P.port1.addEventListener("message",he.onMessage),M.target.postMessage({eventType:p,eventId:Ut,data:_},[P.port2])}).finally(()=>{he&&M.removeMessageHandler(he)})})()}}function Gn(){return window}function Al(){return typeof Gn().WorkerGlobalScope<"u"&&"function"==typeof Gn().importScripts}function lu(){return(lu=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const qs="firebaseLocalStorageDb",Ds="firebaseLocalStorage",jd="fbase_key";class mo{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function is(E,p){return E.transaction([Ds],p?"readwrite":"readonly").objectStore(Ds)}function Ml(){const E=indexedDB.open(qs,1);return new Promise((p,_)=>{E.addEventListener("error",()=>{_(E.error)}),E.addEventListener("upgradeneeded",()=>{const w=E.result;try{w.createObjectStore(Ds,{keyPath:jd})}catch(M){_(M)}}),E.addEventListener("success",(0,d.Z)(function*(){const w=E.result;w.objectStoreNames.contains(Ds)?p(w):(w.close(),yield function D0(){const E=indexedDB.deleteDatabase(qs);return new mo(E).toPromise()}(),p(yield Ml()))}))})}function Un(E,p,_){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,d.Z)(function*(E,p,_){const w=is(E,!0).put({[jd]:p,value:_});return new mo(w).toPromise()})).apply(this,arguments)}function U_(){return(U_=(0,d.Z)(function*(E,p){const _=is(E,!1).get(p),w=yield new mo(_).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function B_(E,p){const _=is(E,!0).delete(p);return new mo(_).toPromise()}const ea=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield Ml()),_.db})()}_withRetries(_){var w=this;return(0,d.Z)(function*(){let M=0;for(;;)try{const P=yield w._openDb();return yield _(P)}catch(P){if(M++>3)throw P;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return Al()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=F_._getInstance(function Dp(){return Al()?self:null}()),_.receiver._subscribe("keyChanged",function(){var w=(0,d.Z)(function*(M,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(M,P){return w.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var w=(0,d.Z)(function*(M,P){return["keyChanged"]});return function(M,P){return w.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var w,M;if(_.activeServiceWorker=yield function $d(){return lu.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Tp(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);!P||(null===(w=P[0])||void 0===w?void 0:w.fulfilled)&&(null===(M=P[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var w=this;return(0,d.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function V_(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:_},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Ml();return yield Un(_,po,"1"),yield B_(_,po),!0}catch{}return!1})()}_withPendingWrite(_){var w=this;return(0,d.Z)(function*(){w.pendingWrites++;try{yield _()}finally{w.pendingWrites--}})()}_set(_,w){var M=this;return(0,d.Z)(function*(){return M._withPendingWrite((0,d.Z)(function*(){return yield M._withRetries(P=>Un(P,_,w)),M.localCache[_]=w,M.notifyServiceWorker(_)}))})()}_get(_){var w=this;return(0,d.Z)(function*(){const M=yield w._withRetries(P=>function S0(E,p){return U_.apply(this,arguments)}(P,_));return w.localCache[_]=M,M})()}_remove(_){var w=this;return(0,d.Z)(function*(){return w._withPendingWrite((0,d.Z)(function*(){return yield w._withRetries(M=>B_(M,_)),delete w.localCache[_],w.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const w=yield _._withRetries(Q=>{const he=is(Q,!1).getAll();return new mo(he).toPromise()});if(!w)return[];if(0!==_.pendingWrites)return[];const M=[],P=new Set;for(const{fbase_key:Q,value:he}of w)P.add(Q),JSON.stringify(_.localCache[Q])!==JSON.stringify(he)&&(_.notifyListeners(Q,he),M.push(Q));for(const Q of Object.keys(_.localCache))_.localCache[Q]&&!P.has(Q)&&(_.notifyListeners(Q,null),M.push(Q));return M})()}notifyListeners(_,w){this.localCache[_]=w;const M=this.listeners[_];if(M)for(const P of Array.from(M))P(w)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function M0(E,p){return kt(E,"POST","/v2/accounts/mfaSignIn:start",Et(E,p))}const zd=1e12;class j_{constructor(p){this.auth=p,this.counter=zd,this._widgets=new Map}render(p,_){const w=this.counter;return this._widgets.set(w,new Zr(p,this.auth.name,_||{})),this.counter++,w}reset(p){var _;const w=p||zd;null===(_=this._widgets.get(w))||void 0===_||_.delete(),this._widgets.delete(w)}getResponse(p){var _;return(null===(_=this._widgets.get(p||zd))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,d.Z)(function*(){var w;return null===(w=_._widgets.get(p||zd))||void 0===w||w.execute(),""})()}}class Zr{constructor(p,_,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof p?document.getElementById(p):p;z(M,"argument-error",{appName:_}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ss(E){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<E;w++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Wd=mn("rcb"),Gd=new _e(3e4,6e4);class Sp{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Gn().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return z(function x0(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(_),p,"argument-error"),this.shouldResolveImmediately(_)&&W(Gn().grecaptcha)?Promise.resolve(Gn().grecaptcha):new Promise((w,M)=>{const P=Gn().setTimeout(()=>{M(be(p,"network-request-failed"))},Gd.get());Gn()[Wd]=()=>{Gn().clearTimeout(P),delete Gn()[Wd];const he=Gn().grecaptcha;if(!he||!W(he))return void M(be(p,"internal-error"));const Je=he.render;he.render=(ct,Ut)=>{const cn=Je(ct,Ut);return this.counter++,cn},this.hostLanguage=_,w(he)},nn(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:Wd,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),M(be(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=Gn().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class R0{load(p){return(0,d.Z)(function*(){return new j_(p)})()}clearedOneInstance(){}}const P0="recaptcha",YD={theme:"light",type:"image"};class H_{constructor(p,_=Object.assign({},YD),w){this.parameters=_,this.type=P0,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Jn(w),this.isInvisible="invisible"===this.parameters.size,z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof p?document.getElementById(p):p;z(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new R0:new Sp,this.validateStartingState()}verify(){var p=this;return(0,d.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(_)||new Promise(P=>{const Q=he=>{!he||(p.tokenChangeListeners.delete(Q),P(he))};p.tokenChangeListeners.add(Q),p.isInvisible&&w.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){z(!this.parameters.sitekey,this.auth,"argument-error"),z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(w=>w(_)),"function"==typeof p)p(_);else if("string"==typeof p){const w=Gn()[p];"function"==typeof w&&w(_)}}}assertNotDestroyed(){z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const w=document.createElement("div");_.appendChild(w),_=w}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.Z)(function*(){z(Tt()&&!Al(),p.auth,"internal-error"),yield function Ci(){let E=null;return new Promise(p=>{"complete"!==document.readyState?(E=()=>p(),window.addEventListener("load",E)):p()}).catch(p=>{throw E&&window.removeEventListener("load",E),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function te(E){return ut.apply(this,arguments)}(p.auth);z(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Pl{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=ao._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function du(E,p,_){return z_.apply(this,arguments)}function z_(){return(z_=(0,d.Z)(function*(E,p,_){const w=Jn(E),M=yield qd(w,p,(0,U.m9)(_));return new Pl(M,P=>Ya(w,P))})).apply(this,arguments)}function W_(E,p,_){return Ap.apply(this,arguments)}function Ap(){return(Ap=(0,d.Z)(function*(E,p,_){const w=(0,U.m9)(E);yield Ad(!1,w,"phone");const M=yield qd(w.auth,p,(0,U.m9)(_));return new Pl(M,P=>Bi(w,P))})).apply(this,arguments)}function N0(E,p,_){return Mp.apply(this,arguments)}function Mp(){return(Mp=(0,d.Z)(function*(E,p,_){const w=(0,U.m9)(E),M=yield qd(w.auth,p,(0,U.m9)(_));return new Pl(M,P=>xd(w,P))})).apply(this,arguments)}function qd(E,p,_){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,d.Z)(function*(E,p,_){var w;const M=yield _.verify();try{let P;if(z("string"==typeof M,E,"argument-error"),z(_.type===P0,E,"argument-error"),P="string"==typeof p?{phoneNumber:p}:p,"session"in P){const Q=P.session;if("phoneNumber"in P)return z("enroll"===Q.type,E,"internal-error"),(yield Qo(E,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{z("signin"===Q.type,E,"internal-error");const he=(null===(w=P.multiFactorHint)||void 0===w?void 0:w.uid)||P.multiFactorUid;return z(he,E,"missing-multi-factor-info"),(yield M0(E,{mfaPendingCredential:Q.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield __(E,{phoneNumber:P.phoneNumber,recaptchaToken:M});return Q}}finally{_._reset()}})).apply(this,arguments)}function O0(E,p){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,d.Z)(function*(E,p){yield yl((0,U.m9)(E),p)})).apply(this,arguments)}let ui=(()=>{class E{constructor(_){this.providerId=E.PROVIDER_ID,this.auth=Jn(_)}verifyPhoneNumber(_,w){return qd(this.auth,_,(0,U.m9)(w))}static credential(_,w){return ao._fromVerification(_,w)}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:w,temporaryProof:M}=_;return w&&M?ao._fromTokenResponse(w,M):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function ta(E,p){return p?Pt(p):(z(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class _o extends rs{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return zs(p,this._buildIdpRequest())}_linkToIdToken(p,_){return zs(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return zs(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function Zd(E){return Md(E.auth,new _o(E),E.bypassAuthState)}function Nl(E){const{auth:p,user:_}=E;return z(_,p,"internal-error"),Tn(_,new _o(E),E.bypassAuthState)}function xp(E){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,d.Z)(function*(E){const{auth:p,user:_}=E;return z(_,p,"internal-error"),yl(_,new _o(E),E.bypassAuthState)})).apply(this,arguments)}class na{constructor(p,_,w,M,P=!1){this.auth=p,this.resolver=w,this.user=M,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,d.Z)(function*(w,M){p.pendingPromise={resolve:w,reject:M};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(P){p.reject(P)}});return function(w,M){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,d.Z)(function*(){const{urlResponse:w,sessionId:M,postBody:P,tenantId:Q,error:he,type:Je}=p;if(he)return void _.reject(he);const ct={auth:_.auth,requestUri:w,sessionId:M,tenantId:Q||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Je)(ct))}catch(Ut){_.reject(Ut)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Zd;case"linkViaPopup":case"linkViaRedirect":return xp;case"reauthViaPopup":case"reauthViaRedirect":return Nl;default:Me(this.auth,"internal-error")}}resolve(p){Ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yo=new _e(2e3,1e4);function or(E,p,_){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,d.Z)(function*(E,p,_){const w=Jn(E);je(E,p,uo);const M=ta(w,_);return new fu(w,"signInViaPopup",p,M).executeNotNull()})).apply(this,arguments)}function G_(E,p,_){return ar.apply(this,arguments)}function ar(){return(ar=(0,d.Z)(function*(E,p,_){const w=(0,U.m9)(E);je(w.auth,p,uo);const M=ta(w.auth,_);return new fu(w.auth,"reauthViaPopup",p,M,w).executeNotNull()})).apply(this,arguments)}function Qd(E,p,_){return hu.apply(this,arguments)}function hu(){return(hu=(0,d.Z)(function*(E,p,_){const w=(0,U.m9)(E);je(w.auth,p,uo);const M=ta(w.auth,_);return new fu(w.auth,"linkViaPopup",p,M,w).executeNotNull()})).apply(this,arguments)}let fu=(()=>{class E extends na{constructor(_,w,M,P,Q){super(_,w,P,Q),this.provider=M,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const w=yield _.execute();return z(w,_.auth,"internal-error"),w})()}onExecution(){var _=this;return(0,d.Z)(function*(){Ge(1===_.filter.length,"Popup operations only handle one event");const w=Xo();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],w),_.authWindow.associatedEvent=w,_.resolver._originValidation(_.auth).catch(M=>{_.reject(M)}),_.resolver._isIframeWebStorageSupported(_.auth,M=>{M||_.reject(be(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const _=()=>{var w,M;this.pollId=null!==(M=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(be(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,yo.get())};_()}}return E.currentPopupAction=null,E})();const ji=new Map;class os extends na{constructor(p,_,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,d.Z)(function*(){let w=ji.get(_.auth._key());if(!w){try{const P=(yield function q_(E,p){return ia.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;w=()=>Promise.resolve(P)}catch(M){w=()=>Promise.reject(M)}ji.set(_.auth._key(),w)}return _.bypassAuthState||ji.set(_.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,w=this;return(0,d.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(w,p);if("unknown"!==p.type){if(p.eventId){const M=yield w.auth._redirectUserForId(p.eventId);if(M)return w.user=M,_().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function ia(){return(ia=(0,d.Z)(function*(E,p){const _=Ii(p),w=Jd(E);if(!(yield w._isAvailable()))return!1;const M="true"===(yield w._get(_));return yield w._remove(_),M})).apply(this,arguments)}function vo(E,p){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,d.Z)(function*(E,p){return Jd(E)._set(Ii(p),"true")})).apply(this,arguments)}function pu(){ji.clear()}function sa(E,p){ji.set(E._key(),p)}function Jd(E){return Pt(E._redirectPersistence)}function Ii(E){return Vn("pendingRedirect",E.config.apiKey,E.name)}function gu(E,p,_){return function Vr(E,p,_){return as.apply(this,arguments)}(E,p,_)}function as(){return(as=(0,d.Z)(function*(E,p,_){const w=Jn(E);je(E,p,uo),yield w._initializationPromise;const M=ta(w,_);return yield vo(M,w),M._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function K_(E,p,_){return function mu(E,p,_){return Ks.apply(this,arguments)}(E,p,_)}function Ks(){return(Ks=(0,d.Z)(function*(E,p,_){const w=(0,U.m9)(E);je(w.auth,p,uo),yield w.auth._initializationPromise;const M=ta(w.auth,_);yield vo(M,w.auth);const P=yield yu(w);return M._openRedirect(w.auth,p,"reauthViaRedirect",P)})).apply(this,arguments)}function Rp(E,p,_){return function Z_(E,p,_){return _u.apply(this,arguments)}(E,p,_)}function _u(){return(_u=(0,d.Z)(function*(E,p,_){const w=(0,U.m9)(E);je(w.auth,p,uo),yield w.auth._initializationPromise;const M=ta(w.auth,_);yield Ad(!1,w,p.providerId),yield vo(M,w.auth);const P=yield yu(w);return M._openRedirect(w.auth,p,"linkViaRedirect",P)})).apply(this,arguments)}function Pp(E,p){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,d.Z)(function*(E,p){return yield Jn(E)._initializationPromise,kl(E,p,!1)})).apply(this,arguments)}function kl(E,p){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,d.Z)(function*(E,p,_=!1){const w=Jn(E),M=ta(w,p),Q=yield new os(w,M,_).execute();return Q&&!_&&(delete Q.user._redirectEventId,yield w._persistUserIfCurrent(Q.user),yield w._setRedirectUser(null,p)),Q})).apply(this,arguments)}function yu(E){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,d.Z)(function*(E){const p=Xo(`${E.uid}:::`);return E._redirectEventId=p,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),p})).apply(this,arguments)}class th{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(_=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function nh(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Y_(E);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var w;if(p.error&&!Y_(p)){const M=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";_.onError(be(this.auth,M))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const w=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ll(p))}saveEventToCache(p){this.cachedEventUids.add(Ll(p)),this.lastProcessedEventTime=Date.now()}}function Ll(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(p=>p).join("-")}function Y_({type:E,error:p}){return"unknown"===E&&"auth/no-auth-event"===p?.code}function Np(E){return vu.apply(this,arguments)}function vu(){return(vu=(0,d.Z)(function*(E,p={}){return kt(E,"GET","/v1/projects",p)})).apply(this,arguments)}const Op=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Eu=/^https?/;function rh(){return(rh=(0,d.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:p}=yield Np(E);for(const _ of p)try{if(Vl(_))return}catch{}Me(E,"unauthorized-domain")})).apply(this,arguments)}function Vl(E){const p=Ye(),{protocol:_,hostname:w}=new URL(p);if(E.startsWith("chrome-extension://")){const Q=new URL(E);return""===Q.hostname&&""===w?"chrome-extension:"===_&&E.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&Q.hostname===w}if(!Eu.test(_))return!1;if(Op.test(E))return w===E;const M=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(w)}const kp=new _e(3e4,6e4);function Ul(){const E=Gn().___jsl;if(E?.H)for(const p of Object.keys(E.H))if(E.H[p].r=E.H[p].r||[],E.H[p].L=E.H[p].L||[],E.H[p].r=[...E.H[p].L],E.CP)for(let _=0;_<E.CP.length;_++)E.CP[_]=null}let Bl=null;function X_(E){return Bl=Bl||function J_(E){return new Promise((p,_)=>{var w,M,P;function Q(){Ul(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Ul(),_(be(E,"network-request-failed"))},timeout:kp.get()})}if(null!==(M=null===(w=Gn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==M&&M.Iframe)p(gapi.iframes.getContext());else{if(null===(P=Gn().gapi)||void 0===P||!P.load){const he=mn("iframefcb");return Gn()[he]=()=>{gapi.load?Q():_(be(E,"network-request-failed"))},nn(`https://apis.google.com/js/api.js?onload=${he}`).catch(Je=>_(Je))}Q()}}).catch(p=>{throw Bl=null,p})}(E),Bl}const Yr=new _e(5e3,15e3),ey={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ty=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jl(E){const p=E.config;z(p.authDomain,E,"auth-domain-config-required");const _=p.emulator?Pe(p,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,w={apiKey:p.apiKey,appName:E.name,v:k.SDK_VERSION},M=ty.get(E.config.apiHost);M&&(w.eid=M);const P=E._getFrameworks();return P.length&&(w.fw=P.join(",")),`${_}?${(0,U.xO)(w).slice(1)}`}function wu(){return wu=(0,d.Z)(function*(E){const p=yield X_(E),_=Gn().gapi;return z(_,E,"internal-error"),p.open({where:document.body,url:jl(E),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ey,dontclear:!0},w=>new Promise(function(){var M=(0,d.Z)(function*(P,Q){yield w.restyle({setHideOnLeave:!1});const he=be(E,"network-request-failed"),Je=Gn().setTimeout(()=>{Q(he)},Yr.get());function ct(){Gn().clearTimeout(Je),P(w)}w.ping(ct).then(ct,()=>{Q(he)})});return function(P,Q){return M.apply(this,arguments)}}()))}),wu.apply(this,arguments)}const Hl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ry{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const li=encodeURIComponent("fac");function Cu(E,p,_,w,M,P){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,d.Z)(function*(E,p,_,w,M,P){z(E.config.authDomain,E,"auth-domain-config-required"),z(E.config.apiKey,E,"invalid-api-key");const Q={apiKey:E.config.apiKey,appName:E.name,authType:_,redirectUrl:w,v:k.SDK_VERSION,eventId:M};if(p instanceof uo){p.setDefaultLanguage(E.languageCode),Q.providerId=p.providerId||"",(0,U.xb)(p.getCustomParameters())||(Q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Ut,cn]of Object.entries(P||{}))Q[Ut]=cn}if(p instanceof Xn){const Ut=p.getScopes().filter(cn=>""!==cn);Ut.length>0&&(Q.scopes=Ut.join(","))}E.tenantId&&(Q.tid=E.tenantId);const he=Q;for(const Ut of Object.keys(he))void 0===he[Ut]&&delete he[Ut];const Je=yield E._getAppCheckToken(),ct=Je?`#${li}=${encodeURIComponent(Je)}`:"";return`${sh(E)}?${(0,U.xO)(he).slice(1)}${ct}`})).apply(this,arguments)}function sh({config:E}){return E.emulator?Pe(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}const Pr="webStorageSupport",Tu=class bu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=go,this._completeRedirectFn=kl,this._overrideRedirectResult=sa}_openPopup(p,_,w,M){var P=this;return(0,d.Z)(function*(){var Q;Ge(null===(Q=P.eventManagers[p._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const he=yield Cu(p,_,w,Ye(),M);return function F0(E,p,_,w=500,M=600){const P=Math.max((window.screen.availHeight-M)/2,0).toString(),Q=Math.max((window.screen.availWidth-w)/2,0).toString();let he="";const Je=Object.assign(Object.assign({},Hl),{width:w.toString(),height:M.toString(),top:P,left:Q}),ct=(0,U.z$)().toLowerCase();_&&(he=A(ct)?"_blank":_),N(ct)&&(p=p||"http://localhost",Je.scrollbars="yes");const Ut=Object.entries(Je).reduce((ci,[Io,Zl])=>`${ci}${Io}=${Zl},`,"");if(function Ze(E=(0,U.z$)()){var p;return re(E)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(ct)&&"_self"!==he)return function iy(E,p){const _=document.createElement("a");_.href=E,_.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(w)}(p||"",he),new ry(null);const cn=window.open(p||"",he,Ut);z(cn,E,"popup-blocked");try{cn.focus()}catch{}return new ry(cn)}(p,he,Xo())})()}_openRedirect(p,_,w,M){var P=this;return(0,d.Z)(function*(){return yield P._originValidation(p),function L_(E){Gn().location.href=E}(yield Cu(p,_,w,Ye(),M)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:M,promise:P}=this.eventManagers[_];return M?Promise.resolve(M):(Ge(P,"If manager is not set, promise should be"),P)}const w=this.initAndGetManager(p);return this.eventManagers[_]={promise:w},w.catch(()=>{delete this.eventManagers[_]}),w}initAndGetManager(p){var _=this;return(0,d.Z)(function*(){const w=yield function us(E){return wu.apply(this,arguments)}(p),M=new th(p);return w.register("authEvent",P=>(z(P?.authEvent,p,"invalid-auth-event"),{status:M.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:M},_.iframes[p._key()]=w,M})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(Pr,{type:Pr},M=>{var P;const Q=null===(P=M?.[0])||void 0===P?void 0:P[Pr];void 0!==Q&&_(!!Q),Me(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Q_(E){return rh.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return Vt()||S()||re()}};class oa extends class Du{constructor(p){this.factorId=p}_process(p,_,w){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,w);case"signin":return this._finalizeSignIn(p,_.credential);default:return fe("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new oa(p)}_finalizeEnroll(p,_,w){return function Ld(E,p){return kt(E,"POST","/v2/accounts/mfaEnrollment:finalize",Et(E,p))}(p,{idToken:_,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function ZD(E,p){return kt(E,"POST","/v2/accounts/mfaSignIn:finalize",Et(E,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let wo=(()=>{class E{constructor(){}static assertion(_){return oa._fromCredential(_)}}return E.FACTOR_ID="phone",E})();var ah="@firebase/auth";class Gl{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(w=>{p(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const U0=(0,U.Pz)("authIdTokenMaxAge")||300;let Au=null;const sy=E=>function(){var p=(0,d.Z)(function*(_){const w=_&&(yield _.getIdTokenResult()),M=w&&((new Date).getTime()-Date.parse(w.issuedAtTime))/1e3;if(M&&M>U0)return;const P=w?.token;Au!==P&&(Au=P,yield fetch(E,{method:P?"POST":"DELETE",headers:P?{Authorization:`Bearer ${P}`}:{}}))});return function(_){return p.apply(this,arguments)}}();function B0(E=(0,k.getApp)()){const p=(0,k._getProvider)(E,"auth");if(p.isInitialized())return p.getImmediate();const _=function Cs(E,p){const _=(0,k._getProvider)(E,"auth");if(_.isInitialized()){const M=_.getImmediate(),P=_.getOptions();if((0,U.vZ)(P,p??{}))return M;Me(M,"already-initialized")}return _.initialize({options:p})}(E,{popupRedirectResolver:Tu,persistence:[ea,uu,go]}),w=(0,U.Pz)("authTokenSyncURL");if(w){const P=sy(w);(function Cp(E,p,_){(0,U.m9)(E).beforeAuthStateChanged(p,_)})(_,P,()=>P(_.currentUser)),function ru(E,p,_,w){(0,U.m9)(E).onIdTokenChanged(p,_,w)}(_,Q=>P(Q))}const M=(0,U.q4)("auth");return M&&Hs(_,`http://${M}`),_}!function Fp(E){(0,k._registerComponent)(new me.wA("auth",(p,{options:_})=>{const w=p.getProvider("app").getImmediate(),M=p.getProvider("heartbeat"),P=p.getProvider("app-check-internal"),{apiKey:Q,authDomain:he}=w.options;z(Q&&!Q.includes(":"),"invalid-api-key",{appName:w.name}),z(!he?.includes(":"),"argument-error",{appName:w.name});const Je={apiKey:Q,authDomain:he,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Y(E)},ct=new np(w,M,P,Je);return function ja(E,p){const _=p?.persistence||[],w=(Array.isArray(_)?_:[_]).map(Pt);p?.errorMap&&E._updateErrorMap(p.errorMap),E._initializeWithPersistence(w,p?.popupRedirectResolver)}(ct,_),ct},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,w)=>{p.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new me.wA("auth-internal",p=>{const _=Jn(p.getProvider("auth").getImmediate());return new Gl(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(ah,"0.23.0",function ql(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,k.registerVersion)(ah,"0.23.0","esm2017")}("Browser")},2090:(At,Ne,O)=>{O.d(Ne,{$s:()=>Pt,BH:()=>De,DV:()=>Wn,G6:()=>Pe,GJ:()=>An,L:()=>we,LL:()=>tt,P0:()=>gt,Pz:()=>be,Sg:()=>je,UG:()=>fe,UI:()=>Z,US:()=>me,Wl:()=>mt,Yr:()=>_e,ZB:()=>K,ZR:()=>kt,aH:()=>Me,b$:()=>Tt,cI:()=>Ke,dS:()=>ir,eu:()=>Te,g5:()=>k,gK:()=>Mn,gQ:()=>Xt,h$:()=>ce,hl:()=>Ae,hu:()=>U,jU:()=>Ge,m9:()=>Vn,ne:()=>Mt,p$:()=>H,pd:()=>tn,q4:()=>dt,r3:()=>Qn,ru:()=>Ye,tV:()=>j,uI:()=>z,ug:()=>sn,vZ:()=>xe,w1:()=>se,w9:()=>Rn,xO:()=>Jt,xb:()=>at,z$:()=>We,zI:()=>et,zd:()=>pn});const U=function($,B){if(!$)throw k(B)},k=function($){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+$)},ee=function($){const B=[];let N=0;for(let S=0;S<$.length;S++){let A=$.charCodeAt(S);A<128?B[N++]=A:A<2048?(B[N++]=A>>6|192,B[N++]=63&A|128):55296==(64512&A)&&S+1<$.length&&56320==(64512&$.charCodeAt(S+1))?(A=65536+((1023&A)<<10)+(1023&$.charCodeAt(++S)),B[N++]=A>>18|240,B[N++]=A>>12&63|128,B[N++]=A>>6&63|128,B[N++]=63&A|128):(B[N++]=A>>12|224,B[N++]=A>>6&63|128,B[N++]=63&A|128)}return B},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,B){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const N=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,S=[];for(let A=0;A<$.length;A+=3){const L=$[A],X=A+1<$.length,de=X?$[A+1]:0,Ue=A+2<$.length,re=Ue?$[A+2]:0;let Ht=(15&de)<<2|re>>6,Vt=63&re;Ue||(Vt=64,X||(Ht=64)),S.push(N[L>>2],N[(3&L)<<4|de>>4],N[Ht],N[Vt])}return S.join("")},encodeString($,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa($):this.encodeByteArray(ee($),B)},decodeString($,B){return this.HAS_NATIVE_SUPPORT&&!B?atob($):function($){const B=[];let N=0,S=0;for(;N<$.length;){const A=$[N++];if(A<128)B[S++]=String.fromCharCode(A);else if(A>191&&A<224){const L=$[N++];B[S++]=String.fromCharCode((31&A)<<6|63&L)}else if(A>239&&A<365){const Ue=((7&A)<<18|(63&$[N++])<<12|(63&$[N++])<<6|63&$[N++])-65536;B[S++]=String.fromCharCode(55296+(Ue>>10)),B[S++]=String.fromCharCode(56320+(1023&Ue))}else{const L=$[N++],X=$[N++];B[S++]=String.fromCharCode((15&A)<<12|(63&L)<<6|63&X)}}return B.join("")}(this.decodeStringToByteArray($,B))},decodeStringToByteArray($,B){this.init_();const N=B?this.charToByteMapWebSafe_:this.charToByteMap_,S=[];for(let A=0;A<$.length;){const L=N[$.charAt(A++)],de=A<$.length?N[$.charAt(A)]:0;++A;const re=A<$.length?N[$.charAt(A)]:64;++A;const Ze=A<$.length?N[$.charAt(A)]:64;if(++A,null==L||null==de||null==re||null==Ze)throw new oe;S.push(L<<2|de>>4),64!==re&&(S.push(de<<4&240|re>>2),64!==Ze&&S.push(re<<6&192|Ze))}return S},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class oe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ce=function($){const B=ee($);return me.encodeByteArray(B,!0)},we=function($){return ce($).replace(/\./g,"")},j=function($){try{return me.decodeString($,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function H($){return K(void 0,$)}function K($,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return B}for(const N in B)!B.hasOwnProperty(N)||!ke(N)||($[N]=K($[N],B[N]));return $}function ke($){return"__proto__"!==$}const ie=()=>{try{return function Oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=$&&j($[1]);return B&&JSON.parse(B)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},dt=$=>{var B,N;return null===(N=null===(B=ie())||void 0===B?void 0:B.emulatorHosts)||void 0===N?void 0:N[$]},gt=$=>{const B=dt($);if(!B)return;const N=B.lastIndexOf(":");if(N<=0||N+1===B.length)throw new Error(`Invalid host ${B} with no separate hostname and port!`);const S=parseInt(B.substring(N+1),10);return"["===B[0]?[B.substring(1,N-1),S]:[B.substring(0,N),S]},Me=()=>{var $;return null===($=ie())||void 0===$?void 0:$.config},be=$=>{var B;return null===(B=ie())||void 0===B?void 0:B[`_${$}`]};class De{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,N)=>{this.resolve=B,this.reject=N})}wrapCallback(B){return(N,S)=>{N?this.reject(N):this.resolve(S),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(N):B(N,S))}}}function je($,B){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const S=B||"demo-project",A=$.iat||0,L=$.sub||$.user_id;if(!L)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const X=Object.assign({iss:`https://securetoken.google.com/${S}`,aud:S,iat:A,exp:A+3600,auth_time:A,sub:L,user_id:L,firebase:{sign_in_provider:"custom",identities:{}}},$);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(X)),""].join(".")}function We(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function z(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function fe(){var $;const B=null===($=ie())||void 0===$?void 0:$.forceEnvironment;if("node"===B)return!0;if("browser"===B)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ge(){return"object"==typeof self&&self.self===self}function Ye(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Tt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function se(){const $=We();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function _e(){return!1}function Pe(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ae(){try{return"object"==typeof indexedDB}catch{return!1}}function Te(){return new Promise(($,B)=>{try{let N=!0;const S="validate-browser-context-for-indexeddb-analytics-module",A=self.indexedDB.open(S);A.onsuccess=()=>{A.result.close(),N||self.indexedDB.deleteDatabase(S),$(!0)},A.onupgradeneeded=()=>{N=!1},A.onerror=()=>{var L;B((null===(L=A.error)||void 0===L?void 0:L.message)||"")}}catch(N){B(N)}})}function et(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class kt extends Error{constructor(B,N,S){super(N),this.code=B,this.customData=S,this.name="FirebaseError",Object.setPrototypeOf(this,kt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tt.prototype.create)}}class tt{constructor(B,N,S){this.service=B,this.serviceName=N,this.errors=S}create(B,...N){const S=N[0]||{},A=`${this.service}/${B}`,L=this.errors[B],X=L?function Ft($,B){return $.replace(Fe,(N,S)=>{const A=B[S];return null!=A?String(A):`<${S}?>`})}(L,S):"Error";return new kt(A,`${this.serviceName}: ${X} (${A}).`,S)}}const Fe=/\{\$([^}]+)}/g;function Ke($){return JSON.parse($)}function mt($){return JSON.stringify($)}const jt=function($){let B={},N={},S={},A="";try{const L=$.split(".");B=Ke(j(L[0])||""),N=Ke(j(L[1])||""),A=L[2],S=N.d||{},delete N.d}catch{}return{header:B,claims:N,data:S,signature:A}},Rn=function($){const N=jt($).claims;return!!N&&"object"==typeof N&&N.hasOwnProperty("iat")},An=function($){const B=jt($).claims;return"object"==typeof B&&!0===B.admin};function Qn($,B){return Object.prototype.hasOwnProperty.call($,B)}function Wn($,B){if(Object.prototype.hasOwnProperty.call($,B))return $[B]}function at($){for(const B in $)if(Object.prototype.hasOwnProperty.call($,B))return!1;return!0}function Z($,B,N){const S={};for(const A in $)Object.prototype.hasOwnProperty.call($,A)&&(S[A]=B.call(N,$[A],A,$));return S}function xe($,B){if($===B)return!0;const N=Object.keys($),S=Object.keys(B);for(const A of N){if(!S.includes(A))return!1;const L=$[A],X=B[A];if(ot(L)&&ot(X)){if(!xe(L,X))return!1}else if(L!==X)return!1}for(const A of S)if(!N.includes(A))return!1;return!0}function ot($){return null!==$&&"object"==typeof $}function Jt($){const B=[];for(const[N,S]of Object.entries($))Array.isArray(S)?S.forEach(A=>{B.push(encodeURIComponent(N)+"="+encodeURIComponent(A))}):B.push(encodeURIComponent(N)+"="+encodeURIComponent(S));return B.length?"&"+B.join("&"):""}function pn($){const B={};return $.replace(/^\?/,"").split("&").forEach(S=>{if(S){const[A,L]=S.split("=");B[decodeURIComponent(A)]=decodeURIComponent(L)}}),B}function tn($){const B=$.indexOf("?");if(!B)return"";const N=$.indexOf("#",B);return $.substring(B,N>0?N:void 0)}class Xt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,N){N||(N=0);const S=this.W_;if("string"==typeof B)for(let Ze=0;Ze<16;Ze++)S[Ze]=B.charCodeAt(N)<<24|B.charCodeAt(N+1)<<16|B.charCodeAt(N+2)<<8|B.charCodeAt(N+3),N+=4;else for(let Ze=0;Ze<16;Ze++)S[Ze]=B[N]<<24|B[N+1]<<16|B[N+2]<<8|B[N+3],N+=4;for(let Ze=16;Ze<80;Ze++){const Ht=S[Ze-3]^S[Ze-8]^S[Ze-14]^S[Ze-16];S[Ze]=4294967295&(Ht<<1|Ht>>>31)}let re,$e,A=this.chain_[0],L=this.chain_[1],X=this.chain_[2],de=this.chain_[3],Ue=this.chain_[4];for(let Ze=0;Ze<80;Ze++){Ze<40?Ze<20?(re=de^L&(X^de),$e=1518500249):(re=L^X^de,$e=1859775393):Ze<60?(re=L&X|de&(L|X),$e=2400959708):(re=L^X^de,$e=3395469782);const Ht=(A<<5|A>>>27)+re+Ue+$e+S[Ze]&4294967295;Ue=de,de=X,X=4294967295&(L<<30|L>>>2),L=A,A=Ht}this.chain_[0]=this.chain_[0]+A&4294967295,this.chain_[1]=this.chain_[1]+L&4294967295,this.chain_[2]=this.chain_[2]+X&4294967295,this.chain_[3]=this.chain_[3]+de&4294967295,this.chain_[4]=this.chain_[4]+Ue&4294967295}update(B,N){if(null==B)return;void 0===N&&(N=B.length);const S=N-this.blockSize;let A=0;const L=this.buf_;let X=this.inbuf_;for(;A<N;){if(0===X)for(;A<=S;)this.compress_(B,A),A+=this.blockSize;if("string"==typeof B){for(;A<N;)if(L[X]=B.charCodeAt(A),++X,++A,X===this.blockSize){this.compress_(L),X=0;break}}else for(;A<N;)if(L[X]=B[A],++X,++A,X===this.blockSize){this.compress_(L),X=0;break}}this.inbuf_=X,this.total_+=N}digest(){const B=[];let N=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let A=this.blockSize-1;A>=56;A--)this.buf_[A]=255&N,N/=256;this.compress_(this.buf_);let S=0;for(let A=0;A<5;A++)for(let L=24;L>=0;L-=8)B[S]=this.chain_[A]>>L&255,++S;return B}}function Mt($,B){const N=new rt($,B);return N.subscribe.bind(N)}class rt{constructor(B,N){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=N,this.task.then(()=>{B(this)}).catch(S=>{this.error(S)})}next(B){this.forEachObserver(N=>{N.next(B)})}error(B){this.forEachObserver(N=>{N.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,N,S){let A;if(void 0===B&&void 0===N&&void 0===S)throw new Error("Missing Observer.");A=function Kt($,B){if("object"!=typeof $||null===$)return!1;for(const N of B)if(N in $&&"function"==typeof $[N])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:N,complete:S},void 0===A.next&&(A.next=Pn),void 0===A.error&&(A.error=Pn),void 0===A.complete&&(A.complete=Pn);const L=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?A.error(this.finalError):A.complete()}catch{}}),this.observers.push(A),L}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let N=0;N<this.observers.length;N++)this.sendOne(N,B)}sendOne(B,N){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{N(this.observers[B])}catch(S){typeof console<"u"&&console.error&&console.error(S)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pn(){}function Mn($,B){return`${$} failed: ${B} argument `}const ir=function($){const B=[];let N=0;for(let S=0;S<$.length;S++){let A=$.charCodeAt(S);if(A>=55296&&A<=56319){const L=A-55296;S++,U(S<$.length,"Surrogate pair missing trail surrogate."),A=65536+(L<<10)+($.charCodeAt(S)-56320)}A<128?B[N++]=A:A<2048?(B[N++]=A>>6|192,B[N++]=63&A|128):A<65536?(B[N++]=A>>12|224,B[N++]=A>>6&63|128,B[N++]=63&A|128):(B[N++]=A>>18|240,B[N++]=A>>12&63|128,B[N++]=A>>6&63|128,B[N++]=63&A|128)}return B},sn=function($){let B=0;for(let N=0;N<$.length;N++){const S=$.charCodeAt(N);S<128?B++:S<2048?B+=2:S>=55296&&S<=56319?(B+=4,N++):B+=3}return B};function Pt($,B=1e3,N=2){const S=B*Math.pow(N,$),A=Math.round(.5*S*(Math.random()-.5)*2);return Math.min(144e5,S+A)}function Vn($){return $&&$._delegate?$._delegate:$}},2182:(At,Ne,O)=>{var d=O(4650);let U=null;function k(){return U}const oe=new d.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function we(){return(0,d.LFG)(H)}()},providedIn:"platform"}),n})();const j=new d.OlP("Location Initialized");let H=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){K()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){K()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ke(){return new H((0,d.LFG)(oe))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function Oe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ye(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function qe(n){return n&&"?"!==n[0]?"?"+n:n}let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(dt)},providedIn:"root"}),n})();const ie=new d.OlP("appBaseHref");let dt=(()=>{class n extends ve{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Oe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+qe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+qe(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+qe(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce),d.LFG(ie,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gt=(()=>{class n extends ve{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Oe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+qe(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+qe(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce),d.LFG(ie,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=ye(je(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qe(r))}normalize(t){return n.stripTrailingSlash(function De(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=qe,n.joinWithSlash=Oe,n.stripTrailingSlash=ye,n.\u0275fac=function(t){return new(t||n)(d.LFG(ve))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function be(){return new Me((0,d.LFG)(ve))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}class pl{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Cs=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new pl(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,l),ja(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{ja(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ja(n,e){n.context.$implicit=e.item}let gr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new g_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){zr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){zr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class g_{constructor(){this.$implicit=null,this.ngIf=null}}function zr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Go=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,a]=t.split("."),l=-1===i.indexOf("-")?void 0:d.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,a?`${r}${a}`:r,l):this._renderer.removeStyle(this._ngEl.nativeElement,i,l)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.aQg),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),v_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const qo="browser";function Ko(n){return n===qo}function Id(n){return"server"===n}let Ga=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new p0((0,d.LFG)(oe),window)}),n})();class p0{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function wi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=qa(this.window.history)||qa(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function qa(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class wp extends class R_ extends class me{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Ee(n){U||(U=n)}(new wp)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Fd(){return kd=kd||document.querySelector("base"),kd?kd.getAttribute("href"):null}();return null==t?null:function Cp(n){ru=ru||document.createElement("a"),ru.setAttribute("href",n);const e=ru.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){kd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function dr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let ru,kd=null;const iu=new d.OlP("TRANSITION_ID"),N_=[{provide:d.ip1,useFactory:function P_(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[iu,oe,d.zs3],multi:!0}];let b0=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const $i=new d.OlP("EventManagerPlugins");let Ri=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG($i),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class fo{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let O_=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Qo=(()=>{class n extends O_{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ld),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ld))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Ld(n){k().remove(n)}const Ip={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Pi=/%COMP%/g;function Sl(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Sl(n,i,t):(i=i.replace(Pi,n),t.push(i))}return t}function Ud(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Bd=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new uu(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new F_(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new Xo(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Sl(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ri),d.LFG(Qo),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class uu{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ip[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Jo(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Jo(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Ip[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ip[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ud(r)):this.eventManager.addEventListener(e,t,Ud(r))}}function Jo(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class F_ extends uu{constructor(e,t,r,i){super(e),this.component=r;const a=Sl(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function po(n){return"_ngcontent-%COMP%".replace(Pi,n)}(i+"-"+r.id),this.hostAttr=function au(n){return"_nghost-%COMP%".replace(Pi,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Xo extends uu{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Sl(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const f=document.createElement("style");f.textContent=a[l],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Tp=(()=>{class n extends fo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Gn=["alt","control","meta","shift"],L_={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Al={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let $d=(()=>{class n extends fo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),l="code."),Gn.forEach(v=>{const b=r.indexOf(v);b>-1&&(r.splice(b,1),l+=v+".")}),l+=a,0!=r.length||0===a.length)return null;const m={};return m.domEventName=i,m.fullKey=l,m}static matchEventFullKeyCode(t,r){let i=L_[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Gn.forEach(l=>{l!==i&&(0,Al[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const D0=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:qo},{provide:d.g9A,useValue:function Ds(){wp.makeCurrent()},multi:!0},{provide:oe,useFactory:function mo(){return(0,d.RDi)(document),document},deps:[]}]),Ml=new d.OlP(""),Un=[{provide:d.rWj,useClass:class su{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const f=function(m){l=l||m,a--,0==a&&r(l)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Hd=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function jd(){return new d.qLn},deps:[]},{provide:$i,useClass:Tp,multi:!0,deps:[oe,d.R0b,d.Lbi]},{provide:$i,useClass:$d,multi:!0,deps:[oe]},{provide:Bd,useClass:Bd,deps:[Ri,Qo,d.AFp]},{provide:d.FYo,useExisting:Bd},{provide:O_,useExisting:Qo},{provide:Qo,useClass:Qo,deps:[oe]},{provide:Ri,useClass:Ri,deps:[$i,d.R0b]},{provide:class Ws{},useClass:b0,deps:[]},[]];let S0=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:iu,useExisting:d.AFp},N_]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ml,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Hd,...Un],imports:[v_,d.hGG]}),n})(),$_=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function A0(){return new $_((0,d.LFG)(oe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Bn=O(8996),ui=O(9751);const{isArray:ta}=Array,{getPrototypeOf:_o,prototype:Zd,keys:Nl}=Object;function xp(n){if(1===n.length){const e=n[0];if(ta(e))return{args:e,keys:null};if(function Yd(n){return n&&"object"==typeof n&&_o(n)===Zd}(e)){const t=Nl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var na=O(8421),yo=O(7669),or=O(5403),Gt=O(4004);const{isArray:G_}=Array;function Qd(n){return(0,Gt.U)(e=>function ar(n,e){return G_(e)?n(...e):n(e)}(n,e))}function hu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let ra=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),ji=(()=>{class n extends ra{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const os=new d.OlP("NgValueAccessor"),vo={provide:os,useExisting:(0,d.Gpc)(()=>sa),multi:!0},pu=new d.OlP("CompositionEventMode");let sa=(()=>{class n extends ra{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ol(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(pu,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[d._Bn([vo]),d.qOj]}),n})();const Vr=new d.OlP("NgValidators"),as=new d.OlP("NgAsyncValidators");function Eo(n){return null!=n}function eh(n){return(0,d.QGY)(n)?(0,Bn.D)(n):n}function th(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Ll(n,e){return e.map(t=>t(n))}function nh(n){return n.map(e=>function Y_(n){return!n.validate}(e)?e:t=>e.validate(t))}function vu(n){return null!=n?function Np(n){if(!n)return null;const e=n.filter(Eo);return 0==e.length?null:function(t){return th(Ll(t,e))}}(nh(n)):null}function Eu(n){return null!=n?function Op(n){if(!n)return null;const e=n.filter(Eo);return 0==e.length?null:function(t){return function fu(...n){const e=(0,yo.jO)(n),{args:t,keys:r}=xp(n),i=new ui.y(a=>{const{length:l}=t;if(!l)return void a.complete();const f=new Array(l);let m=l,v=l;for(let b=0;b<l;b++){let T=!1;(0,na.Xf)(t[b]).subscribe((0,or.x)(a,x=>{T||(T=!0,v--),f[b]=x},()=>m--,void 0,()=>{(!m||!T)&&(v||a.next(r?hu(r,f):f),a.complete())}))}});return e?i.pipe(Qd(e)):i}(Ll(t,e).map(eh)).pipe((0,Gt.U)(th))}}(nh(n)):null}function Q_(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function kp(n){return n?Array.isArray(n)?n:[n]:[]}function Ul(n,e){return Array.isArray(n)?n.includes(e):n===e}function J_(n,e){const t=kp(e);return kp(n).forEach(i=>{Ul(t,i)||t.push(i)}),t}function Bl(n,e){return kp(e).filter(t=>!Ul(n,t))}class X_{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=vu(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Eu(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Yr extends X_{get formDirective(){return null}get path(){return null}}class Ss extends X_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let jl=(()=>{class n extends class $l{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ss,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})();const Du="VALID",oa="INVALID",wo="PENDING",Wl="DISABLED";function oh(n){return Array.isArray(n)?vu(n):n||null}function ah(n){return Array.isArray(n)?Eu(n):n||null}function Su(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function p(n,e){(function P(n,e){const t=function rh(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Q_(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Vl(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Q_(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();w(e._rawValidators,i),w(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function he(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ct(n,e)})}(n,e),function Ut(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Je(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ct(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function M(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function w(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ct(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Lp(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function QD(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const ly={provide:Ss,useExisting:(0,d.Gpc)(()=>tc)},Up=(()=>Promise.resolve())();let tc=(()=>{class n extends Ss{constructor(t,r,i,a,l){super(),this._changeDetectorRef=l,this.control=new class extends class Fp{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=oh(this._rawValidators),this._composedAsyncValidatorFn=ah(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Du}get invalid(){return this.status===oa}get pending(){return this.status==wo}get disabled(){return this.status===Wl}get enabled(){return this.status!==Wl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=oh(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ah(e)}addValidators(e){this.setValidators(J_(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(J_(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Bl(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Bl(e,this._rawAsyncValidators))}hasValidator(e){return Ul(this._rawValidators,e)}hasAsyncValidator(e){return Ul(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=wo,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Wl,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Du,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Du||this.status===wo)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wl:Du}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=wo,this._hasOwnPendingAsyncValidator=!0;const t=eh(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?Wl:this.errors?oa:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wo)?wo:this._anyControlsHaveStatus(oa)?oa:Du}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Su(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,r){super(function aa(n){return(Su(n)?n.validators:n)||null}(t),function Co(n,e){return(Su(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Su(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=QD(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Lp(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Lp(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){QD(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function ec(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===sa?t=a:function Jl(n){return Object.getPrototypeOf(n.constructor)===ji}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Mu(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){p(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Up.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,d.D6c)(r);Up.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function E(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Yr,9),d.Y36(Vr,10),d.Y36(as,10),d.Y36(os,10),d.Y36(d.sBO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([ly]),d.qOj,d.TTD]}),n})(),dy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const W0={provide:os,useExisting:(0,d.Gpc)(()=>jp),multi:!0};function G0(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let jp=(()=>{class n extends ji{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=G0(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function oS(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([W0]),d.qOj]}),n})(),q0=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(G0(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(jp,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const aS={provide:os,useExisting:(0,d.Gpc)(()=>K0),multi:!0};function bo(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let K0=(()=>{class n extends ji{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(a=>this._getOptionId(a));r=(a,l)=>{a._setSelected(i.indexOf(l.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],a=r.selectedOptions;if(void 0!==a){const l=a;for(let f=0;f<l.length;f++){const v=this._getOptionValue(l[f].value);i.push(v)}}else{const l=r.options;for(let f=0;f<l.length;f++){const m=l[f];if(m.selected){const v=this._getOptionValue(m.value);i.push(v)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function gh(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([aS]),d.qOj]}),n})(),uS=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(bo(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(bo(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(K0,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),mS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[dy]}),n})(),_S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[mS]}),n})();function Ot(...n){const e=(0,yo.yG)(n);return(0,Bn.D)(n,e)}var ls=O(7579);class cs extends ls.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const zp=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var mh=O(4671),wS=O(9672);function tC(...n){const e=(0,yo.yG)(n),t=(0,yo.jO)(n),{args:r,keys:i}=xp(n);if(0===r.length)return(0,Bn.D)([],e);const a=new ui.y(function DO(n,e,t=mh.y){return r=>{CS(e,()=>{const{length:i}=n,a=new Array(i);let l=i,f=i;for(let m=0;m<i;m++)CS(e,()=>{const v=(0,Bn.D)(n[m],e);let b=!1;v.subscribe((0,or.x)(r,T=>{a[m]=T,b||(b=!0,f--),f||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>hu(i,l):mh.y));return t?a.pipe(Qd(t)):a}function CS(n,e,t){n?(0,wS.f)(t,n,e):e()}var To=O(8189);function Wp(...n){return function Ey(){return(0,To.J)(1)}()((0,Bn.D)(n,(0,yo.yG)(n)))}function wy(n){return new ui.y(e=>{(0,na.Xf)(n()).subscribe(e)})}var nC=O(9635),Cy=O(576);function ic(n,e){const t=(0,Cy.m)(n)?n:()=>n,r=i=>i.error(t());return new ui.y(e?i=>e.schedule(r,0,i):r)}var da=O(515),Gp=O(727),bi=O(4482);function Iy(){return(0,bi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,or.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class qp extends ui.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,bi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Gp.w0;const t=this.getSubject();e.add(this.source.subscribe((0,or.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Gp.w0.EMPTY)}return e}refCount(){return Iy()(this)}}function Cr(n,e){return(0,bi.e)((t,r)=>{let i=null,a=0,l=!1;const f=()=>l&&!i&&r.complete();t.subscribe((0,or.x)(r,m=>{i?.unsubscribe();let v=0;const b=a++;(0,na.Xf)(n(m,b)).subscribe(i=(0,or.x)(r,T=>r.next(e?e(m,T,b,v++):T),()=>{i=null,f()}))},()=>{l=!0,f()}))})}function sc(n){return n<=0?()=>da.E:(0,bi.e)((e,t)=>{let r=0;e.subscribe((0,or.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ms(...n){const e=(0,yo.yG)(n);return(0,bi.e)((t,r)=>{(e?Wp(n,t,e):Wp(n,t)).subscribe(r)})}function Hi(n,e){return(0,bi.e)((t,r)=>{let i=0;t.subscribe((0,or.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Gr=O(5577);function xu(n){return(0,bi.e)((e,t)=>{let r=!1;e.subscribe((0,or.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function rC(n=by){return(0,bi.e)((e,t)=>{let r=!1;e.subscribe((0,or.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function by(){return new zp}function ds(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Hi((i,a)=>n(i,a,r)):mh.y,sc(1),t?xu(e):rC(()=>new zp))}function zi(n,e){return(0,Cy.m)(e)?(0,Gr.z)(n,e,1):(0,Gr.z)(n,1)}var Qr=O(8505);function Ys(n){return(0,bi.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,or.x)(t,void 0,void 0,l=>{a=(0,na.Xf)(n(l,Ys(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function IS(n,e,t,r,i){return(a,l)=>{let f=t,m=e,v=0;a.subscribe((0,or.x)(l,b=>{const T=v++;m=f?n(m,b,T):(f=!0,b),r&&l.next(m)},i&&(()=>{f&&l.next(m),l.complete()})))}}function _h(n,e){return(0,bi.e)(IS(n,e,arguments.length>=2,!0))}function Kp(n){return n<=0?()=>da.E:(0,bi.e)((e,t)=>{let r=[];e.subscribe((0,or.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ru(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Hi((i,a)=>n(i,a,r)):mh.y,Kp(1),t?xu(e):rC(()=>new zp))}function Ty(n){return(0,bi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const En="primary",Pu=Symbol("RouteTitle");class DS{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Nu(n){return new DS(n)}function SS(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],f=n[a];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Do(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!sC(n[i],e[i]))return!1;return!0}function sC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function oc(n){return Array.prototype.concat.apply([],n)}function oC(n){return n.length>0?n[n.length-1]:null}function Ir(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ha(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,Bn.D)(Promise.resolve(n)):Ot(n)}const AS={exact:function Dy(n,e,t){if(!Ou(n.segments,e.segments)||!ac(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Dy(n.children[r],e.children[r],t))return!1;return!0},subset:Zp},lC={exact:function dC(n,e){return Do(n,e)},subset:function Sy(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>sC(n[t],e[t]))},ignored:()=>!0};function cC(n,e,t){return AS[t.paths](n.root,e.root,t.matrixParams)&&lC[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Zp(n,e,t){return hC(n,e,e.segments,t)}function hC(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ou(i,t)||e.hasChildren()||!ac(i,t,r))}if(n.segments.length===t.length){if(!Ou(n.segments,t)||!ac(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Zp(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Ou(n.segments,i)&&ac(n.segments,i,r)&&n.children[En])&&hC(n.children[En],e,a,r)}}function ac(n,e,t){return e.every((r,i)=>lC[t](n[i].parameters,r.parameters))}class xs{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nu(this.queryParams)),this._queryParamMap}toString(){return uc.serialize(this)}}class Cn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ir(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hs(this)}}class vh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Nu(this.parameters)),this._parameterMap}toString(){return RS(this)}}function Ou(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let fC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new Ay},providedIn:"root"}),n})();class Ay{parse(e){const t=new kS(e);return new xs(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Eh(e.root,!0)}`,r=function PS(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${My(t)}=${My(i)}`).join("&"):`${My(t)}=${My(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function SO(n){return encodeURI(n)}(e.fragment)}`:""}`}}const uc=new Ay;function hs(n){return n.segments.map(e=>RS(e)).join("/")}function Eh(n,e){if(!n.hasChildren())return hs(n);if(e){const t=n.children[En]?Eh(n.children[En],!1):"",r=[];return Ir(n.children,(i,a)=>{a!==En&&r.push(`${a}:${Eh(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function xS(n,e){let t=[];return Ir(n.children,(r,i)=>{i===En&&(t=t.concat(e(r,i)))}),Ir(n.children,(r,i)=>{i!==En&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===En?[Eh(n.children[En],!1)]:[`${i}:${Eh(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[En]?`${hs(n)}/${t[0]}`:`${hs(n)}/(${t.join("//")})`}}function pC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function My(n){return pC(n).replace(/%3B/gi,";")}function Yp(n){return pC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xy(n){return decodeURIComponent(n)}function Ry(n){return xy(n.replace(/\+/g,"%20"))}function RS(n){return`${Yp(n.path)}${function gC(n){return Object.keys(n).map(e=>`;${Yp(e)}=${Yp(n[e])}`).join("")}(n.parameters)}`}const mC=/^[^\/()?;=#]+/;function Qp(n){const e=n.match(mC);return e?e[0]:""}const NS=/^[^=?&#]+/,OS=/^[^&#]+/;class kS{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Cn([],{}):new Cn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[En]=new Cn(e,t)),r}parseSegment(){const e=Qp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new vh(xy(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Qp(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Qp(this.remaining);i&&(r=i,this.capture(r))}e[xy(t)]=xy(r)}parseQueryParam(e){const t=function Rs(n){const e=n.match(NS);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function _C(n){const e=n.match(OS);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Ry(t),a=Ry(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Qp(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=En);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[En]:new Cn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function Py(n){return n.segments.length>0?new Cn([],{[En]:n}):n}function Jp(n){const e={};for(const r of Object.keys(n.children)){const a=Jp(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function FS(n){if(1===n.numberOfChildren&&n.children[En]){const e=n.children[En];return new Cn(n.segments.concat(e.segments),e.children)}return n}(new Cn(n.segments,e))}function fa(n){return n instanceof xs}function yC(n,e,t,r,i){if(0===t.length)return dc(e.root,e.root,e.root,r,i);const a=function EC(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Oy(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return Ir(a.outlets,(m,v)=>{f[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new Oy(t,e,r)}(t);return a.toRoot()?dc(e.root,e.root,new Cn([],{}),r,i):function l(m){const v=function US(n,e,t,r){if(n.isAbsolute)return new ku(e.root,!0,0);if(-1===r)return new ku(t,t===e.root,0);return function BS(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new ku(r,!1,i-a)}(t,r+(lc(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,m),b=v.processChildren?Ps(v.segmentGroup,v.index,a.commands):Xp(v.segmentGroup,v.index,a.commands);return dc(e.root,v.segmentGroup,b,r,i)}(n.snapshot?._lastPathIndex)}function lc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function cc(n){return"object"==typeof n&&null!=n&&n.outlets}function dc(n,e,t,r,i){let l,a={};r&&Ir(r,(m,v)=>{a[v]=Array.isArray(m)?m.map(b=>`${b}`):`${m}`}),l=n===e?t:vC(n,e,t);const f=Py(Jp(l));return new xs(f,a,i)}function vC(n,e,t){const r={};return Ir(n.children,(i,a)=>{r[a]=i===e?t:vC(i,e,t)}),new Cn(n.segments,r)}class Oy{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&lc(r[0]))throw new d.vHH(4003,!1);const i=r.find(cc);if(i&&i!==oC(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ku{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Xp(n,e,t){if(n||(n=new Cn([],{})),0===n.segments.length&&n.hasChildren())return Ps(n,e,t);const r=function $S(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],f=t[r];if(cc(f))break;const m=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!jS(m,v,l))return a;r+=2}else{if(!jS(m,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Cn(n.segments.slice(0,r.pathIndex),{});return a.children[En]=new Cn(n.segments.slice(r.pathIndex),n.children),Ps(a,0,i)}return r.match&&0===i.length?new Cn(n.segments,{}):r.match&&!n.hasChildren()?wh(n,e,t):r.match?Ps(n,0,i):wh(n,e,t)}function Ps(n,e,t){if(0===t.length)return new Cn(n.segments,{});{const r=function wC(n){return cc(n[0])?n[0].outlets:{[En]:n}}(t),i={};return Ir(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=Xp(n.children[l],e,a))}),Ir(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Cn(n.segments,i)}}function wh(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(cc(a)){const m=ky(a.outlets);return new Cn(r,m)}if(0===i&&lc(t[0])){r.push(new vh(n.segments[e].path,CC(t[0]))),i++;continue}const l=cc(a)?a.outlets[En]:`${a}`,f=i<t.length-1?t[i+1]:null;l&&f&&lc(f)?(r.push(new vh(l,CC(f))),i+=2):(r.push(new vh(l,{})),i++)}return new Cn(r,{})}function ky(n){const e={};return Ir(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=wh(new Cn([],{}),0,t))}),e}function CC(n){const e={};return Ir(n,(t,r)=>e[r]=`${t}`),e}function jS(n,e,t){return n==t.path&&Do(e,t.parameters)}class pa{constructor(e,t){this.id=e,this.url=t}}class IC extends pa{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fu extends pa{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ch extends pa{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class HS extends pa{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zS extends pa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hc extends pa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WS extends pa{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bC extends pa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eg extends pa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GS{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class TC{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class qS{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KS{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZS{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DC{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class SC{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class MC{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=tg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=tg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ng(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ng(e,this._root).map(t=>t.value)}}function tg(n,e){if(n===e.value)return e;for(const t of e.children){const r=tg(n,t);if(r)return r}return null}function ng(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ng(n,t);if(r.length)return r.unshift(e),r}return[]}class Ns{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ih(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class rg extends MC{constructor(e,t){super(e),this.snapshot=t,ig(this,e)}toString(){return this.snapshot.toString()}}function xC(n,e){const t=function MO(n,e){const l=new Lu([],{},{},"",{},En,e,null,n.root,-1,{});return new fs("",new Ns(l,[]))}(n,e),r=new cs([new vh("",{})]),i=new cs({}),a=new cs({}),l=new cs({}),f=new cs(""),m=new Oi(r,i,l,f,a,En,e,t.root);return m.snapshot=t.root,new rg(new Ns(m,[]),t)}class Oi{constructor(e,t,r,i,a,l,f,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.title=this.data?.pipe((0,Gt.U)(v=>v[Pu]))??Ot(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Gt.U)(e=>Nu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Gt.U)(e=>Nu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Fy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function RC(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Lu{constructor(e,t,r,i,a,l,f,m,v,b,T,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.title=this.data?.[Pu],this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=b,this._correctedLastPathIndex=x??b,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Nu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fs extends MC{constructor(e,t){super(t),this.url=e,ig(this,t)}toString(){return PC(this._root)}}function ig(n,e){e.value._routerState=n,e.children.forEach(t=>ig(n,t))}function PC(n){const e=n.children.length>0?` { ${n.children.map(PC).join(", ")} } `:"";return`${n.value}${e}`}function bh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Do(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Do(e.params,t.params)||n.params.next(t.params),function iC(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Do(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Do(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Os(n,e){const t=Do(n.params,e.params)&&function MS(n,e){return Ou(n,e)&&n.every((t,r)=>Do(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Os(n.parent,e.parent))}function fc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Vy(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return fc(n,r,i);return fc(n,r)})}(n,e,t);return new Ns(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>fc(n,f)),l}}const r=function xO(n){return new Oi(new cs(n.url),new cs(n.params),new cs(n.queryParams),new cs(n.fragment),new cs(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>fc(n,a));return new Ns(r,i)}}const sg="ngNavigationCancelingError";function YS(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=fa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Th(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Th(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[sg]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Dh(n){return og(n)&&fa(n.url)}function og(n){return n&&n[sg]}class Uy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Vu,this.attachRef=null}}let Vu=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Uy,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const By=!1;let $y=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=i||En,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,By);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,By);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,By);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,By);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,m=new QS(t,f,i.injector);if(r&&function JS(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(l);this.activated=i.createComponent(v,i.length,m)}else this.activated=i.createComponent(l,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Vu),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class QS{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Oi?this.route:e===Vu?this.childContexts:this.parent.get(e,t)}}let ag=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[$y],encapsulation:2}),n})();function jy(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function NC(n){const e=n.children&&n.children.map(NC),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==En&&(t.component=ag),t}function ks(n){return n.outlet||En}function tA(n,e){const t=n.filter(r=>ks(r)===e);return t.push(...n.filter(r=>ks(r)!==e)),t}function lg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class OO{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),bh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ih(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Ir(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Ih(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Ih(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ih(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new DC(a.value.snapshot))}),e.children.length&&this.forwardEvent(new KS(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(bh(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),bh(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=lg(i.snapshot),m=f?.get(d._Vd)??null;l.attachRef=null,l.route=i,l.resolver=m,l.injector=f,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class nA{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class zy{constructor(e,t){this.component=e,this.route=t}}function kO(n,e,t){const r=n._root;return Sh(r,e?e._root:null,t,[r.value])}function ma(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function Sh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Ih(e);return n.children.forEach(l=>{(function OC(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const m=function Wy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ou(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ou(n.url,e.url)||!Do(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Os(n,e)||!Do(n.queryParams,e.queryParams);default:return!Os(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new nA(r)):(a.data=l.data,a._resolvedData=l._resolvedData),Sh(n,e,a.component?f?f.children:null:t,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new zy(f.outlet.component,l))}else l&&pc(e,f,i),i.canActivateChecks.push(new nA(r)),Sh(n,null,a.component?f?f.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Ir(a,(l,f)=>pc(l,t.getContext(f),i)),i}function pc(n,e,t){const r=Ih(n),i=n.value;Ir(r,(a,l)=>{pc(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new zy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Uu(n){return"function"==typeof n}function gc(n){return n instanceof zp||"EmptyError"===n?.name}const So=Symbol("INITIAL_VALUE");function ya(){return Cr(n=>tC(n.map(e=>e.pipe(sc(1),Ms(So)))).pipe((0,Gt.U)(e=>{for(const t of e)if(!0!==t){if(t===So)return So;if(!1===t||t instanceof xs)return t}return!0}),Hi(e=>e!==So),sc(1)))}function BC(n){return(0,nC.z)((0,Qr.b)(e=>{if(fa(e))throw YS(0,e)}),(0,Gt.U)(e=>!0===e))}const Yy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Qy(n,e,t,r,i){const a=Jy(n,e,t);return a.matched?function LO(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Ot(i.map(l=>{const f=ma(l,n);return ha(function FC(n){return n&&Uu(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(ya(),BC()):Ot(!0)}(r=jy(e,r),e,t).pipe((0,Gt.U)(l=>!0===l?a:{...Yy})):Ot(a)}function Jy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Yy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||SS)(t,n,e);if(!i)return{...Yy};const a={};Ir(i.posParams,(f,m)=>{a[m]=f.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Ah(n,e,t,r,i="corrected"){if(t.length>0&&function Wi(n,e,t){return t.some(r=>dg(n,e,r)&&ks(r)!==En)}(n,t,r)){const l=new Cn(e,function aA(n,e,t,r){const i={};i[En]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&ks(a)!==En){const l=new Cn([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[ks(a)]=l}return i}(n,e,r,new Cn(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function jC(n,e,t){return t.some(r=>dg(n,e,r))}(n,t,r)){const l=new Cn(n.segments,function $C(n,e,t,r,i,a){const l={};for(const f of r)if(dg(n,t,f)&&!i[ks(f)]){const m=new Cn([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[ks(f)]=m}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new Cn(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function dg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function uA(n,e,t,r){return!!(ks(n)===r||r!==En&&dg(e,t,n))&&("**"===n.path||Jy(e,n,t).matched)}function HC(n,e,t){return 0===e.length&&!n.children[t]}const _c=!1;class Mh{constructor(e){this.segmentGroup=e||null}}class zC{constructor(e){this.urlTree=e}}function xh(n){return ic(new Mh(n))}function WC(n){return ic(new zC(n))}class cA{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=Ah(this.urlTree.root,[],[],this.config).segmentGroup,t=new Cn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,En).pipe((0,Gt.U)(a=>this.createUrlTree(Jp(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ys(a=>{if(a instanceof zC)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Mh?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,En).pipe((0,Gt.U)(i=>this.createUrlTree(Jp(i),e.queryParams,e.fragment))).pipe(Ys(i=>{throw i instanceof Mh?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,_c)}createUrlTree(e,t,r){const i=Py(e);return new xs(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Gt.U)(a=>new Cn([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Bn.D)(i).pipe(zi(a=>{const l=r.children[a],f=tA(t,a);return this.expandSegmentGroup(e,f,l,a).pipe((0,Gt.U)(m=>({segment:m,outlet:a})))}),_h((a,l)=>(a[l.outlet]=l.segment,a),{}),Ru())}expandSegment(e,t,r,i,a,l){return(0,Bn.D)(r).pipe(zi(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,l).pipe(Ys(v=>{if(v instanceof Mh)return Ot(null);throw v}))),ds(f=>!!f),Ys((f,m)=>{if(gc(f))return HC(t,i,a)?Ot(new Cn([],{})):xh(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,l,f){return uA(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):xh(t):xh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?WC(a):this.lineralizeSegments(r,a).pipe((0,Gr.z)(l=>{const f=new Cn(l,{});return this.expandSegment(e,f,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:f,consumedSegments:m,remainingSegments:v,positionalParamSegments:b}=Jy(t,i,a);if(!f)return xh(t);const T=this.applyRedirectCommands(m,i.redirectTo,b);return i.redirectTo.startsWith("/")?WC(T):this.lineralizeSegments(i,T).pipe((0,Gr.z)(x=>this.expandSegment(e,t,r,x.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=jy(r,e),r.loadChildren?(r._loadedRoutes?Ot({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Gt.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new Cn(i,{})))):Ot(new Cn(i,{}))):Qy(t,r,i,e).pipe(Cr(({matched:l,consumedSegments:f,remainingSegments:m})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Gr.z)(b=>{const T=b.injector??e,x=b.routes,{segmentGroup:V,slicedSegments:G}=Ah(t,f,m,x),le=new Cn(V.segments,V.children);if(0===G.length&&le.hasChildren())return this.expandChildren(T,x,le).pipe((0,Gt.U)(St=>new Cn(f,St)));if(0===x.length&&0===G.length)return Ot(new Cn(f,{}));const Ie=ks(r)===a;return this.expandSegment(T,le,x,G,Ie?En:a,!0).pipe((0,Gt.U)(Rt=>new Cn(f.concat(Rt.segments),Rt.children)))})):xh(t)))}getChildConfig(e,t,r){return t.children?Ot({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ot({routes:t._loadedRoutes,injector:t._loadedInjector}):function Zy(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Ot(!0):Ot(i.map(l=>{const f=ma(l,n);return ha(function _a(n){return n&&Uu(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(ya(),BC())}(e,t,r).pipe((0,Gr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Qr.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function lA(n){return ic(Th(_c,3))}())):Ot({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ot(r);if(i.numberOfChildren>1||!i.children[En])return ic(new d.vHH(4e3,_c));i=i.children[En]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new xs(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ir(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Ir(t.children,(f,m)=>{l[m]=this.createSegmentGroup(e,f,r,i)}),new Cn(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,_c);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class KC{}class Xy{constructor(e,t,r,i,a,l,f,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=f,this.urlSerializer=m}recognize(){const e=Ah(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,En).pipe((0,Gt.U)(t=>{if(null===t)return null;const r=new Lu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},En,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ns(r,t),a=new fs(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=Fy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Bn.D)(Object.keys(r.children)).pipe(zi(i=>{const a=r.children[i],l=tA(t,i);return this.processSegmentGroup(e,l,a,i)}),_h((i,a)=>i&&a?(i.push(...a),i):null),function bS(n,e=!1){return(0,bi.e)((t,r)=>{let i=0;t.subscribe((0,or.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),xu(null),Ru(),(0,Gt.U)(i=>{if(null===i)return null;const a=ev(i);return function fA(n){n.sort((e,t)=>e.value.outlet===En?-1:t.value.outlet===En?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,Bn.D)(t).pipe(zi(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),ds(l=>!!l),Ys(l=>{if(gc(l))return HC(r,i,a)?Ot([]):Ot(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!uA(t,r,i,a))return Ot(null);let l;if("**"===t.path){const f=i.length>0?oC(i).parameters:{},m=YC(r)+i.length;l=Ot({snapshot:new Lu(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,QC(t),ks(t),t.component??t._loadedComponent??null,t,ZC(r),m,JC(t),m),consumedSegments:[],remainingSegments:[]})}else l=Qy(r,t,i,e).pipe((0,Gt.U)(({matched:f,consumedSegments:m,remainingSegments:v,parameters:b})=>{if(!f)return null;const T=YC(r)+m.length;return{snapshot:new Lu(m,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,QC(t),ks(t),t.component??t._loadedComponent??null,t,ZC(r),T,JC(t),T),consumedSegments:m,remainingSegments:v}}));return l.pipe(Cr(f=>{if(null===f)return Ot(null);const{snapshot:m,consumedSegments:v,remainingSegments:b}=f;e=t._injector??e;const T=t._loadedInjector??e,x=function pA(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:G}=Ah(r,v,b,x.filter(Ie=>void 0===Ie.redirectTo),this.relativeLinkResolution);if(0===G.length&&V.hasChildren())return this.processChildren(T,x,V).pipe((0,Gt.U)(Ie=>null===Ie?null:[new Ns(m,Ie)]));if(0===x.length&&0===G.length)return Ot([new Ns(m,[])]);const le=ks(t)===a;return this.processSegment(T,x,V,G,le?En:a).pipe((0,Gt.U)(Ie=>null===Ie?null:[new Ns(m,Ie)]))}))}}function VO(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ev(n){const e=[],t=new Set;for(const r of n){if(!VO(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=ev(r.children);e.push(new Ns(r.value,i))}return e.filter(r=>!t.has(r))}function ZC(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function YC(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function QC(n){return n.data||{}}function JC(n){return n.resolve||{}}function rv(n){return"string"==typeof n.title||null===n.title}function gg(n){return Cr(e=>{const t=n(e);return t?(0,Bn.D)(t).pipe((0,Gt.U)(()=>e)):Ot(e)})}let iv=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===En);return r}getResolvedTitleForRoute(t){return t.data[Pu]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(sv)},providedIn:"root"}),n})(),sv=(()=>{class n extends iv{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG($_))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ao{}class _g extends class mg{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const yg=new d.OlP("",{providedIn:"root",factory:()=>({})}),Eg=new d.OlP("ROUTES");let ov=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ot(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ha(t.loadComponent()).pipe((0,Qr.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Ty(()=>{this.componentLoaders.delete(t)})),i=new qp(r,()=>new ls.x).pipe(Iy());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ot({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Gt.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,v,b=!1;Array.isArray(f)?v=f:(m=f.create(t).injector,v=oc(m.get(Eg,[],d.XFs.Self|d.XFs.Optional)));return{routes:v.map(NC),injector:m}}),Ty(()=>{this.childrenLoaders.delete(r)})),l=new qp(a,()=>new ls.x).pipe(Iy());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return ha(t()).pipe((0,Gr.z)(r=>r instanceof d.YKP||Array.isArray(r)?Ot(r):(0,Bn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class mA{}class Nh{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function $O(n){throw n}function _A(n,e,t){return e.parse("/")}const jO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function eI(){const n=(0,d.f3M)(fC),e=(0,d.f3M)(Vu),t=(0,d.f3M)(Me),r=(0,d.f3M)(d.zs3),i=(0,d.f3M)(d.Sil),a=(0,d.f3M)(Eg,{optional:!0})??[],l=(0,d.f3M)(yg,{optional:!0})??{},f=(0,d.f3M)(sv),m=(0,d.f3M)(iv,{optional:!0}),v=(0,d.f3M)(mA,{optional:!0}),b=(0,d.f3M)(Ao,{optional:!0}),T=new er(null,n,e,t,r,i,oc(a));return v&&(T.urlHandlingStrategy=v),b&&(T.routeReuseStrategy=b),T.titleStrategy=m??f,function vA(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,T),T}let er=(()=>{class n{constructor(t,r,i,a,l,f,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ls.x,this.errorHandler=$O,this.malformedUriErrorHandler=_A,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ot(void 0),this.urlHandlingStrategy=new Nh,this.routeReuseStrategy=new _g,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(ov),this.configLoader.onLoadEndListener=x=>this.triggerEvent(new TC(x)),this.configLoader.onLoadStartListener=x=>this.triggerEvent(new GS(x)),this.ngModule=l.get(d.h0i),this.console=l.get(d.c2e);const T=l.get(d.R0b);this.isNgZoneEnabled=T instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function uC(){return new xs(new Cn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=xC(this.currentUrlTree,this.rootComponentType),this.transitions=new cs({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Hi(i=>0!==i.id),(0,Gt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Cr(i=>{let a=!1,l=!1;return Ot(i).pipe((0,Qr.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Cr(f=>{const m=this.browserUrlTree.toString(),v=!this.navigated||f.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return tI(f.source)&&(this.browserUrlTree=f.extractedUrl),Ot(f).pipe(Cr(T=>{const x=this.transitions.getValue();return r.next(new IC(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),x!==this.transitions.getValue()?da.E:Promise.resolve(T)}),function dA(n,e,t,r){return Cr(i=>function qC(n,e,t,r,i){return new cA(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Gt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Qr.b)(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},i.urlAfterRedirects=T.urlAfterRedirects}),function fg(n,e,t,r,i,a){return(0,Gr.z)(l=>function Qs(n,e,t,r,i,a,l="emptyOnly",f="legacy"){return new Xy(n,e,t,r,i,l,f,a).recognize().pipe(Cr(m=>null===m?function hA(n){return new ui.y(e=>e.error(n))}(new KC):Ot(m)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,a).pipe((0,Gt.U)(f=>({...l,targetSnapshot:f}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Qr.b)(T=>{if(i.targetSnapshot=T.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(V,T)}this.browserUrlTree=T.urlAfterRedirects}const x=new zS(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);r.next(x)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:V,source:G,restoredState:le,extras:Ie}=f,bt=new IC(x,this.serializeUrl(V),G,le);r.next(bt);const Rt=xC(V,this.rootComponentType).snapshot;return Ot(i={...f,targetSnapshot:Rt,urlAfterRedirects:V,extras:{...Ie,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=f.rawUrl,f.resolve(null),da.E}),(0,Qr.b)(f=>{const m=new hc(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}),(0,Gt.U)(f=>i={...f,guards:kO(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),function mc(n,e){return(0,Gr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?Ot({...t,guardsResult:!0}):function Gy(n,e,t,r){return(0,Bn.D)(n).pipe((0,Gr.z)(i=>function UC(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?Ot(a.map(f=>{const m=lg(e)??i,v=ma(f,m);return ha(function sA(n){return n&&Uu(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):m.runInContext(()=>v(n,e,t,r))).pipe(ds())})).pipe(ya()):Ot(!0)}(i.component,i.route,t,e,r)),ds(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Gr.z)(f=>f&&function rA(n){return"boolean"==typeof n}(f)?function cg(n,e,t,r){return(0,Bn.D)(e).pipe(zi(i=>Wp(function VC(n,e){return null!==n&&e&&e(new qS(n)),Ot(!0)}(i.route.parent,r),function LC(n,e){return null!==n&&e&&e(new ZS(n)),Ot(!0)}(i.route,r),function Ky(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function ga(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>wy(()=>Ot(l.guards.map(m=>{const v=lg(l.node)??t,b=ma(m,v);return ha(function iA(n){return n&&Uu(n.canActivateChild)}(b)?b.canActivateChild(r,n):v.runInContext(()=>b(r,n))).pipe(ds())})).pipe(ya())));return Ot(a).pipe(ya())}(n,i.path,t),function qy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ot(!0);const i=r.map(a=>wy(()=>{const l=lg(e)??t,f=ma(a,l);return ha(function kC(n){return n&&Uu(n.canActivate)}(f)?f.canActivate(e,n):l.runInContext(()=>f(e,n))).pipe(ds())}));return Ot(i).pipe(ya())}(n,i.route,t))),ds(i=>!0!==i,!0))}(r,a,n,e):Ot(f)),(0,Gt.U)(f=>({...t,guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Qr.b)(f=>{if(i.guardsResult=f.guardsResult,fa(f.guardsResult))throw YS(0,f.guardsResult);const m=new WS(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(m)}),Hi(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",3),!1)),gg(f=>{if(f.guards.canActivateChecks.length)return Ot(f).pipe((0,Qr.b)(m=>{const v=new bC(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),Cr(m=>{let v=!1;return Ot(m).pipe(function tv(n,e){return(0,Gr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ot(t);let a=0;return(0,Bn.D)(i).pipe(zi(l=>function pg(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!rv(i)&&(a[Pu]=i.title),function UO(n,e,t,r){const i=function nv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Ot({});const a={};return(0,Bn.D)(i).pipe((0,Gr.z)(l=>function BO(n,e,t,r){const i=lg(e)??r,a=ma(n,i);return ha(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(ds(),(0,Qr.b)(f=>{a[l]=f}))),Kp(1),function TS(n){return(0,Gt.U)(()=>n)}(a),Ys(l=>gc(l)?da.E:ic(l)))}(a,n,e,r).pipe((0,Gt.U)(l=>(n._resolvedData=l,n.data=Fy(n,t).resolve,i&&rv(i)&&(n.data[Pu]=i.title),null)))}(l.route,r,n,e)),(0,Qr.b)(()=>a++),Kp(1),(0,Gr.z)(l=>a===i.length?Ot(t):da.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Qr.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,Qr.b)(m=>{const v=new eg(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),gg(f=>{const m=v=>{const b=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(v.routeConfig).pipe((0,Qr.b)(T=>{v.component=T}),(0,Gt.U)(()=>{})));for(const T of v.children)b.push(...m(T));return b};return tC(m(f.targetSnapshot.root)).pipe(xu(),sc(1))}),gg(()=>this.afterPreactivation()),(0,Gt.U)(f=>{const m=function Ly(n,e,t){const r=fc(n,e._root,t?t._root:void 0);return new rg(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return i={...f,targetRouterState:m}}),(0,Qr.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,Gt.U)(r=>(new OO(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Qr.b)({next(){a=!0},complete(){a=!0}}),Ty(()=>{a||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Ys(f=>{if(l=!0,og(f)){Dh(f)||(this.navigated=!0,this.restoreHistory(i,!0));const m=new Ch(i.id,this.serializeUrl(i.extractedUrl),f.message,f.cancellationCode);if(r.next(m),Dh(f)){const v=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),b={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||tI(i.source)};this.scheduleNavigation(v,"imperative",null,b,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new HS(i.id,this.serializeUrl(i.extractedUrl),f,i.targetSnapshot??void 0);r.next(m);try{i.resolve(this.errorHandler(f))}catch(v){i.reject(v)}}return da.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const f={...a};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(i.state=f)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(NC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:f,preserveFragment:m}=r,v=i||this.routerState.root,b=m?this.currentUrlTree.fragment:l;let T=null;switch(f){case"merge":T={...this.currentUrlTree.queryParams,...a};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=a||null}return null!==T&&(T=this.removeEmptyProps(T)),yC(v,this.currentUrlTree,t,T,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=fa(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function av(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...jO}:!1===r?{...yA}:r,fa(t))return cC(this.currentUrlTree,t,i);const a=this.parseUrl(t);return cC(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Fu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let f,m,v;l?(f=l.resolve,m=l.reject,v=l.promise):v=new Promise((x,V)=>{f=x,m=V});const b=++this.navigationId;let T;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),T=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):T=0,this.setTransition({id:b,targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:f,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(x=>Promise.reject(x))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new Ch(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:function(){return eI()},providedIn:"root"}),n})();function tI(n){return"imperative"!==n}class nI{}let Cg=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Hi(t=>t instanceof Fu),zi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,d.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,f=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,Bn.D)(i).pipe((0,To.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ot(null);const a=i.pipe((0,Gr.z)(l=>null===l?Ot(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Bn.D)([a,l]).pipe((0,To.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(er),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(nI),d.LFG(ov))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Mo=new d.OlP("");let CA=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof IC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof SC&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new SC(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Ea(n,e){return{\u0275kind:n,\u0275providers:e}}function lv(n){return[{provide:Eg,multi:!0,useValue:n}]}function yc(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(er),i=n.get(Jr);1===n.get(Ro)&&r.initialNavigation(),n.get(Bu,null,d.XFs.Optional)?.setUpPreloading(),n.get(Mo,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const Jr=new d.OlP("",{factory:()=>new ls.x}),Ro=new d.OlP("",{providedIn:"root",factory:()=>1});const Bu=new d.OlP("");function vc(n){return Ea(0,[{provide:Bu,useExisting:Cg},{provide:nI,useExisting:n}])}const $u=new d.OlP("ROUTER_FORROOT_GUARD"),Ec=[Me,{provide:fC,useClass:Ay},{provide:er,useFactory:eI},Vu,{provide:Oi,useFactory:function rI(n){return n.routerState.root},deps:[er]},ov];function wc(){return new d.PXZ("Router",er)}let ju=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Ec,[],lv(t),{provide:$u,useFactory:aI,deps:[[er,new d.FiY,new d.tp0]]},{provide:yg,useValue:r||{}},r?.useHash?{provide:ve,useClass:gt}:{provide:ve,useClass:dt},{provide:Mo,useFactory:()=>{const n=(0,d.f3M)(er),e=(0,d.f3M)(Ga),t=(0,d.f3M)(yg);return t.scrollOffset&&e.setOffset(t.scrollOffset),new CA(n,e,t)}},r?.preloadingStrategy?vc(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:wc},r?.initialNavigation?uI(r):[],[{provide:dv,useFactory:yc},{provide:d.tb,multi:!0,useExisting:dv}]]}}static forChild(t){return{ngModule:n,providers:[lv(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG($u,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[ag]}),n})();function aI(n){return"guarded"}function uI(n){return["disabled"===n.initialNavigation?Ea(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(er);return()=>{e.setUpLocationChangeListener()}}},{provide:Ro,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ea(2,[{provide:Ro,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(j,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const l=e.get(er),f=e.get(Jr);(function i(a){e.get(er).events.pipe(Hi(f=>f instanceof Fu||f instanceof Ch||f instanceof HS),(0,Gt.U)(f=>f instanceof Fu||f instanceof Ch&&(0===f.code||1===f.code)&&null),Hi(f=>null!==f),sc(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),l.afterPreactivation=()=>(a(!0),r||f.closed?Ot(void 0):f),l.initialNavigation()}))}}]).\u0275providers:[]]}const dv=new d.OlP(""),hv=function(n){return{"background-color":n}};let bA=(()=>{class n{constructor(t){this.router=t,this.currentBg="#232432",this.currentIndex=0,this.modules=[{bg:"#231F26",name:"Digital Production",tutor:"SAJ",image:"./assets/prog.png"},{bg:"#0A2F3C",name:"Security",tutor:"SAM",image:"./assets/cyb.png"},{bg:"#121821",name:"Business Environments",tutor:"LIAM",image:"./assets/bse.png"},{bg:"#232432",name:"Data in Computing",tutor:"Trevor",image:"./assets/data.png"},{bg:"#675052",name:"Legislation",tutor:"SAJ",image:"./assets/legi.png"}],this.currentDisplay=this.modules[this.currentIndex]}ngOnInit(){}change(){this.currentIndex<4?(this.currentIndex+=1,this.currentDisplay=this.modules[this.currentIndex],console.log(this.currentDisplay,this.currentIndex)):4==this.currentIndex&&(this.currentIndex=0,this.currentDisplay=this.modules[this.currentIndex])}portal(){this.router.navigate([`portal/${this.modules[this.currentIndex].name}`])}route(t){this.router.navigate([t])}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(er))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-module"]],decls:17,vars:9,consts:[[1,"container",3,"ngStyle"],[1,"display-modules"],[1,"module",3,"ngStyle"],[1,"nav"],[1,"nav-button",3,"click"],[1,"nav-button","sec",3,"click"],[1,"flex-contain"],[1,"content"],[1,"col1"],[1,"module-name"],[1,"revise",3,"click"],[1,"col2",3,"click"],["alt","robot",3,"src"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),d.NdJ("click",function(){return r.route("")}),d._uU(5,"HOME"),d.qZA(),d.TgZ(6,"button",5),d.NdJ("click",function(){return r.route("contribute")}),d._uU(7,"Contribute"),d.qZA()(),d.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"h1",9),d._uU(12),d.qZA(),d.TgZ(13,"button",10),d.NdJ("click",function(){return r.portal()}),d._uU(14,"Revise"),d.qZA()()(),d.TgZ(15,"div",11),d.NdJ("click",function(){return r.change()}),d._UZ(16,"img",12),d.qZA()()()()()),2&t&&(d.Q6J("ngStyle",d.VKq(5,hv,r.currentDisplay.bg)),d.xp6(2),d.Q6J("ngStyle",d.VKq(7,hv,r.currentDisplay.bg)),d.xp6(10),d.AsE("",r.currentDisplay.name,"(",r.currentDisplay.tutor,")"),d.xp6(4),d.Q6J("src",r.currentDisplay.image,d.LSH))},dependencies:[Go],styles:['@import"https://fonts.googleapis.com/css2?family=Play&display=swap";.container[_ngcontent-%COMP%]{height:auto;width:100%;max-width:100vw;display:flex;justify-content:center;font-family:Play,sans-serif}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]{width:80vw;max-width:2000px}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]{height:100vh}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{width:40%;display:flex;justify-content:space-evenly;margin-top:3vh}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-button[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(2.5vw,2.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .sec[_ngcontent-%COMP%]{color:var(--sec-color);background-color:var(--primary-color);border:2px solid var(--primary-color)}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:85vh}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .col1[_ngcontent-%COMP%]{align-self:center;width:45%}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .col1[_ngcontent-%COMP%]   .module-name[_ngcontent-%COMP%]{font-size:min(5vw,5em);color:var(--primary-color)}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .col1[_ngcontent-%COMP%]   .revise[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(1.5vw,1.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;padding:1vh min(3rem,3vw)}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .col2[_ngcontent-%COMP%]{min-height:100%;width:45%;display:flex;align-items:center}.container[_ngcontent-%COMP%]   .display-modules[_ngcontent-%COMP%]   .module[_ngcontent-%COMP%]   .col2[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:80vh}']}),n})();var TA=O(6451),Lh=O(5363),DA=O(6063);class SA extends ls.x{constructor(e=1/0,t=1/0,r=DA.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let f=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)f=m;f&&r.splice(0,f+1)}}}var fv=O(3099);function bg(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,fv.B)({connector:()=>new SA(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function cI(n,e){return(0,Cy.m)(e)?Cr(()=>n,e):Cr(()=>n)}var Cc=O(9468),it=O(4027),Gi=O(2011),Xr=O(259);class Ti{constructor(e){return e}}class gs{constructor(){return(0,Xr.C6)()}}const Vh=new d.OlP("angularfire2._apps"),hI={provide:Ti,useFactory:function dI(n){return n&&1===n.length?n[0]:new Ti((0,Xr.Mq)())},deps:[[new d.FiY,Vh]]},fI={provide:gs,deps:[[new d.FiY,Vh]]};function pv(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Ti(r)}}let pI=(()=>{class n{constructor(t){(0,Xr.KN)("angularfire",it.q4.full,"core"),(0,Xr.KN)("angularfire",it.q4.full,"app"),(0,Xr.KN)("angular",d.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[hI,fI]}),n})();function MA(n,...e){return{ngModule:pI,providers:[{provide:Vh,useFactory:pv(n),multi:!0,deps:[d.R0b,d.zs3,it.HU,...e]}]}}const gI=(0,it.u3)(Xr.ZF,!0);var Ce=O(5861),kn=O(9681),No=O(4859),J=O(2090),qi=O(1877);const Tg=new Map,gv={activated:!1,tokenObservers:[]},mI={initialized:!1,enabled:!1};function _r(n){return Tg.get(n)||Object.assign({},gv)}function mv(){return mI}class kA{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ce.Z)(function*(){t.stop();try{t.pending=new J.BH,yield function FA(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new J.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ei=new J.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function yv(n){if(!_r(n).activated)throw ei.create("use-before-activation",{appName:n.name})}function vv(n,e){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,Ce.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const T=yield i.getHeartbeatsHeader();T&&(r["X-Firebase-Client"]=T)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,f;try{l=yield fetch(n,a)}catch(T){throw ei.create("fetch-network-error",{originalErrorMessage:T?.message})}if(200!==l.status)throw ei.create("fetch-status-error",{httpStatus:l.status});try{f=yield l.json()}catch(T){throw ei.create("fetch-parse-error",{originalErrorMessage:T?.message})}const m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw ei.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const v=1e3*Number(m[1]),b=Date.now();return{token:f.token,expireTimeMillis:b+v,issuedAtTimeMillis:b}})).apply(this,arguments)}function ZO(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const ki="firebase-app-check-store";let Ag=null;function Fs(){return Ag||(Ag=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ei.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ki,{keyPath:"compositeKey"})}}catch(t){e(ei.create("storage-open",{originalErrorMessage:t?.message}))}}),Ag)}function wv(){return(wv=(0,Ce.Z)(function*(n,e){const r=(yield Fs()).transaction(ki,"readwrite"),a=r.objectStore(ki).put({compositeKey:n,value:e});return new Promise((l,f)=>{a.onsuccess=m=>{l()},r.onerror=m=>{var v;f(ei.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const Oo=new qi.Yd("@firebase/app-check");function Iv(n,e){return(0,J.hl)()?function Vs(n,e){return function DI(n,e){return wv.apply(this,arguments)}(function Mg(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Oo.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Bh(){return mv().enabled}function MI(){return Pg.apply(this,arguments)}function Pg(){return(Pg=(0,Ce.Z)(function*(){const n=mv();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const bv={error:"UNKNOWN_ERROR"};function Ng(n){return J.US.encodeString(JSON.stringify(n),!1)}function Ic(n){return Og.apply(this,arguments)}function Og(){return(Og=(0,Ce.Z)(function*(n,e=!1){const t=n.app;yv(t);const r=_r(t);let a,i=r.token;if(i&&!Hu(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(Hu(m)?i=m:yield Iv(t,void 0))}if(!e&&i&&Hu(i))return{token:i.token};let f,l=!1;if(Bh()){r.exchangeTokenPromise||(r.exchangeTokenPromise=vv(ZO(t,yield MI()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const m=yield r.exchangeTokenPromise;return yield Iv(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield _r(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Oo.warn(m.message):Oo.error(m),a=m}return i?a?f=Hu(i)?{token:i.token,internalError:a}:PI(a):(f={token:i.token},r.token=i,yield Iv(t,i)):f=PI(a),l&&Dv(t,f),f})).apply(this,arguments)}function Fg(n,e){const t=_r(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Tv(n){const{app:e}=n,t=_r(e);let r=t.tokenRefresher;r||(r=function RI(n){const{app:e}=n;return new kA((0,Ce.Z)(function*(){let r;if(r=_r(e).token?yield Ic(n,!0):yield Ic(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=_r(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Dv(n,e){const t=_r(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Hu(n){return n.expireTimeMillis-Date.now()>0}function PI(n){return{token:Ng(bv),error:n}}class UA{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=_r(this.app);for(const t of e)Fg(this.app,t.next);return Promise.resolve()}}const Ca="app-check-internal";!function tM(){(0,kn._registerComponent)(new No.wA("app-check",n=>function BA(n,e){return new UA(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Ca).initialize()})),(0,kn._registerComponent)(new No.wA(Ca,n=>function $A(n){return{getToken:e=>Ic(n,e),addTokenListener:e=>function kg(n,e,t,r){const{app:i}=n,a=_r(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Hu(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),Tv(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Tv(n))}(n,"INTERNAL",e),removeTokenListener:e=>Fg(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,kn.registerVersion)("@firebase/app-check","0.6.5")}();class zu{constructor(){return(0,it.vb)("app-check")}}typeof window<"u"&&window;var jI=O(9260);const zI=new d.OlP("angularfire2.auth.use-emulator"),Ov=new d.OlP("angularfire2.auth.settings"),kv=new d.OlP("angularfire2.auth.tenant-id"),Fv=new d.OlP("angularfire2.auth.langugage-code"),Lv=new d.OlP("angularfire2.auth.use-device-language"),WI=new d.OlP("angularfire.auth.persistence"),GI=(n,e,t,r,i,a,l,f)=>(0,Gi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),l)for(const[v,b]of Object.entries(l))m.settings[v]=b;return f&&m.setPersistence(f),m},[t,r,i,a,l,f]);let Vv=(()=>{class n{constructor(t,r,i,a,l,f,m,v,b,T,x,V){const G=new ls.x,le=Ot(void 0).pipe((0,Lh.Q)(l.outsideAngular),Cr(()=>a.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,9568)))),(0,Gt.U)(()=>(0,Gi.on)(t,a,r)),(0,Gt.U)(Ie=>GI(Ie,a,f,v,b,T,m,x)),bg({bufferSize:1,refCount:!1}));if(Id(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ot(null);else{le.pipe(ds()).subscribe();const bt=le.pipe(Cr($t=>$t.getRedirectResult().then(ln=>ln,()=>null)),it.iC,bg({bufferSize:1,refCount:!1})),Rt=le.pipe(Cr($t=>new ui.y(ln=>({unsubscribe:a.runOutsideAngular(()=>$t.onAuthStateChanged(wn=>ln.next(wn),wn=>ln.error(wn),()=>ln.complete()))})))),St=le.pipe(Cr($t=>new ui.y(ln=>({unsubscribe:a.runOutsideAngular(()=>$t.onIdTokenChanged(wn=>ln.next(wn),wn=>ln.error(wn),()=>ln.complete()))}))));this.authState=bt.pipe(cI(Rt),(0,Cc.R)(l.outsideAngular),(0,Lh.Q)(l.insideAngular)),this.user=bt.pipe(cI(St),(0,Cc.R)(l.outsideAngular),(0,Lh.Q)(l.insideAngular)),this.idToken=this.user.pipe(Cr($t=>$t?(0,Bn.D)($t.getIdToken()):Ot(null))),this.idTokenResult=this.user.pipe(Cr($t=>$t?(0,Bn.D)($t.getIdTokenResult()):Ot(null))),this.credential=(0,TA.T)(bt,G,this.authState.pipe(Hi($t=>!$t))).pipe((0,Gt.U)($t=>$t?.user?$t:null),(0,Cc.R)(l.outsideAngular),(0,Lh.Q)(l.insideAngular))}return(0,Gi.pX)(this,le,a,{spy:{apply:(Ie,bt,Rt)=>{(Ie.startsWith("signIn")||Ie.startsWith("createUser"))&&Rt.then(St=>G.next(St))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Gi.Dh),d.LFG(Gi.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(it.HU),d.LFG(zI,8),d.LFG(Ov,8),d.LFG(kv,8),d.LFG(Fv,8),d.LFG(Lv,8),d.LFG(WI,8),d.LFG(zu,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),qI=(()=>{class n{constructor(){this.refresh=!1}toggle(){this.refresh=!0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function iM(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",5),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.toggleAdmin())}),d._uU(1,"Admin"),d.qZA()}}function sM(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",5),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.toggleAdmin())}),d._uU(1,"Home"),d.qZA()}}function Bg(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",6)(1,"h1"),d._uU(2,"Welcome back..."),d.qZA(),d.TgZ(3,"button",5),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.route())}),d._uU(4,"Start Revision"),d.qZA()()}}function KI(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"label",10),d._uU(4,"Email:"),d.qZA(),d.TgZ(5,"input",11),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.email=i)}),d.qZA(),d.TgZ(6,"label",12),d._uU(7,"Password:"),d.qZA(),d.TgZ(8,"input",13),d.NdJ("ngModelChange",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.password=i)}),d.qZA(),d.TgZ(9,"button",14),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onSubmit())}),d._uU(10,"Sign in"),d.qZA()()()()}if(2&n){const t=d.oxw();d.xp6(5),d.Q6J("ngModel",t.email),d.xp6(3),d.Q6J("ngModel",t.password),d.xp6(1),d.Q6J("disabled",0==t.password.length)}}let ZI=(()=>{class n{constructor(t,r,i){this.router=t,this.auth=r,this.refresh=i,this.email="",this.password="",this.admin=!1}ngOnInit(){}route(){this.router.navigate(["modules"])}toggleAdmin(){this.admin=!this.admin}signIn(){this.router.navigate(["admin"])}onSubmit(){this.auth.signInWithEmailAndPassword(this.email,this.password).then(t=>{console.log("User logged In"),this.signIn(),this.refresh.toggle()}).catch(t=>{alert("Wrong email or password")})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(er),d.Y36(Vv),d.Y36(qI))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-home"]],decls:6,vars:4,consts:[[1,"container"],[1,"top"],[3,"click",4,"ngIf"],["class","flex-contain",4,"ngIf"],["class","form-contain",4,"ngIf"],[3,"click"],[1,"flex-contain"],[1,"form-contain"],[1,"form"],[1,"form-wrap"],["for","email","type","email"],["name","Email","type","email",3,"ngModel","ngModelChange"],["for","password"],["name","password","type","password",3,"ngModel","ngModelChange"],[3,"disabled","click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1),d.YNc(2,iM,2,0,"button",2),d.YNc(3,sM,2,0,"button",2),d.qZA(),d.YNc(4,Bg,5,0,"div",3),d.YNc(5,KI,11,3,"div",4),d.qZA()),2&t&&(d.xp6(2),d.Q6J("ngIf",!r.admin),d.xp6(1),d.Q6J("ngIf",r.admin),d.xp6(1),d.Q6J("ngIf",!r.admin),d.xp6(1),d.Q6J("ngIf",r.admin))},dependencies:[gr,sa,jl,tc],styles:['@import"https://fonts.googleapis.com/css2?family=Play&display=swap";.container[_ngcontent-%COMP%]{height:100vh;background-image:url(home.f708dd93b6ce0104.png);background-position:center;background-size:cover}.container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(1.5vw,1.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;margin:0 auto;margin:1rem}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-self:center;height:85vh}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:min(8em,17vw)}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(1.5vw,1.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;margin:0 auto}.container[_ngcontent-%COMP%]   .form-contain[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-self:center;height:85vh}.container[_ngcontent-%COMP%]   .form-contain[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:30vw;max-width:400px;max-height:400px;height:40vh;margin:0 auto;background-color:#0006}.container[_ngcontent-%COMP%]   .form-contain[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-wrap[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;width:100%;height:100%;max-height:450px;padding:1rem}.container[_ngcontent-%COMP%]   .form-contain[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-wrap[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--primary-color);margin-bottom:10px;font-size:min(1.5vw,1.5em)}.container[_ngcontent-%COMP%]   .form-contain[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-wrap[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-bottom:10px;height:5vh;font-size:1.3rem}.container[_ngcontent-%COMP%]   .form-contain[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-wrap[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(1.5vw,1.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;margin:0 auto}']}),n})();function YI(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",7),d.NdJ("click",function(){const a=d.CHM(t).$implicit,l=d.oxw();return d.KtG(l.select(a))}),d._uU(1),d.qZA()}if(2&n){const t=e.$implicit;d.xp6(1),d.hij(" ",t," ")}}const oM=function(n){return{"background-color":n}},$h=function(n){return{"background-image":n}};let jh=(()=>{class n{constructor(t,r){this.route=t,this.router=r,this.bgColour="",this.bgImage="",this.module="",this.category=["Describe","Evaluate","Explain","Identify","State","Develop"]}ngOnInit(){this.route.params.subscribe(t=>{this.module=t.class}),this.checkBg(this.module)}checkBg(t){switch(console.log(this.module),t){case"Digital Production":default:this.bgColour="#231F26",this.bgImage="../assets/prog.png";break;case"Security":this.bgColour="#0A2F3C",this.bgImage="../assets/cyb.png";break;case"Business Environments":this.bgColour="#121821",this.bgImage="../assets/bse.png";break;case"Data in Computing":this.bgColour="#232432",this.bgImage="../assets/data.png";break;case"Legislation":this.bgColour="#675052",this.bgImage="../assets/legi.png"}}home(){window.history.go(-1)}select(t){this.router.navigate([`cards/${this.module}/${t}`])}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Oi),d.Y36(er))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-portal"]],decls:10,vars:7,consts:[[1,"container",3,"ngStyle"],[3,"click"],[1,"flex-contain"],[1,"child1"],[1,"block-contain"],["class","block",3,"click",4,"ngFor","ngForOf"],[1,"child2",3,"ngStyle"],[1,"block",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"button",1),d.NdJ("click",function(){return r.home()}),d._uU(2,"Back"),d.qZA(),d.TgZ(3,"div",2)(4,"div",3)(5,"div",4),d.YNc(6,YI,2,1,"div",5),d.qZA()(),d.TgZ(7,"div",6)(8,"h1"),d._uU(9,"Select a Category"),d.qZA()()()()),2&t&&(d.Q6J("ngStyle",d.VKq(3,oM,r.bgColour)),d.xp6(6),d.Q6J("ngForOf",r.category),d.xp6(1),d.Q6J("ngStyle",d.VKq(5,$h,"url("+r.bgImage+")")))},dependencies:[Cs,Go],styles:[".container[_ngcontent-%COMP%]{height:100vh;color:var(--primary-color);padding:2rem;width:100vw}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(2.5vw,2.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;margin-left:2rem}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]{height:90%;display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:contain;display:flex;align-items:center;justify-content:center;width:45%}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .block-contain[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:space-around}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .block-contain[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]{background-color:var(--sec-color);text-align:center;padding:1.5rem 2rem;border-radius:10px;width:40%;margin:.5rem 0;font-size:min(2vw,2em);cursor:pointer}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:contain;display:flex;align-items:center;justify-content:center;width:45%;height:85vh}"]}),n})();var aM=O(4986);function $g(){return(0,bi.e)((n,e)=>{let t,r=!1;n.subscribe((0,or.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function QI(n,e=mh.y){return n=n??JI,(0,bi.e)((t,r)=>{let i,a=!0;t.subscribe((0,or.x)(r,l=>{const f=e(l);(a||!n(i,f))&&(a=!1,i=f,r.next(l))}))})}function JI(n,e){return n===e}O(9568);var Bt,XI=O(3942),lM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Js={},Uv=Uv||{},hn=lM||self;function Bv(){}function $v(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function jg(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Tc="closure_uid_"+(1e9*Math.random()>>>0),cM=0;function dM(n,e,t){return n.call.apply(n.bind,arguments)}function tb(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Or(n,e,t){return(Or=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dM:tb).apply(null,arguments)}function Hg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ti(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function ba(){this.s=this.s,this.o=this.o}ba.prototype.s=!1,ba.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function eb(n){Object.prototype.hasOwnProperty.call(n,Tc)&&n[Tc]||(n[Tc]=++cM)}(this)},ba.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const nb=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function zg(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function rb(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if($v(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function di(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}di.prototype.h=function(){this.defaultPrevented=!0};var Hh=function(){if(!hn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{hn.addEventListener("test",Bv,e),hn.removeEventListener("test",Bv,e)}catch{}return n}();function Wg(n){return/^[\s\xa0]*$/.test(n)}var jv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Hv(n,e){return n<e?-1:n>e?1:0}function zh(){var n=hn.navigator;return n&&(n=n.userAgent)?n:""}function Xs(n){return-1!=zh().indexOf(n)}function Gg(n){return Gg[" "](n),n}Gg[" "]=Bv;var Sc,n,zv=Xs("Opera"),Dc=Xs("Trident")||Xs("MSIE"),Wv=Xs("Edge"),qg=Wv||Dc,ib=Xs("Gecko")&&!(-1!=zh().toLowerCase().indexOf("webkit")&&!Xs("Edge"))&&!(Xs("Trident")||Xs("MSIE"))&&!Xs("Edge"),pM=-1!=zh().toLowerCase().indexOf("webkit")&&!Xs("Edge");function sb(){var n=hn.document;return n?n.documentMode:void 0}e:{var Gv="",Kg=(n=zh(),ib?/rv:([^\);]+)(\)|;)/.exec(n):Wv?/Edge\/([\d\.]+)/.exec(n):Dc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):pM?/WebKit\/(\S+)/.exec(n):zv?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Kg&&(Gv=Kg?Kg[1]:""),Dc){var qv=sb();if(null!=qv&&qv>parseFloat(Gv)){Sc=String(qv);break e}}Sc=Gv}var gM={};var _M=hn.document&&Dc&&(sb()||parseInt(Sc,10))||void 0;function Wh(n,e){if(di.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ib){e:{try{Gg(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:yM[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Wh.X.h.call(this)}}ti(Wh,di);var yM={2:"touch",3:"pen",4:"mouse"};Wh.prototype.h=function(){Wh.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ac="closure_listenable_"+(1e6*Math.random()|0),ab=0;function vM(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++ab,this.ba=this.ea=!1}function Zg(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Yg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function ub(n){const e={};for(const t in n)e[t]=n[t];return e}const lb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cb(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<lb.length;a++)t=lb[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Mc(n){this.src=n,this.g={},this.h=0}function Gh(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=nb(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Zg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Qg(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}Mc.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Qg(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new vM(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var qh="closure_lm_"+(1e6*Math.random()|0),Zv={};function db(n,e,t,r,i){if(r&&r.once)return Yv(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)db(n,e[a],t,r,i);return null}return t=Qv(t),n&&n[Ac]?n.N(e,t,jg(r)?!!r.capture:!!r,i):Jg(n,e,t,!1,r,i)}function Jg(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=jg(i)?!!i.capture:!!i,f=em(n);if(f||(n[qh]=f=new Mc(n)),(t=f.add(e,t,r,l,a)).proxy)return t;if(r=function EM(){const e=XO;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Hh||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(hb(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Yv(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Yv(n,e[a],t,r,i);return null}return t=Qv(t),n&&n[Ac]?n.O(e,t,jg(r)?!!r.capture:!!r,i):Jg(n,e,t,!0,r,i)}function Wu(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Wu(n,e[a],t,r,i);else r=jg(r)?!!r.capture:!!r,t=Qv(t),n&&n[Ac]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Qg(a=n.g[e],t,r,i))&&(Zg(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=em(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Qg(e,t,r,i)),(t=-1<n?e[n]:null)&&Xg(t))}function Xg(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Ac])Gh(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(hb(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=em(e))?(Gh(t,n),0==t.h&&(t.src=null,e[qh]=null)):Zg(n)}}}function hb(n){return n in Zv?Zv[n]:Zv[n]="on"+n}function XO(n,e){if(n.ba)n=!0;else{e=new Wh(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Xg(n),n=t.call(r,e)}return n}function em(n){return(n=n[qh])instanceof Mc?n:null}var Kh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qv(n){return"function"==typeof n?n:(n[Kh]||(n[Kh]=function(e){return n.handleEvent(e)}),n[Kh])}function kr(){ba.call(this),this.i=new Mc(this),this.P=this,this.I=null}function ni(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new di(e,n);else if(e instanceof di)e.target=e.target||n;else{var i=e;cb(e=new di(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Zh(l,r,!0,e)&&i}if(i=Zh(l=e.g=n,r,!0,e)&&i,i=Zh(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Zh(l=e.g=t[a],r,!1,e)&&i}function Zh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var f=l.listener,m=l.ha||l.src;l.ea&&Gh(n.i,l),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}ti(kr,ba),kr.prototype[Ac]=!0,kr.prototype.removeEventListener=function(n,e,t,r){Wu(this,n,e,t,r)},kr.prototype.M=function(){if(kr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Zg(t[r]);delete n.g[e],n.h--}}this.I=null},kr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},kr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Yh=hn.JSON.stringify;function fb(){var n=IM;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Xv,Jv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new gb,n=>n.reset());class gb{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function wM(n){hn.setTimeout(()=>{throw n},0)}function mb(n,e){Xv||function CM(){var n=hn.Promise.resolve(void 0);Xv=function(){n.then(_b)}}(),tm||(Xv(),tm=!0),IM.add(n,e)}var tm=!1,IM=new class pb{constructor(){this.h=this.g=null}add(e,t){const r=Jv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function _b(){for(var n;n=fb();){try{n.h.call(n.g)}catch(t){wM(t)}var e=Jv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}tm=!1}function nm(n,e){kr.call(this),this.h=n||1,this.g=e||hn,this.j=Or(this.lb,this),this.l=Date.now()}function eE(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function yb(n,e,t){if("function"==typeof n)t&&(n=Or(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Or(n.handleEvent,n)}return 2147483647<Number(e)?-1:hn.setTimeout(n,e||0)}function bM(n){n.g=yb(()=>{n.g=null,n.i&&(n.i=!1,bM(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ti(nm,kr),(Bt=nm.prototype).ca=!1,Bt.R=null,Bt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ni(this,"tick"),this.ca&&(eE(this),this.start()))}},Bt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Bt.M=function(){nm.X.M.call(this),eE(this),delete this.g};class TM extends ba{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:bM(this)}M(){super.M(),this.g&&(hn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qh(n){ba.call(this),this.h=n,this.g={}}ti(Qh,ba);var vb=[];function tE(n,e,t,r){Array.isArray(t)||(t&&(vb[0]=t.toString()),t=vb);for(var i=0;i<t.length;i++){var a=db(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Eb(n){Yg(n.g,function(e,t){this.g.hasOwnProperty(t)&&Xg(e)},n),n.g={}}function rm(){this.g=!0}function xc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function MM(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return Yh(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Qh.prototype.M=function(){Qh.X.M.call(this),Eb(this)},Qh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rm.prototype.Aa=function(){this.g=!1},rm.prototype.info=function(){};var Gu={},Rc=null;function Jh(){return Rc=Rc||new kr}function nE(n){di.call(this,Gu.Pa,n)}function Pc(n){const e=Jh();ni(e,new nE(e))}function rE(n,e){di.call(this,Gu.STAT_EVENT,n),this.stat=e}function hi(n){const e=Jh();ni(e,new rE(e,n))}function wb(n,e){di.call(this,Gu.Qa,n),this.size=e}function Xh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return hn.setTimeout(function(){n()},e)}Gu.Pa="serverreachability",ti(nE,di),Gu.STAT_EVENT="statevent",ti(rE,di),Gu.Qa="timingevent",ti(wb,di);var iE={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Cb={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function sE(){}function bb(){}sE.prototype.h=null;var tf,ef={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function qu(){di.call(this,"d")}function oE(){di.call(this,"c")}function Ki(){}function nf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Qh(this),this.O=rf,this.T=new nm(n=qg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new im}function im(){this.i=null,this.g="",this.h=!1}ti(qu,di),ti(oE,di),ti(Ki,sE),Ki.prototype.g=function(){return new XMLHttpRequest},Ki.prototype.i=function(){return{}},tf=new Ki;var rf=45e3,aE={},sm={};function uE(n,e,t){n.K=1,n.v=Fc(Fo(e)),n.s=t,n.P=!0,sf(n,null)}function sf(n,e){n.F=Date.now(),Nc(n),n.A=Fo(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),xb(t.i,"t",r),n.C=0,t=n.l.H,n.h=new im,n.g=gf(n.l,t?e:null,!n.s),0<n.N&&(n.L=new TM(Or(n.La,n,n.g),n.N)),tE(n.S,n.g,"readystatechange",n.ib),e=n.H?ub(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Pc(),function DM(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",f=a.split("&"),m=0;m<f.length;m++){var v=f[m].split("=");if(1<v.length){var b=v[0];v=v[1];var T=b.split("_");l=2<=T.length&&"type"==T[1]?l+(b+"=")+v+"&":l+(b+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function af(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Tb(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=xM(n,t),i==sm){4==e&&(n.o=4,hi(14),r=!1),xc(n.j,n.m,null,"[Incomplete Response]");break}if(i==aE){n.o=4,hi(15),xc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}xc(n.j,n.m,i,null),cE(n,i)}af(n)&&i!=sm&&i!=aE&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,hi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),jb(e),e.K=!0,hi(11))):(xc(n.j,n.m,t,"[Invalid Chunked Response]"),Ku(n),kc(n))}function xM(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?sm:(t=Number(e.substring(t,r)),isNaN(t)?aE:(r+=1)+t>e.length?sm:(e=e.substr(r,t),n.C=r+t,e))}function Nc(n){n.V=Date.now()+n.O,lE(n,n.O)}function lE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Xh(Or(n.gb,n),e)}function Oc(n){n.B&&(hn.clearTimeout(n.B),n.B=null)}function kc(n){0==n.l.G||n.I||VM(n.l,n)}function Ku(n){Oc(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,eE(n.T),Eb(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function cE(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||lf(t.h,n)))if(!n.J&&lf(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;SE(t),hm(t)}fm(t),hi(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Xh(Or(t.cb,t),6e3));if(1>=Pb(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else zc(t,11)}else if((n.J||t.g==n)&&SE(t),!Wg(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.T=v[0],v=v[1],2==t.G)if("c"==v[0]){t.I=v[1],t.ka=v[2];const b=v[3];null!=b&&(t.ma=b,t.j.info("VER="+t.ma));const T=v[4];null!=T&&(t.Ca=T,t.j.info("SVER="+t.Ca));const x=v[5];null!=x&&"number"==typeof x&&0<x&&(t.J=r=1.5*x,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const G=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var a=r.h;a.g||-1==G.indexOf("spdy")&&-1==G.indexOf("quic")&&-1==G.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(mE(a,a.h),a.h=null))}if(r.D){const le=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;le&&(r.za=le,tr(r.F,r.D,le))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=$M(r,r.H?r.ka:null,r.V),l.J){_E(r.h,l);var f=l,m=r.J;m&&f.setTimeout(m),f.B&&(Oc(f),Nc(f)),r.g=l}else FM(r);0<t.i.length&&ff(t)}else"stop"!=v[0]&&"close"!=v[0]||zc(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?zc(t,7):dm(t):"noop"!=v[0]&&t.l&&t.l.wa(v),t.A=0)}Pc()}catch{}}function om(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if($v(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function dE(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if($v(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function ek(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if($v(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Bt=nf.prototype).setTimeout=function(n){this.O=n},Bt.ib=function(n){n=n.target;const e=this.L;e&&3==eo(n)?e.l():this.La(n)},Bt.La=function(n){try{if(n==this.g)e:{const b=eo(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>b)&&(3!=b||qg||this.g&&(this.h.h||this.g.fa()||Vb(this.g)))){this.I||4!=b||7==e||Pc(),Oc(this);var t=this.g.aa();this.Y=t;t:if(af(this)){var r=Vb(this.g);n="";var i=r.length,a=4==eo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ku(this),kc(this);var l="";break t}this.h.i=new hn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function SM(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,b,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Wg(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,hi(12),Ku(this),kc(this);break e}xc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,cE(this,t)}this.P?(Tb(this,b,l),qg&&this.i&&3==b&&(tE(this.S,this.T,"tick",this.hb),this.T.start())):(xc(this.j,this.m,l,null),cE(this,l)),4==b&&Ku(this),this.i&&!this.I&&(4==b?VM(this.l,this):(this.i=!1,Nc(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,hi(12)):(this.o=0,hi(13)),Ku(this),kc(this)}}}catch{}},Bt.hb=function(){if(this.g){var n=eo(this.g),e=this.g.fa();this.C<e.length&&(Oc(this),Tb(this,n,e),this.i&&4!=n&&Nc(this))}},Bt.cancel=function(){this.I=!0,Ku(this)},Bt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function AM(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Pc(),hi(17)),Ku(this),this.o=2,kc(this)):lE(this,this.V-n)};var hE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ko(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ko){this.h=void 0!==e?e:n.h,am(this,n.j),this.s=n.s,this.g=n.g,um(this,n.m),this.l=n.l,e=n.i;var t=new Vc;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Db(this,t),this.o=n.o}else n&&(t=String(n).match(hE))?(this.h=!!e,am(this,t[1]||"",!0),this.s=Lc(t[2]||""),this.g=Lc(t[3]||"",!0),um(this,t[4]),this.l=Lc(t[5]||"",!0),Db(this,t[6]||"",!0),this.o=Lc(t[7]||"")):(this.h=!!e,this.i=new Vc(null,this.h))}function Fo(n){return new ko(n)}function am(n,e,t){n.j=t?Lc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function um(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Db(n,e,t){e instanceof Vc?(n.i=e,function tk(n,e){e&&!n.j&&(Ta(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(fi(this,r),xb(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=uf(e,Mb)),n.i=new Vc(e,n.h))}function tr(n,e,t){n.i.set(e,t)}function Fc(n){return tr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Lc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function uf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Sb),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Sb(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ko.prototype.toString=function(){var n=[],e=this.j;e&&n.push(uf(e,pE,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(uf(e,pE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(uf(t,"/"==t.charAt(0)?Ab:RM,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",uf(t,PM)),n.join("")};var pE=/[#\/\?@]/g,RM=/[#\?:]/g,Ab=/[#\?]/g,Mb=/[#\?@]/g,PM=/#/g;function Vc(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ta(n){n.g||(n.g=new Map,n.h=0,n.i&&function fE(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function fi(n,e){Ta(n),e=Uc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Zu(n,e){return Ta(n),e=Uc(n,e),n.g.has(e)}function xb(n,e,t){fi(n,e),0<t.length&&(n.i=null,n.g.set(Uc(n,e),zg(t)),n.h+=t.length)}function Uc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function gE(n){this.l=n||Rb,n=hn.PerformanceNavigationTiming?0<(n=hn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(hn.g&&hn.g.Ga&&hn.g.Ga()&&hn.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Bt=Vc.prototype).add=function(n,e){Ta(this),this.i=null,n=Uc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Bt.forEach=function(n,e){Ta(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Bt.oa=function(){Ta(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Bt.W=function(n){Ta(this);let e=[];if("string"==typeof n)Zu(this,n)&&(e=e.concat(this.g.get(Uc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Bt.set=function(n,e){return Ta(this),this.i=null,Zu(this,n=Uc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Bt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Bt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var Rb=10;function Bc(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Pb(n){return n.h?1:n.g?n.g.size:0}function lf(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function mE(n,e){n.g?n.g.add(e):n.h=e}function _E(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Nb(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return zg(n.i)}function yE(){}function NM(){this.g=new yE}function vE(n,e,t){const r=t||"";try{om(n,function(i,a){let l=i;jg(i)&&(l=Yh(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function cf(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Da(n){this.l=n.ac||null,this.j=n.jb||!1}function $c(n,e){kr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=kb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gE.prototype.cancel=function(){if(this.i=Nb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},yE.prototype.stringify=function(n){return hn.JSON.stringify(n,void 0)},yE.prototype.parse=function(n){return hn.JSON.parse(n,void 0)},ti(Da,sE),Da.prototype.g=function(){return new $c(this.l,this.j)},Da.prototype.i=function(n){return function(){return n}}({}),ti($c,kr);var kb=0;function EE(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function df(n){n.readyState=4,n.l=null,n.j=null,n.A=null,jc(n)}function jc(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Bt=$c.prototype).open=function(n,e){if(this.readyState!=kb)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,jc(this)},Bt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||hn).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Bt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,df(this)),this.readyState=kb},Bt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,jc(this)),this.g&&(this.readyState=3,jc(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof hn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;EE(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Bt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?df(this):jc(this),3==this.readyState&&EE(this)}},Bt.Va=function(n){this.g&&(this.response=this.responseText=n,df(this))},Bt.Ua=function(n){this.g&&(this.response=n,df(this))},Bt.ga=function(){this.g&&df(this)},Bt.setRequestHeader=function(n,e){this.v.append(n,e)},Bt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Bt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty($c.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Hc=hn.JSON.parse;function yr(n){kr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=wE,this.K=this.L=!1}ti(yr,kr);var wE="",CE=/^https?$/i,rk=["POST","PUT"];function kM(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Fb(n),lm(n)}function Fb(n){n.D||(n.D=!0,ni(n,"complete"),ni(n,"error"))}function Lb(n){if(n.h&&typeof Uv<"u"&&(!n.C[1]||4!=eo(n)||2!=n.aa()))if(n.v&&4==eo(n))yb(n.Ha,0,n);else if(ni(n,"readystatechange"),4==eo(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(hE)[1]||null;if(!i&&hn.self&&hn.self.location){var a=hn.self.location.protocol;i=a.substr(0,a.length-1)}r=!CE.test(i?i.toLowerCase():"")}t=r}if(t)ni(n,"complete"),ni(n,"success");else{n.m=6;try{var l=2<eo(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",Fb(n)}}finally{lm(n)}}}function lm(n,e){if(n.g){IE(n);const t=n.g,r=n.C[0]?Bv:null;n.g=null,n.C=null,e||ni(n,"ready");try{t.onreadystatechange=r}catch{}}}function IE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(hn.clearTimeout(n.A),n.A=null)}function eo(n){return n.g?n.g.readyState:0}function Vb(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case wE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function bE(n){let e="";return Yg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function cm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=bE(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):tr(n,e,t))}function hf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Ub(n){this.Ca=0,this.i=[],this.j=new rm,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=hf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=hf("baseRetryDelayMs",5e3,n),this.bb=hf("retryDelaySeedMs",1e4,n),this.$a=hf("forwardChannelMaxRetries",2,n),this.ta=hf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new gE(n&&n.concurrentRequestLimit),this.Fa=new NM,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function dm(n){if(TE(n),3==n.G){var e=n.U++,t=Fo(n.F);tr(t,"SID",n.I),tr(t,"RID",e),tr(t,"TYPE","terminate"),pf(n,t),(e=new nf(n,n.j,e,void 0)).K=2,e.v=Fc(Fo(t)),t=!1,hn.navigator&&hn.navigator.sendBeacon&&(t=hn.navigator.sendBeacon(e.v.toString(),"")),!t&&hn.Image&&((new Image).src=e.v,t=!0),t||(e.g=gf(e.l,null),e.g.da(e.v)),e.F=Date.now(),Nc(e)}BM(n)}function hm(n){n.g&&(jb(n),n.g.cancel(),n.g=null)}function TE(n){hm(n),n.u&&(hn.clearTimeout(n.u),n.u=null),SE(n),n.h.cancel(),n.m&&("number"==typeof n.m&&hn.clearTimeout(n.m),n.m=null)}function ff(n){Bc(n.h)||n.m||(n.m=!0,mb(n.Ja,n),n.C=0)}function DE(n,e){var t;t=e?e.m:n.U++;const r=Fo(n.F);tr(r,"SID",n.I),tr(r,"RID",t),tr(r,"AID",n.T),pf(n,r),n.o&&n.s&&cm(r,n.o,n.s),t=new nf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=$b(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),mE(n.h,t),uE(t,r,e)}function pf(n,e){n.ia&&Yg(n.ia,function(t,r){tr(e,r,t)}),n.l&&om({},function(t,r){tr(e,r,t)})}function $b(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Or(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let f=!0;for(let m=0;m<t;m++){let v=i[m].h;const b=i[m].g;if(v-=a,0>v)a=Math.max(0,i[m].h-100),f=!1;else try{vE(b,l,"req"+v+"_")}catch{r&&r(b)}}if(f){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function FM(n){n.g||n.u||(n.Z=1,mb(n.Ia,n),n.A=0)}function fm(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Xh(Or(n.Ia,n),UM(n,n.A)),n.A++,0))}function jb(n){null!=n.B&&(hn.clearTimeout(n.B),n.B=null)}function LM(n){n.g=new nf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Fo(n.sa);tr(e,"RID","rpc"),tr(e,"SID",n.I),tr(e,"CI",n.L?"0":"1"),tr(e,"AID",n.T),tr(e,"TYPE","xmlhttp"),pf(n,e),n.o&&n.s&&cm(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Fc(Fo(e)),t.s=null,t.P=!0,sf(t,n)}function SE(n){null!=n.v&&(hn.clearTimeout(n.v),n.v=null)}function VM(n,e){var t=null;if(n.g==e){SE(n),jb(n),n.g=null;var r=2}else{if(!lf(n.h,e))return;t=e.D,_E(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ni(r=Jh(),new wb(r,t)),ff(n)}else FM(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function Bb(n,e){return!(Pb(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Xh(Or(n.Ja,n,e),UM(n,n.C)),n.C++,0)))}(n,e)||2==r&&fm(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:zc(n,5);break;case 4:zc(n,10);break;case 3:zc(n,6);break;default:zc(n,2)}}function UM(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function zc(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Or(n.kb,n);t||(t=new ko("//www.google.com/images/cleardot.gif"),hn.location&&"http"==hn.location.protocol||am(t,"https"),Fc(t)),function Ob(n,e){const t=new rm;if(hn.Image){const r=new Image;r.onload=Hg(cf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Hg(cf,t,r,"TestLoadImage: error",!1,e),r.onabort=Hg(cf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Hg(cf,t,r,"TestLoadImage: timeout",!1,e),hn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else hi(2);n.G=0,n.l&&n.l.va(e),BM(n),TE(n)}function BM(n){if(n.G=0,n.la=[],n.l){const e=Nb(n.h);(0!=e.length||0!=n.i.length)&&(rb(n.la,e),rb(n.la,n.i),n.h.i.length=0,zg(n.i),n.i.length=0),n.l.ua()}}function $M(n,e,t){var r=t instanceof ko?Fo(t):new ko(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),um(r,r.m);else{var i=hn.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new ko(null,void 0);r&&am(a,r),e&&(a.g=e),i&&um(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&tr(r,t,e),tr(r,"VER",n.ma),pf(n,r),r}function gf(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new yr(t&&n.Da&&!n.ra?new Da({jb:!0}):n.ra)).Ka(n.H),e}function jM(){}function mf(){if(Dc&&!(10<=Number(_M)))throw Error("Environmental error: no available transport.")}function pi(n,e){kr.call(this),this.g=new Ub(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Wg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Wg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new _f(this)}function AE(n){qu.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function ME(){oE.call(this),this.status=1}function _f(n){this.g=n}(Bt=yr.prototype).Ka=function(n){this.L=n},Bt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():tf.g(),this.C=function Ib(n){return n.h||(n.h=n.i())}(this.u?this.u:tf),this.g.onreadystatechange=Or(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void kM(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=hn.FormData&&n instanceof hn.FormData,!(0<=nb(rk,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{IE(this),0<this.B&&((this.K=function OM(n){return Dc&&function mM(){return function fM(n){var e=gM;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=jv(String(Sc)).split("."),t=jv("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Hv(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Hv(0==i[2].length,0==a[2].length)||Hv(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Or(this.qa,this)):this.A=yb(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){kM(this,a)}},Bt.qa=function(){typeof Uv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ni(this,"timeout"),this.abort(8))},Bt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ni(this,"complete"),ni(this,"abort"),lm(this))},Bt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),lm(this,!0)),yr.X.M.call(this)},Bt.Ha=function(){this.s||(this.F||this.v||this.l?Lb(this):this.fb())},Bt.fb=function(){Lb(this)},Bt.aa=function(){try{return 2<eo(this)?this.g.status:-1}catch{return-1}},Bt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Bt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Hc(e)}},Bt.Ea=function(){return this.m},Bt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Bt=Ub.prototype).ma=8,Bt.G=1,Bt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new nf(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=ub(a),cb(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=$b(this,i,e),tr(t=Fo(this.F),"RID",n),tr(t,"CVER",22),this.D&&tr(t,"X-HTTP-Session-Id",this.D),pf(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(bE(a)))+"&"+e:this.o&&cm(t,this.o,a)),mE(this.h,i),this.Ya&&tr(t,"TYPE","init"),this.O?(tr(t,"$req",e),tr(t,"SID","null"),i.Z=!0,uE(i,t,null)):uE(i,t,e),this.G=2}}else 3==this.G&&(n?DE(this,n):0==this.i.length||Bc(this.h)||DE(this))},Bt.Ia=function(){if(this.u=null,LM(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Xh(Or(this.eb,this),n)}},Bt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,hi(10),hm(this),LM(this))},Bt.cb=function(){null!=this.v&&(this.v=null,hm(this),fm(this),hi(19))},Bt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),hi(2)):(this.j.info("Failed to ping google.com"),hi(1))},(Bt=jM.prototype).xa=function(){},Bt.wa=function(){},Bt.va=function(){},Bt.ua=function(){},Bt.Ra=function(){},mf.prototype.g=function(n,e){return new pi(n,e)},ti(pi,kr),pi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;hi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=$M(n,null,n.V),ff(n)},pi.prototype.close=function(){dm(this.g)},pi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Yh(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&ff(e)},pi.prototype.M=function(){this.g.l=null,delete this.j,dm(this.g),delete this.g,pi.X.M.call(this)},ti(AE,qu),ti(ME,oE),ti(_f,jM),_f.prototype.xa=function(){ni(this.g,"a")},_f.prototype.wa=function(n){ni(this.g,new AE(n))},_f.prototype.va=function(n){ni(this.g,new ME)},_f.prototype.ua=function(){ni(this.g,"b")},mf.prototype.createWebChannel=mf.prototype.g,pi.prototype.send=pi.prototype.u,pi.prototype.open=pi.prototype.m,pi.prototype.close=pi.prototype.close,iE.NO_ERROR=0,iE.TIMEOUT=8,iE.HTTP_ERROR=6,Cb.COMPLETE="complete",bb.EventType=ef,ef.OPEN="a",ef.CLOSE="b",ef.ERROR="c",ef.MESSAGE="d",kr.prototype.listen=kr.prototype.N,yr.prototype.listenOnce=yr.prototype.O,yr.prototype.getLastError=yr.prototype.Oa,yr.prototype.getLastErrorCode=yr.prototype.Ea,yr.prototype.getStatus=yr.prototype.aa,yr.prototype.getResponseJson=yr.prototype.Sa,yr.prototype.getResponseText=yr.prototype.fa,yr.prototype.send=yr.prototype.da,yr.prototype.setWithCredentials=yr.prototype.Ka;var xE=Js.createWebChannelTransport=function(){return new mf},Hb=Js.getStatEventTarget=function(){return Jh()},RE=Js.ErrorCode=iE,zb=Js.EventType=Cb,ik=Js.Event=Gu,HM=Js.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},zM=Js.FetchXmlHttpFactory=Da,pm=Js.WebChannel=bb,gm=Js.XhrIo=yr;const Wb="@firebase/firestore";class ri{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ri.UNAUTHENTICATED=new ri(null),ri.GOOGLE_CREDENTIALS=new ri("google-credentials-uid"),ri.FIRST_PARTY=new ri("first-party-uid"),ri.MOCK_USER=new ri("mock-user");let yf="9.20.0";const Yu=new qi.Yd("@firebase/firestore");function PE(){return Yu.logLevel}function ze(n,...e){if(Yu.logLevel<=qi.in.DEBUG){const t=e.map(mm);Yu.debug(`Firestore (${yf}): ${n}`,...t)}}function Fr(n,...e){if(Yu.logLevel<=qi.in.ERROR){const t=e.map(mm);Yu.error(`Firestore (${yf}): ${n}`,...t)}}function to(n,...e){if(Yu.logLevel<=qi.in.WARN){const t=e.map(mm);Yu.warn(`Firestore (${yf}): ${n}`,...t)}}function mm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Dt(n="Unexpected state"){const e=`FIRESTORE (${yf}) INTERNAL ASSERTION FAILED: `+n;throw Fr(e),new Error(e)}function zt(n,e){n||Dt()}function pt(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends J.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Hn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Gb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ri.UNAUTHENTICATED))}shutdown(){}}class GM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class qM{constructor(e){this.t=e,this.currentUser=ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new Hn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Hn,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const v=l;e.enqueueRetryable((0,Ce.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Hn)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(zt("string"==typeof r.accessToken),new Gb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return zt(null===e||"string"==typeof e),new ri(e)}}class OE{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=ri.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class qb{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new OE(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KM{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.T;return this.T=a.token,ze("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(zt("string"==typeof t.token),this.T=t.token,new kE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Kb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Zb{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Kb(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function rn(n,e){return n<e?-1:n>e?1:0}function Wc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function _m(n){return n+"\0"}class $n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Be(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Be(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Be(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Be(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $n.fromMillis(Date.now())}static fromDate(e){return $n.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new $n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rn(this.nanoseconds,e.nanoseconds):rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Wt(e)}static min(){return new Wt(new $n(0,0))}static max(){return new Wt(new $n(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Qu{constructor(e,t,r){void 0===t?t=0:t>e.length&&Dt(),void 0===r?r=e.length-t:r>e.length-t&&Dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Qu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qu?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fn extends Qu{construct(e,t,r){return new fn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Be(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new fn(t)}static emptyPath(){return new fn([])}}const YM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tr extends Qu{construct(e,t,r){return new Tr(e,t,r)}static isValidIdentifier(e){return YM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Tr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Be(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Be(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Be(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new Be(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tr(t)}static emptyPath(){return new Tr([])}}class ht{constructor(e){this.path=e}static fromPath(e){return new ht(fn.fromString(e))}static fromName(e){return new ht(fn.fromString(e).popFirst(5))}static empty(){return new ht(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===fn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ht(new fn(e.slice()))}}class ym{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function FE(n){return n.fields.find(e=>2===e.kind)}function Ju(n){return n.fields.filter(e=>2!==e.kind)}ym.UNKNOWN_ID=-1;class LE{constructor(e,t){this.fieldPath=e,this.kind=t}}class vf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new vf(0,Di.min())}}function VE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Wt.fromTimestamp(1e9===r?new $n(t+1,0):new $n(t,r));return new Di(i,ht.empty(),e)}function QM(n){return new Di(n.readTime,n.key,-1)}class Di{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Di(Wt.min(),ht.empty(),-1)}static max(){return new Di(Wt.max(),ht.empty(),-1)}}function vm(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ht.comparator(n.documentKey,e.documentKey),0!==t?t:rn(n.largestBatchId,e.largestBatchId))}const UE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Lo(n){return Em.apply(this,arguments)}function Em(){return Em=(0,Ce.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==UE)throw n;ze("LocalStore","Unexpectedly lost primary lease")}),Em.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let i=0,a=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++a,l&&a===i&&t()},m=>r(m))}),l=!0,a===i&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(i=>i?ue.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(b=>{l[v]=b,++f,f===a&&r(l)},b=>i(b))}})}static doWhile(e,t){return new ue((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class Xu{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new Hn,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new Gc(e,t.error)):this.R.resolve()},this.transaction.onerror=r=>{const i=Jb(r.target.error);this.R.reject(new Gc(e,i))}}static open(e,t,r,i){try{return new Xu(t,e.transaction(i,r))}catch(a){throw new Gc(t,a)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new XM(t)}}class ms{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===ms.S((0,J.z$)())&&Fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ze("SimpleDb","Removing database:",e),el(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,J.hl)())return!1;if(ms.C())return!0;const e=(0,J.z$)(),t=ms.S(e),r=0<t&&t<10,i=ms.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static O(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Ce.Z)(function*(){return t.db||(ze("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Gc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new Be(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Be(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Gc(e,f))},a.onupgradeneeded=l=>{ze("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.M(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{ze("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ce.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.$(e);const m=Xu.open(a.db,e,l?"readonly":"readwrite",r),v=i(m).next(b=>(m.P(),b)).catch(b=>(m.abort(b),ue.reject(b))).toPromise();return v.catch(()=>{}),yield m.v,v}catch(m){const v=m,b="FirebaseError"!==v.name&&f<3;if(ze("SimpleDb","Transaction failed with error:",v.message,"Retrying:",b),a.close(),!b)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class JM{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return el(this.L.delete())}}class Gc extends Be{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vo(n){return"IndexedDbTransactionError"===n.name}class XM{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ze("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),el(r)}add(e){return ze("SimpleDb","ADD",this.store.name,e,e),el(this.store.add(e))}get(e){return el(this.store.get(e)).next(t=>(void 0===t&&(t=null),ze("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ze("SimpleDb","DELETE",this.store.name,e),el(this.store.delete(e))}count(){return ze("SimpleDb","COUNT",this.store.name),el(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(l,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ue((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){ze("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,l,f)=>f.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}X(e){const t=this.cursor({});return new ue((r,i)=>{t.onerror=a=>{const l=Jb(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}W(e,t){const r=[];return new ue((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const m=new JM(f),v=t(f.primaryKey,f.value,m);if(v instanceof ue){const b=v.catch(T=>(m.done(),ue.reject(T)));r.push(b)}m.isDone?i():null===m.K?f.continue():f.continue(m.K)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function el(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Jb(r.target.error);t(i)}})}let ex=!1;function Jb(n){const e=ms.S((0,J.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ex||(ex=!0,setTimeout(()=>{throw r},0)),r}}return n}class Xb{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;ze("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ce.Z)(function*(){t.task=null;try{ze("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Vo(r)?ze("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Lo(r)}yield t.et(6e4)}))}}class tx{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ce.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return ue.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return ze("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(f=>{i-=f,r.add(l)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,a)).next(f=>(ze("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=QM(a);vm(l,r)>0&&(r=l)}),new Di(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Zi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Ef(n){return null==n}function wm(n){return 0===n&&1/n==-1/0}function nx(n){return"number"==typeof n&&Number.isInteger(n)&&!wm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Fi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=rx(e)),e=sk(n.get(t),e);return rx(e)}function sk(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function rx(n){return n+"\x01\x01"}function no(n){const e=n.length;if(zt(e>=2),2===e)return zt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),fn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&Dt(),n.charAt(l+1)){case"\x01":const f=n.substring(a,l);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:Dt()}a=l+2}return new fn(r)}const wf=["userId","batchId"];function Cm(n,e){return[n,Fi(e)]}function eT(n,e,t){return[n,Fi(e),t]}const tT={},tl=["prefixPath","collectionGroup","readTime","documentId"],nT=["prefixPath","collectionGroup","documentId"],$E=["collectionGroup","readTime","prefixPath","documentId"],jE=["canonicalId","targetId"],ix=["targetId","path"],HE=["path","targetId"],zE=["collectionId","parent"],Im=["indexId","uid"],ok=["uid","sequenceNumber"],ak=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uk=["indexId","uid","orderedDocumentKey"],lk=["userId","collectionPath","documentId"],rT=["userId","collectionPath","largestBatchId"],sx=["userId","collectionGroup","largestBatchId"],iT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ox=[...iT,"documentOverlays"],sT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],WE=sT,oT=[...WE,"indexConfiguration","indexState","indexEntries"];class bm extends BE{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function qr(n,e){const t=pt(n);return ms.O(t.at,e)}function aT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Sa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Tm(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Dr{constructor(e,t){this.comparator=e,this.root=t||Br.EMPTY}insert(e,t){return new Dr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Br.BLACK,null,null))}remove(e){return new Dr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Br.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cf(this.root,e,this.comparator,!0)}}class Cf{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Br{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Br.RED,this.left=i??Br.EMPTY,this.right=a??Br.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Br(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Br.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Br.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Dt();const e=this.left.check();if(e!==this.right.check())throw Dt();return e+(this.isRed()?0:1)}}Br.EMPTY=null,Br.RED=!0,Br.BLACK=!1,Br.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt()}get value(){throw Dt()}get color(){throw Dt()}get left(){throw Dt()}get right(){throw Dt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Br(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qn{constructor(e){this.comparator=e,this.data=new Dr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uT(this.data.getIterator())}getIteratorFrom(e){return new uT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof qn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qn(this.comparator);return t.data=e,t}}class uT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function If(n){return n.hasNext()?n.getNext():void 0}class Yi{constructor(e){this.fields=e,e.sort(Tr.comparator)}static empty(){return new Yi([])}unionWith(e){let t=new qn(Tr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ax extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ax("Invalid base64 string: "+i):i}}(e);return new $r(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new $r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$r.EMPTY_BYTE_STRING=new $r("");const ck=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nl(n){if(zt(!!n),"string"==typeof n){let e=0;const t=ck.exec(n);if(zt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Sr(n.seconds),nanos:Sr(n.nanos)}}function Sr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function qc(n){return"string"==typeof n?$r.fromBase64String(n):$r.fromUint8Array(n)}function lT(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function cT(n){const e=n.mapValue.fields.__previous_value__;return lT(e)?cT(e):e}function Dm(n){const e=nl(n.mapValue.fields.__local_write_time__.timestampValue);return new $n(e.seconds,e.nanos)}class dk{constructor(e,t,r,i,a,l,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class rl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new rl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof rl&&e.projectId===this.projectId&&e.database===this.database}}const il={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},GE={nullValue:"NULL_VALUE"};function Kc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lT(n)?4:ne(n)?9007199254740991:10:Dt()}function s(n,e){if(n===e)return!0;const t=Kc(n);if(t!==Kc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Dm(n).isEqual(Dm(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=nl(r.timestampValue),l=nl(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,qc(n.bytesValue).isEqual(qc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Sr(r.geoPointValue.latitude)===Sr(i.geoPointValue.latitude)&&Sr(r.geoPointValue.longitude)===Sr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Sr(r.integerValue)===Sr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Sr(r.doubleValue),l=Sr(i.doubleValue);return a===l?wm(a)===wm(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Wc(n.arrayValue.values||[],e.arrayValue.values||[],s);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(aT(a)!==aT(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===l[f]||!s(a[f],l[f])))return!1;return!0}(n,e);default:return Dt()}var i}function o(n,e){return void 0!==(n.values||[]).find(t=>s(t,e))}function u(n,e){if(n===e)return 0;const t=Kc(n),r=Kc(e);if(t!==r)return rn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return rn(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Sr(i.integerValue||i.doubleValue),f=Sr(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return c(n.timestampValue,e.timestampValue);case 4:return c(Dm(n),Dm(e));case 5:return rn(n.stringValue,e.stringValue);case 6:return function(i,a){const l=qc(i),f=qc(a);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),f=a.split("/");for(let m=0;m<l.length&&m<f.length;m++){const v=rn(l[m],f[m]);if(0!==v)return v}return rn(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=rn(Sr(i.latitude),Sr(a.latitude));return 0!==l?l:rn(Sr(i.longitude),Sr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],f=a.values||[];for(let m=0;m<l.length&&m<f.length;++m){const v=u(l[m],f[m]);if(v)return v}return rn(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===il.mapValue&&a===il.mapValue)return 0;if(i===il.mapValue)return 1;if(a===il.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),m=a.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let b=0;b<f.length&&b<v.length;++b){const T=rn(f[b],v[b]);if(0!==T)return T;const x=u(l[f[b]],m[v[b]]);if(0!==x)return x}return rn(f.length,v.length)}(n.mapValue,e.mapValue);default:throw Dt()}}function c(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return rn(n,e);const t=nl(n),r=nl(e),i=rn(t.seconds,r.seconds);return 0!==i?i:rn(t.nanos,r.nanos)}function h(n){return g(n)}function g(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=nl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?qc(n.bytesValue).toBase64():"referenceValue"in n?ht.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=g(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const f of i)l?l=!1:a+=",",a+=`${f}:${g(r.fields[f])}`;return a+"}"}(n.mapValue):Dt();var e}function y(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function C(n){return!!n&&"integerValue"in n}function I(n){return!!n&&"arrayValue"in n}function D(n){return!!n&&"nullValue"in n}function R(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function F(n){return!!n&&"mapValue"in n}function q(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Sa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=q(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=q(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ne(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Re(n){return"nullValue"in n?GE:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?y(rl.empty(),ht.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Dt()}function Qe(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?y(rl.empty(),ht.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?il:Dt()}function lt(n,e){const t=u(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function xt(n,e){const t=u(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ct{constructor(e){this.value=e}static empty(){return new Ct({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!F(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=q(t)}setAll(e){let t=Tr.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=q(l):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());F(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return s(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];F(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Sa(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ct(q(this.value))}}function Ve(n){const e=[];return Sa(n.fields,(t,r)=>{const i=new Tr([t]);if(F(r)){const a=Ve(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Yi(e)}class vt{constructor(e,t,r,i,a,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new vt(e,0,Wt.min(),Wt.min(),Wt.min(),Ct.empty(),0)}static newFoundDocument(e,t,r,i){return new vt(e,1,t,Wt.min(),r,i,0)}static newNoDocument(e,t){return new vt(e,2,t,Wt.min(),Wt.min(),Ct.empty(),0)}static newUnknownDocument(e,t){return new vt(e,3,t,Wt.min(),Wt.min(),Ct.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Wt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class In{constructor(e,t){this.position=e,this.inclusive=t}}function nr(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?ht.comparator(ht.fromName(l.referenceValue),t.key):u(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Aa(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!s(n.position[t],e.position[t]))return!1;return!0}class Ma{constructor(e,t="asc"){this.field=e,this.dir=t}}function qE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Sm{}class bn extends Sm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new k2(e,t,r):"array-contains"===t?new V2(e,r):"in"===t?new mk(e,r):"not-in"===t?new U2(e,r):"array-contains-any"===t?new B2(e,r):new bn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new F2(e,r):new L2(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(u(t,this.value)):null!==t&&Kc(this.value)===Kc(t)&&this.matchesComparison(u(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Dt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class jn extends Sm{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new jn(e,t)}matches(e){return xa(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function xa(n){return"and"===n.op}function bf(n){return"or"===n.op}function Tf(n){return Am(n)&&xa(n)}function Am(n){for(const e of n.filters)if(e instanceof jn)return!1;return!0}function lx(n){if(n instanceof bn)return n.field.canonicalString()+n.op.toString()+h(n.value);if(Tf(n))return n.filters.map(e=>lx(e)).join(",");{const e=n.filters.map(t=>lx(t)).join(",");return`${n.op}(${e})`}}function hk(n,e){return n instanceof bn?(t=n,(r=e)instanceof bn&&t.op===r.op&&t.field.isEqual(r.field)&&s(t.value,r.value)):n instanceof jn?function(t,r){return r instanceof jn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&hk(a,r.filters[l]),!0)}(n,e):void Dt();var t,r}function fk(n,e){const t=n.filters.concat(e);return jn.create(t,n.op)}function pk(n){return n instanceof bn?`${(e=n).field.canonicalString()} ${e.op} ${h(e.value)}`:n instanceof jn?function(e){return e.op.toString()+" {"+e.getFilters().map(pk).join(" ,")+"}"}(n):"Filter";var e}class k2 extends bn{constructor(e,t,r){super(e,t,r),this.key=ht.fromName(r.referenceValue)}matches(e){const t=ht.comparator(e.key,this.key);return this.matchesComparison(t)}}class F2 extends bn{constructor(e,t){super(e,"in",t),this.keys=gk(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class L2 extends bn{constructor(e,t){super(e,"not-in",t),this.keys=gk(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function gk(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ht.fromName(r.referenceValue))}class V2 extends bn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return I(t)&&o(t.arrayValue,this.value)}}class mk extends bn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&o(this.value.arrayValue,t)}}class U2 extends bn{constructor(e,t){super(e,"not-in",t)}matches(e){if(o(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!o(this.value.arrayValue,t)}}class B2 extends bn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!I(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>o(this.value.arrayValue,r))}}class $2{constructor(e,t=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this.ft=null}}function cx(n,e=null,t=[],r=[],i=null,a=null,l=null){return new $2(n,e,t,r,i,a,l)}function Df(n){const e=pt(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>lx(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ef(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>h(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>h(r)).join(",")),e.ft=t}return e.ft}function KE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!qE(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!hk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Aa(n.startAt,e.startAt)&&Aa(n.endAt,e.endAt)}function dT(n){return ht.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function hT(n,e){return n.filters.filter(t=>t instanceof bn&&t.field.isEqual(e))}function _k(n,e,t){let r=GE,i=!0;for(const a of hT(n,e)){let l=GE,f=!0;switch(a.op){case"<":case"<=":l=Re(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=GE}lt({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];lt({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function yk(n,e,t){let r=il,i=!0;for(const a of hT(n,e)){let l=il,f=!0;switch(a.op){case">=":case">":l=Qe(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=il}xt({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];xt({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class sl{constructor(e,t=null,r=[],i=[],a=null,l="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=m,this.dt=null,this.wt=null}}function vk(n,e,t,r,i,a,l,f){return new sl(n,e,t,r,i,a,l,f)}function Mm(n){return new sl(n)}function Ek(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function dx(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function fT(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function hx(n){return null!==n.collectionGroup}function Sf(n){const e=pt(n);if(null===e.dt){e.dt=[];const t=fT(e),r=dx(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new Ma(t)),e.dt.push(new Ma(Tr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.dt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Ma(Tr.keyField(),a))}}}return e.dt}function Qi(n){const e=pt(n);if(!e.wt)if("F"===e.limitType)e.wt=cx(e.path,e.collectionGroup,Sf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Sf(e))t.push(new Ma(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new In(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new In(e.startAt.position,e.startAt.inclusive):null;e.wt=cx(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function fx(n,e){e.getFirstInequalityField(),fT(n);const t=n.filters.concat([e]);return new sl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function pT(n,e,t){return new sl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ZE(n,e){return KE(Qi(n),Qi(e))&&n.limitType===e.limitType}function wk(n){return`${Df(Qi(n))}|lt:${n.limitType}`}function px(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>pk(r)).join(", ")}]`),Ef(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>h(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>h(r)).join(",")),`Target(${t})`}(Qi(n))}; limitType=${n.limitType})`}function YE(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ht.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Sf(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const f=nr(i,a,l);return i.inclusive?f<=0:f<0}(t.startAt,Sf(t),r)||t.endAt&&!function(i,a,l){const f=nr(i,a,l);return i.inclusive?f>=0:f>0}(t.endAt,Sf(t),r)));var t,r}function Ck(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ik(n){return(e,t)=>{let r=!1;for(const i of Sf(n)){const a=j2(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function j2(n,e,t){const r=n.field.isKeyField()?ht.comparator(e.key,t.key):function(i,a,l){const f=a.data.field(i),m=l.data.field(i);return null!==f&&null!==m?u(f,m):Dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Dt()}}class Zc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Sa(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return Tm(this.inner)}size(){return this.innerSize}}const H2=new Dr(ht.comparator);function _s(){return H2}const bk=new Dr(ht.comparator);function QE(...n){let e=bk;for(const t of n)e=e.insert(t.key,t);return e}function Tk(n){let e=bk;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ra(){return JE()}function Dk(){return JE()}function JE(){return new Zc(n=>n.toString(),(n,e)=>n.isEqual(e))}const z2=new Dr(ht.comparator),W2=new qn(ht.comparator);function _n(...n){let e=W2;for(const t of n)e=e.add(t);return e}const G2=new qn(rn);function gT(){return G2}function Sk(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wm(e)?"-0":e}}function Ak(n){return{integerValue:""+n}}function Mk(n,e){return nx(e)?Ak(e):Sk(n,e)}class mT{constructor(){this._=void 0}}function q2(n,e,t){return n instanceof xm?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Af?Rk(n,e):n instanceof Mf?Pk(n,e):function(r,i){const a=xk(r,i),l=Nk(a)+Nk(r._t);return C(a)&&C(r._t)?Ak(l):Sk(r.serializer,l)}(n,e)}function K2(n,e,t){return n instanceof Af?Rk(n,e):n instanceof Mf?Pk(n,e):t}function xk(n,e){return n instanceof Rm?C(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class xm extends mT{}class Af extends mT{constructor(e){super(),this.elements=e}}function Rk(n,e){const t=Ok(e);for(const r of n.elements)t.some(i=>s(i,r))||t.push(r);return{arrayValue:{values:t}}}class Mf extends mT{constructor(e){super(),this.elements=e}}function Pk(n,e){let t=Ok(e);for(const r of n.elements)t=t.filter(i=>!s(i,r));return{arrayValue:{values:t}}}class Rm extends mT{constructor(e,t){super(),this.serializer=e,this._t=t}}function Nk(n){return Sr(n.integerValue||n.doubleValue)}function Ok(n){return I(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class XE{constructor(e,t){this.field=e,this.transform=t}}class Y2{constructor(e,t){this.version=e,this.transformResults=t}}class vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _T(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class yT{}function kk(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Nm(n.key,vr.none()):new Pm(n.key,n.data,vr.none());{const t=n.data,r=Ct.empty();let i=new qn(Tr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new ol(n.key,r,new Yi(i.toArray()),vr.none())}}function Q2(n,e,t){n instanceof Pm?function(r,i,a){const l=r.value.clone(),f=Vk(r.fieldTransforms,i,a.transformResults);l.setAll(f),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof ol?function(r,i,a){if(!_T(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Vk(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(Lk(r)),f.setAll(l),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ew(n,e,t,r){return n instanceof Pm?function(i,a,l,f){if(!_T(i.precondition,a))return l;const m=i.value.clone(),v=Uk(i.fieldTransforms,f,a);return m.setAll(v),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof ol?function(i,a,l,f){if(!_T(i.precondition,a))return l;const m=Uk(i.fieldTransforms,f,a),v=a.data;return v.setAll(Lk(i)),v.setAll(m),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(l=t,_T(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function J2(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=xk(r.transform,i||null);null!=a&&(null===t&&(t=Ct.empty()),t.set(r.field,a))}return t||null}function Fk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Wc(t,r,(i,a)=>function Z2(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Af&&r instanceof Af||t instanceof Mf&&r instanceof Mf?Wc(t.elements,r.elements,s):t instanceof Rm&&r instanceof Rm?s(t._t,r._t):t instanceof xm&&r instanceof xm);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Pm extends yT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ol extends yT{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Lk(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Vk(n,e,t){const r=new Map;zt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,K2(l,f,t[i]))}return r}function Uk(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,q2(a,l,e))}return r}class Nm extends yT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gx extends yT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class mx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Q2(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ew(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ew(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Dk();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(i.key)?null:f;const m=kk(l,f);null!==m&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(Wt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_n())}isEqual(e){return this.batchId===e.batchId&&Wc(this.mutations,e.mutations,(t,r)=>Fk(t,r))&&Wc(this.baseMutations,e.baseMutations,(t,r)=>Fk(t,r))}}class _x{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){zt(e.mutations.length===r.length);let i=z2;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new _x(e,t,r,i)}}class yx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class tB{constructor(e){this.count=e}}var Kr,Ln;function Bk(n){switch(n){default:return Dt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function $k(n){if(void 0===n)return Fr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Kr.OK:return ge.OK;case Kr.CANCELLED:return ge.CANCELLED;case Kr.UNKNOWN:return ge.UNKNOWN;case Kr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Kr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Kr.INTERNAL:return ge.INTERNAL;case Kr.UNAVAILABLE:return ge.UNAVAILABLE;case Kr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Kr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Kr.NOT_FOUND:return ge.NOT_FOUND;case Kr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Kr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Kr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Kr.ABORTED:return ge.ABORTED;case Kr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Kr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Kr.DATA_LOSS:return ge.DATA_LOSS;default:return Dt()}}(Ln=Kr||(Kr={}))[Ln.OK=0]="OK",Ln[Ln.CANCELLED=1]="CANCELLED",Ln[Ln.UNKNOWN=2]="UNKNOWN",Ln[Ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ln[Ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ln[Ln.NOT_FOUND=5]="NOT_FOUND",Ln[Ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ln[Ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ln[Ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ln[Ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ln[Ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ln[Ln.ABORTED=10]="ABORTED",Ln[Ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ln[Ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ln[Ln.INTERNAL=13]="INTERNAL",Ln[Ln.UNAVAILABLE=14]="UNAVAILABLE",Ln[Ln.DATA_LOSS=15]="DATA_LOSS";class Ex{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return vT}static getOrCreateInstance(){return null===vT&&(vT=new Ex),vT}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let vT=null;class tw{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,nw.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new tw(Wt.min(),i,gT(),_s(),_n())}}class nw{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new nw(r,t,_n(),_n(),_n())}}class ET{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class jk{constructor(e,t){this.targetId=e,this.Et=t}}class Hk{constructor(e,t,r=$r.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class zk{constructor(){this.At=0,this.Rt=Gk(),this.vt=$r.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return 0!==this.At}get St(){return this.Pt}Dt(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}Ct(){let e=_n(),t=_n(),r=_n();return this.Rt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Dt()}}),new nw(this.vt,this.bt,e,t,r)}xt(){this.Pt=!1,this.Rt=Gk()}Nt(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class nB{constructor(e){this.Ft=e,this.Bt=new Map,this.Lt=_s(),this.qt=Wk(),this.Ut=new qn(rn)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}zt(e){this.forEachTarget(e,t=>{const r=this.jt(t);switch(e.state){case 0:this.Wt(t)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||this.removeTarget(t);break;case 3:this.Wt(t)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:this.Wt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:Dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.Wt(i)&&t(i)})}Jt(e){var t;const r=e.targetId,i=e.Et.count,a=this.Yt(r);if(a){const l=a.target;if(dT(l))if(0===i){const f=new ht(l.path);this.Qt(r,f,vt.newNoDocument(f,Wt.min()))}else zt(1===i);else{const f=this.Zt(r);f!==i&&(this.Ht(r),this.Ut=this.Ut.add(r),null===(t=Ex.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:f,existenceFilterCount:e.Et.count}))}}}Xt(e){const t=new Map;this.Bt.forEach((a,l)=>{const f=this.Yt(l);if(f){if(a.current&&dT(f.target)){const m=new ht(f.target.path);null!==this.Lt.get(m)||this.te(l,m)||this.Qt(l,m,vt.newNoDocument(m,e))}a.St&&(t.set(l,a.Ct()),a.xt())}});let r=_n();this.qt.forEach((a,l)=>{let f=!0;l.forEachWhile(m=>{const v=this.Yt(m);return!v||2===v.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.Lt.forEach((a,l)=>l.setReadTime(e));const i=new tw(e,t,this.Ut,this.Lt,r);return this.Lt=_s(),this.qt=Wk(),this.Ut=new qn(rn),i}Gt(e,t){if(!this.Wt(e))return;const r=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.Wt(e))return;const i=this.jt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Zt(e){const t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.jt(e).Ot()}jt(e){let t=this.Bt.get(e);return t||(t=new zk,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new qn(rn),this.qt=this.qt.insert(e,t)),t}Wt(e){const t=null!==this.Yt(e);return t||ze("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}Ht(e){this.Bt.set(e,new zk),this.Ft.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}function Wk(){return new Dr(ht.comparator)}function Gk(){return new Dr(ht.comparator)}const rB={asc:"ASCENDING",desc:"DESCENDING"},iB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sB={and:"AND",or:"OR"};class oB{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Om(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qk(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function aB(n,e){return Om(n,e.toTimestamp())}function jr(n){return zt(!!n),Wt.fromTimestamp(function(e){const t=nl(e);return new $n(t.seconds,t.nanos)}(n))}function wx(n,e){return(t=n,new fn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Kk(n){const e=fn.fromString(n);return zt(r1(e)),e}function rw(n,e){return wx(n.databaseId,e.path)}function Pa(n,e){const t=Kk(e);if(t.get(1)!==n.databaseId.projectId)throw new Be(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Be(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ht(Yk(t))}function Cx(n,e){return wx(n.databaseId,e)}function Zk(n){const e=Kk(n);return 4===e.length?fn.emptyPath():Yk(e)}function iw(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Yk(n){return zt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Qk(n,e,t){return{name:rw(n,e),fields:t.value.mapValue.fields}}function Jk(n,e,t){const r=Pa(n,e.name),i=jr(e.updateTime),a=e.createTime?jr(e.createTime):Wt.min(),l=new Ct({mapValue:{fields:e.fields}}),f=vt.newFoundDocument(r,i,a,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function sw(n,e){let t;if(e instanceof Pm)t={update:Qk(n,e.key,e.value)};else if(e instanceof Nm)t={delete:rw(n,e.key)};else if(e instanceof ol)t={update:Qk(n,e.key,e.data),updateMask:gB(e.fieldMask)};else{if(!(e instanceof gx))return Dt();t={verify:rw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof xm)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Af)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Mf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Rm)return{fieldPath:a.field.canonicalString(),increment:l._t};throw Dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:aB(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Dt()),t;var i}function Ix(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?vr.updateTime(jr(i.updateTime)):void 0!==i.exists?vr.exists(i.exists):vr.none():vr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let f=null;"setToServerValue"in l?(zt("REQUEST_TIME"===l.setToServerValue),f=new xm):"appendMissingElements"in l?f=new Af(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new Mf(l.removeAllFromArray.values||[]):"increment"in l?f=new Rm(a,l.increment):Dt();const m=Tr.fromServerFormat(l.fieldPath);return new XE(m,f)}(n,i)):[];var i;if(e.update){const i=Pa(n,e.update.name),a=new Ct({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Yi((e.updateMask.fieldPaths||[]).map(v=>Tr.fromServerFormat(v)));return new ol(i,a,l,t,r)}return new Pm(i,a,t,r)}if(e.delete){const i=Pa(n,e.delete);return new Nm(i,t)}if(e.verify){const i=Pa(n,e.verify);return new gx(i,t)}return Dt()}function Xk(n,e){return{documents:[Cx(n,e.path)]}}function bx(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Cx(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Cx(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return n1(jn.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:Yc((b=v).field),direction:hB(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(v=e.limit,n.useProto3Json||Ef(v)?v:{value:v});var v,f,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function e1(n){let e=Zk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){zt(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=function(b){const T=t1(b);return T instanceof jn&&Tf(T)?T.getFilters():[T]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(b=>{return new Ma(km((T=b).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let f=null;t.limit&&(f=function(b){let T;return T="object"==typeof b?b.value:b,Ef(T)?null:T}(t.limit));let m=null;var b;t.startAt&&(m=new In((b=t.startAt).values||[],!!b.before));let v=null;return t.endAt&&(v=function(b){return new In(b.values||[],!b.before)}(t.endAt)),vk(e,i,l,a,f,"F",m,v)}function t1(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=km(e.unaryFilter.field);return bn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=km(e.unaryFilter.field);return bn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=km(e.unaryFilter.field);return bn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=km(e.unaryFilter.field);return bn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Dt()}}(n):void 0!==n.fieldFilter?bn.create(km((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Dt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return jn.create(e.compositeFilter.filters.map(t=>t1(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Dt()}}(e.compositeFilter.op))}(n):Dt();var e}function hB(n){return rB[n]}function fB(n){return iB[n]}function pB(n){return sB[n]}function Yc(n){return{fieldPath:n.canonicalString()}}function km(n){return Tr.fromServerFormat(n.fieldPath)}function n1(n){return n instanceof bn?function(e){if("=="===e.op){if(R(e.value))return{unaryFilter:{field:Yc(e.field),op:"IS_NAN"}};if(D(e.value))return{unaryFilter:{field:Yc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(R(e.value))return{unaryFilter:{field:Yc(e.field),op:"IS_NOT_NAN"}};if(D(e.value))return{unaryFilter:{field:Yc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yc(e.field),op:fB(e.op),value:e.value}}}(n):n instanceof jn?function(e){const t=e.getFilters().map(r=>n1(r));return 1===t.length?t[0]:{compositeFilter:{op:pB(e.op),filters:t}}}(n):Dt()}function gB(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function r1(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Qc{constructor(e,t,r,i,a=Wt.min(),l=Wt.min(),f=$r.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f}withSequenceNumber(e){return new Qc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Qc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Qc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class i1{constructor(e){this.se=e}}function s1(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:wT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:rw(i=n.se,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Om(i,a.version.toTimestamp()),createTime:Om(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:xf(e.version)};else{if(!e.isUnknownDocument())return Dt();r.unknownDocument={path:t.path.toArray(),version:xf(e.version)}}var i,a;return r}function wT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function xf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rf(n){const e=new $n(n.seconds,n.nanoseconds);return Wt.fromTimestamp(e)}function Pf(n,e){const t=(e.baseMutations||[]).map(a=>Ix(n.se,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>Ix(n.se,a)),i=$n.fromMillis(e.localWriteTimeMs);return new mx(e.batchId,i,t,r)}function ow(n){const e=Rf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Rf(n.lastLimboFreeSnapshotVersion):Wt.min();let r;var i;return void 0!==n.query.documents?(zt(1===(i=n.query).documents.length),r=Qi(Mm(Zk(i.documents[0])))):r=Qi(e1(n.query)),new Qc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,$r.fromBase64String(n.resumeToken))}function o1(n,e){const t=xf(e.snapshotVersion),r=xf(e.lastLimboFreeSnapshotVersion);let i;i=dT(e.target)?Xk(n.se,e.target):bx(n.se,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Df(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Tx(n){const e=e1({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?pT(e,e.limit,"L"):e}function Dx(n,e){return new yx(e.largestBatchId,Ix(n.se,e.overlayMutation))}function a1(n,e){const t=e.path.lastSegment();return[n,Fi(e.path.popLast()),t]}function u1(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:xf(r.readTime),documentKey:Fi(r.documentKey.path),largestBatchId:r.largestBatchId}}class _B{getBundleMetadata(e,t){return l1(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Rf(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return l1(e).put({bundleId:(r=t).id,createTime:xf(jr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return c1(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Tx(i.bundledQuery),readTime:Rf(i.readTime)};var i})}saveNamedQuery(e,t){return c1(e).put({name:(r=t).name,readTime:xf(jr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function l1(n){return qr(n,"bundles")}function c1(n){return qr(n,"namedQueries")}class CT{constructor(e,t){this.serializer=e,this.userId=t}static ie(e,t){return new CT(e,t.uid||"")}getOverlay(e,t){return aw(e).get(a1(this.userId,t)).next(r=>r?Dx(this.serializer,r):null)}getOverlays(e,t){const r=Ra();return ue.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const f=new yx(t,l);i.push(this.re(e,f))}),ue.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Fi(l.getCollectionPath())));const a=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(aw(e).J("collectionPathOverlayIndex",f))}),ue.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Ra(),a=Fi(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return aw(e).j("collectionPathOverlayIndex",l).next(f=>{for(const m of f){const v=Dx(this.serializer,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Ra();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return aw(e).Z({index:"collectionGroupOverlayIndex",range:f},(m,v,b)=>{const T=Dx(this.serializer,v);a.size()<i||T.largestBatchId===l?(a.set(T.getKey(),T),l=T.largestBatchId):b.done()}).next(()=>a)}re(e,t){return aw(e).put(function(r,i,a){const[l,f,m]=a1(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:sw(r.se,a.mutation)}}(this.serializer,this.userId,t))}}function aw(n){return qr(n,"documentOverlays")}class Nf{constructor(){}oe(e,t){this.ue(e,t),t.ce()}ue(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(Sr(e.integerValue));else if("doubleValue"in e){const r=Sr(e.doubleValue);isNaN(r)?this.ae(t,13):(this.ae(t,15),wm(r)?t.he(0):t.he(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le(`${r.seconds||""}`),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(qc(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ae(t,45),t.he(r.latitude||0),t.he(r.longitude||0)}else"mapValue"in e?ne(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):Dt()}fe(e,t){this.ae(t,25),this.ye(e,t)}ye(e,t){t.le(e)}me(e,t){const r=e.fields||{};this.ae(t,55);for(const i of Object.keys(r))this.fe(i,t),this.ue(r[i],t)}ge(e,t){const r=e.values||[];this.ae(t,50);for(const i of r)this.ue(i,t)}_e(e,t){this.ae(t,37),ht.fromName(e).path.forEach(r=>{this.ae(t,60),this.ye(r,t)})}ae(e,t){e.he(t)}de(e){e.he(2)}}function yB(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function d1(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=yB(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Nf.pe=new Nf;class vB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Te(r.value),r=t.next();this.Ee()}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.ve()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Te(r);else if(r<2048)this.Te(960|r>>>6),this.Te(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Te(480|r>>>12),this.Te(128|63&r>>>6),this.Te(128|63&r);else{const i=t.codePointAt(0);this.Te(240|i>>>18),this.Te(128|63&i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i)}}this.Ee()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=t.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.ve()}Ve(e){const t=this.Se(e),r=d1(t);this.De(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ce(e){const t=this.Se(e),r=d1(t);this.De(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Se(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Te(e){const t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}Re(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(e){this.De(1),this.buffer[this.position++]=e}Oe(e){this.De(1),this.buffer[this.position++]=~e}De(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class EB{constructor(e){this.Me=e}we(e){this.Me.Ie(e)}le(e){this.Me.be(e)}he(e){this.Me.Ve(e)}ce(){this.Me.xe()}}class wB{constructor(e){this.Me=e}we(e){this.Me.Ae(e)}le(e){this.Me.Pe(e)}he(e){this.Me.Ce(e)}ce(){this.Me.ke()}}class uw{constructor(){this.Me=new vB,this.Fe=new EB(this.Me),this.Be=new wB(this.Me)}seed(e){this.Me.seed(e)}Le(e){return 0===e?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}class Of{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}qe(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Of(this.indexId,this.documentKey,this.arrayValue,r)}}function Jc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=h1(n.arrayValue,e.arrayValue),0!==t?t:(t=h1(n.directionalValue,e.directionalValue),0!==t?t:ht.comparator(n.documentKey,e.documentKey)))}function h1(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class CB{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.Ke=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ge=r:this.Ke.push(r)}}Qe(e){zt(e.collectionGroup===this.collectionId);const t=FE(e);if(void 0!==t&&!this.ze(t))return!1;const r=Ju(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ge){const l=r[i];if(!this.je(this.Ge,l)||!this.We(this.Ue[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ue.length||!this.We(this.Ue[a++],l))return!1}return!0}ze(e){for(const t of this.Ke)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function f1(n){var e,t;if(zt(n instanceof bn||n instanceof jn),n instanceof bn){if(n instanceof mk){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>bn.create(n.field,"==",a)))||[];return jn.create(i,"or")}return n}const r=n.filters.map(i=>f1(i));return jn.create(r,n.op)}function IB(n){if(0===n.getFilters().length)return[];const e=Mx(f1(n));return zt(p1(e)),Sx(e)||Ax(e)?[e]:e.getFilters()}function Sx(n){return n instanceof bn}function Ax(n){return n instanceof jn&&Tf(n)}function p1(n){return Sx(n)||Ax(n)||function(e){if(e instanceof jn&&bf(e)){for(const t of e.getFilters())if(!Sx(t)&&!Ax(t))return!1;return!0}return!1}(n)}function Mx(n){if(zt(n instanceof bn||n instanceof jn),n instanceof bn)return n;if(1===n.filters.length)return Mx(n.filters[0]);const e=n.filters.map(r=>Mx(r));let t=jn.create(e,n.op);return t=IT(t),p1(t)?t:(zt(t instanceof jn),zt(xa(t)),zt(t.filters.length>1),t.filters.reduce((r,i)=>xx(r,i)))}function xx(n,e){let t;return zt(n instanceof bn||n instanceof jn),zt(e instanceof bn||e instanceof jn),t=n instanceof bn?e instanceof bn?jn.create([n,e],"and"):g1(n,e):e instanceof bn?g1(e,n):function(r,i){if(zt(r.filters.length>0&&i.filters.length>0),xa(r)&&xa(i))return fk(r,i.getFilters());const a=bf(r)?r:i,l=bf(r)?i:r,f=a.filters.map(m=>xx(m,l));return jn.create(f,"or")}(n,e),IT(t)}function g1(n,e){if(xa(e))return fk(e,n.getFilters());{const t=e.filters.map(r=>xx(n,r));return jn.create(t,"or")}}function IT(n){if(zt(n instanceof bn||n instanceof jn),n instanceof bn)return n;const e=n.getFilters();if(1===e.length)return IT(e[0]);if(Am(n))return n;const t=e.map(i=>IT(i)),r=[];return t.forEach(i=>{i instanceof bn?r.push(i):i instanceof jn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:jn.create(r,n.op)}class bB{constructor(){this.He=new Rx}addToCollectionParentIndex(e,t){return this.He.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.He.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Di.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Di.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class Rx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new qn(fn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qn(fn.comparator)).toArray()}}const bT=new Uint8Array(0);class TB{constructor(e,t){this.user=e,this.databaseId=t,this.Je=new Rx,this.Ye=new Zc(r=>Df(r),(r,i)=>KE(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Je.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Je.add(t)});const a={collectionId:r,parent:Fi(i)};return m1(e).put(a)}return ue.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[_m(t),""],!1,!0);return m1(e).j(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(no(l.parent))}return r})}addFieldIndex(e,t){const r=TT(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=cw(e);return a.next(f=>{l.put(u1(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=TT(e),i=cw(e),a=lw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=lw(e);let i=!0;const a=new Map;return ue.forEach(this.Ze(t),l=>this.Xe(e,l).next(f=>{i&&(i=!!f),a.set(l,f)})).next(()=>{if(i){let l=_n();const f=[];return ue.forEach(a,(m,v)=>{var b;ze("IndexedDbIndexManager",`Using index ${b=m,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(St=>`${St.fieldPath}:${St.kind}`).join(",")}`} to execute ${Df(t)}`);const T=function(St,$t){const ln=FE($t);if(void 0===ln)return null;for(const wn of hT(St,ln.fieldPath))switch(wn.op){case"array-contains-any":return wn.value.arrayValue.values||[];case"array-contains":return[wn.value]}return null}(v,m),x=function(St,$t){const ln=new Map;for(const wn of Ju($t))for(const ii of hT(St,wn.fieldPath))switch(ii.op){case"==":case"in":ln.set(wn.fieldPath.canonicalString(),ii.value);break;case"not-in":case"!=":return ln.set(wn.fieldPath.canonicalString(),ii.value),Array.from(ln.values())}return null}(v,m),V=function(St,$t){const ln=[];let wn=!0;for(const ii of Ju($t)){const ws=0===ii.kind?_k(St,ii.fieldPath,St.startAt):yk(St,ii.fieldPath,St.startAt);ln.push(ws.value),wn&&(wn=ws.inclusive)}return new In(ln,wn)}(v,m),G=function(St,$t){const ln=[];let wn=!0;for(const ii of Ju($t)){const ws=0===ii.kind?yk(St,ii.fieldPath,St.endAt):_k(St,ii.fieldPath,St.endAt);ln.push(ws.value),wn&&(wn=ws.inclusive)}return new In(ln,wn)}(v,m),le=this.tn(m,v,V),Ie=this.tn(m,v,G),bt=this.en(m,v,x),Rt=this.nn(m.indexId,T,le,V.inclusive,Ie,G.inclusive,bt);return ue.forEach(Rt,St=>r.H(St,t.limit).next($t=>{$t.forEach(ln=>{const wn=ht.fromSegments(ln.documentKey);l.has(wn)||(l=l.add(wn),f.push(wn))})}))}).next(()=>f)}return ue.resolve(null)})}Ze(e){let t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:IB(jn.create(e.filters,"and")).map(r=>cx(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Ye.set(e,t),t)}nn(e,t,r,i,a,l,f){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),b=[];for(let T=0;T<m;++T){const x=t?this.sn(t[T/v]):bT,V=this.rn(e,x,r[T%v],i),G=this.on(e,x,a[T%v],l),le=f.map(Ie=>this.rn(e,x,Ie,!0));b.push(...this.createRange(V,G,le))}return b}rn(e,t,r,i){const a=new Of(e,ht.empty(),t,r);return i?a:a.qe()}on(e,t,r,i){const a=new Of(e,ht.empty(),t,r);return i?a.qe():a}Xe(e,t){const r=new CB(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const f of a)r.Qe(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;const i=this.Ze(t);return ue.forEach(i,a=>this.Xe(e,a).next(l=>{l?0!==r&&l.fields.length<function(f){let m=new qn(Tr.comparator),v=!1;for(const b of f.filters)for(const T of b.getFlattenedFilters())T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?v=!0:m=m.add(T.field));for(const b of f.orderBy)b.field.isKeyField()||(m=m.add(b.field));return m.size+(v?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}un(e,t){const r=new uw;for(const i of Ju(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Le(i.kind);Nf.pe.oe(a,l)}return r.$e()}sn(e){const t=new uw;return Nf.pe.oe(e,t.Le(0)),t.$e()}cn(e,t){const r=new uw;return Nf.pe.oe(y(this.databaseId,t),r.Le(function(i){const a=Ju(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}en(e,t,r){if(null===r)return[];let i=[];i.push(new uw);let a=0;for(const l of Ju(e)){const f=r[a++];for(const m of i)if(this.an(t,l.fieldPath)&&I(f))i=this.hn(i,l,f);else{const v=m.Le(l.kind);Nf.pe.oe(f,v)}}return this.ln(i)}tn(e,t,r){return this.en(e,t,r.position)}ln(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}hn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const m=new uw;m.seed(f.$e()),Nf.pe.oe(l,m.Le(t.kind)),a.push(m)}return a}an(e,t){return!!e.filters.find(r=>r instanceof bn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=TT(e),i=cw(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const l=[];return ue.forEach(a,f=>i.get([f.indexId,this.uid]).next(m=>{l.push(function(v,b){const T=b?new vf(b.sequenceNumber,new Di(Rf(b.readTime),new ht(no(b.documentKey)),b.largestBatchId)):vf.empty(),x=v.fields.map(([V,G])=>new LE(Tr.fromServerFormat(V),G));return new ym(v.indexId,v.collectionGroup,x,T)}(f,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:rn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=TT(e),a=cw(e);return this.fn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ue.forEach(f,m=>a.put(u1(m.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?ue.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ue.forEach(f,m=>this.dn(e,i,m).next(v=>{const b=this.wn(a,m);return v.isEqual(b)?ue.resolve():this._n(e,a,m,v,b)}))))})}mn(e,t,r,i){return lw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.cn(r,t.key),documentKey:t.key.path.toArray()})}gn(e,t,r,i){return lw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.cn(r,t.key),t.key.path.toArray()])}dn(e,t,r){const i=lw(e);let a=new qn(Jc);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.cn(r,t)])},(l,f)=>{a=a.add(new Of(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}wn(e,t){let r=new qn(Jc);const i=this.un(t,e);if(null==i)return r;const a=FE(t);if(null!=a){const l=e.data.field(a.fieldPath);if(I(l))for(const f of l.arrayValue.values||[])r=r.add(new Of(t.indexId,e.key,this.sn(f),i))}else r=r.add(new Of(t.indexId,e.key,bT,i));return r}_n(e,t,r,i,a){ze("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,m,v,b,T){const x=f.getIterator(),V=m.getIterator();let G=If(x),le=If(V);for(;G||le;){let Ie=!1,bt=!1;if(G&&le){const Rt=v(G,le);Rt<0?bt=!0:Rt>0&&(Ie=!0)}else null!=G?bt=!0:Ie=!0;Ie?(b(le),le=If(V)):bt?(T(G),G=If(x)):(G=If(x),le=If(V))}}(i,a,Jc,f=>{l.push(this.mn(e,t,r,f))},f=>{l.push(this.gn(e,t,r,f))}),ue.waitFor(l)}fn(e){let t=1;return cw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>Jc(l,f)).filter((l,f,m)=>!f||0!==Jc(l,m[f-1]));const i=[];i.push(e);for(const l of r){const f=Jc(l,e),m=Jc(l,t);if(0===f)i[0]=e.qe();else if(f>0&&m<0)i.push(l),i.push(l.qe());else if(m>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.yn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,bT,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,bT,[]]))}return a}yn(e,t){return Jc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(_1)}getMinOffset(e,t){return ue.mapArray(this.Ze(t),r=>this.Xe(e,r).next(i=>i||Dt())).next(_1)}}function m1(n){return qr(n,"collectionParents")}function lw(n){return qr(n,"indexEntries")}function TT(n){return qr(n,"indexConfiguration")}function cw(n){return qr(n,"indexState")}function _1(n){zt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;vm(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Di(e.readTime,e.documentKey,t)}const y1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ys{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ys(e,ys.DEFAULT_COLLECTION_PERCENTILE,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function v1(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let f=0;const m=r.Z({range:l},(b,T,x)=>(f++,x.delete()));a.push(m.next(()=>{zt(1===f)}));const v=[];for(const b of t.mutations){const T=eT(e,b.key.path,t.batchId);a.push(i.delete(T)),v.push(b.key)}return ue.waitFor(a).next(()=>v)}function DT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Dt();e=n.noDocument}return JSON.stringify(e).length}ys.DEFAULT_COLLECTION_PERCENTILE=10,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ys.DEFAULT=new ys(41943040,ys.DEFAULT_COLLECTION_PERCENTILE,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ys.DISABLED=new ys(-1,0,0);class ST{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.pn={}}static ie(e,t,r,i){zt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new ST(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xc(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Fm(e),l=Xc(e);return l.add({}).next(f=>{zt("number"==typeof f);const m=new mx(f,t,r,i),v=function(x,V,G){const le=G.baseMutations.map(bt=>sw(x.se,bt)),Ie=G.mutations.map(bt=>sw(x.se,bt));return{userId:V,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:le,mutations:Ie}}(this.serializer,this.userId,m),b=[];let T=new qn((x,V)=>rn(x.canonicalString(),V.canonicalString()));for(const x of i){const V=eT(this.userId,x.key.path,f);T=T.add(x.key.path.popLast()),b.push(l.put(v)),b.push(a.put(V,tT))}return T.forEach(x=>{b.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.pn[f]=m.keys()}),ue.waitFor(b).next(()=>m)})}lookupMutationBatch(e,t){return Xc(e).get(t).next(r=>r?(zt(r.userId===this.userId),Pf(this.serializer,r)):null)}In(e,t){return this.pn[t]?ue.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.pn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Xc(e).Z({index:"userMutationsIndex",range:i},(l,f,m)=>{f.userId===this.userId&&(zt(f.batchId>=r),a=Pf(this.serializer,f)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Xc(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xc(e).j("userMutationsIndex",t).next(r=>r.map(i=>Pf(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Cm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Fm(e).Z({range:i},(l,f,m)=>{const[v,b,T]=l,x=no(b);if(v===this.userId&&t.path.isEqual(x))return Xc(e).get(T).next(V=>{if(!V)throw Dt();zt(V.userId===this.userId),a.push(Pf(this.serializer,V))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qn(rn);const i=[];return t.forEach(a=>{const l=Cm(this.userId,a.path),f=IDBKeyRange.lowerBound(l),m=Fm(e).Z({range:f},(v,b,T)=>{const[x,V,G]=v,le=no(V);x===this.userId&&a.path.isEqual(le)?r=r.add(G):T.done()});i.push(m)}),ue.waitFor(i).next(()=>this.Tn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Cm(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new qn(rn);return Fm(e).Z({range:l},(m,v,b)=>{const[T,x,V]=m,G=no(x);T===this.userId&&r.isPrefixOf(G)?G.length===i&&(f=f.add(V)):b.done()}).next(()=>this.Tn(e,f))}Tn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Xc(e).get(a).next(l=>{if(null===l)throw Dt();zt(l.userId===this.userId),r.push(Pf(this.serializer,l))}))}),ue.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return v1(e.at,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.En(t.batchId)}),ue.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}En(e){delete this.pn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Fm(e).Z({range:r},(a,l,f)=>{if(a[0]===this.userId){const m=no(a[1]);i.push(m)}else f.done()}).next(()=>{zt(0===i.length)})})}containsKey(e,t){return E1(e,this.userId,t)}An(e){return w1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function E1(n,e,t){const r=Cm(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Fm(n).Z({range:a,Y:!0},(f,m,v)=>{const[b,T,x]=f;b===e&&T===i&&(l=!0),v.done()}).next(()=>l)}function Xc(n){return qr(n,"mutations")}function Fm(n){return qr(n,"documentMutations")}function w1(n){return qr(n,"mutationQueues")}class kf{constructor(e){this.Rn=e}next(){return this.Rn+=2,this.Rn}static vn(){return new kf(0)}static bn(){return new kf(-1)}}class DB{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Pn(e).next(t=>{const r=new kf(t.highestTargetId);return t.highestTargetId=r.next(),this.Vn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Pn(e).next(t=>Wt.fromTimestamp(new $n(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Vn(e,i)))}addTargetData(e,t){return this.Sn(e,t).next(()=>this.Pn(e).next(r=>(r.targetCount+=1,this.Dn(t,r),this.Vn(e,r))))}updateTargetData(e,t){return this.Sn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Lm(e).delete(t.targetId)).next(()=>this.Pn(e)).next(r=>(zt(r.targetCount>0),r.targetCount-=1,this.Vn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Lm(e).Z((l,f)=>{const m=ow(f);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>ue.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Lm(e).Z((r,i)=>{const a=ow(i);t(a)})}Pn(e){return C1(e).get("targetGlobalKey").next(t=>(zt(null!==t),t))}Vn(e,t){return C1(e).put("targetGlobalKey",t)}Sn(e,t){return Lm(e).put(o1(this.serializer,t))}Dn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Df(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Lm(e).Z({range:i,index:"queryTargetsIndex"},(l,f,m)=>{const v=ow(f);KE(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=ed(e);return t.forEach(l=>{const f=Fi(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),ue.waitFor(i)}removeMatchingKeys(e,t,r){const i=ed(e);return ue.forEach(t,a=>{const l=Fi(a.path);return ue.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=ed(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ed(e);let a=_n();return i.Z({range:r,Y:!0},(l,f,m)=>{const v=no(l[1]),b=new ht(v);a=a.add(b)}).next(()=>a)}containsKey(e,t){const r=Fi(t.path),i=IDBKeyRange.bound([r],[_m(r)],!1,!0);let a=0;return ed(e).Z({index:"documentTargetsIndex",Y:!0,range:i},([l,f],m,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}ne(e,t){return Lm(e).get(t).next(r=>r?ow(r):null)}}function Lm(n){return qr(n,"targets")}function C1(n){return qr(n,"targetGlobal")}function ed(n){return qr(n,"targetDocuments")}function I1([n,e],[t,r]){const i=rn(n,t);return 0===i?rn(e,r):i}class SB{constructor(e){this.Cn=e,this.buffer=new qn(I1),this.xn=0}Nn(){return++this.xn}kn(e){const t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();I1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class AB{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}$n(e){var t=this;ze("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ce.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Vo(r)?ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Lo(r)}yield t.$n(3e5)}))}}class MB{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.Fn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(Zi.ct);const r=new SB(t);return this.Mn.forEachTarget(e,i=>r.kn(i.sequenceNumber)).next(()=>this.Mn.Bn(e,i=>r.kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(y1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),y1):this.Ln(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}Ln(e,t){let r,i,a,l,f,m,v;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,l=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,f=Date.now(),this.removeTargets(e,r,t))).next(T=>(a=T,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(v=Date.now(),PE()<=qi.in.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${a} targets in `+(m-f)+`ms\n\tRemoved ${T} documents in `+(v-m)+`ms\nTotal Duration: ${v-b}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:T})))}}class xB{constructor(e,t){this.db=e,this.garbageCollector=new MB(this,t)}Fn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Bn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Bn(e,t){return this.Un(e,(r,i)=>t(i))}addReference(e,t,r){return AT(e,r)}removeReference(e,t,r){return AT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return AT(e,t)}Kn(e,t){return function(r,i){let a=!1;return w1(r).X(l=>E1(r,l,i).next(f=>(f&&(a=!0),ue.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Un(e,(l,f)=>{if(f<=t){const m=this.Kn(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Wt.min()),ed(e).delete([0,Fi(l.path)])))});i.push(m)}}).next(()=>ue.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return AT(e,t)}Un(e,t){const r=ed(e);let i,a=Zi.ct;return r.Z({index:"documentTargetsIndex"},([l,f],{path:m,sequenceNumber:v})=>{0===l?(a!==Zi.ct&&t(new ht(no(i)),a),a=v,i=m):a=Zi.ct}).next(()=>{a!==Zi.ct&&t(new ht(no(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function AT(n,e){return ed(n).put((r=n.currentSequenceNumber,{targetId:0,path:Fi(e.path),sequenceNumber:r}));var r}class b1{constructor(){this.changes=new Zc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class RB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ff(e).put(r)}removeEntry(e,t,r){return Ff(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],wT(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Gn(e,r)))}getEntry(e,t){let r=vt.newInvalidDocument(t);return Ff(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(dw(t))},(i,a)=>{r=this.Qn(t,a)}).next(()=>r)}zn(e,t){let r={size:0,document:vt.newInvalidDocument(t)};return Ff(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(dw(t))},(i,a)=>{r={document:this.Qn(t,a),size:DT(a)}}).next(()=>r)}getEntries(e,t){let r=_s();return this.jn(e,t,(i,a)=>{const l=this.Qn(i,a);r=r.insert(i,l)}).next(()=>r)}Wn(e,t){let r=_s(),i=new Dr(ht.comparator);return this.jn(e,t,(a,l)=>{const f=this.Qn(a,l);r=r.insert(a,f),i=i.insert(a,DT(l))}).next(()=>({documents:r,Hn:i}))}jn(e,t,r){if(t.isEmpty())return ue.resolve();let i=new qn(A1);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(dw(i.first()),dw(i.last())),l=i.getIterator();let f=l.getNext();return Ff(e).Z({index:"documentKeyIndex",range:a},(m,v,b)=>{const T=ht.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&A1(f,T)<0;)r(f,null),f=l.getNext();f&&f.isEqual(T)&&(r(f,v),f=l.hasNext()?l.getNext():null),f?b.G(dw(f)):b.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),wT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ff(e).j(IDBKeyRange.bound(l,f,!0)).next(m=>{let v=_s();for(const b of m){const T=this.Qn(ht.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);T.isFoundDocument()&&(YE(t,T)||i.has(T.key))&&(v=v.insert(T.key,T))}return v})}getAllFromCollectionGroup(e,t,r,i){let a=_s();const l=S1(t,r),f=S1(t,Di.max());return Ff(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(m,v,b)=>{const T=this.Qn(ht.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(T.key,T),a.size===i&&b.done()}).next(()=>a)}newChangeBuffer(e){return new PB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return D1(e).get("remoteDocumentGlobalKey").next(t=>(zt(!!t),t))}Gn(e,t){return D1(e).put("remoteDocumentGlobalKey",t)}Qn(e,t){if(t){const r=function mB(n,e){let t;if(e.document)t=Jk(n.se,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ht.fromSegments(e.noDocument.path),i=Rf(e.noDocument.readTime);t=vt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Dt();{const r=ht.fromSegments(e.unknownDocument.path),i=Rf(e.unknownDocument.version);t=vt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new $n(r[0],r[1]);return Wt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Wt.min()))return r}return vt.newInvalidDocument(e)}}function T1(n){return new RB(n)}class PB extends b1{constructor(e,t){super(),this.Jn=e,this.trackRemovals=t,this.Yn=new Zc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new qn((a,l)=>rn(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const f=this.Yn.get(a);if(t.push(this.Jn.removeEntry(e,a,f.readTime)),l.isValidDocument()){const m=s1(this.Jn.serializer,l);i=i.add(a.path.popLast()),r+=DT(m)-f.size,t.push(this.Jn.addEntry(e,a,m))}else if(r-=f.size,this.trackRemovals){const m=s1(this.Jn.serializer,l.convertToNoDocument(Wt.min()));t.push(this.Jn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.Jn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Jn.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.Jn.zn(e,t).next(r=>(this.Yn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Jn.Wn(e,t).next(({documents:r,Hn:i})=>(i.forEach((a,l)=>{this.Yn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function D1(n){return qr(n,"remoteDocumentGlobal")}function Ff(n){return qr(n,"remoteDocumentsV14")}function dw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function S1(n,e){const t=e.documentKey.path.toArray();return[n,wT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function A1(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=rn(t[a],r[a]),i)return i;return i=rn(t.length,r.length),i||(i=rn(t[t.length-2],r[r.length-2]),i||rn(t[t.length-1],r[r.length-1]))}class NB{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class M1{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&ew(r.mutation,i,Yi.empty(),$n.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,_n()).next(()=>r))}getLocalViewOfDocuments(e,t,r=_n()){const i=Ra();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=QE();return a.forEach((f,m)=>{l=l.insert(f,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Ra();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,_n()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let a=_s();const l=JE(),f=JE();return t.forEach((m,v)=>{const b=r.get(v.key);i.has(v.key)&&(void 0===b||b.mutation instanceof ol)?a=a.insert(v.key,v):void 0!==b?(l.set(v.key,b.mutation.getFieldMask()),ew(b.mutation,v,b.mutation.getFieldMask(),$n.now())):l.set(v.key,Yi.empty())}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,b)=>l.set(v,b)),t.forEach((v,b)=>{var T;return f.set(v,new NB(b,null!==(T=l.get(v))&&void 0!==T?T:null))}),f))}recalculateAndSaveOverlays(e,t){const r=JE();let i=new Dr((l,f)=>l-f),a=_n();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let b=r.get(m)||Yi.empty();b=f.applyToLocalView(v,b),r.set(m,b);const T=(i.get(f.batchId)||_n()).add(m);i=i.insert(f.batchId,T)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,b=m.value,T=Dk();b.forEach(x=>{if(!a.has(x)){const V=kk(t.get(x),r.get(x));null!==V&&T.set(x,V),a=a.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,T))}return ue.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ht.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):hx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ue.resolve(Ra());let f=-1,m=a;return l.next(v=>ue.forEach(v,(b,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),a.get(b)?ue.resolve():this.remoteDocumentCache.getEntry(e,b).next(x=>{m=m.insert(b,x)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,_n())).next(b=>({batchId:f,changes:Tk(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ht(t)).next(r=>{let i=QE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=QE();return this.indexManager.getCollectionParents(e,i).next(l=>ue.forEach(l,f=>{const m=(v=t,b=f.child(i),new sl(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,b;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((b,T)=>{a=a.insert(b,T)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,m)=>{const v=m.getKey();null===a.get(v)&&(a=a.insert(v,vt.newInvalidDocument(v)))});let l=QE();return a.forEach((f,m)=>{const v=i.get(f);void 0!==v&&ew(v.mutation,m,Yi.empty(),$n.now()),YE(t,m)&&(l=l.insert(f,m))}),l})}}class OB{constructor(e){this.serializer=e,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return ue.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:jr(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(r=t).name,query:Tx(r.bundledQuery),readTime:jr(r.readTime)}),ue.resolve();var r}}class kB{constructor(){this.overlays=new Dr(ht.comparator),this.ts=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ra();return ue.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.re(e,t,a)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ts.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ts.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const i=Ra(),a=t.length+1,l=new ht(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return ue.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Dr((v,b)=>v-b);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let b=a.get(v.largestBatchId);null===b&&(b=Ra(),a=a.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const f=Ra(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,b)=>f.set(v,b)),!(f.size()>=i)););return ue.resolve(f)}re(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ts.get(i.largestBatchId).delete(r.key);this.ts.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new yx(t,r));let a=this.ts.get(t);void 0===a&&(a=_n(),this.ts.set(t,a)),this.ts.set(t,a.add(r.key))}}class Px{constructor(){this.es=new qn(gi.ns),this.ss=new qn(gi.rs)}isEmpty(){return this.es.isEmpty()}addReference(e,t){const r=new gi(e,t);this.es=this.es.add(r),this.ss=this.ss.add(r)}os(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.us(new gi(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}hs(e){const t=new ht(new fn([])),r=new gi(t,e),i=new gi(t,e+1),a=[];return this.ss.forEachInRange([r,i],l=>{this.us(l),a.push(l.key)}),a}ls(){this.es.forEach(e=>this.us(e))}us(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}fs(e){const t=new ht(new fn([])),r=new gi(t,e),i=new gi(t,e+1);let a=_n();return this.ss.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new gi(e,0),r=this.es.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class gi{constructor(e,t){this.key=e,this.ds=t}static ns(e,t){return ht.comparator(e.key,t.key)||rn(e.ds,t.ds)}static rs(e,t){return rn(e.ds,t.ds)||ht.comparator(e.key,t.key)}}class FB{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this._s=new qn(gi.ns)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new mx(a,t,r,i);this.mutationQueue.push(l);for(const f of i)this._s=this._s.add(new gi(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ue.resolve(l)}lookupMutationBatch(e,t){return ue.resolve(this.gs(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ys(t+1),a=i<0?0:i;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new gi(t,0),i=new gi(t,Number.POSITIVE_INFINITY),a=[];return this._s.forEachInRange([r,i],l=>{const f=this.gs(l.ds);a.push(f)}),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qn(rn);return t.forEach(i=>{const a=new gi(i,0),l=new gi(i,Number.POSITIVE_INFINITY);this._s.forEachInRange([a,l],f=>{r=r.add(f.ds)})}),ue.resolve(this.ps(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;ht.isDocumentKey(a)||(a=a.child(""));const l=new gi(new ht(a),0);let f=new qn(rn);return this._s.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(m.ds)),!0)},l),ue.resolve(this.ps(f))}ps(e){const t=[];return e.forEach(r=>{const i=this.gs(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){zt(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();let r=this._s;return ue.forEach(t.mutations,i=>{const a=new gi(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this._s=r})}En(e){}containsKey(e,t){const r=new gi(t,0),i=this._s.firstAfterOrEqual(r);return ue.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ue.resolve()}Is(e,t){return this.ys(e)}ys(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}gs(e){const t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class LB{constructor(e){this.Ts=e,this.docs=new Dr(ht.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():vt.newInvalidDocument(t))}getEntries(e,t){let r=_s();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():vt.newInvalidDocument(i))}),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=_s();const l=t.path,f=new ht(l.child("")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:v,value:{document:b}}=m.getNext();if(!l.isPrefixOf(v.path))break;v.path.length>l.length+1||vm(QM(b),r)<=0||(i.has(b.key)||YE(t,b))&&(a=a.insert(b.key,b.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Dt()}Es(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new VB(this)}getSize(e){return ue.resolve(this.size)}}class VB extends b1{constructor(e){super(),this.Jn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Jn.addEntry(e,i)):this.Jn.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Jn.getEntry(e,t)}getAllFromCache(e,t){return this.Jn.getEntries(e,t)}}class UB{constructor(e){this.persistence=e,this.As=new Zc(t=>Df(t),KE),this.lastRemoteSnapshotVersion=Wt.min(),this.highestTargetId=0,this.Rs=0,this.vs=new Px,this.targetCount=0,this.bs=kf.vn()}forEachTarget(e,t){return this.As.forEach((r,i)=>t(i)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.Rs)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Rs&&(this.Rs=t),ue.resolve()}Sn(e){this.As.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new kf(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}addTargetData(e,t){return this.Sn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Sn(t),ue.resolve()}removeTargetData(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.As.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.As.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ue.waitFor(a).next(()=>i)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.As.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.vs.os(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.vs.cs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),ue.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.vs.hs(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.vs.fs(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.vs.containsKey(t))}}class x1{constructor(e,t){this.Ps={},this.overlays={},this.Vs=new Zi(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=e(this),this.Ds=new UB(this),this.indexManager=new bB,this.remoteDocumentCache=new LB(r=>this.referenceDelegate.Cs(r)),this.serializer=new i1(t),this.xs=new OB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ps[e.toKey()];return r||(r=new FB(t,this.referenceDelegate),this.Ps[e.toKey()]=r),r}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(e,t,r){ze("MemoryPersistence","Starting transaction:",e);const i=new BB(this.Vs.next());return this.referenceDelegate.Ns(),r(i).next(a=>this.referenceDelegate.ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Os(e,t){return ue.or(Object.values(this.Ps).map(r=>()=>r.containsKey(e,t)))}}class BB extends BE{constructor(e){super(),this.currentSequenceNumber=e}}class MT{constructor(e){this.persistence=e,this.$s=new Px,this.Ms=null}static Fs(e){return new MT(e)}get Bs(){if(this.Ms)return this.Ms;throw Dt()}addReference(e,t,r){return this.$s.addReference(r,t),this.Bs.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.$s.removeReference(r,t),this.Bs.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Bs.add(t.toString()),ue.resolve()}removeTarget(e,t){this.$s.hs(t.targetId).forEach(i=>this.Bs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Bs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ns(){this.Ms=new Set}ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Bs,r=>{const i=ht.fromPath(r);return this.Ls(e,i).next(a=>{a||t.removeEntry(i,Wt.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ls(e,t).next(r=>{r?this.Bs.delete(t.toString()):this.Bs.add(t.toString())})}Cs(e){return 0}Ls(e,t){return ue.or([()=>ue.resolve(this.$s.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class $B{constructor(e){this.serializer=e}M(e,t,r,i){const a=new Xu("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wf,{unique:!0}),f.createObjectStore("documentMutations"),R1(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=ue.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),R1(e)),l=l.next(()=>function(f){const m=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Wt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,m){return m.store("mutations").j().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wf,{unique:!0});const b=m.store("mutations"),T=v.map(x=>b.put(x));return ue.waitFor(T)})}(e,a))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(a))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Us(a)))),r<7&&i>=7&&(l=l.next(()=>this.Ks(a))),r<8&&i>=8&&(l=l.next(()=>this.Gs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.Qs(a))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:lk});m.createIndex("collectionPathOverlayIndex",rT,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",sx,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:tl});m.createIndex("documentKeyIndex",nT),m.createIndex("collectionGroupIndex",$E)}(e)).next(()=>this.zs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.js(e,a))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:Im}).createIndex("sequenceNumberIndex",ok,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:ak}).createIndex("documentKeyIndex",uk,{unique:!1})}(e))),l}Us(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=DT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ue.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(f=>ue.forEach(f,m=>{zt(m.userId===a.userId);const v=Pf(this.serializer,m);return v1(e,a.userId,v).next(()=>{})}))}))}Ks(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,f)=>{const m=new fn(l),v=[0,Fi(m)];a.push(t.get(v).next(b=>b?ue.resolve():t.put({targetId:0,path:Fi(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ue.waitFor(a))})}Gs(e,t){e.createObjectStore("collectionParents",{keyPath:zE});const r=t.store("collectionParents"),i=new Rx,a=l=>{if(i.add(l)){const f=l.lastSegment(),m=l.popLast();return r.put({collectionId:f,parent:Fi(m)})}};return t.store("remoteDocuments").Z({Y:!0},(l,f)=>{const m=new fn(l);return a(m.popLast())}).next(()=>t.store("documentMutations").Z({Y:!0},([l,f,m],v)=>{const b=no(f);return a(b.popLast())}))}Qs(e){const t=e.store("targets");return t.Z((r,i)=>{const a=ow(i),l=o1(this.serializer,a);return t.put(l)})}zs(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const f=t.store("remoteDocumentsV14"),m=(v=l,v.document?new ht(fn.fromString(v.document.name).popFirst(5)):v.noDocument?ht.fromSegments(v.noDocument.path):v.unknownDocument?ht.fromSegments(v.unknownDocument.path):Dt()).path.toArray();var v;const b={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(b))}).next(()=>ue.waitFor(i))}js(e,t){const r=t.store("mutations"),i=T1(this.serializer),a=new x1(MT.Fs,this.serializer.se);return r.j().next(l=>{const f=new Map;return l.forEach(m=>{var v;let b=null!==(v=f.get(m.userId))&&void 0!==v?v:_n();Pf(this.serializer,m).keys().forEach(T=>b=b.add(T)),f.set(m.userId,b)}),ue.forEach(f,(m,v)=>{const b=new ri(v),T=CT.ie(this.serializer,b),x=a.getIndexManager(b),V=ST.ie(b,this.serializer,x,a.referenceDelegate);return new M1(i,V,T,x).recalculateAndSaveOverlaysForDocumentKeys(new bm(t,Zi.ct),m).next()})})}}function R1(n){n.createObjectStore("targetDocuments",{keyPath:ix}).createIndex("documentTargetsIndex",HE,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",jE,{unique:!0}),n.createObjectStore("targetGlobal")}const Nx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ox{constructor(e,t,r,i,a,l,f,m,v,b,T=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ws=a,this.window=l,this.document=f,this.Hs=v,this.Js=b,this.Ys=T,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=x=>Promise.resolve(),!Ox.D())throw new Be(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xB(this,i),this.si=t+"main",this.serializer=new i1(m),this.ii=new ms(this.si,this.Ys,new $B(this.serializer)),this.Ds=new DB(this.referenceDelegate,this.serializer),this.remoteDocumentCache=T1(this.serializer),this.xs=new _B,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===b&&Fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Be(ge.FAILED_PRECONDITION,Nx);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ds.getHighestSequenceNumber(e))}).then(e=>{this.Vs=new Zi(e,this.Hs)}).then(()=>{this.Ss=!0}).catch(e=>(this.ii&&this.ii.close(),Promise.reject(e)))}hi(e){var t=this;return this.ni=function(){var r=(0,Ce.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ii.B(function(){var t=(0,Ce.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget((0,Ce.Z)(function*(){t.started&&(yield t.oi())})))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>xT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(e).next(t=>{t||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(e)).next(t=>this.isPrimary&&!t?this.di(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Vo(e))return ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ws.enqueueRetryable(()=>this.ni(e)),this.isPrimary=e})}li(e){return hw(e).get("owner").next(t=>ue.resolve(this._i(t)))}mi(e){return xT(e).delete(this.clientId)}gi(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.yi(e.ei,18e5)){e.ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=qr(r,"clientMetadata");return i.j().next(a=>{const l=e.pi(a,18e5),f=a.filter(m=>-1===l.indexOf(m));return ue.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(e.ri)for(const r of t)e.ri.removeItem(e.Ii(r.clientId))}})()}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.Js?ue.resolve(!0):hw(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)){if(this._i(t)&&this.networkEnabled)return!0;if(!this._i(t)){if(!t.allowTabSynchronization)throw new Be(ge.FAILED_PRECONDITION,Nx);return!1}}return!(!this.networkEnabled||!this.inForeground)||xT(e).j().next(r=>void 0===this.pi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ze("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.Ss=!1,e.Ei(),e.ti&&(e.ti.cancel(),e.ti=null),e.Ai(),e.Ri(),yield e.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new bm(t,Zi.ct);return e.di(r).next(()=>e.mi(r))}),e.ii.close(),e.vi()})()}pi(e,t){return e.filter(r=>this.yi(r.updateTimeMs,t)&&!this.Ti(r.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",e=>xT(e).j().next(t=>this.pi(t,18e5).map(r=>r.clientId)))}get started(){return this.Ss}getMutationQueue(e,t){return ST.ie(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new TB(e,this.serializer.se.databaseId)}getDocumentOverlayCache(e){return CT.ie(this.serializer,e)}getBundleCache(){return this.xs}runTransaction(e,t,r){ze("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Ys)?oT:14===l?WE:13===l?sT:12===l?ox:11===l?iT:void Dt();var l;let f;return this.ii.runTransaction(e,i,a,m=>(f=new bm(m,this.Vs?this.Vs.next():Zi.ct),"readwrite-primary"===t?this.li(f).next(v=>!!v||this.fi(f)).next(v=>{if(!v)throw Fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new Be(ge.FAILED_PRECONDITION,UE);return r(f)}).next(v=>this.wi(f).next(()=>v)):this.Pi(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}Pi(e){return hw(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)&&!this._i(t)&&!(this.Js||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Be(ge.FAILED_PRECONDITION,Nx)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hw(e).put("owner",t)}static D(){return ms.D()}di(e){const t=hw(e);return t.get("owner").next(r=>this._i(r)?(ze("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}yi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Fr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ui(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ei();const t=/(?:Version|Mobile)\/1[456]/;(0,J.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(e){var t;try{const r=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return ze("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Fr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(e){Fr("Failed to set zombie client id.",e)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function hw(n){return qr(n,"owner")}function xT(n){return qr(n,"clientMetadata")}function kx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Fx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Vi=r,this.Si=i}static Di(e,t){let r=_n(),i=_n();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Fx(e,t.fromCache,r,i)}}class P1{constructor(){this.Ci=!1}initialize(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ni(e,t).next(a=>a||this.ki(e,t,i,r)).next(a=>a||this.Oi(e,t))}Ni(e,t){if(Ek(t))return ue.resolve(null);let r=Qi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=pT(t,null,"F"),r=Qi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=_n(...a);return this.xi.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.$i(t,f);return this.Mi(t,v,l,m.readTime)?this.Ni(e,pT(t,null,"F")):this.Fi(e,v,t,m)}))})))}ki(e,t,r,i){return Ek(t)||i.isEqual(Wt.min())?this.Oi(e,t):this.xi.getDocuments(e,r).next(a=>{const l=this.$i(t,a);return this.Mi(t,l,r,i)?this.Oi(e,t):(PE()<=qi.in.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),px(t)),this.Fi(e,l,t,VE(i,-1)))})}$i(e,t){let r=new qn(Ik(e));return t.forEach((i,a)=>{YE(e,a)&&(r=r.add(a))}),r}Mi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Oi(e,t){return PE()<=qi.in.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",px(t)),this.xi.getDocumentsMatchingQuery(e,t,Di.min())}Fi(e,t,r,i){return this.xi.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class jB{constructor(e,t,r,i){this.persistence=e,this.Bi=t,this.serializer=i,this.Li=new Dr(rn),this.qi=new Zc(a=>Df(a),KE),this.Ui=new Map,this.Ki=e.getRemoteDocumentCache(),this.Ds=e.getTargetCache(),this.xs=e.getBundleCache(),this.Gi(r)}Gi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new M1(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Li))}}function N1(n,e,t,r){return new jB(n,e,t,r)}function O1(n,e){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,Ce.Z)(function*(n,e){const t=pt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Gi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],f=[];let m=_n();for(const v of i){l.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}for(const v of a){f.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}return t.localDocuments.getDocuments(r,m).next(v=>({Qi:v,removedBatchIds:l,addedBatchIds:f}))})})}),Lx.apply(this,arguments)}function HB(n,e){const t=pt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Ki.newChangeBuffer({trackRemovals:!0});return function(l,f,m,v){const b=m.batch,T=b.keys();let x=ue.resolve();return T.forEach(V=>{x=x.next(()=>v.getEntry(f,V)).next(G=>{const le=m.docVersions.get(V);zt(null!==le),G.version.compareTo(le)<0&&(b.applyToRemoteDocument(G,m),G.isValidDocument()&&(G.setReadTime(m.commitVersion),v.addEntry(G)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(f,b))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=_n();for(let m=0;m<l.mutationResults.length;++m)l.mutationResults[m].transformResults.length>0&&(f=f.add(l.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function k1(n){const e=pt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ds.getLastRemoteSnapshotVersion(t))}function zB(n,e){const t=pt(n),r=e.snapshotVersion;let i=t.Li;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Ki.newChangeBuffer({trackRemovals:!0});i=t.Li;const f=[];e.targetChanges.forEach((b,T)=>{const x=i.get(T);if(!x)return;f.push(t.Ds.removeMatchingKeys(a,b.removedDocuments,T).next(()=>t.Ds.addMatchingKeys(a,b.addedDocuments,T)));let V=x.withSequenceNumber(a.currentSequenceNumber);var G,le,Ie;e.targetMismatches.has(T)?V=V.withResumeToken($r.EMPTY_BYTE_STRING,Wt.min()).withLastLimboFreeSnapshotVersion(Wt.min()):b.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(b.resumeToken,r)),i=i.insert(T,V),le=V,Ie=b,(0===(G=x).resumeToken.approximateByteSize()||le.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||Ie.addedDocuments.size+Ie.modifiedDocuments.size+Ie.removedDocuments.size>0)&&f.push(t.Ds.updateTargetData(a,V))});let m=_s(),v=_n();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),f.push(F1(a,l,e.documentUpdates).next(b=>{m=b.zi,v=b.ji})),!r.isEqual(Wt.min())){const b=t.Ds.getLastRemoteSnapshotVersion(a).next(T=>t.Ds.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(b)}return ue.waitFor(f).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.Li=i,a))}function F1(n,e,t){let r=_n(),i=_n();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=_s();return t.forEach((f,m)=>{const v=a.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(Wt.min())?(e.removeEntry(f,m.readTime),l=l.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),l=l.insert(f,m)):ze("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)}),{zi:l,ji:i}})}function WB(n,e){const t=pt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Vm(n,e){const t=pt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ds.getTargetData(r,e).next(a=>a?(i=a,ue.resolve(i)):t.Ds.allocateTargetId(r).next(l=>(i=new Qc(e,l,0,r.currentSequenceNumber),t.Ds.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Li.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Li=t.Li.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Um(n,e,t){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,Ce.Z)(function*(n,e,t){const r=pt(n),i=r.Li.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Vo(l))throw l;ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Li=r.Li.remove(e),r.qi.delete(i.target)}),Vx.apply(this,arguments)}function RT(n,e,t){const r=pt(n);let i=Wt.min(),a=_n();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,m,v){const b=pt(f),T=b.qi.get(v);return void 0!==T?ue.resolve(b.Li.get(T)):b.Ds.getTargetData(m,v)}(r,l,Qi(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(l,f.targetId).next(m=>{a=m})}).next(()=>r.Bi.getDocumentsMatchingQuery(l,e,t?i:Wt.min(),t?a:_n())).next(f=>(U1(r,Ck(e),f),{documents:f,Wi:a})))}function L1(n,e){const t=pt(n),r=pt(t.Ds),i=t.Li.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ne(a,e).next(l=>l?l.target:null))}function V1(n,e){const t=pt(n),r=t.Ui.get(e)||Wt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ki.getAllFromCollectionGroup(i,e,VE(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(U1(t,e,i),i))}function U1(n,e,t){let r=n.Ui.get(e)||Wt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ui.set(e,r)}function Ux(){return Ux=(0,Ce.Z)(function*(n,e,t,r){const i=pt(n);let a=_n(),l=_s();for(const v of t){const b=e.Hi(v.metadata.name);v.document&&(a=a.add(b));const T=e.Ji(v);T.setReadTime(e.Yi(v.metadata.readTime)),l=l.insert(b,T)}const f=i.Ki.newChangeBuffer({trackRemovals:!0}),m=yield Vm(i,(v=r,Qi(Mm(fn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>F1(v,f,l).next(b=>(f.apply(v),b)).next(b=>i.Ds.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Ds.addMatchingKeys(v,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,b.zi,b.ji)).next(()=>b.zi)))}),Ux.apply(this,arguments)}function qB(n,e){return Bx.apply(this,arguments)}function Bx(){return Bx=(0,Ce.Z)(function*(n,e,t=_n()){const r=yield Vm(n,Qi(Tx(e.bundledQuery))),i=pt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=jr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.xs.saveNamedQuery(a,e);const f=r.withResumeToken($r.EMPTY_BYTE_STRING,l);return i.Li=i.Li.insert(f.targetId,f),i.Ds.updateTargetData(a,f).next(()=>i.Ds.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Ds.addMatchingKeys(a,t,r.targetId)).next(()=>i.xs.saveNamedQuery(a,e))})}),Bx.apply(this,arguments)}function B1(n,e){return`firestore_clients_${n}_${e}`}function $1(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function $x(n,e){return`firestore_targets_${n}_${e}`}class PT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Be(i.error.code,i.error.message))),l?new PT(e,t,i.state,a):(Fr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Be(r.error.code,r.error.message))),a?new fw(e,r.state,i):(Fr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class NT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=gT();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=nx(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new NT(e,a):(Fr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class jx{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new jx(t.clientId,t.onlineState):(Fr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Hx{constructor(){this.activeTargetIds=gT()}tr(e){this.activeTargetIds=this.activeTargetIds.add(e)}er(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zx{constructor(e,t,r,i,a){this.window=e,this.Ws=t,this.persistenceKey=r,this.nr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new Dr(rn),this.started=!1,this.ur=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.cr=B1(this.persistenceKey,this.nr),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.rr=this.rr.insert(this.nr,new Hx),this.hr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this._r=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.syncEngine.bi();for(const i of t){if(i===e.nr)continue;const a=e.getItem(B1(e.persistenceKey,i));if(a){const l=NT.Zi(i,a);l&&(e.rr=e.rr.insert(l.clientId,l))}}e.mr();const r=e.storage.getItem(e.wr);if(r){const i=e.gr(r);i&&e.yr(i)}for(const i of e.ur)e.ir(i);e.ur=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(e){let t=!1;return this.rr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ir(e,"pending")}updateMutationState(e,t,r){this.Ir(e,t,r),this.Tr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem($x(this.persistenceKey,e));if(r){const i=fw.Zi(e,r);i&&(t=i.state)}}return this.Er.tr(e),this.mr(),t}removeLocalQueryTarget(e){this.Er.er(e),this.mr()}isLocalQueryTarget(e){return this.Er.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($x(this.persistenceKey,e))}updateQueryState(e,t,r){this.Ar(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Tr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Rr(e)}notifyBundleLoaded(e){this.vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ze("SharedClientState","READ",e,t),t}setItem(e,t){ze("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ir(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ze("SharedClientState","EVENT",r.key,r.newValue),r.key===this.cr)return void Fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable((0,Ce.Z)(function*(){if(t.started){if(null!==r.key)if(t.hr.test(r.key)){if(null==r.newValue){const i=t.br(r.key);return t.Pr(i,null)}{const i=t.Vr(r.key,r.newValue);if(i)return t.Pr(i.clientId,i)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.gr(r.newValue);if(i)return t.yr(i)}}else if(r.key===t.ar){const i=function(a){let l=Zi.ct;if(null!=a)try{const f=JSON.parse(a);zt("number"==typeof f),l=f}catch(f){Fr("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==Zi.ct&&t.sequenceNumberHandler(i)}else if(r.key===t._r){const i=t.kr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Or(a)))}}else t.ur.push(r)}))}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(e,t,r){const i=new PT(this.currentUser,e,t,r),a=$1(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Xi())}Tr(e){const t=$1(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Rr(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.nr,onlineState:e}))}Ar(e,t,r){const i=$x(this.persistenceKey,e),a=new fw(e,t,r);this.setItem(i,a.Xi())}vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}br(e){const t=this.hr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.br(e);return NT.Zi(r,t)}Sr(e,t){const r=this.lr.exec(e),i=Number(r[1]);return PT.Zi(new ri(void 0!==r[2]?r[2]:null),i,t)}Cr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return fw.Zi(i,t)}gr(e){return jx.Zi(e)}kr(e){return JSON.parse(e)}Dr(e){var t=this;return(0,Ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Nr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}Pr(e,t){const r=t?this.rr.insert(e,t):this.rr.remove(e),i=this.pr(this.rr),a=this.pr(r),l=[],f=[];return a.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{a.has(m)||f.push(m)}),this.syncEngine.Fr(l,f).then(()=>{this.rr=r})}yr(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}pr(e){let t=gT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class j1{constructor(){this.Br=new Hx,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Br.tr(e),this.Lr[e]||"not-current"}updateQueryState(e,t,r){this.Lr[e]=t}removeLocalQueryTarget(e){this.Br.er(e)}isLocalQueryTarget(e){return this.Br.activeTargetIds.has(e)}clearQueryState(e){delete this.Lr[e]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(e){return this.Br.activeTargetIds.has(e)}start(){return this.Br=new Hx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class KB{qr(e){}shutdown(){}}class H1{constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Qr(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let OT=null;function Wx(){return null===OT?OT=268435456+Math.round(2147483648*Math.random()):OT++,"0x"+OT.toString(16)}const ZB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YB{constructor(e){this.Wr=e.Wr,this.Hr=e.Hr}Jr(e){this.Yr=e}Zr(e){this.Xr=e}onMessage(e){this.eo=e}close(){this.Hr()}send(e){this.Wr(e)}no(){this.Yr()}so(e){this.Xr(e)}io(e){this.eo(e)}}const Li="WebChannelConnection";class QB extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.ro=(e.ssl?"https":"http")+"://"+e.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(e,t,r,i,a){const l=Wx(),f=this.ao(e,t);ze("RestConnection",`Sending RPC '${e}' ${l}:`,f,r);const m={};return this.ho(m,i,a),this.lo(e,f,m,r).then(v=>(ze("RestConnection",`Received RPC '${e}' ${l}: `,v),v),v=>{throw to("RestConnection",`RPC '${e}' ${l} failed with error: `,v,"url: ",f,"request:",r),v})}fo(e,t,r,i,a,l){return this.co(e,t,r,i,a)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+yf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ao(e,t){return`${this.ro}/v1/${t}:${ZB[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){const a=Wx();return new Promise((l,f)=>{const m=new gm;m.setWithCredentials(!0),m.listenOnce(zb.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case RE.NO_ERROR:const b=m.getResponseJson();ze(Li,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(b)),l(b);break;case RE.TIMEOUT:ze(Li,`RPC '${e}' ${a} timed out`),f(new Be(ge.DEADLINE_EXCEEDED,"Request time out"));break;case RE.HTTP_ERROR:const T=m.getStatus();if(ze(Li,`RPC '${e}' ${a} failed with status:`,T,"response text:",m.getResponseText()),T>0){let x=m.getResponseJson();Array.isArray(x)&&(x=x[0]);const V=x?.error;if(V&&V.status&&V.message){const G=function(le){const Ie=le.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(Ie)>=0?Ie:ge.UNKNOWN}(V.status);f(new Be(G,V.message))}else f(new Be(ge.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new Be(ge.UNAVAILABLE,"Connection failed."));break;default:Dt()}}finally{ze(Li,`RPC '${e}' ${a} completed.`)}});const v=JSON.stringify(i);ze(Li,`RPC '${e}' ${a} sending request:`,i),m.send(t,"POST",v,r,15)})}wo(e,t,r){const i=Wx(),a=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=xE(),f=Hb(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new zM({})),this.ho(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const v=a.join("");ze(Li,`Creating RPC '${e}' stream ${i}: ${v}`,m);const b=l.createWebChannel(v,m);let T=!1,x=!1;const V=new YB({Wr:le=>{x?ze(Li,`Not sending because RPC '${e}' stream ${i} is closed:`,le):(T||(ze(Li,`Opening RPC '${e}' stream ${i} transport.`),b.open(),T=!0),ze(Li,`RPC '${e}' stream ${i} sending:`,le),b.send(le))},Hr:()=>b.close()}),G=(le,Ie,bt)=>{le.listen(Ie,Rt=>{try{bt(Rt)}catch(St){setTimeout(()=>{throw St},0)}})};return G(b,pm.EventType.OPEN,()=>{x||ze(Li,`RPC '${e}' stream ${i} transport opened.`)}),G(b,pm.EventType.CLOSE,()=>{x||(x=!0,ze(Li,`RPC '${e}' stream ${i} transport closed`),V.so())}),G(b,pm.EventType.ERROR,le=>{x||(x=!0,to(Li,`RPC '${e}' stream ${i} transport errored:`,le),V.so(new Be(ge.UNAVAILABLE,"The operation could not be completed")))}),G(b,pm.EventType.MESSAGE,le=>{var Ie;if(!x){const bt=le.data[0];zt(!!bt);const Rt=bt,St=Rt.error||(null===(Ie=Rt[0])||void 0===Ie?void 0:Ie.error);if(St){ze(Li,`RPC '${e}' stream ${i} received error:`,St);const $t=St.status;let ln=function(ii){const ws=Kr[ii];if(void 0!==ws)return $k(ws)}($t),wn=St.message;void 0===ln&&(ln=ge.INTERNAL,wn="Unknown error status: "+$t+" with message "+St.message),x=!0,V.so(new Be(ln,wn)),b.close()}else ze(Li,`RPC '${e}' stream ${i} received:`,bt),V.io(bt)}}),G(f,ik.STAT_EVENT,le=>{le.stat===HM.PROXY?ze(Li,`RPC '${e}' stream ${i} detected buffering proxy`):le.stat===HM.NOPROXY&&ze(Li,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{V.no()},0),V}}function z1(){return typeof window<"u"?window:null}function kT(){return typeof document<"u"?document:null}function pw(n){return new oB(n,!0)}class Gx{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Ws=e,this.timerId=t,this._o=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class W1{constructor(e,t,r,i,a,l,f,m){this.Ws=e,this.bo=r,this.Po=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new Gx(e,t)}xo(){return 1===this.state||5===this.state||this.No()}No(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.ko()}stop(){var e=this;return(0,Ce.Z)(function*(){e.xo()&&(yield e.close(0))})()}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(e){this.Bo(),this.stream.send(e)}Mo(){var e=this;return(0,Ce.Z)(function*(){if(e.No())return e.close(0)})()}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}close(e,t){var r=this;return(0,Ce.Z)(function*(){r.Bo(),r.Lo(),r.Co.cancel(),r.Vo++,4!==e?r.Co.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Fr(t.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),r.Co.Eo()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===t&&this.Ko(r,i)},r=>{e(()=>{const i=new Be(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Go(i)})})}Ko(e,t){const r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr(()=>{r(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(i=>{r(()=>this.Go(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}ko(){var e=this;this.state=5,this.Co.Ao((0,Ce.Z)(function*(){e.state=0,e.start()}))}Go(e){return ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Ws.enqueueAndForget(()=>this.Vo===e?t():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JB extends W1{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}Qo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Co.reset();const t=function lB(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:Dt(),i=e.targetChange.targetIds||[],a=function(m,v){return m.useProto3Json?(zt(void 0===v||"string"==typeof v),$r.fromBase64String(v||"")):(zt(void 0===v||v instanceof Uint8Array),$r.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(m){const v=void 0===m.code?ge.UNKNOWN:$k(m.code);return new Be(v,m.message||"")}(l);t=new Hk(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Pa(n,r.document.name),a=jr(r.document.updateTime),l=r.document.createTime?jr(r.document.createTime):Wt.min(),f=new Ct({mapValue:{fields:r.document.fields}}),m=vt.newFoundDocument(i,a,l,f);t=new ET(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=Pa(n,r.document),a=r.readTime?jr(r.readTime):Wt.min(),l=vt.newNoDocument(i,a);t=new ET([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Pa(n,r.document);t=new ET([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Dt();{const r=e.filter,a=new tB(r.count||0);t=new jk(r.targetId,a)}}var m;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Wt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Wt.min():a.readTime?jr(a.readTime):Wt.min()}(e);return this.listener.zo(t,r)}jo(e){const t={};t.database=iw(this.serializer),t.addTarget=function(i,a){let l;const f=a.target;return l=dT(f)?{documents:Xk(i,f)}:{query:bx(i,f)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=qk(i,a.resumeToken):a.snapshotVersion.compareTo(Wt.min())>0&&(l.readTime=Om(i,a.snapshotVersion.toTimestamp())),l}(this.serializer,e);const r=function dB(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=iw(this.serializer),t.removeTarget=e,this.Fo(t)}}class XB extends W1{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(zt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();const t=function cB(n,e){return n&&n.length>0?(zt(void 0!==e),n.map(t=>function(r,i){let a=jr(r.updateTime?r.updateTime:i);return a.isEqual(Wt.min())&&(a=jr(i)),new Y2(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=jr(e.commitTime);return this.listener.Zo(r,t)}return zt(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}tu(){const e={};e.database=iw(this.serializer),this.Fo(e)}Yo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>sw(this.serializer,r))};this.Fo(t)}}class e$ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.eu=!1}nu(){if(this.eu)throw new Be(ge.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Be(ge.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.fo(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Be(ge.UNKNOWN,a.toString())})}terminate(){this.eu=!0}}class n${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.uu("Offline")))}set(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}uu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}cu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(Fr(t),this.ru=!1):ze("OnlineStateTracker",t)}hu(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}class r${constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=a,this._u.qr(f=>{r.enqueueAndForget((0,Ce.Z)(function*(){var m;td(l)&&(ze("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,Ce.Z)(function*(v){const b=pt(v);b.du.add(4),yield Bm(b),b.mu.set("Unknown"),b.du.delete(4),yield gw(b)}),function(v){return m.apply(this,arguments)})(l))}))}),this.mu=new n$(r,i)}}function gw(n){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,Ce.Z)(function*(n){if(td(n))for(const e of n.wu)yield e(!0)}),Kx.apply(this,arguments)}function Bm(n){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,Ce.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Zx.apply(this,arguments)}function FT(n,e){const t=pt(n);t.fu.has(e.targetId)||(t.fu.set(e.targetId,e),Jx(t)?Qx(t):jm(t).No()&&Yx(t,e))}function mw(n,e){const t=pt(n),r=jm(t);t.fu.delete(e),r.No()&&G1(t,e),0===t.fu.size&&(r.No()?r.$o():td(t)&&t.mu.set("Unknown"))}function Yx(n,e){n.gu.Ot(e.targetId),jm(n).jo(e)}function G1(n,e){n.gu.Ot(e),jm(n).Wo(e)}function Qx(n){n.gu=new nB({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.fu.get(e)||null}),jm(n).start(),n.mu.ou()}function Jx(n){return td(n)&&!jm(n).xo()&&n.fu.size>0}function td(n){return 0===pt(n).du.size}function q1(n){n.gu=void 0}function i$(n){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,Ce.Z)(function*(n){n.fu.forEach((e,t)=>{Yx(n,e)})}),Xx.apply(this,arguments)}function s$(n,e){return eR.apply(this,arguments)}function eR(){return eR=(0,Ce.Z)(function*(n,e){q1(n),Jx(n)?(n.mu.au(e),Qx(n)):n.mu.set("Unknown")}),eR.apply(this,arguments)}function o$(n,e,t){return tR.apply(this,arguments)}function tR(){return tR=(0,Ce.Z)(function*(n,e,t){if(n.mu.set("Online"),e instanceof Hk&&2===e.state&&e.cause)try{yield(r=(0,Ce.Z)(function*(i,a){const l=a.cause;for(const f of a.targetIds)i.fu.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.fu.delete(f),i.gu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield LT(n,r)}else if(e instanceof ET?n.gu.Kt(e):e instanceof jk?n.gu.Jt(e):n.gu.zt(e),!t.isEqual(Wt.min()))try{const r=yield k1(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.gu.Xt(a);return l.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.fu.get(m);v&&i.fu.set(m,v.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach(f=>{const m=i.fu.get(f);if(!m)return;i.fu.set(f,m.withResumeToken($r.EMPTY_BYTE_STRING,m.snapshotVersion)),G1(i,f);const v=new Qc(m.target,f,1,m.sequenceNumber);Yx(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){ze("RemoteStore","Failed to raise snapshot:",r),yield LT(n,r)}var r}),tR.apply(this,arguments)}function LT(n,e,t){return nR.apply(this,arguments)}function nR(){return nR=(0,Ce.Z)(function*(n,e,t){if(!Vo(e))throw e;n.du.add(1),yield Bm(n),n.mu.set("Offline"),t||(t=()=>k1(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){ze("RemoteStore","Retrying IndexedDB access"),yield t(),n.du.delete(1),yield gw(n)}))}),nR.apply(this,arguments)}function K1(n,e){return e().catch(t=>LT(n,t,e))}function $m(n){return rR.apply(this,arguments)}function rR(){return rR=(0,Ce.Z)(function*(n){const e=pt(n),t=nd(e);let r=e.lu.length>0?e.lu[e.lu.length-1].batchId:-1;for(;a$(e);)try{const i=yield WB(e.localStore,r);if(null===i){0===e.lu.length&&t.$o();break}r=i.batchId,u$(e,i)}catch(i){yield LT(e,i)}Z1(e)&&Y1(e)}),rR.apply(this,arguments)}function a$(n){return td(n)&&n.lu.length<10}function u$(n,e){n.lu.push(e);const t=nd(n);t.No()&&t.Jo&&t.Yo(e.mutations)}function Z1(n){return td(n)&&!nd(n).xo()&&n.lu.length>0}function Y1(n){nd(n).start()}function l$(n){return iR.apply(this,arguments)}function iR(){return iR=(0,Ce.Z)(function*(n){nd(n).tu()}),iR.apply(this,arguments)}function c$(n){return sR.apply(this,arguments)}function sR(){return sR=(0,Ce.Z)(function*(n){const e=nd(n);for(const t of n.lu)e.Yo(t.mutations)}),sR.apply(this,arguments)}function d$(n,e,t){return oR.apply(this,arguments)}function oR(){return oR=(0,Ce.Z)(function*(n,e,t){const r=n.lu.shift(),i=_x.from(r,e,t);yield K1(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield $m(n)}),oR.apply(this,arguments)}function h$(n,e){return aR.apply(this,arguments)}function aR(){return aR=(0,Ce.Z)(function*(n,e){var t;e&&nd(n).Jo&&(yield(t=(0,Ce.Z)(function*(r,i){if(Bk(a=i.code)&&a!==ge.ABORTED){const l=r.lu.shift();nd(r).Oo(),yield K1(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield $m(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),Z1(n)&&Y1(n)}),aR.apply(this,arguments)}function Q1(n,e){return uR.apply(this,arguments)}function uR(){return uR=(0,Ce.Z)(function*(n,e){const t=pt(n);t.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const r=td(t);t.du.add(3),yield Bm(t),r&&t.mu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.du.delete(3),yield gw(t)}),uR.apply(this,arguments)}function lR(n,e){return cR.apply(this,arguments)}function cR(){return cR=(0,Ce.Z)(function*(n,e){const t=pt(n);e?(t.du.delete(2),yield gw(t)):e||(t.du.add(2),yield Bm(t),t.mu.set("Unknown"))}),cR.apply(this,arguments)}function jm(n){return n.yu||(n.yu=function(e,t,r){const i=pt(e);return i.nu(),new JB(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Jr:i$.bind(null,n),Zr:s$.bind(null,n),zo:o$.bind(null,n)}),n.wu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.yu.Oo(),Jx(n)?Qx(n):n.mu.set("Unknown")):(yield n.yu.stop(),q1(n))});return function(t){return e.apply(this,arguments)}}())),n.yu}function nd(n){return n.pu||(n.pu=function(e,t,r){const i=pt(e);return i.nu(),new XB(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Jr:l$.bind(null,n),Zr:h$.bind(null,n),Xo:c$.bind(null,n),Zo:d$.bind(null,n)}),n.wu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.pu.Oo(),yield $m(n)):(yield n.pu.stop(),n.lu.length>0&&(ze("RemoteStore",`Stopping write stream with ${n.lu.length} pending writes`),n.lu=[]))});return function(t){return e.apply(this,arguments)}}())),n.pu}class dR{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Hn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,f=new dR(e,t,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Be(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hm(n,e){if(Fr("AsyncQueue",`${e}: ${n}`),Vo(n))return new Be(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class zm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ht.comparator(t.key,r.key):(t,r)=>ht.comparator(t.key,r.key),this.keyedMap=QE(),this.sortedSet=new Dr(this.comparator)}static emptySet(e){return new zm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new zm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class J1{constructor(){this.Iu=new Dr(ht.comparator)}track(e){const t=e.doc.key,r=this.Iu.get(t);r?0!==e.type&&3===r.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==r.type?this.Iu=this.Iu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Iu=this.Iu.remove(t):1===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):Dt():this.Iu=this.Iu.insert(t,e)}Tu(){const e=[];return this.Iu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Wm{constructor(e,t,r,i,a,l,f,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new Wm(e,t,zm.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ZE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class f${constructor(){this.Eu=void 0,this.listeners=[]}}class p${constructor(){this.queries=new Zc(e=>wk(e),ZE),this.onlineState="Unknown",this.Au=new Set}}function hR(n,e){return fR.apply(this,arguments)}function fR(){return fR=(0,Ce.Z)(function*(n,e){const t=pt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new f$),i)try{a.Eu=yield t.onListen(r)}catch(l){const f=Hm(l,`Initialization of query '${px(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Ru(t.onlineState),a.Eu&&e.vu(a.Eu)&&mR(t)}),fR.apply(this,arguments)}function pR(n,e){return gR.apply(this,arguments)}function gR(){return gR=(0,Ce.Z)(function*(n,e){const t=pt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),gR.apply(this,arguments)}function g$(n,e){const t=pt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.vu(i)&&(r=!0);l.Eu=i}}r&&mR(t)}function m$(n,e,t){const r=pt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function mR(n){n.Au.forEach(e=>{e.next()})}class _R{constructor(e,t,r){this.query=e,this.bu=t,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Wm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),t=!0):this.Du(e,this.onlineState)&&(this.Cu(e),t=!0),this.Vu=e,t}onError(e){this.bu.error(e)}Ru(e){this.onlineState=e;let t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}Du(e,t){return!e.fromCache||(!this.options.xu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Su(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Cu(e){e=Wm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}class _${constructor(e,t){this.Nu=e,this.byteLength=t}ku(){return"metadata"in this.Nu}}class X1{constructor(e){this.serializer=e}Hi(e){return Pa(this.serializer,e)}Ji(e){return e.metadata.exists?Jk(this.serializer,e.document,!1):vt.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}Yi(e){return jr(e)}}class y${constructor(e,t,r){this.Ou=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=eF(e)}$u(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;const r=fn.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new X1(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.Hi(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||_n()).add(a);t.set(l,f)}}return t}complete(){var e=this;return(0,Ce.Z)(function*(){const t=yield function GB(n,e,t,r){return Ux.apply(this,arguments)}(e.localStore,new X1(e.serializer),e.documents,e.Ou.id),r=e.Mu(e.documents);for(const i of e.queries)yield qB(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Fu:e.collectionGroups,Bu:t}})()}}function eF(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class tF{constructor(e){this.key=e}}class nF{constructor(e){this.key=e}}class rF{constructor(e,t){this.query=e,this.Lu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=_n(),this.mutatedKeys=_n(),this.Ku=Ik(e),this.Gu=new zm(this.Ku)}get Qu(){return this.Lu}zu(e,t){const r=t?t.ju:new J1,i=t?t.Gu:this.Gu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,T)=>{const x=i.get(b),V=YE(this.query,T)?T:null,G=!!x&&this.mutatedKeys.has(x.key),le=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Ie=!1;x&&V?x.data.isEqual(V.data)?G!==le&&(r.track({type:3,doc:V}),Ie=!0):this.Wu(x,V)||(r.track({type:2,doc:V}),Ie=!0,(m&&this.Ku(V,m)>0||v&&this.Ku(V,v)<0)&&(f=!0)):!x&&V?(r.track({type:0,doc:V}),Ie=!0):x&&!V&&(r.track({type:1,doc:x}),Ie=!0,(m||v)&&(f=!0)),Ie&&(V?(l=l.add(V),a=le?a.add(b):a.delete(b)):(l=l.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{Gu:l,ju:r,Mi:f,mutatedKeys:a}}Wu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const a=e.ju.Tu();a.sort((v,b)=>function(T,x){const V=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt()}};return V(T)-V(x)}(v.type,b.type)||this.Ku(v.doc,b.doc)),this.Hu(r);const l=t?this.Ju():[],f=0===this.Uu.size&&this.current?1:0,m=f!==this.qu;return this.qu=f,0!==a.length||m?{snapshot:new Wm(this.query,e.Gu,i,a,e.mutatedKeys,0===f,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),Yu:l}:{Yu:l}}Ru(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new J1,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.Uu;this.Uu=_n(),this.Gu.forEach(r=>{this.Zu(r.key)&&(this.Uu=this.Uu.add(r.key))});const t=[];return e.forEach(r=>{this.Uu.has(r)||t.push(new nF(r))}),this.Uu.forEach(r=>{e.has(r)||t.push(new tF(r))}),t}Xu(e){this.Lu=e.Wi,this.Uu=_n();const t=this.zu(e.documents);return this.applyChanges(t,!0)}tc(){return Wm.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class v${constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class E${constructor(e){this.key=e,this.ec=!1}}class w${constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.nc={},this.sc=new Zc(f=>wk(f),ZE),this.ic=new Map,this.rc=new Set,this.oc=new Dr(ht.comparator),this.uc=new Map,this.cc=new Px,this.ac={},this.hc=new Map,this.lc=kf.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function C$(n,e){return yR.apply(this,arguments)}function yR(){return yR=(0,Ce.Z)(function*(n,e){const t=$R(n);let r,i;const a=t.sc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.tc();else{const l=yield Vm(t.localStore,Qi(e));t.isPrimaryClient&&FT(t.remoteStore,l);const f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield vR(t,e,r,"current"===f,l.resumeToken)}return i}),yR.apply(this,arguments)}function vR(n,e,t,r,i){return ER.apply(this,arguments)}function ER(){return ER=(0,Ce.Z)(function*(n,e,t,r,i){n.dc=(T,x,V)=>{return(G=(0,Ce.Z)(function*(le,Ie,bt,Rt){let St=Ie.view.zu(bt);St.Mi&&(St=yield RT(le.localStore,Ie.query,!1).then(({documents:wn})=>Ie.view.zu(wn,St)));const $t=Rt&&Rt.targetChanges.get(Ie.targetId),ln=Ie.view.applyChanges(St,le.isPrimaryClient,$t);return xR(le,Ie.targetId,ln.Yu),ln.snapshot}),function(le,Ie,bt,Rt){return G.apply(this,arguments)})(n,T,x,V);var G};const a=yield RT(n.localStore,e,!0),l=new rF(e,a.Wi),f=l.zu(a.documents),m=nw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=l.applyChanges(f,n.isPrimaryClient,m);xR(n,t,v.Yu);const b=new v$(e,t,l);return n.sc.set(e,b),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),v.snapshot}),ER.apply(this,arguments)}function I$(n,e){return wR.apply(this,arguments)}function wR(){return wR=(0,Ce.Z)(function*(n,e){const t=pt(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(a=>!ZE(a,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Um(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),mw(t.remoteStore,r.targetId),Gm(t,r.targetId)}).catch(Lo))):(Gm(t,r.targetId),yield Um(t.localStore,r.targetId,!0))}),wR.apply(this,arguments)}function CR(){return CR=(0,Ce.Z)(function*(n,e,t){const r=jR(n);try{const i=yield function(a,l){const f=pt(a),m=$n.now(),v=l.reduce((x,V)=>x.add(V.key),_n());let b,T;return f.persistence.runTransaction("Locally write mutations","readwrite",x=>{let V=_s(),G=_n();return f.Ki.getEntries(x,v).next(le=>{V=le,V.forEach((Ie,bt)=>{bt.isValidDocument()||(G=G.add(Ie))})}).next(()=>f.localDocuments.getOverlayedDocuments(x,V)).next(le=>{b=le;const Ie=[];for(const bt of l){const Rt=J2(bt,b.get(bt.key).overlayedDocument);null!=Rt&&Ie.push(new ol(bt.key,Rt,Ve(Rt.value.mapValue),vr.exists(!0)))}return f.mutationQueue.addMutationBatch(x,m,Ie,l)}).next(le=>{T=le;const Ie=le.applyToLocalDocumentSet(b,G);return f.documentOverlayCache.saveOverlays(x,le.batchId,Ie)})}).then(()=>({batchId:T.batchId,changes:Tk(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,f){let m=a.ac[a.currentUser.toKey()];m||(m=new Dr(rn)),m=m.insert(l,f),a.ac[a.currentUser.toKey()]=m}(r,i.batchId,t),yield al(r,i.changes),yield $m(r.remoteStore)}catch(i){const a=Hm(i,"Failed to persist write");t.reject(a)}}),CR.apply(this,arguments)}function iF(n,e){return IR.apply(this,arguments)}function IR(){return IR=(0,Ce.Z)(function*(n,e){const t=pt(n);try{const r=yield zB(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.uc.get(a);l&&(zt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.ec=!0:i.modifiedDocuments.size>0?zt(l.ec):i.removedDocuments.size>0&&(zt(l.ec),l.ec=!1))}),yield al(t,r,e)}catch(r){yield Lo(r)}}),IR.apply(this,arguments)}function sF(n,e,t){const r=pt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((a,l)=>{const f=l.view.Ru(e);f.snapshot&&i.push(f.snapshot)}),function(a,l){const f=pt(a);f.onlineState=l;let m=!1;f.queries.forEach((v,b)=>{for(const T of b.listeners)T.Ru(l)&&(m=!0)}),m&&mR(f)}(r.eventManager,e),i.length&&r.nc.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function T$(n,e,t){return bR.apply(this,arguments)}function bR(){return bR=(0,Ce.Z)(function*(n,e,t){const r=pt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),a=i&&i.key;if(a){let l=new Dr(ht.comparator);l=l.insert(a,vt.newNoDocument(a,Wt.min()));const f=_n().add(a),m=new tw(Wt.min(),new Map,new qn(rn),l,f);yield iF(r,m),r.oc=r.oc.remove(a),r.uc.delete(e),RR(r)}else yield Um(r.localStore,e,!1).then(()=>Gm(r,e,t)).catch(Lo)}),bR.apply(this,arguments)}function D$(n,e){return TR.apply(this,arguments)}function TR(){return TR=(0,Ce.Z)(function*(n,e){const t=pt(n),r=e.batch.batchId;try{const i=yield HB(t.localStore,e);MR(t,r,null),AR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield al(t,i)}catch(i){yield Lo(i)}}),TR.apply(this,arguments)}function S$(n,e,t){return DR.apply(this,arguments)}function DR(){return DR=(0,Ce.Z)(function*(n,e,t){const r=pt(n);try{const i=yield function(a,l){const f=pt(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,l).next(b=>(zt(null!==b),v=b.keys(),f.mutationQueue.removeMutationBatch(m,b))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);MR(r,e,t),AR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield al(r,i)}catch(i){yield Lo(i)}}),DR.apply(this,arguments)}function SR(){return SR=(0,Ce.Z)(function*(n,e){const t=pt(n);td(t.remoteStore)||ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=pt(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=Hm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),SR.apply(this,arguments)}function AR(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function MR(n,e,t){const r=pt(n);let i=r.ac[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function Gm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc.wc(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.hs(e).forEach(r=>{n.cc.containsKey(r)||oF(n,r)})}function oF(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(mw(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),RR(n))}function xR(n,e,t){for(const r of t)r instanceof tF?(n.cc.addReference(r.key,e),M$(n,r)):r instanceof nF?(ze("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||oF(n,r.key)):Dt()}function M$(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(ze("SyncEngine","New document in limbo: "+t),n.rc.add(r),RR(n))}function RR(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new ht(fn.fromString(e)),r=n.lc.next();n.uc.set(r,new E$(t)),n.oc=n.oc.insert(t,r),FT(n.remoteStore,new Qc(Qi(Mm(t.path)),r,2,Zi.ct))}}function al(n,e,t){return PR.apply(this,arguments)}function PR(){return PR=(0,Ce.Z)(function*(n,e,t){const r=pt(n),i=[],a=[],l=[];var f;r.sc.isEmpty()||(r.sc.forEach((f,m)=>{l.push(r.dc(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const b=Fx.Di(m.targetId,v);a.push(b)}}))}),yield Promise.all(l),r.nc.zo(i),yield(f=(0,Ce.Z)(function*(m,v){const b=pt(m);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ue.forEach(v,x=>ue.forEach(x.Vi,V=>b.persistence.referenceDelegate.addReference(T,x.targetId,V)).next(()=>ue.forEach(x.Si,V=>b.persistence.referenceDelegate.removeReference(T,x.targetId,V)))))}catch(T){if(!Vo(T))throw T;ze("LocalStore","Failed to update sequence numbers: "+T)}for(const T of v){const x=T.targetId;if(!T.fromCache){const V=b.Li.get(x),le=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);b.Li=b.Li.insert(x,le)}}}),function(m,v){return f.apply(this,arguments)})(r.localStore,a))}),PR.apply(this,arguments)}function x$(n,e){return NR.apply(this,arguments)}function NR(){return NR=(0,Ce.Z)(function*(n,e){const t=pt(n);if(!t.currentUser.isEqual(e)){ze("SyncEngine","User change. New user:",e.toKey());const r=yield O1(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(l=>{l.forEach(f=>{f.reject(new Be(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield al(t,r.Qi)}var i}),NR.apply(this,arguments)}function R$(n,e){const t=pt(n),r=t.uc.get(e);if(r&&r.ec)return _n().add(r.key);{let i=_n();const a=t.ic.get(e);if(!a)return i;for(const l of a){const f=t.sc.get(l);i=i.unionWith(f.view.Qu)}return i}}function P$(n,e){return OR.apply(this,arguments)}function OR(){return OR=(0,Ce.Z)(function*(n,e){const t=pt(n),r=yield RT(t.localStore,e.query,!0),i=e.view.Xu(r);return t.isPrimaryClient&&xR(t,e.targetId,i.Yu),i}),OR.apply(this,arguments)}function N$(n,e){return kR.apply(this,arguments)}function kR(){return kR=(0,Ce.Z)(function*(n,e){const t=pt(n);return V1(t.localStore,e).then(r=>al(t,r))}),kR.apply(this,arguments)}function O$(n,e,t,r){return FR.apply(this,arguments)}function FR(){return FR=(0,Ce.Z)(function*(n,e,t,r){const i=pt(n),a=yield function(l,f){const m=pt(l),v=pt(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",b=>v.In(b,f).next(T=>T?m.localDocuments.getDocuments(b,T):ue.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield $m(i.remoteStore):"acknowledged"===t||"rejected"===t?(MR(i,e,r||null),AR(i,e),f=e,pt(pt(i.localStore).mutationQueue).En(f)):Dt(),yield al(i,a)):ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),FR.apply(this,arguments)}function LR(){return LR=(0,Ce.Z)(function*(n,e){const t=pt(n);if($R(t),jR(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield aF(t,r.toArray());t.fc=!0,yield lR(t.remoteStore,!0);for(const a of i)FT(t.remoteStore,a)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Gm(t,l),Um(t.localStore,l,!0))),mw(t.remoteStore,l)}),yield i,yield aF(t,r),function(a){const l=pt(a);l.uc.forEach((f,m)=>{mw(l.remoteStore,m)}),l.cc.ls(),l.uc=new Map,l.oc=new Dr(ht.comparator)}(t),t.fc=!1,yield lR(t.remoteStore,!1)}}),LR.apply(this,arguments)}function aF(n,e,t){return VR.apply(this,arguments)}function VR(){return VR=(0,Ce.Z)(function*(n,e,t){const r=pt(n),i=[],a=[];for(const l of e){let f;const m=r.ic.get(l);if(m&&0!==m.length){f=yield Vm(r.localStore,Qi(m[0]));for(const v of m){const b=r.sc.get(v),T=yield P$(r,b);T.snapshot&&a.push(T.snapshot)}}else{const v=yield L1(r.localStore,l);f=yield Vm(r.localStore,v),yield vR(r,uF(v),l,!1,f.resumeToken)}i.push(f)}return r.nc.zo(a),i}),VR.apply(this,arguments)}function uF(n){return vk(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function F$(n){const e=pt(n);return pt(pt(e.localStore).persistence).bi()}function L$(n,e,t,r){return UR.apply(this,arguments)}function UR(){return UR=(0,Ce.Z)(function*(n,e,t,r){const i=pt(n);if(i.fc)return void ze("SyncEngine","Ignoring unexpected query state notification.");const a=i.ic.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield V1(i.localStore,Ck(a[0])),f=tw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,$r.EMPTY_BYTE_STRING);yield al(i,l,f);break}case"rejected":yield Um(i.localStore,e,!0),Gm(i,e,r);break;default:Dt()}}),UR.apply(this,arguments)}function V$(n,e,t){return BR.apply(this,arguments)}function BR(){return BR=(0,Ce.Z)(function*(n,e,t){const r=$R(n);if(r.fc){for(const i of e){if(r.ic.has(i)){ze("SyncEngine","Adding an already active target "+i);continue}const a=yield L1(r.localStore,i),l=yield Vm(r.localStore,a);yield vR(r,uF(a),l.targetId,!1,l.resumeToken),FT(r.remoteStore,l)}for(const i of t)r.ic.has(i)&&(yield Um(r.localStore,i,!1).then(()=>{mw(r.remoteStore,i),Gm(r,i)}).catch(Lo))}}),BR.apply(this,arguments)}function $R(n){const e=pt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=iF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=T$.bind(null,e),e.nc.zo=g$.bind(null,e.eventManager),e.nc.wc=m$.bind(null,e.eventManager),e}function jR(n){const e=pt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=D$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=S$.bind(null,e),e}class VT{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ce.Z)(function*(){t.serializer=pw(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return N1(this.persistence,new P1,e.initialUser,this.serializer)}createPersistence(e){return new x1(MT.Fs,this.serializer)}createSharedClientState(e){return new j1}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class HR extends VT{constructor(e,t,r){super(),this.mc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e),yield r.mc.initialize(r,e),yield jR(r.mc.syncEngine),yield $m(r.mc.remoteStore),yield r.persistence.hi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return N1(this.persistence,new P1,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new AB(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new tx(t,this.persistence);return new Xb(e.asyncQueue,r)}createPersistence(e){const t=kx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ys.withCacheSize(this.cacheSizeBytes):ys.DEFAULT;return new Ox(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,z1(),kT(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new j1}}class lF extends HR{constructor(e,t){super(e,t,!1),this.mc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e);const i=r.mc.syncEngine;r.sharedClientState instanceof zx&&(r.sharedClientState.syncEngine={$r:O$.bind(null,i),Mr:L$.bind(null,i),Fr:V$.bind(null,i),bi:F$.bind(null,i),Or:N$.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.hi(function(){var a=(0,Ce.Z)(function*(l){yield function k$(n,e){return LR.apply(this,arguments)}(r.mc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=z1();if(!zx.D(t))throw new Be(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=kx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class qm{initialize(e,t){var r=this;return(0,Ce.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>sF(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=x$.bind(null,r.syncEngine),yield lR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new p$}createDatastore(e){const t=pw(e.databaseInfo.databaseId),r=new QB(e.databaseInfo);return new e$(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>sF(this.syncEngine,f,0),l=H1.D()?new H1:new KB,new r$(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,f,m,v){const b=new w$(r,i,a,l,f,m);return v&&(b.fc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ce.Z)(function*(t){const r=pt(t);ze("RemoteStore","RemoteStore shutting down."),r.du.add(5),yield Bm(r),r._u.shutdown(),r.mu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function cF(n,e=10240){let t=0;return{read:()=>(0,Ce.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class UT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.gc(this.observer.next,e)}error(e){this.observer.error?this.gc(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString())}yc(){this.muted=!0}gc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class B${constructor(e,t){this.Ic=e,this.serializer=t,this.metadata=new Hn,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(r=>{r&&r.ku()?this.metadata.resolve(r.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Nu)}`))},r=>this.metadata.reject(r))}close(){return this.Ic.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}_c(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Ec()})()}Ec(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Ac();if(null===t)return null;const r=e.Tc.decode(t),i=Number(r);isNaN(i)&&e.Rc(`length string (${r}) is not valid number`);const a=yield e.vc(i);return new _$(JSON.parse(a),t.length+i)})()}bc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ac(){var e=this;return(0,Ce.Z)(function*(){for(;e.bc()<0&&!(yield e.Pc()););if(0===e.buffer.length)return null;const t=e.bc();t<0&&e.Rc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,Ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.Pc())&&t.Rc("Reached the end of bundle when more is expected.");const r=t.Tc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Rc(e){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${e}`)}Pc(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Ic.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class $${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Be(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ce.Z)(function*(a,l){const f=pt(a),m=iw(f.serializer)+"/documents",v={documents:l.map(V=>rw(f.serializer,V))},b=yield f.fo("BatchGetDocuments",m,v,l.length),T=new Map;b.forEach(V=>{const G=function uB(n,e){return"found"in e?function(t,r){zt(!!r.found);const i=Pa(t,r.found.name),a=jr(r.found.updateTime),l=r.found.createTime?jr(r.found.createTime):Wt.min(),f=new Ct({mapValue:{fields:r.found.fields}});return vt.newFoundDocument(i,a,l,f)}(n,e):"missing"in e?function(t,r){zt(!!r.missing),zt(!!r.readTime);const i=Pa(t,r.missing),a=jr(r.readTime);return vt.newNoDocument(i,a)}(n,e):Dt()}(f.serializer,V);T.set(G.key.toString(),G)});const x=[];return l.forEach(V=>{const G=T.get(V.toString());zt(!!G),x.push(G)}),x}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Nm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=ht.fromPath(i);e.mutations.push(new gx(a,e.precondition(a)))}),yield(r=(0,Ce.Z)(function*(i,a){const l=pt(i),f=iw(l.serializer)+"/documents",m={writes:a.map(v=>sw(l.serializer,v))};yield l.co("Commit",f,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Dt();t=Wt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Be(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Wt.min())?vr.exists(!1):vr.updateTime(t):vr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Wt.min()))throw new Be(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vr.updateTime(t)}return vr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class j${constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Vc=r.maxAttempts,this.Co=new Gx(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){var e=this;this.Co.Ao((0,Ce.Z)(function*(){const t=new $$(e.datastore),r=e.Dc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Cc(a)}))}).catch(i=>{e.Cc(i)})}))}Dc(e){try{const t=this.updateFunction(e);return!Ef(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Cc(e){this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(e)}xc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Bk(t)}return!1}}class H${constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ri.UNAUTHENTICATED,this.clientId=Zb.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ce.Z)(function*(f){ze("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(ze("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Be(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Hn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Hm(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function BT(n,e){return zR.apply(this,arguments)}function zR(){return zR=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ce.Z)(function*(a){r.isEqual(a)||(yield O1(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),zR.apply(this,arguments)}function WR(n,e){return GR.apply(this,arguments)}function GR(){return GR=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield qR(n);ze("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Q1(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>Q1(e.remoteStore,a)),n._onlineComponents=e}),GR.apply(this,arguments)}function dF(n){return"FirebaseError"===n.name?n.code===ge.FAILED_PRECONDITION||n.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function qR(n){return KR.apply(this,arguments)}function KR(){return KR=(0,Ce.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ze("FirestoreClient","Using user provided OfflineComponentProvider");try{yield BT(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!dF(t))throw t;to("Error using user provided cache. Falling back to memory cache: "+t),yield BT(n,new VT)}}else ze("FirestoreClient","Using default OfflineComponentProvider"),yield BT(n,new VT);return n._offlineComponents}),KR.apply(this,arguments)}function $T(n){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,Ce.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ze("FirestoreClient","Using user provided OnlineComponentProvider"),yield WR(n,n._uninitializedComponentsProvider._online)):(ze("FirestoreClient","Using default OnlineComponentProvider"),yield WR(n,new qm))),n._onlineComponents}),ZR.apply(this,arguments)}function hF(n){return qR(n).then(e=>e.persistence)}function jT(n){return qR(n).then(e=>e.localStore)}function fF(n){return $T(n).then(e=>e.remoteStore)}function YR(n){return $T(n).then(e=>e.syncEngine)}function Km(n){return QR.apply(this,arguments)}function QR(){return QR=(0,Ce.Z)(function*(n){const e=yield $T(n),t=e.eventManager;return t.onListen=C$.bind(null,e.syncEngine),t.onUnlisten=I$.bind(null,e.syncEngine),t}),QR.apply(this,arguments)}function gF(n,e,t={}){const r=new Hn;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,a,l,f,m){const v=new UT({next:T=>{a.enqueueAndForget(()=>pR(i,b));const x=T.docs.has(l);!x&&T.fromCache?m.reject(new Be(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&T.fromCache&&f&&"server"===f.source?m.reject(new Be(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),b=new _R(Mm(l.path),v,{includeMetadataChanges:!0,xu:!0});return hR(i,b)}(yield Km(n),n.asyncQueue,e,t,r)})),r.promise}function mF(n,e,t={}){const r=new Hn;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,a,l,f,m){const v=new UT({next:T=>{a.enqueueAndForget(()=>pR(i,b)),T.fromCache&&"server"===f.source?m.reject(new Be(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),b=new _R(l,v,{includeMetadataChanges:!0,xu:!0});return hR(i,b)}(yield Km(n),n.asyncQueue,e,t,r)})),r.promise}const _F=new Map;function JR(n,e,t){if(!t)throw new Be(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yF(n,e,t,r){if(!0===e&&!0===r)throw new Be(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vF(n){if(!ht.isDocumentKey(n))throw new Be(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function EF(n){if(ht.isDocumentKey(n))throw new Be(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function HT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Dt()}function Nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Be(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=HT(n);throw new Be(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wF(n,e){if(e<=0)throw new Be(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class CF{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Be(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Be(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,yF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _w{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CF({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Be(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Be(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CF(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new NE;switch(t.type){case"firstParty":return new qb(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Be(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_F.get(e);t&&(ze("ComponentProvider","Removing Datastore"),_F.delete(e),t.terminate())}(this),Promise.resolve()}}function IF(n,e,t,r={}){var i;const a=(n=Nn(n,_w))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&to("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,f;if("string"==typeof r.mockUserToken)l=r.mockUserToken,f=ri.MOCK_USER;else{l=(0,J.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Be(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ri(m)}n._authCredentials=new GM(new Gb(l,f))}}class fr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fr(this.firestore,e,this._key)}}class Si{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class Na extends Si{constructor(e,t,r){super(e,t,Mm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fr(this.firestore,null,new ht(e))}withConverter(e){return new Na(this.firestore,e,this._path)}}function bF(n,e,...t){if(n=(0,J.m9)(n),JR("collection","path",e),n instanceof _w){const r=fn.fromString(e,...t);return EF(r),new Na(n,null,r)}{if(!(n instanceof fr||n instanceof Na))throw new Be(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return EF(r),new Na(n.firestore,null,r)}}function zT(n,e,...t){if(n=(0,J.m9)(n),1===arguments.length&&(e=Zb.A()),JR("doc","path",e),n instanceof _w){const r=fn.fromString(e,...t);return vF(r),new fr(n,null,new ht(r))}{if(!(n instanceof fr||n instanceof Na))throw new Be(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return vF(r),new fr(n.firestore,n instanceof Na?n.converter:null,new ht(r))}}function TF(n,e){return n=(0,J.m9)(n),e=(0,J.m9)(e),(n instanceof fr||n instanceof Na)&&(e instanceof fr||e instanceof Na)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function XR(n,e){return n=(0,J.m9)(n),e=(0,J.m9)(e),n instanceof Si&&e instanceof Si&&n.firestore===e.firestore&&ZE(n._query,e._query)&&n.converter===e.converter}class X${constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new Gx(this,"async_queue_retry"),this.qc=()=>{const t=kT();t&&ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Co.vo()};const e=kT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Uc(),this.Kc(e)}enterRestrictedMode(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;const t=kT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}enqueue(e){if(this.Uc(),this.Oc)return new Promise(()=>{});const t=new Hn;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.kc.push(e),this.Gc()))}Gc(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.kc.length){try{yield e.kc[0](),e.kc.shift(),e.Co.reset()}catch(t){if(!Vo(t))throw t;ze("AsyncQueue","Operation failed with retryable error: "+t)}e.kc.length>0&&e.Co.Ao(()=>e.Gc())}})()}Kc(e){const t=this.Nc.then(()=>(this.Fc=!0,e().catch(r=>{throw this.Mc=r,this.Fc=!1,Fr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Fc=!1,r))));return this.Nc=t,t}enqueueAfterDelay(e,t,r){this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);const i=dR.createAndSchedule(this,e,t,r,a=>this.Qc(a));return this.$c.push(i),i}Uc(){this.Mc&&Dt()}verifyOperationInProgress(){}zc(){var e=this;return(0,Ce.Z)(function*(){let t;do{t=e.Nc,yield t}while(t!==e.Nc)})()}jc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Wc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Hc(e){this.Lc.push(e)}Qc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function eP(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class ej{constructor(){this._progressObserver={},this._taskCompletionResolver=new Hn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class pr extends _w{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new X$,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||DF(this),this._firestoreClient.terminate()}}function nj(n,e){const t="object"==typeof n?n:(0,kn.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,kn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=(0,J.P0)("firestore");a&&IF(i,...a)}return i}function Hr(n){return n._firestoreClient||DF(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function DF(n){var e,t,r;const i=n._freezeSettings(),a=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new dk(n._databaseId,f,n._persistenceKey,(v=i).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,v.useFetchStreams));var f,v;n._firestoreClient=new H$(n._authCredentials,n._appCheckCredentials,n._queue,a),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function SF(n,e,t){const r=new Hn;return n.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield BT(n,t),yield WR(n,e),r.resolve()}catch(i){const a=i;if(!dF(a))throw a;to("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function AF(n){if(n._initialized||n._terminated)throw new Be(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Oa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oa($r.fromBase64String(e))}catch(t){throw new Be(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Oa($r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ul{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Be(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lf{constructor(e){this._methodName=e}}class WT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Be(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Be(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rn(this._lat,e._lat)||rn(this._long,e._long)}}const hj=/^__.*__$/;class fj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ol(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pm(e,this.data,t,this.fieldTransforms)}}class MF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ol(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt()}}class GT{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Jc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(e){return new GT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Zc({path:r,ta:!1});return i.ea(e),i}na(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Zc({path:r,ta:!1});return i.Jc(),i}sa(e){return this.Zc({path:void 0,ta:!0})}ia(e){return ZT(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Jc(){if(this.path)for(let e=0;e<this.path.length;e++)this.ea(this.path.get(e))}ea(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(xF(this.Yc)&&hj.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}class pj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||pw(e)}ua(e,t,r,i=!1){return new GT({Yc:e,methodName:t,oa:r,path:Tr.emptyPath(),ta:!1,ra:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vf(n){const e=n._freezeSettings(),t=pw(n._databaseId);return new pj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qT(n,e,t,r,i,a={}){const l=n.ua(a.merge||a.mergeFields?2:0,e,t,i);iP("Data must be an object, but it was:",l,r);const f=NF(r,l);let m,v;if(a.merge)m=new Yi(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const b=[];for(const T of a.mergeFields){const x=Ew(e,T,t);if(!l.contains(x))throw new Be(ge.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);kF(b,x)||b.push(x)}m=new Yi(b),v=l.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,v=l.fieldTransforms;return new fj(new Ct(f),m,v)}class vw extends Lf{_toFieldTransform(e){if(2!==e.Yc)throw e.ia(1===e.Yc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vw}}function RF(n,e,t){return new GT({Yc:3,oa:e.settings.oa,methodName:n._methodName,ta:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class tP extends Lf{_toFieldTransform(e){return new XE(e.path,new xm)}isEqual(e){return e instanceof tP}}class gj extends Lf{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=RF(this,e,!0),r=this.ca.map(a=>Uf(a,t)),i=new Af(r);return new XE(e.path,i)}isEqual(e){return this===e}}class mj extends Lf{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=RF(this,e,!0),r=this.ca.map(a=>Uf(a,t)),i=new Mf(r);return new XE(e.path,i)}isEqual(e){return this===e}}class _j extends Lf{constructor(e,t){super(e),this.aa=t}_toFieldTransform(e){const t=new Rm(e.serializer,Mk(e.serializer,this.aa));return new XE(e.path,t)}isEqual(e){return this===e}}function nP(n,e,t,r){const i=n.ua(1,e,t);iP("Data must be an object, but it was:",i,r);const a=[],l=Ct.empty();Sa(r,(m,v)=>{const b=KT(e,m,t);v=(0,J.m9)(v);const T=i.na(b);if(v instanceof vw)a.push(b);else{const x=Uf(v,T);null!=x&&(a.push(b),l.set(b,x))}});const f=new Yi(a);return new MF(l,f,i.fieldTransforms)}function rP(n,e,t,r,i,a){const l=n.ua(1,e,t),f=[Ew(e,r,t)],m=[i];if(a.length%2!=0)throw new Be(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)f.push(Ew(e,a[x])),m.push(a[x+1]);const v=[],b=Ct.empty();for(let x=f.length-1;x>=0;--x)if(!kF(v,f[x])){const V=f[x];let G=m[x];G=(0,J.m9)(G);const le=l.na(V);if(G instanceof vw)v.push(V);else{const Ie=Uf(G,le);null!=Ie&&(v.push(V),b.set(V,Ie))}}const T=new Yi(v);return new MF(b,T,l.fieldTransforms)}function PF(n,e,t,r=!1){return Uf(t,n.ua(r?4:3,e))}function Uf(n,e){if(OF(n=(0,J.m9)(n)))return iP("Unsupported field value:",e,n),NF(n,e);if(n instanceof Lf)return function(t,r){if(!xF(r.Yc))throw r.ia(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ia(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ta&&4!==e.Yc)throw e.ia("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let f=Uf(l,r.sa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,J.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Mk(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=$n.fromDate(t);return{timestampValue:Om(r.serializer,i)}}if(t instanceof $n){const i=new $n(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Om(r.serializer,i)}}if(t instanceof WT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Oa)return{bytesValue:qk(r.serializer,t._byteString)};if(t instanceof fr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ia(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:wx(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ia(`Unsupported field value: ${HT(t)}`)}(n,e)}function NF(n,e){const t={};return Tm(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sa(n,(r,i)=>{const a=Uf(i,e.Xc(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function OF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof $n||n instanceof WT||n instanceof Oa||n instanceof fr||n instanceof Lf)}function iP(n,e,t){if(!OF(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=HT(t);throw e.ia("an object"===r?n+" a custom object":n+" "+r)}var r}function Ew(n,e,t){if((e=(0,J.m9)(e))instanceof ul)return e._internalPath;if("string"==typeof e)return KT(n,e);throw ZT("Field path arguments must be of type string or ",n,!1,void 0,t)}const yj=new RegExp("[~\\*/\\[\\]]");function KT(n,e,t){if(e.search(yj)>=0)throw ZT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ul(...e.split("."))._internalPath}catch{throw ZT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ZT(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new Be(ge.INVALID_ARGUMENT,f+n+m)}function kF(n,e){return n.some(t=>t.isEqual(e))}class ww{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new fr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(YT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class vj extends ww{data(){return super.data()}}function YT(n,e){return"string"==typeof e?KT(n,e):e instanceof ul?e._internalPath:e._delegate._internalPath}function FF(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Be(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sP{}class Cw extends sP{}function rd(n,e,...t){let r=[];e instanceof sP&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof Zm).length,l=i.filter(f=>f instanceof Iw).length;if(a>1||a>0&&l>0)throw new Be(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Iw extends Cw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Iw(e,t,r)}_apply(e){const t=this._parse(e);return BF(e._query,t),new Si(e.firestore,e.converter,fx(e._query,t))}_parse(e){const t=Vf(e.firestore);return function(i,a,l,f,m,v,b){let T;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Be(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){UF(b,v);const x=[];for(const V of b)x.push(VF(f,i,V));T={arrayValue:{values:x}}}else T=VF(f,i,b)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||UF(b,v),T=PF(l,"where",b,"in"===v||"not-in"===v);return bn.create(m,v,T)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Zm extends sP{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Zm(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:jn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const f of l)BF(a,f),a=fx(a,f)}(e._query,t),new Si(e.firestore,e.converter,fx(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class oP extends Cw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new oP(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Be(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Be(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Ma(i,a);return function(f,m){if(null===dx(f)){const v=fT(f);null!==v&&$F(0,v,m.field)}}(r,l),l}(e._query,this._field,this._direction);return new Si(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new sl(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class QT extends Cw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new QT(e,t,r)}_apply(e){return new Si(e.firestore,e.converter,pT(e._query,this._limit,this._limitType))}}class JT extends Cw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new JT(e,t,r)}_apply(e){const t=LF(e,this.type,this._docOrFields,this._inclusive);return new Si(e.firestore,e.converter,(i=t,new sl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class XT extends Cw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new XT(e,t,r)}_apply(e){const t=LF(e,this.type,this._docOrFields,this._inclusive);return new Si(e.firestore,e.converter,(i=t,new sl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function LF(n,e,t,r){if(t[0]=(0,J.m9)(t[0]),t[0]instanceof ww)return function(i,a,l,f,m){if(!f)throw new Be(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const b of Sf(i))if(b.field.isKeyField())v.push(y(a,f.key));else{const T=f.data.field(b.field);if(lT(T))throw new Be(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const x=b.field.canonicalString();throw new Be(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}v.push(T)}return new In(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Vf(n.firestore);return function(a,l,f,m,v,b){const T=a.explicitOrderBy;if(v.length>T.length)throw new Be(ge.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let V=0;V<v.length;V++){const G=v[V];if(T[V].field.isKeyField()){if("string"!=typeof G)throw new Be(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof G}`);if(!hx(a)&&-1!==G.indexOf("/"))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${G}' contains a slash.`);const le=a.path.child(fn.fromString(G));if(!ht.isDocumentKey(le))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${le}' is not because it contains an odd number of segments.`);const Ie=new ht(le);x.push(y(l,Ie))}else{const le=PF(f,m,G);x.push(le)}}return new In(x,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function VF(n,e,t){if("string"==typeof(t=(0,J.m9)(t))){if(""===t)throw new Be(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hx(e)&&-1!==t.indexOf("/"))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(fn.fromString(t));if(!ht.isDocumentKey(r))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return y(n,new ht(r))}if(t instanceof fr)return y(n,t._key);throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${HT(t)}.`)}function UF(n,e){if(!Array.isArray(n)||0===n.length)throw new Be(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BF(n,e){if(e.isInequality()){const r=fT(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=dx(n);null!==a&&$F(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Be(ge.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function $F(n,e,t){if(!t.isEqual(e))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class aP{convertValue(e,t="none"){switch(Kc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Dt()}}convertObject(e,t){const r={};return Sa(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new WT(Sr(e.latitude),Sr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=cT(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Dm(e));default:return null}}convertTimestamp(e){const t=nl(e);return new $n(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=fn.fromString(e);zt(r1(r));const i=new rl(r.get(1),r.get(3)),a=new ht(r.popFirst(5));return i.isEqual(t)||Fr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function eD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Aj extends aP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fr(this.firestore,null,t)}}class Bf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ll extends ww{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(YT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class bw extends ll{data(e={}){return super.data(e)}}class id{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Bf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new bw(this._firestore,this._userDataWriter,r.key,r,new Bf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Be(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new bw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Bf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new bw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Bf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==l.type&&(m=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:xj(l.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function xj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt()}}function HF(n,e){return n instanceof ll&&e instanceof ll?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof id&&e instanceof id&&n._firestore===e._firestore&&XR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class sd extends aP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fr(this.firestore,null,t)}}function zF(n,e,t){n=Nn(n,fr);const r=Nn(n.firestore,pr),i=eD(n.converter,e,t);return Ym(r,[qT(Vf(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,vr.none())])}function WF(n,e,t,...r){n=Nn(n,fr);const i=Nn(n.firestore,pr),a=Vf(i);let l;return l="string"==typeof(e=(0,J.m9)(e))||e instanceof ul?rP(a,"updateDoc",n._key,e,t,r):nP(a,"updateDoc",n._key,e),Ym(i,[l.toMutation(n._key,vr.exists(!0))])}function GF(n,...e){var t,r,i;n=(0,J.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||eP(e[l])||(a=e[l],l++);const f={includeMetadataChanges:a.includeMetadataChanges};if(eP(e[l])){const T=e[l];e[l]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[l+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[l+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let m,v,b;if(n instanceof fr)v=Nn(n.firestore,pr),b=Mm(n._key.path),m={next:T=>{e[l]&&e[l](uP(v,n,T))},error:e[l+1],complete:e[l+2]};else{const T=Nn(n,Si);v=Nn(T.firestore,pr),b=T._query;const x=new sd(v);m={next:V=>{e[l]&&e[l](new id(v,x,T,V))},error:e[l+1],complete:e[l+2]},FF(n._query)}return function(T,x,V,G){const le=new UT(G),Ie=new _R(x,le,V);return T.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return hR(yield Km(T),Ie)})),()=>{le.yc(),T.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return pR(yield Km(T),Ie)}))}}(Hr(v),b,f,m)}function Ym(n,e){return function(t,r){const i=new Hn;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function b$(n,e,t){return CR.apply(this,arguments)}(yield YR(t),r,i)})),i.promise}(Hr(n),e)}function uP(n,e,t){const r=t.docs.get(e._key),i=new sd(n);return new ll(n,i,e._key,r,new Bf(t.hasPendingWrites,t.fromCache),e.converter)}const Gj={maxAttempts:5};class qF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Vf(e)}set(e,t,r){this._verifyNotCommitted();const i=od(e,this._firestore),a=eD(i.converter,t,r),l=qT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,vr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=od(e,this._firestore);let l;return l="string"==typeof(t=(0,J.m9)(t))||t instanceof ul?rP(this._dataReader,"WriteBatch.update",a._key,t,r,i):nP(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,vr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=od(e,this._firestore);return this._mutations=this._mutations.concat(new Nm(t._key,vr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Be(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function od(n,e){if((n=(0,J.m9)(n)).firestore!==e)throw new Be(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class qj extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Vf(e)}get(e){const t=od(e,this._firestore),r=new Aj(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Dt();const a=i[0];if(a.isFoundDocument())return new ww(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new ww(this._firestore,r,t._key,null,t.converter);throw Dt()})}set(e,t,r){const i=od(e,this._firestore),a=eD(i.converter,t,r),l=qT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=od(e,this._firestore);let l;return l="string"==typeof(t=(0,J.m9)(t))||t instanceof ul?rP(this._dataReader,"Transaction.update",a._key,t,r,i):nP(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=od(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=od(e,this._firestore),r=new sd(this._firestore);return super.get(e).then(i=>new ll(this._firestore,r,t._key,i._document,new Bf(!1,!1),t.converter))}}function lP(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function ZF(){if(typeof Uint8Array>"u")throw new Be("unimplemented","Uint8Arrays are not available in this environment.")}function YF(){if(!function ux(){return typeof atob<"u"}())throw new Be("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){yf=kn.SDK_VERSION,(0,kn._registerComponent)(new No.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new pr(new qM(t.getProvider("auth-internal")),new KM(t.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Be(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rl(f.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,kn.registerVersion)(Wb,"3.10.1",n),(0,kn.registerVersion)(Wb,"3.10.1","esm2017")}();class Tw{constructor(e){this._delegate=e}static fromBase64String(e){return YF(),new Tw(Oa.fromBase64String(e))}static fromUint8Array(e){return ZF(),new Tw(Oa.fromUint8Array(e))}toBase64(){return YF(),this._delegate.toBase64()}toUint8Array(){return ZF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function cP(n){return function nH(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class rH{enableIndexedDbPersistence(e,t){return function rj(n,e){AF(n=Nn(n,pr));const t=Hr(n);if(t._uninitializedComponentsProvider)throw new Be(ge.FAILED_PRECONDITION,"SDK cache is already specified.");to("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new qm;return SF(t,i,new HR(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function ij(n){AF(n=Nn(n,pr));const e=Hr(n);if(e._uninitializedComponentsProvider)throw new Be(ge.FAILED_PRECONDITION,"SDK cache is already specified.");to("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new qm;return SF(e,r,new lF(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function sj(n){if(n._initialized&&!n._terminated)throw new Be(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Hn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(t=(0,Ce.Z)(function*(r){if(!ms.D())return Promise.resolve();const i=r+"main";yield ms.delete(i)}),function(r){return t.apply(this,arguments)})(kx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class QF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof rl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&to("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){IF(this._delegate,e,t,r)}enableNetwork(){return function aj(n){return function z$(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield hF(n),t=yield fF(n);return e.setNetworkEnabled(!0),function(r){const i=pt(r);return i.du.delete(0),gw(i)}(t)}))}(Hr(n=Nn(n,pr)))}(this._delegate)}disableNetwork(){return function uj(n){return function W$(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield hF(n),t=yield fF(n);return e.setNetworkEnabled(!1),(r=(0,Ce.Z)(function*(i){const a=pt(i);a.du.add(0),yield Bm(a),a.mu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Hr(n=Nn(n,pr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,yF("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function oj(n){return function(e){const t=new Hn;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function A$(n,e){return SR.apply(this,arguments)}(yield YR(e),t)})),t.promise}(Hr(n=Nn(n,pr)))}(this._delegate)}onSnapshotsInSync(e){return function Uj(n,e){return function K$(n,e){const t=new UT(e);return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield Km(n),i=t,pt(r).Au.add(i),void i.next();var r,i})),()=>{t.yc(),n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield Km(n),i=t,void pt(r).Au.delete(i);var r,i}))}}(Hr(n=Nn(n,pr)),eP(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Qm(this,bF(this._delegate,e))}catch(t){throw Ji(t,"collection()","Firestore.collection()")}}doc(e){try{return new ro(this,zT(this._delegate,e))}catch(t){throw Ji(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xi(this,function J$(n,e){if(n=Nn(n,_w),JR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Be(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Si(n,null,(t=e,new sl(fn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ji(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Kj(n,e,t){n=Nn(n,pr);const r=Object.assign(Object.assign({},Gj),t);return function(i){if(i.maxAttempts<1)throw new Be(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const f=new Hn;return i.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const m=yield function pF(n){return $T(n).then(e=>e.datastore)}(i);new j$(i.asyncQueue,m,l,a,f).run()})),f.promise}(Hr(n),i=>e(new qj(n,i)),r)}(this._delegate,t=>e(new JF(this,t)))}batch(){return Hr(this._delegate),new XF(new qF(this._delegate,e=>Ym(this._delegate,e)))}loadBundle(e){return function lj(n,e){const t=Hr(n=Nn(n,pr)),r=new ej;return function Z$(n,e,t,r){const i=function(a,l){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return cF(m,v);if(m instanceof ArrayBuffer)return cF(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new B$(m,l);var m}(t,pw(e));n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function U$(n,e,t){const r=pt(n);var i;(i=(0,Ce.Z)(function*(a,l,f){try{const m=yield l.getMetadata();if(yield function(x,V){const G=pt(x),le=jr(V.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",Ie=>G.xs.getBundleMetadata(Ie,V.id)).then(Ie=>!!Ie&&Ie.createTime.compareTo(le)>=0)}(a.localStore,m))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(x=m).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);f._updateProgress(eF(m));const v=new y$(m,a.localStore,l.serializer);let b=yield l._c();for(;b;){const x=yield v.$u(b);x&&f._updateProgress(x),b=yield l._c()}const T=yield v.complete();return yield al(a,T.Bu,void 0),yield function(x,V){const G=pt(x);return G.persistence.runTransaction("Save bundle","readwrite",le=>G.xs.saveBundleMetadata(le,V))}(a.localStore,m),f._completeWith(T.progress),Promise.resolve(T.Fu)}catch(m){return to("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var x}),function(a,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield YR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function cj(n,e){return function Y$(n,e){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(t,r){const i=pt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.xs.getNamedQuery(a,r))}(yield jT(n),e)}))}(Hr(n=Nn(n,pr)),e).then(t=>t?new Si(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Xi(this,t):null)}}class tD extends aP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tw(new Oa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ro.forKey(t,this.firestore,null)}}class JF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new tD(e)}get(e){const t=jf(e);return this._delegate.get(t).then(r=>new Dw(this._firestore,new ll(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=jf(e);return r?(lP("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=jf(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=jf(e);return this._delegate.delete(t),this}}class XF{constructor(e){this._delegate=e}set(e,t,r){const i=jf(e);return r?(lP("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=jf(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=jf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class $f{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new bw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Sw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=$f.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new $f(e,new tD(e),t),i.set(t,a)),a}}$f.INSTANCES=new WeakMap;class ro{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ro(t,new fr(t._delegate,r,new ht(e)))}static forKey(e,t,r){return new ro(t,new fr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Qm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Qm(this.firestore,bF(this._delegate,e))}catch(t){throw Ji(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,J.m9)(e))instanceof fr&&TF(this._delegate,e)}set(e,t){t=lP("DocumentReference.set",t);try{return t?zF(this._delegate,e,t):zF(this._delegate,e)}catch(r){throw Ji(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?WF(this._delegate,e):WF(this._delegate,e,t,...r)}catch(i){throw Ji(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Lj(n){return Ym(Nn(n.firestore,pr),[new Nm(n._key,vr.none())])}(this._delegate)}onSnapshot(...e){const t=eL(e),r=tL(e,i=>new Dw(this.firestore,new ll(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return GF(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Pj(n){n=Nn(n,fr);const e=Nn(n.firestore,pr),t=Hr(e),r=new sd(e);return function G$(n,e){const t=new Hn;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,a,l){try{const f=yield function(m,v){const b=pt(m);return b.persistence.runTransaction("read document","readonly",T=>b.localDocuments.getDocument(T,v))}(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new Be(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=Hm(f,`Failed to get document '${a} from cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield jT(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ll(e,r,n._key,i,new Bf(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Nj(n){n=Nn(n,fr);const e=Nn(n.firestore,pr);return gF(Hr(e),n._key,{source:"server"}).then(t=>uP(e,n,t))}(this._delegate):function Rj(n){n=Nn(n,fr);const e=Nn(n.firestore,pr);return gF(Hr(e),n._key).then(t=>uP(e,n,t))}(this._delegate),t.then(r=>new Dw(this.firestore,new ll(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ro(this.firestore,this._delegate.withConverter(e?$f.getInstance(this.firestore,e):null))}}function Ji(n,e,t){return n.message=n.message.replace(e,t),n}function eL(n){for(const e of n)if("object"==typeof e&&!cP(e))return e;return{}}function tL(n,e){var t,r;let i;return i=cP(n[0])?n[0]:cP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Dw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ro(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return HF(this._delegate,e._delegate)}}class Sw extends Dw{data(e){const t=this._delegate.data(e);return function Us(n,e){n||Dt()}(void 0!==t),t}}class Xi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tD(e)}where(e,t,r){try{return new Xi(this.firestore,rd(this._delegate,function Ej(n,e,t){const r=e,i=YT("where",n);return Iw._create(i,r,t)}(e,t,r)))}catch(i){throw Ji(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Xi(this.firestore,rd(this._delegate,function wj(n,e="asc"){const t=e,r=YT("orderBy",n);return oP._create(r,t)}(e,t)))}catch(r){throw Ji(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Xi(this.firestore,rd(this._delegate,function Cj(n){return wF("limit",n),QT._create("limit",n,"F")}(e)))}catch(t){throw Ji(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Xi(this.firestore,rd(this._delegate,function Ij(n){return wF("limitToLast",n),QT._create("limitToLast",n,"L")}(e)))}catch(t){throw Ji(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Xi(this.firestore,rd(this._delegate,function bj(...n){return JT._create("startAt",n,!0)}(...e)))}catch(t){throw Ji(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Xi(this.firestore,rd(this._delegate,function Tj(...n){return JT._create("startAfter",n,!1)}(...e)))}catch(t){throw Ji(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Xi(this.firestore,rd(this._delegate,function Dj(...n){return XT._create("endBefore",n,!1)}(...e)))}catch(t){throw Ji(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Xi(this.firestore,rd(this._delegate,function Sj(...n){return XT._create("endAt",n,!0)}(...e)))}catch(t){throw Ji(t,"endAt()","Query.endAt()")}}isEqual(e){return XR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function kj(n){n=Nn(n,Si);const e=Nn(n.firestore,pr),t=Hr(e),r=new sd(e);return function q$(n,e){const t=new Hn;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,a,l){try{const f=yield RT(i,a,!0),m=new rF(a,f.Wi),v=m.zu(f.documents),b=m.applyChanges(v,!1);l.resolve(b.snapshot)}catch(f){const m=Hm(f,`Failed to execute query '${a} against cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield jT(n),e,t);var r})),t.promise}(t,n._query).then(i=>new id(e,r,n,i))}(this._delegate):"server"===e?.source?function Fj(n){n=Nn(n,Si);const e=Nn(n.firestore,pr),t=Hr(e),r=new sd(e);return mF(t,n._query,{source:"server"}).then(i=>new id(e,r,n,i))}(this._delegate):function Oj(n){n=Nn(n,Si);const e=Nn(n.firestore,pr),t=Hr(e),r=new sd(e);return FF(n._query),mF(t,n._query).then(i=>new id(e,r,n,i))}(this._delegate),t.then(r=>new dP(this.firestore,new id(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=eL(e),r=tL(e,i=>new dP(this.firestore,new id(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return GF(this._delegate,t,r)}withConverter(e){return new Xi(this.firestore,this._delegate.withConverter(e?$f.getInstance(this.firestore,e):null))}}class sH{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Sw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class dP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Xi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Sw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new sH(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Sw(this._firestore,r))})}isEqual(e){return HF(this._delegate,e._delegate)}}class Qm extends Xi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ro(this.firestore,e):null}doc(e){try{return new ro(this.firestore,void 0===e?zT(this._delegate):zT(this._delegate,e))}catch(t){throw Ji(t,"doc()","CollectionReference.doc()")}}add(e){return function Vj(n,e){const t=Nn(n.firestore,pr),r=zT(n),i=eD(n.converter,e);return Ym(t,[qT(Vf(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,vr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ro(this.firestore,t))}isEqual(e){return TF(this._delegate,e._delegate)}withConverter(e){return new Qm(this.firestore,this._delegate.withConverter(e?$f.getInstance(this.firestore,e):null))}}function jf(n){return Nn(n,fr)}class hP{constructor(...e){this._delegate=new ul(...e)}static documentId(){return new hP(Tr.keyField().canonicalString())}isEqual(e){return(e=(0,J.m9)(e))instanceof ul&&this._delegate._internalPath.isEqual(e._internalPath)}}class Hf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Yj(){return new tP("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Hf(e)}static delete(){const e=function Zj(){return new vw("deleteField")}();return e._methodName="FieldValue.delete",new Hf(e)}static arrayUnion(...e){const t=function Qj(...n){return new gj("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Hf(t)}static arrayRemove(...e){const t=function Jj(...n){return new mj("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Hf(t)}static increment(e){const t=function Xj(n){return new _j("increment",n)}(e);return t._methodName="FieldValue.increment",new Hf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const oH={Firestore:QF,GeoPoint:WT,Timestamp:$n,Blob:Tw,Transaction:JF,WriteBatch:XF,DocumentReference:ro,DocumentSnapshot:Dw,Query:Xi,QueryDocumentSnapshot:Sw,QuerySnapshot:dP,CollectionReference:Qm,FieldPath:hP,FieldValue:Hf,setLogLevel:function iH(n){!function WM(n){Yu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function nL(n,e){return function lH(n,e=aM.z){return new ui.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function fP(n,e){return nL(n,e).pipe((0,Gt.U)(t=>({payload:t,type:"query"})))}function nD(n,e){return fP(n,e).pipe(Ms(void 0),$g(),(0,Gt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const m=i.find(b=>b.doc.ref.isEqual(l.ref)),v=t?.payload.docs.find(b=>b.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),a}))}function rL(n,e,t){return nD(n,t).pipe(_h((r,i)=>function dH(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function hH(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return pP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return pP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return pP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),QI(),(0,Gt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function pP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function iL(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function uH(n){(function aH(n,e){n.INTERNAL.registerComponent(new No.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},oH)))})(n,(e,t)=>new QF(e,t,new rH)),n.registerVersion("@firebase/firestore-compat","0.3.7")}(XI.Z);class sL{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=nD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Gt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ms(void 0),$g(),Hi(([r,i])=>i.length>0||!r),(0,Gt.U)(([r,i])=>i),it.iC)}auditTrail(e){return this.stateChanges(e).pipe(_h((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=iL(e);return rL(this.query,t,this.afs.schedulers.outsideAngular).pipe(it.iC)}valueChanges(e={}){return fP(this.query,this.afs.schedulers.outsideAngular).pipe((0,Gt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),it.iC)}get(e){return(0,Bn.D)(this.query.get(e)).pipe(it.iC)}add(e){return this.ref.add(e)}doc(e){return new oL(this.ref.doc(e),this.afs)}}class oL{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=lL(r,t);return new sL(i,a,this.afs)}snapshotChanges(){return function cH(n,e){return nL(n,e).pipe(Ms(void 0),$g(),(0,Gt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(it.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Gt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Bn.D)(this.ref.get(e)).pipe(it.iC)}}class fH{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?nD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Gt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Hi(t=>t.length>0),it.iC):nD(this.query,this.afs.schedulers.outsideAngular).pipe(it.iC)}auditTrail(e){return this.stateChanges(e).pipe(_h((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=iL(e);return rL(this.query,t,this.afs.schedulers.outsideAngular).pipe(it.iC)}valueChanges(e={}){return fP(this.query,this.afs.schedulers.outsideAngular).pipe((0,Gt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),it.iC)}get(e){return(0,Bn.D)(this.query.get(e)).pipe(it.iC)}}const aL=new d.OlP("angularfire2.enableFirestorePersistence"),uL=new d.OlP("angularfire2.firestore.persistenceSettings"),pH=new d.OlP("angularfire2.firestore.settings"),gH=new d.OlP("angularfire2.firestore.use-emulator");function lL(n,e=(t=>t)){return{query:e(n),ref:n}}let rD=(()=>{class n{constructor(t,r,i,a,l,f,m,v,b,T,x,V,G,le,Ie,bt,Rt){this.schedulers=m;const St=(0,Gi.on)(t,f,r),$t=b;T&&GI(St,f,x,G,le,Ie,V,bt),[this.firestore,this.persistenceEnabled$]=(0,Gi.cc)(`${St.name}.firestore`,"AngularFirestore",St.name,()=>{const ln=f.runOutsideAngular(()=>St.firestore());if(a&&ln.settings(a),$t&&ln.useEmulator(...$t),i&&!Id(l)){const wn=()=>{try{return(0,Bn.D)(ln.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(ii){return typeof console<"u"&&console.warn(ii),Ot(!1)}};return[ln,f.runOutsideAngular(wn)]}return[ln,Ot(!1)]},[a,$t,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=lL(i,r),f=this.schedulers.ngZone.run(()=>a);return new sL(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new fH(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new oL(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Gi.Dh),d.LFG(Gi.xv,8),d.LFG(aL,8),d.LFG(pH,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(it.HU),d.LFG(uL,8),d.LFG(gH,8),d.LFG(Vv,8),d.LFG(zI,8),d.LFG(Ov,8),d.LFG(kv,8),d.LFG(Fv,8),d.LFG(Lv,8),d.LFG(WI,8),d.LFG(zu,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),mH=(()=>{class n{constructor(){jI.Z.registerVersion("angularfire",it.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:aL,useValue:!0},{provide:uL,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[rD]}),n})();function _H(n,e){1&n&&(d.TgZ(0,"h1"),d._uU(1,"No questions for this module"),d.qZA())}function yH(n,e){if(1&n&&(d.TgZ(0,"div",20),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.hij(" ",t.currentQuestion," ")}}function vH(n,e){if(1&n&&(d.TgZ(0,"div",21),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.hij(" ",t.currentAnswer," ")}}function EH(n,e){if(1&n&&(d.TgZ(0,"h1"),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.hij("",t.module,"!")}}function wH(n,e){1&n&&(d.TgZ(0,"h1"),d._uU(1,"Answer"),d.qZA())}function CH(n,e){if(1&n&&(d.TgZ(0,"div",22),d.YNc(1,EH,2,1,"h1",9),d.YNc(2,wH,2,0,"h1",9),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",!t.cardState),d.xp6(1),d.Q6J("ngIf",t.cardState)}}function IH(n,e){if(1&n&&(d.TgZ(0,"div",23)(1,"h1"),d._uU(2),d.qZA()()),2&n){const t=d.oxw();d.xp6(2),d.hij(" ",t.hint," ")}}function bH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"p",26),d.NdJ("click",function(){const a=d.CHM(t).index,l=d.oxw(2);return d.KtG(l.skip(a))}),d._uU(1),d.qZA()}if(2&n){const t=e.$implicit;d.xp6(1),d.Oqu(t.question)}}function TH(n,e){if(1&n&&(d.TgZ(0,"div",24),d.YNc(1,bH,2,1,"p",25),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",t.question)}}function DH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",27)(1,"button",28),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.changeCardState())}),d._uU(2,"Done"),d.qZA(),d.TgZ(3,"button",29),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.changeCardState())}),d._uU(4,"Skip"),d.qZA()()}}function SH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",30)(1,"button",28),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.next())})("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.changeCardState())}),d._uU(2,"Next"),d.qZA()()}}const AH=function(n){return{"background-color":n}},MH=function(n){return{"background-image":n}};let xH=(()=>{class n{constructor(t,r,i){this.route=t,this.router=r,this.afs=i,this.cardState=!1,this.currentQuestion="",this.currentAnswer="",this.secondDisplay="",this.i=0,this.question=[],this.hint="",this.type="",this.module="",this.bgColour="",this.bgImage=""}ngOnInit(){var t=this;return(0,Ce.Z)(function*(){t.route.params.subscribe(r=>{t.module=r.module,t.type=r.type}),t.checkBg(t.module),t.checkHint(t.type),t.question=yield t.getModuleQuestions()})()}checkBg(t){switch(t){case"Digital Production":this.bgColour="#231F26",this.bgImage="../assets/prog.png",console.log("working");break;case"Security":this.bgColour="#0A2F3C",this.bgImage="../assets/cyb.png";break;case"Business Environments":this.bgColour="#121821",this.bgImage="../assets/bse.png";break;case"Data in Computing":this.bgColour="#232432",this.bgImage="../assets/data.png";break;case"Legislation":this.bgColour="#675052",this.bgImage="../assets/legi.png";break;default:this.bgColour="#231F26",this.bgImage="../assets/prog.png"}}checkHint(t){switch(t){case"Describe":this.hint="Present two (or more) linked descriptive points characteristics, features uses or processes. Do not need to add a justification or reason";break;case"Evaluate":this.hint="Review information then bring it together to form a conclusion, drawing on evidence including strengths, weaknesses, alternativeactions, relevant data or information. Come to a supported judgementof a subject\u2019s qualities and relation to its context. ";break;case"Explain":this.hint="An explanation requires a justification/exemplification of a point. The answer must contain some element of reasoning/justification, this can include mathematical/logical explanations.";break;case"Identify":this.hint="Usually requires some key information to be selected from a givenstimulus/resource.";break;case"State":this.hint="A recall of one or more pieces of information.";break;case"Develop":this.hint="Produce a section of code to provide a solution to a problem";break;default:this.hint="No hint available :("}}home(){window.history.go(-1)}getModuleQuestions(){let t=[];return this.afs.collection(`/Approved/${this.module}/${this.type}`).valueChanges().subscribe(a=>{a.forEach(l=>{t.push(l),this.currentQuestion=t[0].question})}),t}changeCardState(){this.cardState=!this.cardState,this.secondDisplay="feedback",this.currentAnswer=this.question[this.i].answer}next(){this.i<this.question.length-1?this.i+=1:this.i=0,this.currentQuestion=this.question[this.i].question}skip(t){this.i=t,this.currentQuestion=this.question[this.i].question,this.currentAnswer=this.question[this.i].answer}displaySec(t){this.secondDisplay=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Oi),d.Y36(er),d.Y36(rD))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-cards"]],decls:26,vars:14,consts:[[1,"container",3,"ngStyle"],[1,"top"],[3,"click"],[1,"top-contain"],[1,"contain",3,"click"],["src","./assets/bulb.svg"],["src","./assets/search.svg"],[1,"flex-contain"],[1,"child1"],[4,"ngIf"],[1,"block-contain"],["class","question",4,"ngIf"],["class","answer",4,"ngIf"],[1,"child2",3,"ngStyle"],[1,"child2-contain"],["class","feedback sec-display",4,"ngIf"],["class","hint sec-display",4,"ngIf"],["class","search sec-display",4,"ngIf"],["class","btn-contain",4,"ngIf"],["class","btn-contain answer",4,"ngIf"],[1,"question"],[1,"answer"],[1,"feedback","sec-display"],[1,"hint","sec-display"],[1,"search","sec-display"],["class","que",3,"click",4,"ngFor","ngForOf"],[1,"que",3,"click"],[1,"btn-contain"],[1,"btn",3,"click"],[1,"btn","sec",3,"click"],[1,"btn-contain","answer"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"button",2),d.NdJ("click",function(){return r.home()}),d._uU(3,"Back"),d.qZA(),d.TgZ(4,"div",3)(5,"div",4),d.NdJ("click",function(){return r.displaySec("hint")}),d.TgZ(6,"p"),d._uU(7,"Hint"),d.qZA(),d._UZ(8,"img",5),d.qZA(),d.TgZ(9,"div",4),d.NdJ("click",function(){return r.displaySec("search")}),d.TgZ(10,"p"),d._uU(11,"Search"),d.qZA(),d._UZ(12,"img",6),d.qZA()()(),d.TgZ(13,"div",7)(14,"div",8),d.YNc(15,_H,2,0,"h1",9),d.TgZ(16,"div",10),d.YNc(17,yH,2,1,"div",11),d.YNc(18,vH,2,1,"div",12),d.qZA()(),d.TgZ(19,"div",13)(20,"div",14),d.YNc(21,CH,3,2,"div",15),d.YNc(22,IH,3,1,"div",16),d.YNc(23,TH,2,1,"div",17),d.YNc(24,DH,5,0,"div",18),d.YNc(25,SH,3,0,"div",19),d.qZA()()()()),2&t&&(d.Q6J("ngStyle",d.VKq(10,AH,r.bgColour)),d.xp6(15),d.Q6J("ngIf",0==r.question.length),d.xp6(2),d.Q6J("ngIf",!r.cardState),d.xp6(1),d.Q6J("ngIf",r.cardState),d.xp6(1),d.Q6J("ngStyle",d.VKq(12,MH,"url("+r.bgImage+")")),d.xp6(2),d.Q6J("ngIf","feedback"==r.secondDisplay),d.xp6(1),d.Q6J("ngIf","hint"==r.secondDisplay),d.xp6(1),d.Q6J("ngIf","search"==r.secondDisplay),d.xp6(1),d.Q6J("ngIf",!r.cardState),d.xp6(1),d.Q6J("ngIf",r.cardState))},dependencies:[Cs,gr,Go],styles:[".container[_ngcontent-%COMP%]{height:100vh;color:#fff;padding:2rem;width:100vw}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(2.5vw,2.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;margin-left:1rem}.container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .top-contain[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:20vw;max-width:350px}.container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .top-contain[_ngcontent-%COMP%]   .contain[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]{height:90%;display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:contain;display:flex;align-items:center;justify-content:center;width:45%}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .block-contain[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-wrap:wrap;flex-direction:column;justify-content:space-around;padding:1rem}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .block-contain[_ngcontent-%COMP%]   .question[_ngcontent-%COMP%]{display:flex;width:100%;height:auto;max-height:40vh;overflow-y:scroll;padding:1rem;min-height:25vh;background-color:#0d6994;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .block-contain[_ngcontent-%COMP%]   .timer[_ngcontent-%COMP%]{width:20%;background-color:#0d6994;font-size:2rem;text-align:center}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .block-contain[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]{background-color:#0d6994;text-align:center;padding:1.5rem 2rem;border-radius:10px;width:40%;margin:.5rem 0;font-size:min(2vw,2em);cursor:pointer}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:contain;align-items:center;justify-content:center;width:45%;height:85vh;display:flex;flex-direction:column;justify-content:flex-end}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .child2-contain[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;flex-direction:column;width:100%;height:50%}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .child2-contain[_ngcontent-%COMP%]   .sec-display[_ngcontent-%COMP%]{max-height:40vh;min-height:10rem;overflow-x:scroll;margin-bottom:25%}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .child2-contain[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{max-height:70vh;min-height:20rem;overflow-x:scroll;margin-bottom:25%;width:100%;background-color:#00000080;padding:1rem}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .child2-contain[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .que[_ngcontent-%COMP%]{width:100%;text-align:center;margin-bottom:.5rem;cursor:pointer}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .child2-contain[_ngcontent-%COMP%]   .btn-contain[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .child2-contain[_ngcontent-%COMP%]   .btn-contain[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem;border:0;background-color:green}.container[_ngcontent-%COMP%]   .flex-contain[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .child2-contain[_ngcontent-%COMP%]   .btn-contain[_ngcontent-%COMP%]   .sec[_ngcontent-%COMP%]{background-color:red}"]}),n})();function RH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",10)(1,"p",2),d.NdJ("click",function(){const a=d.CHM(t).$implicit,l=d.oxw();return d.KtG(l.reviewQuestion(a))})("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.openReview())}),d._uU(2),d.qZA(),d.TgZ(3,"div",11)(4,"button",12),d.NdJ("click",function(){const a=d.CHM(t).$implicit,l=d.oxw();return d.KtG(l.approve(a))}),d._uU(5,"Approve"),d.qZA(),d.TgZ(6,"button",13),d.NdJ("click",function(){const a=d.CHM(t).$implicit,l=d.oxw();return d.KtG(l.del(a))}),d._uU(7,"Delete"),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.question)}}function PH(n,e){1&n&&(d.TgZ(0,"h1",14),d._uU(1,' "Nun" to approve ! '),d.qZA())}function NH(n,e){1&n&&(d.TgZ(0,"h1"),d._uU(1,"Click question to review fully"),d.qZA())}function OH(n,e){if(1&n&&(d.TgZ(0,"div",15),d.YNc(1,NH,2,0,"h1",16),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",t.questions.length>0)}}function kH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",17)(1,"h1",2),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.closeReview())}),d._uU(2,"Close"),d.qZA(),d.TgZ(3,"div",18)(4,"p",19),d._uU(5,"Question:"),d.qZA(),d.TgZ(6,"div",20),d._uU(7),d.qZA(),d.TgZ(8,"p",19),d._uU(9,"Answer:"),d.qZA(),d.TgZ(10,"div",20),d._uU(11),d.qZA(),d.TgZ(12,"p",19),d._uU(13,"Module:"),d.qZA(),d.TgZ(14,"div",20),d._uU(15),d.qZA(),d.TgZ(16,"p",19),d._uU(17,"Category:"),d.qZA(),d.TgZ(18,"div",20),d._uU(19),d.qZA()()()}if(2&n){const t=d.oxw();d.xp6(7),d.hij(" ",t.revQuestion.question," "),d.xp6(4),d.hij(" ",t.revQuestion.answer," "),d.xp6(4),d.hij(" ",t.revQuestion.module," "),d.xp6(4),d.hij(" ",t.revQuestion.category," ")}}let FH=(()=>{class n{constructor(t,r){this.router=t,this.afs=r,this.review=!1,this.revQuestion={answer:"",category:"",id:"",module:"",question:"",similar:0},this.questions=[]}ngOnInit(){var t=this;return(0,Ce.Z)(function*(){t.questions=yield t.getAllQuestions()})()}home(){this.router.navigate([""])}openReview(){this.review=!0}closeReview(){this.review=!1}reviewQuestion(t){this.revQuestion.question=t.question,this.revQuestion.answer=t.answer,this.revQuestion.category=t.category,this.revQuestion.module=t.module}getAllQuestions(){const r=["Describe","Evaluate","Identify","State","Develop","Explain"],i=[];return["Business","Data","Digital","Legislation","Security"].forEach(a=>{r.forEach(l=>{this.afs.collection(`/Pending/${a}/${l}`).valueChanges().subscribe(v=>{v.forEach(b=>{i.push(b)})})})}),i}approve(t){var r=this;return(0,Ce.Z)(function*(){r.reviewQuestion(t);let i=r.afs.createId();r.revQuestion.id=i,r.afs.collection(`/Approved/${r.revQuestion.module}/${r.revQuestion.category}`).doc(i).set(r.revQuestion).then(a=>{console.log(a)}),r.del(t),r.questions=yield r.getAllQuestions()})()}del(t){var r=this;return(0,Ce.Z)(function*(){r.reviewQuestion(t),r.afs.doc(`/Pending/${r.revQuestion.module}/${r.revQuestion.category}/${t.id}`).delete(),r.questions=yield r.getAllQuestions()})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(er),d.Y36(rD))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-admin"]],decls:11,vars:4,consts:[[1,"container"],[1,"nav"],[3,"click"],[1,"flex"],[1,"child1"],[1,"scroll"],["class","block",4,"ngFor","ngForOf"],["class","none",4,"ngIf"],["class","child2",4,"ngIf"],["class","child3",4,"ngIf"],[1,"block"],[1,"btn-contain"],[1,"btn",3,"click"],[1,"btn","sec",3,"click"],[1,"none"],[1,"child2"],[4,"ngIf"],[1,"child3"],[1,"contain"],[1,"tag"],[1,"txtarea"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"button",2),d.NdJ("click",function(){return r.home()}),d._uU(3,"Home"),d.qZA()(),d.TgZ(4,"div",3)(5,"div",4)(6,"div",5),d.YNc(7,RH,8,1,"div",6),d.YNc(8,PH,2,0,"h1",7),d.qZA()(),d.YNc(9,OH,2,1,"div",8),d.YNc(10,kH,20,4,"div",9),d.qZA()()),2&t&&(d.xp6(7),d.Q6J("ngForOf",r.questions),d.xp6(1),d.Q6J("ngIf",r.questions.length<1),d.xp6(1),d.Q6J("ngIf",!r.review),d.xp6(1),d.Q6J("ngIf",r.review))},dependencies:[Cs,gr],styles:[".container[_ngcontent-%COMP%]{height:100vh;background-image:url(home.f708dd93b6ce0104.png);background-position:center;background-size:cover;padding:1rem;color:var(--primary-color)}.container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(1.5vw,1.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;margin:0 auto}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{display:flex;align-items:center;height:90vh;max-width:2000px;margin:0 auto;padding:1rem}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;width:50%}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .scroll[_ngcontent-%COMP%]{height:100%;max-height:85vh;overflow-y:scroll}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .scroll[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]{background-color:var(--sec-color);border-radius:5px;padding:1rem;display:flex;justify-content:space-between;flex-direction:column;height:20vh;max-height:200px;margin:2rem 0;overflow-x:scroll}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .scroll[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer;text-overflow:ellipsis;overflow:hidden;height:20%;max-width:90%}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .scroll[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]   .btn-contain[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:65%;margin-left:35%}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .scroll[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]   .btn-contain[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(1.5vw,1.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;margin:0 auto;background-color:green;border:2px solid green}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .scroll[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]   .btn-contain[_ngcontent-%COMP%]   .sec[_ngcontent-%COMP%]{background-color:red;border:2px solid red}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]{width:50%;display:flex;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child3[_ngcontent-%COMP%]{background-color:var(--primary-color);border:2px solid var(--sec-color);padding:1rem;height:100%;width:45%;margin-left:5%;overflow-y:scroll}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child3[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:red;font-size:1.2rem;margin:0 0 10px 90%;cursor:pointer}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child3[_ngcontent-%COMP%]   .contain[_ngcontent-%COMP%]{overflow-y:scroll;max-height:100%}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child3[_ngcontent-%COMP%]   .contain[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--sec-color)}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child3[_ngcontent-%COMP%]   .contain[_ngcontent-%COMP%]   .txtarea[_ngcontent-%COMP%]{background-color:var(--sec-color);padding-bottom:10%;max-height:20vh;overflow-y:scroll}"]}),n})();function LH(n,e){if(1&n&&(d.TgZ(0,"u",25),d._uU(1),d.qZA()),2&n){const t=e.$implicit;d.xp6(1),d.hij("",t,"?")}}const VH=[{path:"",component:ZI},{path:"modules",component:bA},{path:"portal/:class",component:jh},{path:"cards/:module/:type",component:xH},{path:"admin",component:FH,canActivate:[(()=>{class n{constructor(t){this.refresh=t}canActivate(t,r){return!!this.refresh.refresh}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qI))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"contribute",component:(()=>{class n{constructor(t,r){this.router=t,this.afs=r,this.suggestion=[],this.newQuestion={answer:"",category:"",id:"",module:"",question:""}}ngOnInit(){var t=this;return(0,Ce.Z)(function*(){t.searchEngineDb=yield t.getAllQuestions()})()}getAllQuestions(){const r=["Describe","Evaluate","Identify","State","Develop"],i=[];return["Business","Data","Digital","Legislation","Security"].forEach(a=>{r.forEach(l=>{this.afs.collection(`/Pending/${a}/${l}`).valueChanges().subscribe(v=>{v.forEach(b=>{i.push(b)})})})}),i}filterSuggest(){this.searchEngineDb.forEach(t=>{t.question.toLowerCase().includes(`${this.newQuestion.question.toLocaleLowerCase()}`)&&this.suggestion.push(t.question)})}reset(){this.newQuestion={answer:"",category:"",id:"",module:"",question:""}}home(){this.router.navigate([""])}contribute(){let t=this.afs.createId();this.newQuestion.id=t,this.afs.collection(`/Pending/${this.newQuestion.module}/${this.newQuestion.category}`).doc(t).set(this.newQuestion).then(r=>{console.log(r)}),this.reset()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(er),d.Y36(rD))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-contribute"]],decls:38,vars:5,consts:[[1,"container"],[1,"nav"],[3,"click"],[1,"flex"],[1,"child1"],[1,"contain"],["name","question","placeholder","Question(Do not contribute if question already exist)",1,"txt1",3,"ngModel","ngModelChange","change"],["placeholder","Answer",1,"txt2",3,"ngModel","ngModelChange"],["name","module",3,"ngModel","ngModelChange"],["value","Digital"],["value","Security"],["value","Business"],["value","Data"],["value","Legislation"],["name","key-word",3,"ngModel","ngModelChange"],["value","Describe"],["value","Evaluate"],["value","Explain"],["value","Identify"],["value","State"],["value","Develop"],[1,"child2"],[1,"suggestion"],["class","child",4,"ngFor","ngForOf"],[1,"submit",3,"click"],[1,"child"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"button",2),d.NdJ("click",function(){return r.home()}),d._uU(3,"Home"),d.qZA()(),d.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"textarea",6),d.NdJ("ngModelChange",function(a){return r.newQuestion.question=a})("change",function(){return r.filterSuggest()}),d.qZA(),d.TgZ(8,"textarea",7),d.NdJ("ngModelChange",function(a){return r.newQuestion.answer=a}),d.qZA(),d.TgZ(9,"select",8),d.NdJ("ngModelChange",function(a){return r.newQuestion.module=a}),d.TgZ(10,"option",9),d._uU(11,"Digital Production"),d.qZA(),d.TgZ(12,"option",10),d._uU(13,"Security"),d.qZA(),d.TgZ(14,"option",11),d._uU(15,"Business Environments"),d.qZA(),d.TgZ(16,"option",12),d._uU(17,"Data in Computing"),d.qZA(),d.TgZ(18,"option",13),d._uU(19,"Legislation"),d.qZA()(),d.TgZ(20,"select",14),d.NdJ("ngModelChange",function(a){return r.newQuestion.category=a}),d.TgZ(21,"option",15),d._uU(22,"Describe"),d.qZA(),d.TgZ(23,"option",16),d._uU(24,"Evaluate"),d.qZA(),d.TgZ(25,"option",17),d._uU(26,"Explain"),d.qZA(),d.TgZ(27,"option",18),d._uU(28,"Identify"),d.qZA(),d.TgZ(29,"option",19),d._uU(30,"State"),d.qZA(),d.TgZ(31,"option",20),d._uU(32,"Develop"),d.qZA()()()(),d.TgZ(33,"div",21)(34,"div",22),d.YNc(35,LH,2,1,"u",23),d.qZA(),d.TgZ(36,"button",24),d.NdJ("click",function(){return r.contribute()}),d._uU(37,"Contribute"),d.qZA()()()()),2&t&&(d.xp6(7),d.Q6J("ngModel",r.newQuestion.question),d.xp6(1),d.Q6J("ngModel",r.newQuestion.answer),d.xp6(1),d.Q6J("ngModel",r.newQuestion.module),d.xp6(11),d.Q6J("ngModel",r.newQuestion.category),d.xp6(15),d.Q6J("ngForOf",r.suggestion))},dependencies:[Cs,q0,uS,sa,jp,jl,tc],styles:["[_ngcontent-%COMP%]::placeholder{font-family:var(--font-family)}.container[_ngcontent-%COMP%]{height:100vh;background-image:url(home.f708dd93b6ce0104.png);background-position:center;background-size:cover;padding:1rem;color:var(--primary-color)}.container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{padding-left:1rem}.container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(1.5vw,1.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;margin:0 auto}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{display:flex;height:90vh;max-width:2000px;margin:0 auto}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]{width:50%;padding:1rem}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .contain[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .contain[_ngcontent-%COMP%]   .txt1[_ngcontent-%COMP%]{resize:none;height:20vh;overflow-y:scroll;margin-bottom:1rem;font-size:1.2rem;padding:1rem}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .contain[_ngcontent-%COMP%]   .txt2[_ngcontent-%COMP%]{resize:none;height:45vh;overflow-y:scroll;margin-bottom:1rem;font-size:1.2rem;padding:1rem}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child1[_ngcontent-%COMP%]   .contain[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:5vh;margin-bottom:1rem}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]{width:50%;padding:1rem}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .suggestion[_ngcontent-%COMP%]{height:70vh;overflow-y:scroll;width:80%;background-color:var(--primary-color);border-radius:1.5rem;margin-bottom:1rem;padding:1rem}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .suggestion[_ngcontent-%COMP%]   .child[_ngcontent-%COMP%]{color:#000;display:block;margin-bottom:5px}.container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]   .child2[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{background-color:var(--sec-color);font-size:min(1.5vw,1.5em);padding:1vh min(2rem,2vw);border:2px solid var(--sec-color);color:var(--primary-color);font-family:Play,sans-serif;border-radius:5px;margin:0 auto;background-color:green;border:2px solid green}"]}),n})()}];let UH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[ju.forRoot(VH,{useHash:!0}),ju]}),n})(),BH=(()=>{class n{constructor(){this.title="revise"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[$y]}),n})();const gP_firebase={projectId:"revise-2227b",appId:"1:508824605748:web:151ddf7aab00be229f2661",storageBucket:"revise-2227b.appspot.com",apiKey:"AIzaSyCXzz7Yl-wpp_mzKiJiwH35LcsHHgvZnKw",authDomain:"revise-2227b.firebaseapp.com",messagingSenderId:"508824605748",measurementId:"G-CJGWHSJDP9"};var jH=O(655),mP=O(3008),cL=O(8277);function HH(n){return new ui.y(function(e){return{unsubscribe:(0,cL.x)(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}class iD{constructor(e){return e}}class Aw{constructor(){return(0,it.vb)("auth")}}const _P=new d.OlP("angularfire2.auth-instances");function GH(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new iD(r)}}const qH={provide:Aw,deps:[[new d.FiY,_P]]},KH={provide:iD,useFactory:function WH(n,e){const t=(0,it.JM)("auth",n,e);return t&&new iD(t)},deps:[[new d.FiY,_P],Ti]};let ZH=(()=>{class n{constructor(){(0,Xr.KN)("angularfire",it.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[KH,qH]}),n})();function YH(n,...e){return{ngModule:ZH,providers:[{provide:_P,useFactory:GH(n),multi:!0,deps:[d.R0b,d.zs3,it.HU,gs,[new d.FiY,zu],...e]}]}}const QH=(0,it.u3)(HH,!0),JH=(0,it.u3)(cL.o,!0);class Mw{constructor(e){return e}}const hL="analytics",fL=it.nk.async,ez=(0,it.u3)(mP.IH,!0),tz=(0,it.u3)(mP.Kz,!0),nz=(0,it.u3)(mP.Iv,!0);let yP=(()=>{class n{constructor(t,r,i){let a;this.disposables=[],(0,Xr.KN)("angularfire",it.q4.full,"user-tracking"),this.initialized=r.runOutsideAngular(()=>new Promise(l=>{a=l})),fL().then(()=>{const l=i.get(Mw);l?this.disposables=[QH(t).subscribe(f=>{nz(l,f?.uid),a()})]:a()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(iD),d.LFG(d.R0b),d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const pL="firebase_screen_id",vP="outlet",xw="screen_class",gL="screen_name";let pz=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const EP={},gz=n=>{const e=[n[xw],n[vP]].join("#");if(EP.hasOwnProperty(e))return EP[e];{const t=pz++;return EP[e]=t,t}};let mL=(()=>{class n{constructor(t,r,i,a,l,f){(0,Xr.KN)("angularfire",it.q4.full,"screen-tracking"),fL().then(()=>{const m=f.get(Mw);!t||!m||a.runOutsideAngular(()=>{this.disposable=((n,e,t)=>n.events.pipe(Hi(i=>i instanceof DC)).pipe(Cr(i=>{var a;const f=(null===(a=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,V=>V.replace("://",":///"))).root.children[i.snapshot.outlet])||void 0===a?void 0:a.toString())||"",m=n.routerState.root.children.map(V=>V).find(V=>V.outlet===i.snapshot.outlet);if(!m)return Ot(null);let v=m;for(;v.firstChild;)v=v.firstChild;const b=v.pathFromRoot.map(V=>{var G;return null===(G=V.routeConfig)||void 0===G?void 0:G.path}).filter(V=>V).join("/")||"/",T={[gL]:b,page_path:`/${f}`,firebase_event_origin:"auto",firebase_screen:b,[vP]:i.snapshot.outlet};e&&(T.page_title=e.getTitle());let x=m.component;if(x){if(x===ag){let V=i.snapshot;for(;V.firstChild;)V=V.firstChild;x=V.component}}else x=i.snapshot.component;if("string"==typeof x)return Ot(Object.assign(Object.assign({},T),{[xw]:x}));if(x){const V=t.resolveComponentFactory(x);return Ot(Object.assign(Object.assign({},T),{[xw]:V.selector}))}return Ot(null)}),Hi(i=>!!i),(0,Gt.U)(i=>Object.assign({firebase_screen_class:i[xw],[pL]:gz(i)},i)),function $H(n,e,t,r){return(0,bi.e)((i,a)=>{let l;e&&"function"!=typeof e?({duration:t,element:l,connector:r}=e):l=e;const f=new Map,m=G=>{f.forEach(G),G(a)},v=G=>m(le=>le.error(G));let b=0,T=!1;const x=new or.Q(a,G=>{try{const le=n(G);let Ie=f.get(le);if(!Ie){f.set(le,Ie=r?r():new ls.x);const bt=function V(G,le){const Ie=new ui.y(bt=>{b++;const Rt=le.subscribe(bt);return()=>{Rt.unsubscribe(),0==--b&&T&&x.unsubscribe()}});return Ie.key=G,Ie}(le,Ie);if(a.next(bt),t){const Rt=(0,or.x)(Ie,()=>{Ie.complete(),Rt?.unsubscribe()},void 0,void 0,()=>f.delete(le));x.add((0,na.Xf)(t(bt)).subscribe(Rt))}}Ie.next(l?l(G):G)}catch(le){v(le)}},()=>m(G=>G.complete()),v,()=>f.clear(),()=>(T=!0,0===b));i.subscribe(x)})}(i=>i[vP]),(0,Gr.z)(i=>i.pipe(QI((a,l)=>JSON.stringify(a)===JSON.stringify(l)),Ms(void 0),$g(),(0,Gt.U)(([a,l])=>a?Object.assign({firebase_previous_class:a[xw],firebase_previous_screen:a[gL],firebase_previous_id:a[pL]},l):l)))))(t,r,i).pipe(Cr(v=>(0,jH.mG)(this,void 0,void 0,function*(){return l&&(yield l.initialized),tz(m,"screen_view",v)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(er,8),d.LFG($_,8),d.LFG(d._Vd),d.LFG(d.R0b),d.LFG(yP,8),d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const wP=new d.OlP("angularfire2.analytics-instances");function yz(n){return(e,t)=>{if(!it.nk.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new Mw(r)}}const vz={provide:class XH{constructor(){return(0,it.vb)(hL)}},deps:[[new d.FiY,wP]]},Ez={provide:Mw,useFactory:function _z(n,e){if(!it.nk.sync())return null;const t=(0,it.JM)(hL,n,e);return t&&new Mw(t)},deps:[[new d.FiY,wP],Ti]};let wz=(()=>{class n{constructor(t,r){(0,Xr.KN)("angularfire",it.q4.full,"analytics")}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(mL,8),d.LFG(yP,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Ez,vz,{provide:d.ip1,useValue:it.nk.async,multi:!0}]}),n})();function Cz(n,...e){return{ngModule:wz,providers:[{provide:wP,useFactory:yz(n),multi:!0,deps:[d.R0b,d.zs3,it.HU,gs,...e]}]}}const _L="@firebase/database";let CP="";class bz{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,J.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,J.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Tz{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,J.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const vL=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new bz(e)}}catch{}return new Tz},zf=vL("localStorage"),IP=vL("sessionStorage"),Jm=new qi.Yd("@firebase/database"),EL=function(){let n=1;return function(){return n++}}(),wL=function(n){const e=(0,J.dS)(n),t=new J.gQ;t.update(e);const r=t.digest();return J.US.encodeByteArray(r)},Rw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Rw.apply(null,r):e+="object"==typeof r?(0,J.Wl)(r):r,e+=" "}return e};let Wf=null,CL=!0;const mi=function(...n){if(!0===CL&&(CL=!1,null===Wf&&!0===IP.get("logging_enabled")&&function(n,e){(0,J.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Jm.logLevel=qi.in.VERBOSE,Wf=Jm.log.bind(Jm),e&&IP.set("logging_enabled",!0)):"function"==typeof n?Wf=n:(Wf=null,IP.remove("logging_enabled"))}(!0)),Wf){const e=Rw.apply(null,n);Wf(e)}},Pw=function(n){return function(...e){mi(n,...e)}},bP=function(...n){const e="FIREBASE INTERNAL ERROR: "+Rw(...n);Jm.error(e)},ka=function(...n){const e=`FIREBASE FATAL ERROR: ${Rw(...n)}`;throw Jm.error(e),new Error(e)},Vi=function(...n){const e="FIREBASE WARNING: "+Rw(...n);Jm.warn(e)},sD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ad="[MIN_NAME]",cl="[MAX_NAME]",Gf=function(n,e){if(n===e)return 0;if(n===ad||e===cl)return-1;if(e===ad||n===cl)return 1;{const t=DL(n),r=DL(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Az=function(n,e){return n===e?0:n<e?-1:1},Nw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,J.Wl)(e))},TP=function(n){if("object"!=typeof n||null===n)return(0,J.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,J.Wl)(e[r]),t+=":",t+=TP(n[e[r]]);return t+="}",t},bL=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function _i(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const TL=function(n){(0,J.hu)(!sD(n),"Invalid JSON number");const r=1023;let i,a,l,f,m;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,l=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const b=v.join("");let T="";for(m=0;m<64;m+=8){let x=parseInt(b.substr(m,8),2).toString(16);1===x.length&&(x="0"+x),T+=x}return T.toLowerCase()},Pz=new RegExp("^-?(0*)\\d{1,10}$"),DL=function(n){if(Pz.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Xm=function(n){try{n()}catch(e){setTimeout(()=>{throw Vi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Ow=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Fz{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Vi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Lz{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(mi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Vi(e)}}let kw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const RL=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,OL="websocket",kL="long_polling";class SP{constructor(e,t,r,i,a=!1,l="",f=!1,m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zf.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&zf.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function FL(n,e,t){let r;if((0,J.hu)("string"==typeof e,"typeof type must == string"),(0,J.hu)("object"==typeof t,"typeof params must == object"),e===OL)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==kL)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Vz(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return _i(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class Uz{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,J.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,J.p$)(this.counters_)}}const AP={},MP={};function xP(n){const e=n.toString();return AP[e]||(AP[e]=new Uz),AP[e]}class $z{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Xm(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ud{constructor(e,t,r,i,a,l,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Pw(e),this.stats_=xP(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),FL(t,kL,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new $z(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,J.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new RP((...a)=>{const[l,f,m,v,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=f,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&RL.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ud.forceAllow_=!0}static forceDisallow(){ud.forceDisallow_=!0}static isAvailable(){return!((0,J.Yr)()||!ud.forceAllow_&&(ud.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,J.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,J.h$)(t),i=bL(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,J.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,J.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class RP{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,J.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=EL(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=RP.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){mi("frame writing exception"),f.stack&&mi(f.stack),mi(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||mi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,J.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{mi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let aD=null;typeof MozWebSocket<"u"?aD=MozWebSocket:typeof WebSocket<"u"&&(aD=WebSocket);let e_=(()=>{class n{constructor(t,r,i,a,l,f,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Pw(this.connId),this.stats_=xP(r),this.connURL=n.connectionURL_(r,f,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const f={v:"5"};return!(0,J.Yr)()&&typeof location<"u"&&location.hostname&&RL.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),l&&(f.p=l),FL(t,OL,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zf.set("previous_websocket_failure",!0);try{let i;if((0,J.Yr)()){i={headers:{"User-Agent":`Firebase/5/${CP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,f=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new aD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==aD&&!n.forceDisallow_}static previouslyFailed(){return zf.isInMemoryStorage||!0===zf.get("previous_websocket_failure")}markConnectionHealthy(){zf.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,J.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,J.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,J.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=bL(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),HL=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ud,e_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=e_&&e_.isAvailable();let i=r&&!e_.previouslyFailed();if(t.webSocketOnly&&(r||Vi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[e_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class YL{constructor(e,t,r,i,a,l,f,m,v,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=f,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Pw("c:"+this.id+":"),this.transportManager_=new HL(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ow(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Nw("t",e),r=Nw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Nw("t",e),r=Nw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Nw("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?bP("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Vi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Ow(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ow(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zf.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class QL{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class JL{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,J.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,J.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class uD extends JL{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,J.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new uD}getInitialEvent(e){return(0,J.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Kn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function zn(){return new Kn("")}function Dn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ld(n){return n.pieces_.length-n.pieceNum_}function rr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Kn(n.pieces_,e)}function NP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Fw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function tV(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Kn(e,0)}function Er(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Kn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Kn(t,0)}function Sn(n){return n.pieceNum_>=n.pieces_.length}function es(n,e){const t=Dn(n),r=Dn(e);if(null===t)return e;if(t===r)return es(rr(n),rr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function OP(n,e){if(ld(n)!==ld(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function io(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ld(n)>ld(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class cW{constructor(e,t){this.errorPrefix_=t,this.parts_=Fw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,J.ug)(this.parts_[r]);nV(this)}}function nV(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+qf(n))}function qf(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class kP extends JL{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new kP}getInitialEvent(e){return(0,J.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Lw=1e3;let cD,Kf=(()=>{class n extends QL{constructor(t,r,i,a,l,f,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=Pw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Lw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,J.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");kP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&uD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,J.Wl)(l)),(0,J.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new J.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:f=>{const m=f.d;"ok"===f.s?r.resolve(m):r.reject(m)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),(0,J.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,J.hu)(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const v=m.d,b=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==b&&this.removeListen_(i,a),t.onComplete&&t.onComplete(b,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,J.r3)(t,"w")){const i=(0,J.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Vi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,J.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,J.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,f=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,J.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const f={p:r,d:i};void 0!==l&&(f.h=l),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,J.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):bP("Unrecognized action received from server: "+(0,J.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,J.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Lw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Lw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Lw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ce.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let m=!1,v=null;const b=function(){v?v.close():(m=!0,a())};t.realtime_={close:b,sendRequest:function(V){(0,J.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(V)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,G]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);m?mi("getToken() completed but was canceled"):(mi("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=G&&G.token,v=new YL(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,le=>{Vi(le+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(V){t.log_("Failed to get token: "+V),m||(t.repoInfo_.nodeAdmin&&Vi(V),b())}}})()}interrupt(t){mi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){mi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,J.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Lw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>TP(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Kn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){mi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){mi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,J.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+CP.replace(/\./g,"-")]=1,(0,J.uI)()?t["framework.cordova"]=1:(0,J.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=uD.getInstance().currentlyOnline();return(0,J.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class xn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new xn(e,t)}}class lD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new xn(ad,e),i=new xn(ad,t);return 0!==this.compare(r,i)}minPost(){return xn.MIN}}class sV extends lD{static get __EMPTY_NODE(){return cD}static set __EMPTY_NODE(e){cD=e}compare(e,t){return Gf(e.name,t.name)}isDefinedOn(e){throw(0,J.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return xn.MIN}maxPost(){return new xn(cl,cD)}makePost(e,t){return(0,J.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new xn(e,cD)}toString(){return".key"}}const Fa=new sV;class dD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let LP,Uo=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??vs.EMPTY_NODE,this.right=l??vs.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return vs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return vs.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class vs{constructor(e,t=vs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new vs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Uo.BLACK,null,null))}remove(e){return new vs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Uo.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new dD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new dD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new dD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new dD(this.root_,null,this.comparator_,!0,e)}}function yW(n,e){return Gf(n.name,e.name)}function FP(n,e){return Gf(n,e)}vs.EMPTY_NODE=new class _W{copy(e,t,r,i,a){return this}insert(e,t,r){return new Uo(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const oV=function(n){return"number"==typeof n?"number:"+TL(n):"string:"+n},aV=function(n){if(n.isLeafNode()){const e=n.val();(0,J.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,J.r3)(e,".sv"),"Priority must be a string or number.")}else(0,J.hu)(n===LP||n.isEmpty(),"priority of unexpected type.");(0,J.hu)(n===LP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let uV,lV,cV,t_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,J.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),aV(this.priorityNode_)}static set __childrenNodeConstructor(t){uV=t}static get __childrenNodeConstructor(){return uV}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Sn(t)?this:".priority"===Dn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Dn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,J.hu)(".priority"!==i||1===ld(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(rr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+oV(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?TL(this.value_):this.value_,this.lazyHash_=wL(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,J.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,J.hu)(a>=0,"Unknown leaf type: "+r),(0,J.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ur=new class CW extends lD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Gf(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return xn.MIN}maxPost(){return new xn(cl,new t_("[PRIORITY-POST]",cV))}makePost(e,t){const r=lV(e);return new xn(t,new t_("[PRIORITY-POST]",r))}toString(){return".priority"}},IW=Math.log(2);class bW{constructor(e){this.count=parseInt(Math.log(e+1)/IW,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const hD=function(n,e,t,r){n.sort(e);const i=function(m,v){const b=v-m;let T,x;if(0===b)return null;if(1===b)return T=n[m],x=t?t(T):T,new Uo(x,T.node,Uo.BLACK,null,null);{const V=parseInt(b/2,10)+m,G=i(m,V),le=i(V+1,v);return T=n[V],x=t?t(T):T,new Uo(x,T.node,Uo.BLACK,G,le)}},f=function(m){let v=null,b=null,T=n.length;const x=function(G,le){const Ie=T-G,bt=T;T-=G;const Rt=i(Ie+1,bt),St=n[Ie],$t=t?t(St):St;V(new Uo($t,St.node,le,null,Rt))},V=function(G){v?(v.left=G,v=G):(b=G,v=G)};for(let G=0;G<m.count;++G){const le=m.nextBitIsOne(),Ie=Math.pow(2,m.count-(G+1));le?x(Ie,Uo.BLACK):(x(Ie,Uo.BLACK),x(Ie,Uo.RED))}return b}(new bW(n.length));return new vs(r||e,f)};let VP;const n_={};class dl{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,J.hu)(n_&&ur,"ChildrenNode.ts has not been loaded"),VP=VP||new dl({".priority":n_},{".priority":ur}),VP}get(e){const t=(0,J.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof vs?t:null}hasIndex(e){return(0,J.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,J.hu)(e!==Fa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(xn.Wrap);let f,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();f=i?hD(r,e.getCompare()):n_;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const b=Object.assign({},this.indexes_);return b[m]=f,new dl(b,v)}addToIndexes(e,t){const r=(0,J.UI)(this.indexes_,(i,a)=>{const l=(0,J.DV)(this.indexSet_,a);if((0,J.hu)(l,"Missing index implementation for "+a),i===n_){if(l.isDefinedOn(e.node)){const f=[],m=t.getIterator(xn.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&f.push(v),v=m.getNext();return f.push(e),hD(f,l.getCompare())}return n_}{const f=t.get(e.name);let m=i;return f&&(m=m.remove(new xn(e.name,f))),m.insert(e,e.node)}});return new dl(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,J.UI)(this.indexes_,i=>{if(i===n_)return i;{const a=t.get(e.name);return a?i.remove(new xn(e.name,a)):i}});return new dl(r,this.indexSet_)}}let Vw,gn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&aV(this.priorityNode_),this.children_.isEmpty()&&(0,J.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Vw||(Vw=new n(new vs(FP),null,dl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Vw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Vw:r}}getChild(t){const r=Dn(t);return null===r?this:this.getImmediateChild(r).getChild(rr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,J.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new xn(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?Vw:this.priorityNode_;return new n(a,f,l)}}updateChild(t,r){const i=Dn(t);if(null===i)return r;{(0,J.hu)(".priority"!==Dn(t)||1===ld(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(rr(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(ur,(f,m)=>{r[f]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):l=!1}),!t&&l&&a<2*i){const f=[];for(const m in r)f[m]=r[m];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+oV(this.getPriority().val())+":"),this.forEachChild(ur,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":wL(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new xn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new xn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new xn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,xn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,xn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Uw?-1:0}withIndex(t){if(t===Fa||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Fa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(ur),a=r.getIterator(ur);let l=i.getNext(),f=a.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=a.getNext()}return null===l&&null===f}return!1}return!1}}resolveIndex_(t){return t===Fa?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Uw=new class TW extends gn{constructor(){super(new vs(FP),gn.EMPTY_NODE,dl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return gn.EMPTY_NODE}isEmpty(){return!1}};function Ar(n,e=null){if(null===n)return gn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,J.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new t_(n,Ar(e));if(n instanceof Array){let t=gn.EMPTY_NODE;return _i(n,(r,i)=>{if((0,J.r3)(n,r)&&"."!==r.substring(0,1)){const a=Ar(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Ar(e))}{const t=[];let r=!1;if(_i(n,(l,f)=>{if("."!==l.substring(0,1)){const m=Ar(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new xn(l,m)))}}),0===t.length)return gn.EMPTY_NODE;const a=hD(t,yW,l=>l.name,FP);if(r){const l=hD(t,ur.getCompare());return new gn(a,Ar(e),new dl({".priority":l},{".priority":ur}))}return new gn(a,Ar(e),dl.Default)}}Object.defineProperties(xn,{MIN:{value:new xn(ad,gn.EMPTY_NODE)},MAX:{value:new xn(cl,Uw)}}),sV.__EMPTY_NODE=gn.EMPTY_NODE,t_.__childrenNodeConstructor=gn,function vW(n){LP=n}(Uw),function wW(n){cV=n}(Uw),function EW(n){lV=n}(Ar);class UP extends lD{constructor(e){super(),this.indexPath_=e,(0,J.hu)(!Sn(e)&&".priority"!==Dn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Gf(e.name,t.name):a}makePost(e,t){const r=Ar(e),i=gn.EMPTY_NODE.updateChild(this.indexPath_,r);return new xn(t,i)}maxPost(){const e=gn.EMPTY_NODE.updateChild(this.indexPath_,Uw);return new xn(cl,e)}toString(){return Fw(this.indexPath_,0).join("/")}}const BP=new class SW extends lD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Gf(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return xn.MIN}maxPost(){return xn.MAX}makePost(e,t){const r=Ar(e);return new xn(t,r)}toString(){return".value"}};function $w(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class jP{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ur}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,J.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,J.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ad}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,J.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,J.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:cl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,J.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ur}copy(){const e=new jP;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function hV(n){const e={};if(n.isDefault())return e;let t;if(n.index_===ur?t="$priority":n.index_===BP?t="$value":n.index_===Fa?t="$key":((0,J.hu)(n.index_ instanceof UP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,J.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,J.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,J.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,J.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,J.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function fV(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==ur&&(e.i=n.index_.toString()),e}class pD extends QL{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Pw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,J.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=pD.getListenId_(e,r),f={};this.listens_[l]=f;const m=hV(e._queryParams);this.restRequest_(a+".json",m,(v,b)=>{let T=b;if(404===v&&(T=null,v=null),null===v&&this.onDataUpdate_(a,T,!1,r),(0,J.DV)(this.listens_,l)===f){let x;x=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(x,null)}})}unlisten(e,t){const r=pD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=hV(e._queryParams),r=e._path.toString(),i=new J.BH;return this.restRequest_(r+".json",t,(a,l)=>{let f=l;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,J.xO)(t);this.log_("Sending REST request for "+l);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,J.cI)(f.responseText)}catch{Vi("Failed to parse JSON response for "+l+": "+f.responseText)}r(null,m)}else 401!==f.status&&404!==f.status&&Vi("Got unsuccessful REST response for "+l+" Status: "+f.status),r(f.status);r=null}},f.open("GET",l,!0),f.send()})}}class kW{constructor(){this.rootNode_=gn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function gD(){return{value:null,children:new Map}}function i_(n,e,t){if(Sn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Dn(e);n.children.has(r)||n.children.set(r,gD()),i_(n.children.get(r),e=rr(e),t)}}function GP(n,e,t){null!==n.value?t(e,n.value):function FW(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{GP(i,new Kn(e.toString()+"/"+r),t)})}class LW{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&_i(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class BW{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new LW(e);const r=1e4+2e4*Math.random();Ow(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;_i(e,(i,a)=>{a>0&&(0,J.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Ow(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var so=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(so||(so={})),so))();function ZP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class mD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=so.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Sn(this.path)){if(null!=this.affectedTree.value)return(0,J.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Kn(e));return new mD(zn(),t,this.revert)}}return(0,J.hu)(Dn(this.path)===e,"operationForChild called for unrelated child."),new mD(rr(this.path),this.affectedTree,this.revert)}}class Zf{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=so.OVERWRITE}operationForChild(e){return Sn(this.path)?new Zf(this.source,zn(),this.snap.getImmediateChild(e)):new Zf(this.source,rr(this.path),this.snap)}}class s_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=so.MERGE}operationForChild(e){if(Sn(this.path)){const t=this.children.subtree(new Kn(e));return t.isEmpty()?null:t.value?new Zf(this.source,zn(),t.value):new s_(this.source,zn(),t)}return(0,J.hu)(Dn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new s_(this.source,rr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class cd{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Sn(e))return this.isFullyInitialized()&&!this.filtered_;const t=Dn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function zw(n,e,t,r,i,a){const l=r.filter(f=>f.type===t);l.sort((f,m)=>function zW(n,e,t){if(null==e.childName||null==t.childName)throw(0,J.g5)("Should only compare child_ events.");const r=new xn(e.childName,e.snapshotNode),i=new xn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,m)),l.forEach(f=>{const m=function HW(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(v=>{v.respondsTo(f.type)&&e.push(v.createEvent(m,n.query_))})})}function _D(n,e){return{eventCache:n,serverCache:e}}function Ww(n,e,t,r){return _D(new cd(e,t,r),n.serverCache)}function gV(n,e,t,r){return _D(n.eventCache,new cd(e,t,r))}function yD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Yf(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let YP;class lr{constructor(e,t=(()=>(YP||(YP=new vs(Az)),YP))()){this.value=e,this.children=t}static fromObject(e){let t=new lr(null);return _i(e,(r,i)=>{t=t.set(new Kn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:zn(),value:this.value};if(Sn(e))return null;{const r=Dn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(rr(e),t);return null!=a?{path:Er(new Kn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Sn(e))return this;{const t=Dn(e),r=this.children.get(t);return null!==r?r.subtree(rr(e)):new lr(null)}}set(e,t){if(Sn(e))return new lr(t,this.children);{const r=Dn(e),a=(this.children.get(r)||new lr(null)).set(rr(e),t),l=this.children.insert(r,a);return new lr(this.value,l)}}remove(e){if(Sn(e))return this.children.isEmpty()?new lr(null):new lr(null,this.children);{const t=Dn(e),r=this.children.get(t);if(r){const i=r.remove(rr(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new lr(null):new lr(this.value,a)}return this}}get(e){if(Sn(e))return this.value;{const t=Dn(e),r=this.children.get(t);return r?r.get(rr(e)):null}}setTree(e,t){if(Sn(e))return t;{const r=Dn(e),a=(this.children.get(r)||new lr(null)).setTree(rr(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new lr(this.value,l)}}fold(e){return this.fold_(zn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Er(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,zn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Sn(e))return null;{const a=Dn(e),l=this.children.get(a);return l?l.findOnPath_(rr(e),Er(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,zn(),t)}foreachOnPath_(e,t,r){if(Sn(e))return this;{this.value&&r(t,this.value);const i=Dn(e),a=this.children.get(i);return a?a.foreachOnPath_(rr(e),Er(t,i),r):new lr(null)}}foreach(e){this.foreach_(zn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Er(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Bo{constructor(e){this.writeTree_=e}static empty(){return new Bo(new lr(null))}}function Gw(n,e,t){if(Sn(e))return new Bo(new lr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=es(i,e);return a=a.updateChild(l,t),new Bo(n.writeTree_.set(i,a))}{const i=new lr(t),a=n.writeTree_.setTree(e,i);return new Bo(a)}}}function QP(n,e,t){let r=n;return _i(t,(i,a)=>{r=Gw(r,Er(e,i),a)}),r}function mV(n,e){if(Sn(e))return Bo.empty();{const t=n.writeTree_.setTree(e,new lr(null));return new Bo(t)}}function JP(n,e){return null!=Qf(n,e)}function Qf(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(es(t.path,e)):null}function _V(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ur,(r,i)=>{e.push(new xn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new xn(r,i.value))}),e}function dd(n,e){if(Sn(e))return n;{const t=Qf(n,e);return new Bo(null!=t?new lr(t):n.writeTree_.subtree(e))}}function XP(n){return n.writeTree_.isEmpty()}function o_(n,e){return yV(zn(),n.writeTree_,e)}function yV(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,J.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=yV(Er(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Er(n,".priority"),r)),t}}function vD(n,e){return IV(e,n)}function YW(n,e){if(n.snap)return io(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&io(Er(n.path,t),e))return!0;return!1}function JW(n){return n.visible}function vV(n,e,t){let r=Bo.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let f;if(a.snap)io(t,l)?(f=es(t,l),r=Gw(r,f,a.snap)):io(l,t)&&(f=es(l,t),r=Gw(r,zn(),a.snap.getChild(f)));else{if(!a.children)throw(0,J.g5)("WriteRecord should have .snap or .children");if(io(t,l))f=es(t,l),r=QP(r,f,a.children);else if(io(l,t))if(f=es(l,t),Sn(f))r=QP(r,zn(),a.children);else{const m=(0,J.DV)(a.children,Dn(f));if(m){const v=m.getChild(rr(f));r=Gw(r,zn(),v)}}}}}return r}function EV(n,e,t,r,i){if(r||i){const a=dd(n.visibleWrites,e);return!i&&XP(a)?t:i||null!=t||JP(a,zn())?o_(vV(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(io(v.path,e)||io(e,v.path))},e),t||gn.EMPTY_NODE):null}{const a=Qf(n.visibleWrites,e);if(null!=a)return a;{const l=dd(n.visibleWrites,e);return XP(l)?t:null!=t||JP(l,zn())?o_(l,t||gn.EMPTY_NODE):null}}}function ED(n,e,t,r){return EV(n.writeTree,n.treePath,e,t,r)}function eN(n,e){return function XW(n,e,t){let r=gn.EMPTY_NODE;const i=Qf(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ur,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=dd(n.visibleWrites,e);return t.forEachChild(ur,(l,f)=>{const m=o_(dd(a,new Kn(l)),f);r=r.updateImmediateChild(l,m)}),_V(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return _V(dd(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function wV(n,e,t,r){return function eG(n,e,t,r,i){(0,J.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Er(e,t);if(JP(n.visibleWrites,a))return null;{const l=dd(n.visibleWrites,a);return XP(l)?i.getChild(t):o_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function wD(n,e){return function nG(n,e){return Qf(n.visibleWrites,e)}(n.writeTree,Er(n.treePath,e))}function tN(n,e,t){return function tG(n,e,t,r){const i=Er(e,t),a=Qf(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?o_(dd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function CV(n,e){return IV(Er(n.treePath,e),n.writeTree)}function IV(n,e){return{treePath:n,writeTree:e}}class oG{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,J.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,J.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,$w(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,function Bw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,function r_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,J.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,$w(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const bV=new class aG{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class nN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new cd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Yf(this.viewCache_),a=function sG(n,e,t,r,i,a){return function rG(n,e,t,r,i,a,l){let f;const m=dd(n.visibleWrites,e),v=Qf(m,zn());if(null!=v)f=v;else{if(null==t)return[];f=o_(m,t)}if(f=f.withIndex(l),f.isEmpty()||f.isLeafNode())return[];{const b=[],T=l.getCompare(),x=a?f.getReverseIteratorFrom(r,l):f.getIteratorFrom(r,l);let V=x.getNext();for(;V&&b.length<i;)0!==T(V,r)&&b.push(V),V=x.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function TV(n,e,t,r,i,a){const l=e.eventCache;if(null!=wD(r,t))return e;{let f,m;if(Sn(t))if((0,J.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=Yf(e),T=eN(r,v instanceof gn?v:gn.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),T,a)}else{const v=ED(r,Yf(e));f=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=Dn(t);if(".priority"===v){(0,J.hu)(1===ld(t),"Can't have a priority with additional path components");const b=l.getNode();m=e.serverCache.getNode();const T=wV(r,t,b,m);f=null!=T?n.filter.updatePriority(b,T):l.getNode()}else{const b=rr(t);let T;if(l.isCompleteForChild(v)){m=e.serverCache.getNode();const x=wV(r,t,l.getNode(),m);T=null!=x?l.getNode().getImmediateChild(v).updateChild(b,x):l.getNode().getImmediateChild(v)}else T=tN(r,v,e.serverCache);f=null!=T?n.filter.updateChild(l.getNode(),v,T,b,i,a):l.getNode()}}return Ww(e,f,l.isFullyInitialized()||Sn(t),n.filter.filtersNodes())}}function CD(n,e,t,r,i,a,l,f){const m=e.serverCache;let v;const b=l?n.filter:n.filter.getIndexedFilter();if(Sn(t))v=b.updateFullNode(m.getNode(),r,null);else if(b.filtersNodes()&&!m.isFiltered()){const V=m.getNode().updateChild(t,r);v=b.updateFullNode(m.getNode(),V,null)}else{const V=Dn(t);if(!m.isCompleteForPath(t)&&ld(t)>1)return e;const G=rr(t),Ie=m.getNode().getImmediateChild(V).updateChild(G,r);v=".priority"===V?b.updatePriority(m.getNode(),Ie):b.updateChild(m.getNode(),V,Ie,G,bV,null)}const T=gV(e,v,m.isFullyInitialized()||Sn(t),b.filtersNodes());return TV(n,T,t,i,new nN(i,T,a),f)}function rN(n,e,t,r,i,a,l){const f=e.eventCache;let m,v;const b=new nN(i,e,a);if(Sn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=Ww(e,v,!0,n.filter.filtersNodes());else{const T=Dn(t);if(".priority"===T)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=Ww(e,v,f.isFullyInitialized(),f.isFiltered());else{const x=rr(t),V=f.getNode().getImmediateChild(T);let G;if(Sn(x))G=r;else{const le=b.getCompleteChild(T);G=null!=le?".priority"===NP(x)&&le.getChild(tV(x)).isEmpty()?le:le.updateChild(x,r):gn.EMPTY_NODE}m=V.equals(G)?e:Ww(e,n.filter.updateChild(f.getNode(),T,G,x,b,l),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function DV(n,e){return n.eventCache.isCompleteForChild(e)}function SV(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function iN(n,e,t,r,i,a,l,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=Sn(t)?r:new lr(null).setTree(t,r);const b=e.serverCache.getNode();return v.children.inorderTraversal((T,x)=>{if(b.hasChild(T)){const G=SV(0,e.serverCache.getNode().getImmediateChild(T),x);m=CD(n,m,new Kn(T),G,i,a,l,f)}}),v.children.inorderTraversal((T,x)=>{const V=!e.serverCache.isCompleteForChild(T)&&null===x.value;if(!b.hasChild(T)&&!V){const le=SV(0,e.serverCache.getNode().getImmediateChild(T),x);m=CD(n,m,new Kn(T),le,i,a,l,f)}}),m}function vG(n,e){const t=Yf(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Sn(e)&&!t.getImmediateChild(Dn(e)).isEmpty())?t.getChild(e):null}function xV(n,e,t,r){e.type===so.MERGE&&null!==e.source.queryId&&((0,J.hu)(Yf(n.viewCache_),"We should always have a full cache before handling merges"),(0,J.hu)(yD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function cG(n,e,t,r,i){const a=new oG;let l,f;if(t.type===so.OVERWRITE){const v=t;v.source.fromUser?l=rN(n,e,v.path,v.snap,r,i,a):((0,J.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered()&&!Sn(v.path),l=CD(n,e,v.path,v.snap,r,i,f,a))}else if(t.type===so.MERGE){const v=t;v.source.fromUser?l=function hG(n,e,t,r,i,a,l){let f=e;return r.foreach((m,v)=>{const b=Er(t,m);DV(e,Dn(b))&&(f=rN(n,f,b,v,i,a,l))}),r.foreach((m,v)=>{const b=Er(t,m);DV(e,Dn(b))||(f=rN(n,f,b,v,i,a,l))}),f}(n,e,v.path,v.children,r,i,a):((0,J.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered(),l=iN(n,e,v.path,v.children,r,i,f,a))}else if(t.type===so.ACK_USER_WRITE){const v=t;l=v.revert?function gG(n,e,t,r,i,a){let l;if(null!=wD(r,t))return e;{const f=new nN(r,e,i),m=e.eventCache.getNode();let v;if(Sn(t)||".priority"===Dn(t)){let b;if(e.serverCache.isFullyInitialized())b=ED(r,Yf(e));else{const T=e.serverCache.getNode();(0,J.hu)(T instanceof gn,"serverChildren would be complete if leaf node"),b=eN(r,T)}v=n.filter.updateFullNode(m,b,a)}else{const b=Dn(t);let T=tN(r,b,e.serverCache);null==T&&e.serverCache.isCompleteForChild(b)&&(T=m.getImmediateChild(b)),v=null!=T?n.filter.updateChild(m,b,T,rr(t),f,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(m,b,gn.EMPTY_NODE,rr(t),f,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=ED(r,Yf(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=wD(r,zn()),Ww(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function fG(n,e,t,r,i,a,l){if(null!=wD(i,t))return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(Sn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return CD(n,e,t,m.getNode().getChild(t),i,a,f,l);if(Sn(t)){let v=new lr(null);return m.getNode().forEachChild(Fa,(b,T)=>{v=v.set(new Kn(b),T)}),iN(n,e,t,v,i,a,f,l)}return e}{let v=new lr(null);return r.foreach((b,T)=>{const x=Er(t,b);m.isCompleteForPath(x)&&(v=v.set(b,m.getNode().getChild(x)))}),iN(n,e,t,v,i,a,f,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==so.LISTEN_COMPLETE)throw(0,J.g5)("Unknown operation type: "+t.type);l=function pG(n,e,t,r,i){const a=e.serverCache;return TV(n,gV(e,a.getNode(),a.isFullyInitialized()||Sn(t),a.isFiltered()),t,r,bV,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function dG(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=yD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(function dV(n){return{type:"value",snapshotNode:n}}(yD(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function lG(n,e){(0,J.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,J.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,J.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,function RV(n,e,t,r){return function jW(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function AW(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),zw(n,i,"child_removed",e,r,t),zw(n,i,"child_added",e,r,t),zw(n,i,"child_moved",a,r,t),zw(n,i,"child_changed",e,r,t),zw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,a.changes,a.viewCache.eventCache.getNode(),null)}let ID,TD;function sN(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,J.hu)(null!=a,"SyncTree gave us an op for an invalid query."),xV(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(xV(l,e,t,r));return a}}function hd(n,e){let t=null;for(const r of n.views.values())t=t||vG(r,e);return t}class LV{constructor(e){this.listenProvider_=e,this.syncPointTree_=new lr(null),this.pendingWriteTree_=function iG(){return{visibleWrites:Bo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function oN(n,e,t,r,i){return function GW(n,e,t,r,i){(0,J.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Gw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?a_(n,new Zf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function pd(n,e,t=!1){const r=function KW(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function ZW(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,J.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const f=n.allWrites[l];f.visible&&(l>=t&&YW(f,r.path)?i=!1:io(r.path,f.path)&&(a=!0)),l--}return!!i&&(a?(function QW(n){n.visibleWrites=vV(n.allWrites,JW,zn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=mV(n.visibleWrites,r.path):_i(r.children,m=>{n.visibleWrites=mV(n.visibleWrites,Er(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new lr(null);return null!=r.snap?a=a.set(zn(),!0):_i(r.children,l=>{a=a.set(new Kn(l),!0)}),a_(n,new mD(r.path,a,t))}return[]}function qw(n,e,t){return a_(n,new Zf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function SD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,f)=>{const v=hd(f,es(l,e));if(v)return v});return EV(i,e,a,t,!0)}function a_(n,e){return UV(e,n.syncPointTree_,null,vD(n.pendingWriteTree_,zn()))}function UV(n,e,t,r){if(Sn(n.path))return BV(n,e,t,r);{const i=e.get(zn());null==t&&null!=i&&(t=hd(i,zn()));let a=[];const l=Dn(n.path),f=n.operationForChild(l),m=e.children.get(l);if(m&&f){const v=t?t.getImmediateChild(l):null,b=CV(r,l);a=a.concat(UV(f,m,v,b))}return i&&(a=a.concat(sN(i,n,r,t))),a}}function BV(n,e,t,r){const i=e.get(zn());null==t&&null!=i&&(t=hd(i,zn()));let a=[];return e.children.inorderTraversal((l,f)=>{const m=t?t.getImmediateChild(l):null,v=CV(r,l),b=n.operationForChild(l);b&&(a=a.concat(BV(b,f,m,v)))}),i&&(a=a.concat(sN(i,n,r,t))),a}function uN(n,e){return n.tagToQueryMap.get(e)}function lN(n){const e=n.indexOf("$");return(0,J.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Kn(n.substr(0,e))}}function cN(n,e,t){const r=n.syncPointTree_.get(e);return(0,J.hu)(r,"Missing sync point for query tag that we're tracking"),sN(r,t,vD(n.pendingWriteTree_,e),null)}class dN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new dN(t)}node(){return this.node_}}class hN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Er(this.path_,e);return new hN(this.syncTree_,t)}node(){return SD(this.syncTree_,this.path_)}}const jV=function(n,e,t){return n&&"object"==typeof n?((0,J.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?$G(n[".sv"],e,t):"object"==typeof n[".sv"]?jG(n[".sv"],e):void(0,J.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},$G=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,J.hu)(!1,"Unexpected server value: "+n)},jG=function(n,e,t){n.hasOwnProperty("increment")||(0,J.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,J.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,J.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},fN=function(n,e,t){return pN(n,new dN(e),t)};function pN(n,e,t){const r=n.getPriority().val(),i=jV(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,f=jV(l.getValue(),e,t);return f!==l.getValue()||i!==l.getPriority().val()?new t_(f,Ar(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new t_(i))),l.forEachChild(ur,(f,m)=>{const v=pN(m,e.getImmediateChild(f),t);v!==m&&(a=a.updateImmediateChild(f,v))}),a}}class gN{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function MD(n,e){let t=e instanceof Kn?e:new Kn(e),r=n,i=Dn(t);for(;null!==i;){const a=(0,J.DV)(r.node.children,i)||{children:{},childCount:0};r=new gN(i,r,a),t=rr(t),i=Dn(t)}return r}function Jf(n){return n.node.value}function mN(n,e){n.node.value=e,_N(n)}function zV(n){return n.node.childCount>0}function xD(n,e){_i(n.node.children,(t,r)=>{e(new gN(t,n,r))})}function WV(n,e,t,r){t&&!r&&e(n),xD(n,i=>{WV(i,e,!0,r)}),t&&r&&e(n)}function Yw(n){return new Kn(null===n.parent?n.name:Yw(n.parent)+"/"+n.name)}function _N(n){null!==n.parent&&function WG(n,e,t){const r=function HG(n){return void 0===Jf(n)&&!zV(n)}(t),i=(0,J.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,_N(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,_N(n))}(n.parent,n.name,n)}const GG=/[\[\].#$\/\u0000-\u001F\u007F]/,qG=/[\[\].#$\u0000-\u001F\u007F]/,yN=10485760,RD=function(n){return"string"==typeof n&&0!==n.length&&!GG.test(n)},Jw=function(n,e,t){const r=t instanceof Kn?new cW(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+qf(r));if("function"==typeof e)throw new Error(n+"contains a function "+qf(r)+" with contents = "+e.toString());if(sD(e))throw new Error(n+"contains "+e.toString()+" "+qf(r));if("string"==typeof e&&e.length>yN/3&&(0,J.ug)(e)>yN)throw new Error(n+"contains a string greater than "+yN+" utf8 bytes "+qf(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(_i(e,(l,f)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!RD(l)))throw new Error(n+" contains an invalid key ("+l+") "+qf(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function dW(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,J.ug)(e),nV(n)})(r,l),Jw(n,f,r),function hW(n){const e=n.parts_.pop();n.byteLength_-=(0,J.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+qf(r)+" in addition to actual children.")}},KV=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!RD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!qG.test(n)}(n)}(t))throw new Error((0,J.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class QG{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Bs(n,e,t){(function PD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!OP(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function YV(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(JG(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>io(r,e)||io(e,r))}function JG(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Wf&&mi("event: "+t.toString()),Xm(r)}}}class e3{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new QG,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=gD(),this.transactionQueueTree_=new gN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function JV(n){const t=n.infoData_.getNode(new Kn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function e0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:JV(n)})}function XV(n,e,t,r,i){n.dataUpdateCount++;const a=new Kn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,J.UI)(t,v=>Ar(v));l=function OG(n,e,t,r){const i=uN(n,r);if(i){const a=lN(i),l=a.path,f=a.queryId,m=es(l,e),v=lr.fromObject(t);return cN(n,l,new s_(ZP(f),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Ar(t);l=function VV(n,e,t,r){const i=uN(n,r);if(null!=i){const a=lN(i),l=a.path,f=a.queryId,m=es(l,e);return cN(n,l,new Zf(ZP(f),m,t))}return[]}(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,J.UI)(t,v=>Ar(v));l=function RG(n,e,t){const r=lr.fromObject(t);return a_(n,new s_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Ar(t);l=qw(n.serverSyncTree_,a,m)}let f=a;l.length>0&&(f=l_(n,a)),Bs(n.eventQueue_,f,l)}function eU(n,e){wN(n,"connected",e),!1===e&&function s3(n){u_(n,"onDisconnectEvents");const e=e0(n),t=gD();GP(n.onDisconnect_,zn(),(i,a)=>{const l=function(n,e,t,r){return pN(e,new hN(t,n),r)}(i,a,n.serverSyncTree_,e);i_(t,i,l)});let r=[];GP(t,zn(),(i,a)=>{r=r.concat(qw(n.serverSyncTree_,i,a));const l=function TN(n,e){const t=Yw(rU(n,e)),r=MD(n.transactionQueueTree_,e);return function zG(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{DN(n,i)}),DN(n,r),WV(r,i=>{DN(n,i)}),t}(n,i);l_(n,l)}),n.onDisconnect_=gD(),Bs(n.eventQueue_,zn(),r)}(n)}function wN(n,e,t){const r=new Kn("/.info/"+e),i=Ar(t);n.infoData_.updateSnapshot(r,i);const a=qw(n.infoSyncTree_,r,i);Bs(n.eventQueue_,r,a)}function ND(n){return n.nextWriteId_++}function u_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),mi(t,...e)}function bN(n,e,t){return SD(n.serverSyncTree_,e,t)||gn.EMPTY_NODE}function OD(n,e=n.transactionQueueTree_){if(e||kD(n,e),Jf(e)){const t=iU(n,e);(0,J.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function h3(n,e,t){const r=t.map(v=>v.currentWriteId),i=bN(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const b=t[v];(0,J.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const T=es(e,b.path);a=a.updateChild(T,b.currentOutputSnapshotRaw)}const f=a.val(!0),m=e;n.server_.put(m.toString(),f,v=>{u_(n,"transaction put response",{path:m.toString(),status:v});let b=[];if("ok"===v){const T=[];for(let x=0;x<t.length;x++)t[x].status=2,b=b.concat(pd(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&T.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();kD(n,MD(n.transactionQueueTree_,e)),OD(n,n.transactionQueueTree_),Bs(n.eventQueue_,e,b);for(let x=0;x<T.length;x++)Xm(T[x])}else{if("datastale"===v)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{Vi("transaction at "+m.toString()+" failed: "+v);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=v}l_(n,e)}},l)}(n,Yw(e),t)}else zV(e)&&xD(e,t=>{OD(n,t)})}function l_(n,e){const t=rU(n,e),r=Yw(t);return function f3(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],v=es(t,m.path);let T,b=!1;if((0,J.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)b=!0,T=m.abortReason,i=i.concat(pd(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)b=!0,T="maxretry",i=i.concat(pd(n.serverSyncTree_,m.currentWriteId,!0));else{const x=bN(n,m.path,l);m.currentInputSnapshot=x;const V=e[f].update(x.val());if(void 0!==V){Jw("transaction failed: Data returned ",V,m.path);let G=Ar(V);"object"==typeof V&&null!=V&&(0,J.r3)(V,".priority")||(G=G.updatePriority(x.getPriority()));const Ie=m.currentWriteId,bt=e0(n),Rt=fN(G,x,bt);m.currentOutputSnapshotRaw=G,m.currentOutputSnapshotResolved=Rt,m.currentWriteId=ND(n),l.splice(l.indexOf(Ie),1),i=i.concat(oN(n.serverSyncTree_,m.path,Rt,m.currentWriteId,m.applyLocally)),i=i.concat(pd(n.serverSyncTree_,Ie,!0))}else b=!0,T="nodata",i=i.concat(pd(n.serverSyncTree_,m.currentWriteId,!0))}Bs(n.eventQueue_,t,i),i=[],b&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===T?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(T),!1,null)))}kD(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)Xm(r[f]);OD(n,n.transactionQueueTree_)}(n,iU(n,t),r),r}function rU(n,e){let t,r=n.transactionQueueTree_;for(t=Dn(e);null!==t&&void 0===Jf(r);)r=MD(r,t),t=Dn(e=rr(e));return r}function iU(n,e){const t=[];return sU(n,e,t),t.sort((r,i)=>r.order-i.order),t}function sU(n,e,t){const r=Jf(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);xD(e,i=>{sU(n,i,t)})}function kD(n,e){const t=Jf(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,mN(e,t.length>0?t:void 0)}xD(e,r=>{kD(n,r)})}function DN(n,e){const t=Jf(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,J.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,J.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(pd(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?mN(e,void 0):t.length=a+1,Bs(n.eventQueue_,Yw(e),i);for(let l=0;l<r.length;l++)Xm(r[l])}}const SN=function(n,e){const t=m3(n),r=t.namespace;return"firebase.com"===t.domain&&ka(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ka("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Vi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new SP(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Kn(t.pathString)}},m3=function(n){let e="",t="",r="",i="",a="",l=!0,f="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(f=n.substring(0,v-1),n=n.substring(v+2));let b=n.indexOf("/");-1===b&&(b=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(b,T)),b<T&&(i=function p3(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,T)));const x=function g3(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Vi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));v=e.indexOf(":"),v>=0?(l="https"===f||"wss"===f,m=parseInt(e.substring(v+1),10)):v=e.length;const V=e.slice(0,v);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const G=e.indexOf(".");r=e.substring(0,G).toLowerCase(),t=e.substring(G+1),a=r}"ns"in x&&(a=x.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:f,pathString:i,namespace:a}};class $s{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Sn(this._path)?null:NP(this._path)}get ref(){return new $o(this._repo,this._path)}get _queryIdentifier(){const e=fV(this._queryParams),t=TP(e);return"{}"===t?"default":t}get _queryObject(){return fV(this._queryParams)}isEqual(e){if(!((e=(0,J.m9)(e))instanceof $s))return!1;const t=this._repo===e._repo,r=OP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function uW(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class $o extends $s{constructor(e,t){super(e,t,new jP,!1)}get parent(){const e=tV(this._path);return null===e?null:new $o(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function CG(n){(0,J.hu)(!ID,"__referenceConstructor has already been defined"),ID=n})($o),function SG(n){(0,J.hu)(!TD,"__referenceConstructor has already been defined"),TD=n}($o);const MN={};class F3{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function t3(n,e,t){if(n.stats_=xP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new pD(n.repoInfo_,(r,i,a,l)=>{XV(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>eU(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,J.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Kf(n.repoInfo_,e,(r,i,a,l)=>{XV(n,r,i,a,l)},r=>{eU(n,r)},r=>{!function n3(n,e){_i(e,(t,r)=>{wN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Bz(n,e){const t=n.toString();return MP[t]||(MP[t]=e()),MP[t]}(n.repoInfo_,()=>new BW(n.stats_,n.server_)),n.infoData_=new kW,n.infoSyncTree_=new LV({startListening:(r,i,a,l)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=qw(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),f},stopListening:()=>{}}),wN(n,"connected",!1),n.serverSyncTree_=new LV({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(f,m)=>{const v=l(f,m);Bs(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new $o(this._repo,zn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function N3(n,e){const t=MN[e];(!t||t[n.key]!==n)&&ka(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function nU(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ka("Cannot call "+e+" on a deleted database.")}}function L3(n=(0,kn.getApp)(),e){const t=(0,kn._getProvider)(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(0,J.P0)("database");r&&function V3(n,e,t,r={}){(n=(0,J.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ka("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ka('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new kw(kw.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,J.Sg)(r.mockUserToken,n.app.options.projectId);a=new kw(l)}!function R3(n,e,t,r){n.repoInfo_=new SP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(t,...r)}return t}Kf.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Kf.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function U3(n){(function Iz(n){CP=n})(kn.SDK_VERSION),(0,kn._registerComponent)(new No.wA("database",(e,{instanceIdentifier:t})=>function P3(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||ka("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),mi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,l=SN(a,i),f=l.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${f.namespace}`,l=SN(a,i),f=l.repoInfo):m=!l.repoInfo.secure;const b=i&&m?new kw(kw.OWNER):new Lz(n.name,n.options,e);KV("Invalid Firebase Database URL",l),Sn(l.path)||ka("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function O3(n,e,t,r){let i=MN[e.name];i||(i={},MN[e.name]=i);let a=i[n.toURLString()];return a&&ka("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new e3(n,!1,t,r),i[n.toURLString()]=a,a}(f,n,b,new Fz(n.name,t));return new F3(T,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,kn.registerVersion)(_L,"0.14.4",n),(0,kn.registerVersion)(_L,"0.14.4","esm2017")}();class xN{constructor(e){return e}}const pU="database",RN=new d.OlP("angularfire2.database-instances");function z3(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new xN(r)}}const W3={provide:class j3{constructor(){return(0,it.vb)(pU)}},deps:[[new d.FiY,RN]]},G3={provide:xN,useFactory:function H3(n,e){const t=(0,it.JM)(pU,n,e);return t&&new xN(t)},deps:[[new d.FiY,RN],Ti]};let q3=(()=>{class n{constructor(){(0,Xr.KN)("angularfire",it.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[G3,W3]}),n})();function K3(n,...e){return{ngModule:q3,providers:[{provide:RN,useFactory:z3(n),multi:!0,deps:[d.R0b,d.zs3,it.HU,gs,[new d.FiY,Aw],[new d.FiY,zu],...e]}]}}const Z3=(0,it.u3)(L3,!0);class PN{constructor(e){return e}}const gU="firestore",NN=new d.OlP("angularfire2.firestore-instances");function J3(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new PN(r)}}const X3={provide:class Y3{constructor(){return(0,it.vb)(gU)}},deps:[[new d.FiY,NN]]},eq={provide:PN,useFactory:function Q3(n,e){const t=(0,it.JM)(gU,n,e);return t&&new PN(t)},deps:[[new d.FiY,NN],Ti]};let tq=(()=>{class n{constructor(){(0,Xr.KN)("angularfire",it.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[eq,X3]}),n})();function nq(n,...e){return{ngModule:tq,providers:[{provide:NN,useFactory:J3(n),multi:!0,deps:[d.R0b,d.zs3,it.HU,gs,[new d.FiY,Aw],[new d.FiY,zu],...e]}]}}const rq=(0,it.u3)(nj,!0),kN="functions";class uq{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return(0,Ce.Z)(function*(){if(e.auth)try{return(yield e.auth.getToken())?.accessToken}catch{return}})()}getMessagingToken(){var e=this;return(0,Ce.Z)(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch{return}})()}getAppCheckToken(){var e=this;return(0,Ce.Z)(function*(){if(e.appCheck){const t=yield e.appCheck.getToken();return t.error?null:t.token}return null})()}getContext(){var e=this;return(0,Ce.Z)(function*(){return{authToken:yield e.getAuthToken(),messagingToken:yield e.getMessagingToken(),appCheckToken:yield e.getAppCheckToken()}})()}}const FN="us-central1";class cq{constructor(e,t,r,i,a=FN,l){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new uq(t,r,i),this.cancelAllRequests=new Promise(f=>{this.deleteService=()=>Promise.resolve(f())});try{const f=new URL(a);this.customDomain=f.origin,this.region=FN}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const vU="@firebase/functions";function Eq(n=(0,kn.getApp)(),e=FN){const r=(0,kn._getProvider)((0,J.m9)(n),kN).getImmediate({identifier:e}),i=(0,J.P0)("functions");return i&&function wq(n,e,t){!function dq(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}((0,J.m9)(n),e,t)}(r,...i),r}!function vq(n,e){(0,kn._registerComponent)(new No.wA(kN,(r,{instanceIdentifier:i})=>{const a=r.getProvider("app").getImmediate(),l=r.getProvider("auth-internal"),f=r.getProvider("messaging-internal"),m=r.getProvider("app-check-internal");return new cq(a,l,f,m,i,n)},"PUBLIC").setMultipleInstances(!0)),(0,kn.registerVersion)(vU,"0.9.4",e),(0,kn.registerVersion)(vU,"0.9.4","esm2017")}(fetch.bind(self));class UN{constructor(e){return e}}const wU="functions",BN=new d.OlP("angularfire2.functions-instances");function bq(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new UN(r)}}const Tq={provide:class Cq{constructor(){return(0,it.vb)(wU)}},deps:[[new d.FiY,BN]]},Dq={provide:UN,useFactory:function Iq(n,e){const t=(0,it.JM)(wU,n,e);return t&&new UN(t)},deps:[[new d.FiY,BN],Ti]};let Sq=(()=>{class n{constructor(){(0,Xr.KN)("angularfire",it.q4.full,"fn")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Dq,Tq]}),n})();function Aq(n,...e){return{ngModule:Sq,providers:[{provide:BN,useFactory:bq(n),multi:!0,deps:[d.R0b,d.zs3,it.HU,gs,[new d.FiY,Aw],[new d.FiY,zu],...e]}]}}const Mq=(0,it.u3)(Eq,!0);var xq=O(751);class $N{constructor(e){return e}}const CU="messaging",jN=new d.OlP("angularfire2.messaging-instances");function Nq(n){return(e,t)=>{if(!it.n1.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new $N(r)}}const Oq={provide:class Rq{constructor(){return(0,it.vb)(CU)}},deps:[[new d.FiY,jN]]},kq={provide:$N,useFactory:function Pq(n,e){if(!it.n1.sync())return null;const t=(0,it.JM)(CU,n,e);return t&&new $N(t)},deps:[[new d.FiY,jN],Ti]};let Fq=(()=>{class n{constructor(){(0,Xr.KN)("angularfire",it.q4.full,"fcm")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[kq,Oq,{provide:d.ip1,useValue:it.n1.async,multi:!0}]}),n})();function Lq(n,...e){return{ngModule:Fq,providers:[{provide:jN,useFactory:Nq(n),multi:!0,deps:[d.R0b,d.zs3,it.HU,gs,...e]}]}}const Vq=(0,it.u3)(xq.KL,!0);O(2833);const IU="@firebase/performance",HN="0.6.4",zN="FB-PERF-TRACE-MEASURE",MU="@firebase/performance/config",xU="@firebase/performance/configexpire",RU="Performance",Ai=new J.LL("performance",RU,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),Ua=new qi.Yd(RU);let WN,PU,NU,qN;Ua.logLevel=qi.in.INFO;class yi{constructor(e){if(this.window=e,!e)throw Ai.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,r){!this.performance||!this.performance.measure||this.performance.measure(e,t,r)}getEntriesByType(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}getEntriesByName(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&(0,J.zI)()?!!(0,J.hl)()||(Ua.info("IndexedDB is not supported by current browswer"),!1):(Ua.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(e,t){this.PerformanceObserver&&new this.PerformanceObserver(i=>{for(const a of i.getEntries())t(a)}).observe({entryTypes:[e]})}static getInstance(){return void 0===WN&&(WN=new yi(PU)),WN}}function GN(){return NU}function OU(n,e){const t=n.length-e.length;if(t<0||t>1)throw Ai.create("invalid String merger input");const r=[];for(let i=0;i<n.length;i++)r.push(n.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}class js{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=OU("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=OU("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===qN&&(qN=new js),qN}}var ep=(()=>(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"}(ep||(ep={})),ep))();const Gq=["firebase_","google_","ga_"],qq=new RegExp("^[a-zA-Z]\\w*$");function Yq(){const n=yi.getInstance().navigator;return n?.serviceWorker?n.serviceWorker.controller?2:3:1}function kU(){switch(yi.getInstance().document.visibilityState){case"visible":return ep.VISIBLE;case"hidden":return ep.HIDDEN;default:return ep.UNKNOWN}}function Qq(){const e=yi.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function FU(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.appId;if(!t)throw Ai.create("no app id");return t}const jo={loggingEnabled:!0};const a6="Could not fetch config, will use default configs";function LU(n){if(!n)return n;const e=js.getInstance(),t=n.entries||{};return e.loggingEnabled=void 0!==t.fpr_enabled?"true"===String(t.fpr_enabled):jo.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):jo.logSource&&(e.logSource=jo.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:jo.logEndPointUrl&&(e.logEndPointUrl=jo.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:jo.transportKey&&(e.transportKey=jo.transportKey),void 0!==t.fpr_vc_network_request_sampling_rate?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):void 0!==jo.networkRequestsSamplingRate&&(e.networkRequestsSamplingRate=jo.networkRequestsSamplingRate),void 0!==t.fpr_vc_trace_sampling_rate?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):void 0!==jo.tracesSamplingRate&&(e.tracesSamplingRate=jo.tracesSamplingRate),e.logTraceAfterSampling=VU(e.tracesSamplingRate),e.logNetworkAfterSampling=VU(e.networkRequestsSamplingRate),n}function VU(n){return Math.random()<=n}let ZN,KN=1;function UU(n){return KN=2,ZN=ZN||function d6(n){return function h6(){const n=yi.getInstance().document;return new Promise(e=>{if(n&&"complete"!==n.readyState){const t=()=>{"complete"===n.readyState&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}().then(()=>function zq(n){const e=n.getId();return e.then(t=>{NU=t}),e}(n.installations)).then(e=>function i6(n,e){const t=function s6(){const n=yi.getInstance().localStorage;if(!n)return;const e=n.getItem(xU);if(!e||!function l6(n){return Number(n)>Date.now()}(e))return;const t=n.getItem(MU);if(t)try{return JSON.parse(t)}catch{return}}();return t?(LU(t),Promise.resolve()):function u6(n,e){return function Wq(n){const e=n.getToken();return e.then(t=>{}),e}(n.installations).then(t=>{const r=function e6(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.projectId;if(!t)throw Ai.create("no project id");return t}(n.app),i=function t6(n){var e;const t=null===(e=n.options)||void 0===e?void 0:e.apiKey;if(!t)throw Ai.create("no api key");return t}(n.app),l=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,{method:"POST",headers:{Authorization:`FIREBASE_INSTALLATIONS_AUTH ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:FU(n.app),app_version:"0.6.4",sdk_version:"0.0.1"})});return fetch(l).then(f=>{if(f.ok)return f.json();throw Ai.create("RC response not ok")})}).catch(()=>{Ua.info(a6)})}(n,e).then(LU).then(r=>function o6(n){const e=yi.getInstance().localStorage;!n||!e||(e.setItem(MU,JSON.stringify(n)),e.setItem(xU,String(Date.now()+60*js.getInstance().configTimeToLive*60*1e3)))}(r),()=>{})}(n,e)).then(()=>BU(),()=>BU())}(n),ZN}function BU(){KN=3}let QN,BD=3,_d=[],jU=!1;function $D(n){setTimeout(()=>{if(0!==BD){if(!_d.length)return $D(1e4);!function m6(){const n=_d.splice(0,1e3),e=n.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}));(function _6(n,e){return function y6(n){const e=js.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(n)})}(n).then(t=>(t.ok||Ua.info("Call to Firebase backend failed."),t.json())).then(t=>{const r=Number(t.nextRequestWaitMillis);let i=1e4;isNaN(r)||(i=Math.max(r,i));const a=t.logResponseDetails;Array.isArray(a)&&a.length>0&&"RETRY_REQUEST_LATER"===a[0].responseAction&&(_d=[...e,..._d],Ua.info("Retry transport request later.")),BD=3,$D(i)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:js.getInstance().logSource,log_event:e},n).catch(()=>{_d=[...n,..._d],BD--,Ua.info(`Tries left: ${BD}.`),$D(1e4)})}()}},n)}function HU(n,e){QN||(QN=function E6(n){return(...e)=>{!function v6(n){if(!n.eventTime||!n.message)throw Ai.create("invalid cc log");_d=[..._d,n]}({message:n(...e),eventTime:Date.now()})}}(C6)),QN(n,e)}function jD(n){const e=js.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||!yi.getInstance().requiredApisAvailable()||n.isAuto&&kU()!==ep.VISIBLE||(function c6(){return 3===KN}()?JN(n):UU(n.performanceController).then(()=>JN(n),()=>JN(n)))}function JN(n){if(!GN())return;const e=js.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>HU(n,1),0)}function C6(n,e){return 0===e?function I6(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:zU(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}(n):function b6(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};0!==Object.keys(n.counters).length&&(e.counters=n.counters);const t=n.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);const r={application_info:zU(n.performanceController.app),trace_metric:e};return JSON.stringify(r)}(n)}function zU(n){return{google_app_id:FU(n),app_instance_id:GN(),web_app_info:{sdk_version:"0.6.4",page_url:yi.getInstance().getUrl(),service_worker_status:Yq(),visibility_state:kU(),effective_connection_type:Qq()},application_process_state:0}}const S6=["_fp","_fcp","_fid"];class yd{constructor(e,t,r=!1,i){this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=yi.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=i||`${zN}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw Ai.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw Ai.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),jD(this)}record(e,t,r){if(e<=0)throw Ai.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Ai.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Math.floor(Number(r.metrics[i])));jD(this)}incrementMetric(e,t=1){this.putMetric(e,void 0===this.counters[e]?t:this.counters[e]+t)}putMetric(e,t){if(!function A6(n,e){return!(0===n.length||n.length>100)&&(e&&e.startsWith("_wt_")&&S6.indexOf(n)>-1||!n.startsWith("_"))}(e,this.name))throw Ai.create("invalid custom metric name",{customMetricName:e});this.counters[e]=function M6(n){const e=Math.floor(n);return e<n&&Ua.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}(t??0)}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const r=function Jq(n){return!(0===n.length||n.length>40||Gq.some(t=>n.startsWith(t))||!n.match(qq))}(e),i=function Xq(n){return 0!==n.length&&n.length<=100}(t);if(r&&i)this.customAttributes[e]=t;else{if(!r)throw Ai.create("invalid attribute name",{attributeName:e});if(!i)throw Ai.create("invalid attribute value",{attributeValue:t})}}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))}static createOobTrace(e,t,r,i){const a=yi.getInstance().getUrl();if(!a)return;const l=new yd(e,"_wt_"+a,!0),f=Math.floor(1e3*yi.getInstance().getTimeOrigin());if(l.setStartTime(f),t&&t[0]&&(l.setDuration(Math.floor(1e3*t[0].duration)),l.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),l.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),l.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),r){const b=r.find(x=>"first-paint"===x.name);b&&b.startTime&&l.putMetric("_fp",Math.floor(1e3*b.startTime));const T=r.find(x=>"first-contentful-paint"===x.name);T&&T.startTime&&l.putMetric("_fcp",Math.floor(1e3*T.startTime)),i&&l.putMetric("_fid",Math.floor(1e3*i))}jD(l)}static createUserTimingTrace(e,t){jD(new yd(e,t,!1,t))}}function WU(n,e){const t=e;if(!t||void 0===t.responseStart)return;const r=yi.getInstance().getTimeOrigin(),i=Math.floor(1e3*(t.startTime+r)),a=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,l=Math.floor(1e3*(t.responseEnd-t.startTime));!function w6(n){const e=js.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];t===r||t===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>HU(n,0),0)}({performanceController:n,url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:i,timeToResponseInitiatedUs:a,timeToResponseCompletedUs:l})}function GU(n){!GN()||(setTimeout(()=>function P6(n){const e=yi.getInstance(),t=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout(()=>{yd.createOobTrace(n,t,r),i=void 0},5e3);e.onFirstInputDelay(a=>{i&&(clearTimeout(i),yd.createOobTrace(n,t,r,a))})}else yd.createOobTrace(n,t,r)}(n),0),setTimeout(()=>function R6(n){const e=yi.getInstance(),t=e.getEntriesByType("resource");for(const r of t)WU(n,r);e.setupObserver("resource",r=>WU(n,r))}(n),0),setTimeout(()=>function N6(n){const e=yi.getInstance(),t=e.getEntriesByType("measure");for(const r of t)qU(n,r);e.setupObserver("measure",r=>qU(n,r))}(n),0))}function qU(n,e){const t=e.name;t.substring(0,zN.length)!==zN&&yd.createUserTimingTrace(n,t)}class O6{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(void 0!==e?.dataCollectionEnabled&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==e?.instrumentationEnabled&&(this.instrumentationEnabled=e.instrumentationEnabled),yi.getInstance().requiredApisAvailable()?(0,J.eu)().then(t=>{t&&(function g6(){jU||($D(5500),jU=!0)}(),UU(this).then(()=>GU(this),()=>GU(this)),this.initialized=!0)}).catch(t=>{Ua.info(`Environment doesn't support IndexedDB: ${t}`)}):Ua.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){js.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return js.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){js.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return js.getInstance().dataCollectionEnabled}}function F6(n=(0,kn.getApp)()){return n=(0,J.m9)(n),(0,kn._getProvider)(n,"performance").getImmediate()}const L6=(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),r=n.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==t.name)throw Ai.create("FB not default");if(typeof window>"u")throw Ai.create("no window");!function Hq(n){PU=n}(window);const i=new O6(t,r);return i._init(e),i};!function V6(){(0,kn._registerComponent)(new No.wA("performance",L6,"PUBLIC")),(0,kn.registerVersion)(IU,HN),(0,kn.registerVersion)(IU,HN,"esm2017")}();class XN{constructor(e){return e}}const KU="performance",eO=new d.OlP("angularfire2.performance-instances");function $6(n){return(e,t,r)=>{if(!Ko(t))return null;const i=e.runOutsideAngular(()=>n(r));return new XN(i)}}const j6={provide:class U6{constructor(){return(0,it.vb)(KU)}},deps:[[new d.FiY,eO]]},H6={provide:XN,useFactory:function B6(n,e,t){if(!Ko(t))return null;const r=(0,it.JM)(KU,n,e);return r&&new XN(r)},deps:[[new d.FiY,eO],Ti,d.Lbi]};let z6=(()=>{class n{constructor(){(0,Xr.KN)("angularfire",it.q4.full,"perf")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[H6,j6]}),n})();function W6(n,...e){return{ngModule:z6,providers:[{provide:eO,useFactory:$6(n),multi:!0,deps:[d.R0b,d.Lbi,d.zs3,it.HU,gs,...e]}]}}const G6=(0,it.u3)(F6,!0);var q6=O(4880);class tO{constructor(e){return e}}const ZU="remote-config",nO=new d.OlP("angularfire2.remote-config-instances");function Y6(n){return(e,t)=>{if(!it._J.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new tO(r)}}const Q6={provide:class K6{constructor(){return(0,it.vb)(ZU)}},deps:[[new d.FiY,nO]]},J6={provide:tO,useFactory:function Z6(n,e){if(!it._J.sync())return null;const t=(0,it.JM)(ZU,n,e);return t&&new tO(t)},deps:[[new d.FiY,nO],Ti]};let X6=(()=>{class n{constructor(){(0,Xr.KN)("angularfire",it.q4.full,"rc")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[J6,Q6,{provide:d.ip1,useValue:it._J.async,multi:!0}]}),n})();function e4(n,...e){return{ngModule:X6,providers:[{provide:nO,useFactory:Y6(n),multi:!0,deps:[d.R0b,d.zs3,it.HU,gs,...e]}]}}const t4=(0,it.u3)(q6.sN,!0),YU="firebasestorage.googleapis.com";class Mr extends J.ZR{constructor(e,t,r=0){super(rO(e),`Firebase Storage: ${t} (${rO(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var cr=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(cr||(cr={})),cr))();function rO(n){return"storage/"+n}function sO(n){return new Mr(cr.INVALID_ARGUMENT,n)}function t2(){return new Mr(cr.APP_DELETED,"The Firebase app was deleted.")}class ts{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ts.makeFromUrl(e,t)}catch{return new ts(e,"")}if(""===r.path)return r;throw function d4(n){return new Mr(cr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v($t){$t.path_=decodeURIComponent($t.path)}const T=t.replace(/[.]/g,"\\."),St=[{regex:f,indices:{bucket:1,path:3},postModify:function a($t){"/"===$t.path.charAt($t.path.length-1)&&($t.path_=$t.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===YU?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let $t=0;$t<St.length;$t++){const ln=St[$t],wn=ln.regex.exec(e);if(wn){let ws=wn[ln.indices.path];ws||(ws=""),r=new ts(wn[ln.indices.bucket],ws),ln.postModify(r);break}}if(null==r)throw function c4(n){return new Mr(cr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class _4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function aO(n,e,t,r){if(r<e)throw sO(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw sO(`Invalid value for '${n}'. Expected ${t} or less.`)}var vd=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(vd||(vd={})),vd))();class I4{constructor(e,t,r,i,a,l,f,m,v,b,T,x=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=f,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=b,this.connectionFactory_=T,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,G)=>{this.resolve_=V,this.reject_=G,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function E4(n){return void 0!==n}(m)?a():a(m)}catch(m){l(m)}else if(null!==f){const m=function iO(){return new Mr(cr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();m.serverResponse=f.getErrorText(),l(this.errorCallback_?this.errorCallback_(f,m):m)}else l(i.canceled?this.appDelete_?t2():function XU(){return new Mr(cr.CANCELED,"User canceled the upload/download.")}():function JU(){return new Mr(cr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new zD(!1,null,!0)):this.backoffId_=function y4(n,e,t){let r=1,i=null,a=null,l=!1,f=0;function m(){return 2===f}let v=!1;function b(...Ie){v||(v=!0,e.apply(null,Ie))}function T(Ie){i=setTimeout(()=>{i=null,n(V,m())},Ie)}function x(){a&&clearTimeout(a)}function V(Ie,...bt){if(v)return void x();if(Ie)return x(),void b.call(null,Ie,...bt);if(m()||l)return x(),void b.call(null,Ie,...bt);let St;r<64&&(r*=2),1===f?(f=2,St=0):St=1e3*(r+Math.random()),T(St)}let G=!1;function le(Ie){G||(G=!0,x(),!v&&(null!==i?(Ie||(f=2),clearTimeout(i),T(0)):Ie||(f=1)))}return T(0),a=setTimeout(()=>{l=!0,le(!0)},t),le}((r,i)=>{if(i)return void r(!1,new zD(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const f=a.getErrorCode()===vd.NO_ERROR,m=a.getStatus();if(!f||function i2(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}(m,this.additionalRetryCodes_)&&this.retry){const b=a.getErrorCode()===vd.ABORT;return void r(!1,new zD(!1,null,b))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new zD(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function v4(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class zD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class tp{constructor(e,t){this._service=e,this._location=t instanceof ts?t:ts.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new tp(e,t)}get root(){const e=new ts(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function l2(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function L4(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ts(this._location.bucket,e);return new tp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function m4(n){return new Mr(cr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function b2(n,e){const t=e?.storageBucket;return null==t?null:ts.makeFromBucketSpec(t,n)}class pO{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=YU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ts.makeFromBucketSpec(i,this._host):b2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ts.makeFromBucketSpec(this._url,e):b2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ce.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ce.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new tp(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new _4(t2());{const l=function A4(n,e,t,r,i,a,l=!0){const f=function r2(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),m=n.url+f,v=Object.assign({},n.headers);return function D4(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function b4(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function T4(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function S4(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new I4(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,Ce.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const T2="@firebase/storage",S2="storage";function CK(n=(0,kn.getApp)(),e){n=(0,J.m9)(n);const r=(0,kn._getProvider)(n,S2).getImmediate({identifier:e}),i=(0,J.P0)("storage");return i&&function IK(n,e,t,r={}){!function wK(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,J.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function bK(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new pO(t,r,i,e,kn.SDK_VERSION)}!function TK(){(0,kn._registerComponent)(new No.wA(S2,bK,"PUBLIC").setMultipleInstances(!0)),(0,kn.registerVersion)(T2,"0.11.2",""),(0,kn.registerVersion)(T2,"0.11.2","esm2017")}();class gO{constructor(e){return e}}const A2="storage",mO=new d.OlP("angularfire2.storage-instances");function AK(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new gO(r)}}const MK={provide:class DK{constructor(){return(0,it.vb)(A2)}},deps:[[new d.FiY,mO]]},xK={provide:gO,useFactory:function SK(n,e){const t=(0,it.JM)(A2,n,e);return t&&new gO(t)},deps:[[new d.FiY,mO],Ti]};let RK=(()=>{class n{constructor(){(0,Xr.KN)("angularfire",it.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[xK,MK]}),n})();function PK(n,...e){return{ngModule:RK,providers:[{provide:mO,useFactory:AK(n),multi:!0,deps:[d.R0b,d.zs3,it.HU,gs,[new d.FiY,Aw],[new d.FiY,zu],...e]}]}}const NK=(0,it.u3)(CK,!0);let OK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[BH]}),n.\u0275inj=d.cJS({providers:[mL,yP],imports:[S0,UH,_S,Gi.hO.initializeApp(gP_firebase),mH,MA(()=>gI(gP_firebase)),Cz(()=>ez()),YH(()=>JH()),K3(()=>Z3()),nq(()=>rq()),Aq(()=>Mq()),Lq(()=>Vq()),W6(()=>G6()),e4(()=>t4()),PK(()=>NK())]}),n})();(0,d.G48)(),D0().bootstrapModule(OK).catch(n=>console.error(n))},9751:(At,Ne,O)=>{O.d(Ne,{y:()=>ce});var d=O(2961),U=O(727),k=O(8822),ee=O(9635),Ee=O(2416),me=O(576),oe=O(2806);let ce=(()=>{class K{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const ye=new K;return ye.source=this,ye.operator=Oe,ye}subscribe(Oe,ye,qe){const ve=function H(K){return K&&K instanceof d.Lv||function j(K){return K&&(0,me.m)(K.next)&&(0,me.m)(K.error)&&(0,me.m)(K.complete)}(K)&&(0,U.Nn)(K)}(Oe)?Oe:new d.Hp(Oe,ye,qe);return(0,oe.x)(()=>{const{operator:ie,source:dt}=this;ve.add(ie?ie.call(ve,dt):dt?this._subscribe(ve):this._trySubscribe(ve))}),ve}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(ye){Oe.error(ye)}}forEach(Oe,ye){return new(ye=we(ye))((qe,ve)=>{const ie=new d.Hp({next:dt=>{try{Oe(dt)}catch(gt){ve(gt),ie.unsubscribe()}},error:ve,complete:qe});this.subscribe(ie)})}_subscribe(Oe){var ye;return null===(ye=this.source)||void 0===ye?void 0:ye.subscribe(Oe)}[k.L](){return this}pipe(...Oe){return(0,ee.U)(Oe)(this)}toPromise(Oe){return new(Oe=we(Oe))((ye,qe)=>{let ve;this.subscribe(ie=>ve=ie,ie=>qe(ie),()=>ye(ve))})}}return K.create=ke=>new K(ke),K})();function we(K){var ke;return null!==(ke=K??Ee.v.Promise)&&void 0!==ke?ke:Promise}},7579:(At,Ne,O)=>{O.d(Ne,{x:()=>oe});var d=O(9751),U=O(727);const ee=(0,O(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ee=O(8737),me=O(2806);let oe=(()=>{class we extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const K=new ce(this,this);return K.operator=H,K}_throwIfClosed(){if(this.closed)throw new ee}next(H){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(H)}})}error(H){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:K}=this;for(;K.length;)K.shift().error(H)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:K,isStopped:ke,observers:Oe}=this;return K||ke?U.Lc:(this.currentObservers=null,Oe.push(H),new U.w0(()=>{this.currentObservers=null,(0,Ee.P)(Oe,H)}))}_checkFinalizedStatuses(H){const{hasError:K,thrownError:ke,isStopped:Oe}=this;K?H.error(ke):Oe&&H.complete()}asObservable(){const H=new d.y;return H.source=this,H}}return we.create=(j,H)=>new ce(j,H),we})();class ce extends oe{constructor(j,H){super(),this.destination=j,this.source=H}next(j){var H,K;null===(K=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===K||K.call(H,j)}error(j){var H,K;null===(K=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===K||K.call(H,j)}complete(){var j,H;null===(H=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===H||H.call(j)}_subscribe(j){var H,K;return null!==(K=null===(H=this.source)||void 0===H?void 0:H.subscribe(j))&&void 0!==K?K:U.Lc}}},2961:(At,Ne,O)=>{O.d(Ne,{Hp:()=>qe,Lv:()=>K});var d=O(576),U=O(727),k=O(2416),ee=O(7849);function Ee(){}const me=we("C",void 0,void 0);function we(Me,be,De){return{kind:Me,value:be,error:De}}var j=O(3410),H=O(2806);class K extends U.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,U.Nn)(be)&&be.add(this)):this.destination=gt}static create(be,De,je){return new qe(be,De,je)}next(be){this.isStopped?dt(function ce(Me){return we("N",Me,void 0)}(be),this):this._next(be)}error(be){this.isStopped?dt(function oe(Me){return we("E",void 0,Me)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?dt(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ke=Function.prototype.bind;function Oe(Me,be){return ke.call(Me,be)}class ye{constructor(be){this.partialObserver=be}next(be){const{partialObserver:De}=this;if(De.next)try{De.next(be)}catch(je){ve(je)}}error(be){const{partialObserver:De}=this;if(De.error)try{De.error(be)}catch(je){ve(je)}else ve(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(De){ve(De)}}}class qe extends K{constructor(be,De,je){let We;if(super(),(0,d.m)(be)||!be)We={next:be??void 0,error:De??void 0,complete:je??void 0};else{let z;this&&k.v.useDeprecatedNextContext?(z=Object.create(be),z.unsubscribe=()=>this.unsubscribe(),We={next:be.next&&Oe(be.next,z),error:be.error&&Oe(be.error,z),complete:be.complete&&Oe(be.complete,z)}):We=be}this.destination=new ye(We)}}function ve(Me){k.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Me):(0,ee.h)(Me)}function dt(Me,be){const{onStoppedNotification:De}=k.v;De&&j.z.setTimeout(()=>De(Me,be))}const gt={closed:!0,next:Ee,error:function ie(Me){throw Me},complete:Ee}},727:(At,Ne,O)=>{O.d(Ne,{Lc:()=>me,w0:()=>Ee,Nn:()=>oe});var d=O(576);const k=(0,O(3888).d)(we=>function(H){we(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((K,ke)=>`${ke+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ee=O(8737);class Ee{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Oe of H)Oe.remove(this);else H.remove(this);const{initialTeardown:K}=this;if((0,d.m)(K))try{K()}catch(Oe){j=Oe instanceof k?Oe.errors:[Oe]}const{_finalizers:ke}=this;if(ke){this._finalizers=null;for(const Oe of ke)try{ce(Oe)}catch(ye){j=j??[],ye instanceof k?j=[...j,...ye.errors]:j.push(ye)}}if(j)throw new k(j)}}add(j){var H;if(j&&j!==this)if(this.closed)ce(j);else{if(j instanceof Ee){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(j)}}_hasParent(j){const{_parentage:H}=this;return H===j||Array.isArray(H)&&H.includes(j)}_addParent(j){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(j),H):H?[H,j]:j}_removeParent(j){const{_parentage:H}=this;H===j?this._parentage=null:Array.isArray(H)&&(0,ee.P)(H,j)}remove(j){const{_finalizers:H}=this;H&&(0,ee.P)(H,j),j instanceof Ee&&j._removeParent(this)}}Ee.EMPTY=(()=>{const we=new Ee;return we.closed=!0,we})();const me=Ee.EMPTY;function oe(we){return we instanceof Ee||we&&"closed"in we&&(0,d.m)(we.remove)&&(0,d.m)(we.add)&&(0,d.m)(we.unsubscribe)}function ce(we){(0,d.m)(we)?we():we.unsubscribe()}},2416:(At,Ne,O)=>{O.d(Ne,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(At,Ne,O)=>{O.d(Ne,{E:()=>U});const U=new(O(9751).y)(Ee=>Ee.complete())},8996:(At,Ne,O)=>{O.d(Ne,{D:()=>be});var d=O(8421),U=O(5363),k=O(9468),me=O(9751),ce=O(2202),we=O(576),j=O(9672);function K(De,je){if(!De)throw new Error("Iterable cannot be null");return new me.y(We=>{(0,j.f)(We,je,()=>{const z=De[Symbol.asyncIterator]();(0,j.f)(We,je,()=>{z.next().then(fe=>{fe.done?We.complete():We.next(fe.value)})},0,!0)})})}var ke=O(3670),Oe=O(8239),ye=O(1144),qe=O(6495),ve=O(2206),ie=O(4532),dt=O(3260);function be(De,je){return je?function Me(De,je){if(null!=De){if((0,ke.c)(De))return function ee(De,je){return(0,d.Xf)(De).pipe((0,k.R)(je),(0,U.Q)(je))}(De,je);if((0,ye.z)(De))return function oe(De,je){return new me.y(We=>{let z=0;return je.schedule(function(){z===De.length?We.complete():(We.next(De[z++]),We.closed||this.schedule())})})}(De,je);if((0,Oe.t)(De))return function Ee(De,je){return(0,d.Xf)(De).pipe((0,k.R)(je),(0,U.Q)(je))}(De,je);if((0,ve.D)(De))return K(De,je);if((0,qe.T)(De))return function H(De,je){return new me.y(We=>{let z;return(0,j.f)(We,je,()=>{z=De[ce.h](),(0,j.f)(We,je,()=>{let fe,Ge;try{({value:fe,done:Ge}=z.next())}catch(Ye){return void We.error(Ye)}Ge?We.complete():We.next(fe)},0,!0)}),()=>(0,we.m)(z?.return)&&z.return()})}(De,je);if((0,dt.L)(De))return function gt(De,je){return K((0,dt.Q)(De),je)}(De,je)}throw(0,ie.z)(De)}(De,je):(0,d.Xf)(De)}},8421:(At,Ne,O)=>{O.d(Ne,{Xf:()=>ke});var d=O(655),U=O(1144),k=O(8239),ee=O(9751),Ee=O(3670),me=O(2206),oe=O(4532),ce=O(6495),we=O(3260),j=O(576),H=O(7849),K=O(8822);function ke(Me){if(Me instanceof ee.y)return Me;if(null!=Me){if((0,Ee.c)(Me))return function Oe(Me){return new ee.y(be=>{const De=Me[K.L]();if((0,j.m)(De.subscribe))return De.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,U.z)(Me))return function ye(Me){return new ee.y(be=>{for(let De=0;De<Me.length&&!be.closed;De++)be.next(Me[De]);be.complete()})}(Me);if((0,k.t)(Me))return function qe(Me){return new ee.y(be=>{Me.then(De=>{be.closed||(be.next(De),be.complete())},De=>be.error(De)).then(null,H.h)})}(Me);if((0,me.D)(Me))return ie(Me);if((0,ce.T)(Me))return function ve(Me){return new ee.y(be=>{for(const De of Me)if(be.next(De),be.closed)return;be.complete()})}(Me);if((0,we.L)(Me))return function dt(Me){return ie((0,we.Q)(Me))}(Me)}throw(0,oe.z)(Me)}function ie(Me){return new ee.y(be=>{(function gt(Me,be){var De,je,We,z;return(0,d.mG)(this,void 0,void 0,function*(){try{for(De=(0,d.KL)(Me);!(je=yield De.next()).done;)if(be.next(je.value),be.closed)return}catch(fe){We={error:fe}}finally{try{je&&!je.done&&(z=De.return)&&(yield z.call(De))}finally{if(We)throw We.error}}be.complete()})})(Me,be).catch(De=>be.error(De))})}},6451:(At,Ne,O)=>{O.d(Ne,{T:()=>me});var d=O(8189),U=O(8421),k=O(515),ee=O(7669),Ee=O(8996);function me(...oe){const ce=(0,ee.yG)(oe),we=(0,ee._6)(oe,1/0),j=oe;return j.length?1===j.length?(0,U.Xf)(j[0]):(0,d.J)(we)((0,Ee.D)(j,ce)):k.E}},5403:(At,Ne,O)=>{O.d(Ne,{Q:()=>k,x:()=>U});var d=O(2961);function U(ee,Ee,me,oe,ce){return new k(ee,Ee,me,oe,ce)}class k extends d.Lv{constructor(Ee,me,oe,ce,we,j){super(Ee),this.onFinalize=we,this.shouldUnsubscribe=j,this._next=me?function(H){try{me(H)}catch(K){Ee.error(K)}}:super._next,this._error=ce?function(H){try{ce(H)}catch(K){Ee.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=oe?function(){try{oe()}catch(H){Ee.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ee;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(Ee=this.onFinalize)||void 0===Ee||Ee.call(this))}}}},4004:(At,Ne,O)=>{O.d(Ne,{U:()=>k});var d=O(4482),U=O(5403);function k(ee,Ee){return(0,d.e)((me,oe)=>{let ce=0;me.subscribe((0,U.x)(oe,we=>{oe.next(ee.call(Ee,we,ce++))}))})}},8189:(At,Ne,O)=>{O.d(Ne,{J:()=>k});var d=O(5577),U=O(4671);function k(ee=1/0){return(0,d.z)(U.y,ee)}},5577:(At,Ne,O)=>{O.d(Ne,{z:()=>ce});var d=O(4004),U=O(8421),k=O(4482),ee=O(9672),Ee=O(5403),oe=O(576);function ce(we,j,H=1/0){return(0,oe.m)(j)?ce((K,ke)=>(0,d.U)((Oe,ye)=>j(K,Oe,ke,ye))((0,U.Xf)(we(K,ke))),H):("number"==typeof j&&(H=j),(0,k.e)((K,ke)=>function me(we,j,H,K,ke,Oe,ye,qe){const ve=[];let ie=0,dt=0,gt=!1;const Me=()=>{gt&&!ve.length&&!ie&&j.complete()},be=je=>ie<K?De(je):ve.push(je),De=je=>{Oe&&j.next(je),ie++;let We=!1;(0,U.Xf)(H(je,dt++)).subscribe((0,Ee.x)(j,z=>{ke?.(z),Oe?be(z):j.next(z)},()=>{We=!0},void 0,()=>{if(We)try{for(ie--;ve.length&&ie<K;){const z=ve.shift();ye?(0,ee.f)(j,ye,()=>De(z)):De(z)}Me()}catch(z){j.error(z)}}))};return we.subscribe((0,Ee.x)(j,be,()=>{gt=!0,Me()})),()=>{qe?.()}}(K,ke,we,H)))}},5363:(At,Ne,O)=>{O.d(Ne,{Q:()=>ee});var d=O(9672),U=O(4482),k=O(5403);function ee(Ee,me=0){return(0,U.e)((oe,ce)=>{oe.subscribe((0,k.x)(ce,we=>(0,d.f)(ce,Ee,()=>ce.next(we),me),()=>(0,d.f)(ce,Ee,()=>ce.complete(),me),we=>(0,d.f)(ce,Ee,()=>ce.error(we),me)))})}},3099:(At,Ne,O)=>{O.d(Ne,{B:()=>Ee});var d=O(8421),U=O(7579),k=O(2961),ee=O(4482);function Ee(oe={}){const{connector:ce=(()=>new U.x),resetOnError:we=!0,resetOnComplete:j=!0,resetOnRefCountZero:H=!0}=oe;return K=>{let ke,Oe,ye,qe=0,ve=!1,ie=!1;const dt=()=>{Oe?.unsubscribe(),Oe=void 0},gt=()=>{dt(),ke=ye=void 0,ve=ie=!1},Me=()=>{const be=ke;gt(),be?.unsubscribe()};return(0,ee.e)((be,De)=>{qe++,!ie&&!ve&&dt();const je=ye=ye??ce();De.add(()=>{qe--,0===qe&&!ie&&!ve&&(Oe=me(Me,H))}),je.subscribe(De),!ke&&qe>0&&(ke=new k.Hp({next:We=>je.next(We),error:We=>{ie=!0,dt(),Oe=me(gt,we,We),je.error(We)},complete:()=>{ve=!0,dt(),Oe=me(gt,j),je.complete()}}),(0,d.Xf)(be).subscribe(ke))})(K)}}function me(oe,ce,...we){if(!0===ce)return void oe();if(!1===ce)return;const j=new k.Hp({next:()=>{j.unsubscribe(),oe()}});return ce(...we).subscribe(j)}},9468:(At,Ne,O)=>{O.d(Ne,{R:()=>U});var d=O(4482);function U(k,ee=0){return(0,d.e)((Ee,me)=>{me.add(k.schedule(()=>Ee.subscribe(me),ee))})}},8505:(At,Ne,O)=>{O.d(Ne,{b:()=>Ee});var d=O(576),U=O(4482),k=O(5403),ee=O(4671);function Ee(me,oe,ce){const we=(0,d.m)(me)||oe||ce?{next:me,error:oe,complete:ce}:me;return we?(0,U.e)((j,H)=>{var K;null===(K=we.subscribe)||void 0===K||K.call(we);let ke=!0;j.subscribe((0,k.x)(H,Oe=>{var ye;null===(ye=we.next)||void 0===ye||ye.call(we,Oe),H.next(Oe)},()=>{var Oe;ke=!1,null===(Oe=we.complete)||void 0===Oe||Oe.call(we),H.complete()},Oe=>{var ye;ke=!1,null===(ye=we.error)||void 0===ye||ye.call(we,Oe),H.error(Oe)},()=>{var Oe,ye;ke&&(null===(Oe=we.unsubscribe)||void 0===Oe||Oe.call(we)),null===(ye=we.finalize)||void 0===ye||ye.call(we)}))}):ee.y}},4408:(At,Ne,O)=>{O.d(Ne,{o:()=>Ee});var d=O(727);class U extends d.w0{constructor(oe,ce){super()}schedule(oe,ce=0){return this}}const k={setInterval(me,oe,...ce){const{delegate:we}=k;return we?.setInterval?we.setInterval(me,oe,...ce):setInterval(me,oe,...ce)},clearInterval(me){const{delegate:oe}=k;return(oe?.clearInterval||clearInterval)(me)},delegate:void 0};var ee=O(8737);class Ee extends U{constructor(oe,ce){super(oe,ce),this.scheduler=oe,this.work=ce,this.pending=!1}schedule(oe,ce=0){var we;if(this.closed)return this;this.state=oe;const j=this.id,H=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(H,j,ce)),this.pending=!0,this.delay=ce,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(H,this.id,ce),this}requestAsyncId(oe,ce,we=0){return k.setInterval(oe.flush.bind(oe,this),we)}recycleAsyncId(oe,ce,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return ce;null!=ce&&k.clearInterval(ce)}execute(oe,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(oe,ce);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,ce){let j,we=!1;try{this.work(oe)}catch(H){we=!0,j=H||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:oe,scheduler:ce}=this,{actions:we}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ee.P)(we,this),null!=oe&&(this.id=this.recycleAsyncId(ce,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(At,Ne,O)=>{O.d(Ne,{v:()=>k});var d=O(6063);class U{constructor(Ee,me=U.now){this.schedulerActionCtor=Ee,this.now=me}schedule(Ee,me=0,oe){return new this.schedulerActionCtor(this,Ee).schedule(oe,me)}}U.now=d.l.now;class k extends U{constructor(Ee,me=U.now){super(Ee,me),this.actions=[],this._active=!1}flush(Ee){const{actions:me}=this;if(this._active)return void me.push(Ee);let oe;this._active=!0;do{if(oe=Ee.execute(Ee.state,Ee.delay))break}while(Ee=me.shift());if(this._active=!1,oe){for(;Ee=me.shift();)Ee.unsubscribe();throw oe}}}},4986:(At,Ne,O)=>{O.d(Ne,{z:()=>k});var d=O(4408);const k=new(O(7565).v)(d.o)},6063:(At,Ne,O)=>{O.d(Ne,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(At,Ne,O)=>{O.d(Ne,{z:()=>d});const d={setTimeout(U,k,...ee){const{delegate:Ee}=d;return Ee?.setTimeout?Ee.setTimeout(U,k,...ee):setTimeout(U,k,...ee)},clearTimeout(U){const{delegate:k}=d;return(k?.clearTimeout||clearTimeout)(U)},delegate:void 0}},2202:(At,Ne,O)=>{O.d(Ne,{h:()=>U});const U=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(At,Ne,O)=>{O.d(Ne,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(At,Ne,O)=>{O.d(Ne,{_6:()=>me,jO:()=>ee,yG:()=>Ee});var d=O(576);function k(oe){return oe[oe.length-1]}function ee(oe){return(0,d.m)(k(oe))?oe.pop():void 0}function Ee(oe){return function U(oe){return oe&&(0,d.m)(oe.schedule)}(k(oe))?oe.pop():void 0}function me(oe,ce){return"number"==typeof k(oe)?oe.pop():ce}},8737:(At,Ne,O)=>{function d(U,k){if(U){const ee=U.indexOf(k);0<=ee&&U.splice(ee,1)}}O.d(Ne,{P:()=>d})},3888:(At,Ne,O)=>{function d(U){const ee=U(Ee=>{Error.call(Ee),Ee.stack=(new Error).stack});return ee.prototype=Object.create(Error.prototype),ee.prototype.constructor=ee,ee}O.d(Ne,{d:()=>d})},2806:(At,Ne,O)=>{O.d(Ne,{O:()=>ee,x:()=>k});var d=O(2416);let U=null;function k(Ee){if(d.v.useDeprecatedSynchronousErrorHandling){const me=!U;if(me&&(U={errorThrown:!1,error:null}),Ee(),me){const{errorThrown:oe,error:ce}=U;if(U=null,oe)throw ce}}else Ee()}function ee(Ee){d.v.useDeprecatedSynchronousErrorHandling&&U&&(U.errorThrown=!0,U.error=Ee)}},9672:(At,Ne,O)=>{function d(U,k,ee,Ee=0,me=!1){const oe=k.schedule(function(){ee(),me?U.add(this.schedule(null,Ee)):this.unsubscribe()},Ee);if(U.add(oe),!me)return oe}O.d(Ne,{f:()=>d})},4671:(At,Ne,O)=>{function d(U){return U}O.d(Ne,{y:()=>d})},1144:(At,Ne,O)=>{O.d(Ne,{z:()=>d});const d=U=>U&&"number"==typeof U.length&&"function"!=typeof U},2206:(At,Ne,O)=>{O.d(Ne,{D:()=>U});var d=O(576);function U(k){return Symbol.asyncIterator&&(0,d.m)(k?.[Symbol.asyncIterator])}},576:(At,Ne,O)=>{function d(U){return"function"==typeof U}O.d(Ne,{m:()=>d})},3670:(At,Ne,O)=>{O.d(Ne,{c:()=>k});var d=O(8822),U=O(576);function k(ee){return(0,U.m)(ee[d.L])}},6495:(At,Ne,O)=>{O.d(Ne,{T:()=>k});var d=O(2202),U=O(576);function k(ee){return(0,U.m)(ee?.[d.h])}},8239:(At,Ne,O)=>{O.d(Ne,{t:()=>U});var d=O(576);function U(k){return(0,d.m)(k?.then)}},3260:(At,Ne,O)=>{O.d(Ne,{L:()=>ee,Q:()=>k});var d=O(655),U=O(576);function k(Ee){return(0,d.FC)(this,arguments,function*(){const oe=Ee.getReader();try{for(;;){const{value:ce,done:we}=yield(0,d.qq)(oe.read());if(we)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(ce)}}finally{oe.releaseLock()}})}function ee(Ee){return(0,U.m)(Ee?.getReader)}},4482:(At,Ne,O)=>{O.d(Ne,{A:()=>U,e:()=>k});var d=O(576);function U(ee){return(0,d.m)(ee?.lift)}function k(ee){return Ee=>{if(U(Ee))return Ee.lift(function(me){try{return ee(me,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(At,Ne,O)=>{O.d(Ne,{U:()=>k,z:()=>U});var d=O(4671);function U(...ee){return k(ee)}function k(ee){return 0===ee.length?d.y:1===ee.length?ee[0]:function(me){return ee.reduce((oe,ce)=>ce(oe),me)}}},7849:(At,Ne,O)=>{O.d(Ne,{h:()=>k});var d=O(2416),U=O(3410);function k(ee){U.z.setTimeout(()=>{const{onUnhandledError:Ee}=d.v;if(!Ee)throw ee;Ee(ee)})}},4532:(At,Ne,O)=>{function d(U){return new TypeError(`You provided ${null!==U&&"object"==typeof U?"an invalid object":`'${U}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Ne,{z:()=>d})},655:(At,Ne,O)=>{function ee(se,pe){var _e={};for(var Pe in se)Object.prototype.hasOwnProperty.call(se,Pe)&&pe.indexOf(Pe)<0&&(_e[Pe]=se[Pe]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var Ae=0;for(Pe=Object.getOwnPropertySymbols(se);Ae<Pe.length;Ae++)pe.indexOf(Pe[Ae])<0&&Object.prototype.propertyIsEnumerable.call(se,Pe[Ae])&&(_e[Pe[Ae]]=se[Pe[Ae]])}return _e}function K(se,pe,_e,Pe){return new(_e||(_e=Promise))(function(Te,et){function Et(Ft){try{tt(Pe.next(Ft))}catch(Fe){et(Fe)}}function kt(Ft){try{tt(Pe.throw(Ft))}catch(Fe){et(Fe)}}function tt(Ft){Ft.done?Te(Ft.value):function Ae(Te){return Te instanceof _e?Te:new _e(function(et){et(Te)})}(Ft.value).then(Et,kt)}tt((Pe=Pe.apply(se,pe||[])).next())})}function Me(se){return this instanceof Me?(this.v=se,this):new Me(se)}function be(se,pe,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,Pe=_e.apply(se,pe||[]),Te=[];return Ae={},et("next"),et("throw"),et("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae;function et(Ke){Pe[Ke]&&(Ae[Ke]=function(mt){return new Promise(function(jt,en){Te.push([Ke,mt,jt,en])>1||Et(Ke,mt)})})}function Et(Ke,mt){try{!function kt(Ke){Ke.value instanceof Me?Promise.resolve(Ke.value.v).then(tt,Ft):Fe(Te[0][2],Ke)}(Pe[Ke](mt))}catch(jt){Fe(Te[0][3],jt)}}function tt(Ke){Et("next",Ke)}function Ft(Ke){Et("throw",Ke)}function Fe(Ke,mt){Ke(mt),Te.shift(),Te.length&&Et(Te[0][0],Te[0][1])}}function je(se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,pe=se[Symbol.asyncIterator];return pe?pe.call(se):(se=function qe(se){var pe="function"==typeof Symbol&&Symbol.iterator,_e=pe&&se[pe],Pe=0;if(_e)return _e.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&Pe>=se.length&&(se=void 0),{value:se&&se[Pe++],done:!se}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(se),_e={},Pe("next"),Pe("throw"),Pe("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function Pe(Te){_e[Te]=se[Te]&&function(et){return new Promise(function(Et,kt){!function Ae(Te,et,Et,kt){Promise.resolve(kt).then(function(tt){Te({value:tt,done:Et})},et)}(Et,kt,(et=se[Te](et)).done,et.value)})}}}O.d(Ne,{FC:()=>be,KL:()=>je,_T:()=>ee,mG:()=>K,qq:()=>Me})},4650:(At,Ne,O)=>{O.d(Ne,{$8M:()=>Dp,$Z:()=>Fy,AFp:()=>AE,AaK:()=>ce,AsE:()=>Ic,CHM:()=>vl,CRH:()=>pE,CZH:()=>pi,CqO:()=>fI,D6c:()=>$r,EJc:()=>Wb,EpF:()=>dI,F4k:()=>hI,FYo:()=>uC,FiY:()=>vo,G48:()=>el,GfV:()=>dC,Gpc:()=>H,JOm:()=>us,KtG:()=>Md,LFG:()=>ar,LSH:()=>ls,Lbi:()=>RE,Lck:()=>hb,MMx:()=>kr,NdJ:()=>pv,OlP:()=>Un,Oqu:()=>bv,PXZ:()=>ym,Q6J:()=>fv,QGY:()=>Vh,QP$:()=>X,Qsj:()=>AS,R0b:()=>Hn,RDi:()=>sS,Rgc:()=>rf,SBq:()=>Ir,Sil:()=>WM,Suo:()=>Sb,TTD:()=>za,TgZ:()=>Cc,VKq:()=>tE,X6Q:()=>XM,XFs:()=>Z,Xpm:()=>Se,Xts:()=>Ey,Y36:()=>Oi,YKP:()=>Xg,YNc:()=>Lh,Yjl:()=>N,Yz7:()=>tt,Z0I:()=>mt,ZZ4:()=>Tm,_Bn:()=>Yv,_UZ:()=>Gi,_Vd:()=>oc,_c5:()=>ax,_uU:()=>xI,aQg:()=>Br,c2e:()=>zM,cJS:()=>Fe,cg1:()=>UI,dDg:()=>Zb,dqk:()=>Kt,eFA:()=>Qb,ekj:()=>Ev,eoX:()=>rn,f3M:()=>hu,g9A:()=>Hb,h0i:()=>Wu,hGG:()=>ux,hij:()=>Ng,iGM:()=>Lc,ifc:()=>ft,ip1:()=>mf,jDz:()=>Zh,kL8:()=>nM,lG2:()=>B,lqb:()=>zi,lri:()=>ZM,n5z:()=>Al,oAB:()=>an,oxw:()=>gI,q4F:()=>Dy,qLn:()=>xs,qOj:()=>av,qZA:()=>it,rWj:()=>Kb,sBO:()=>tx,sIi:()=>va,s_b:()=>af,soG:()=>gm,tb:()=>zb,tp0:()=>pu,uIk:()=>cv,vHH:()=>ye,vpe:()=>Ki,wAp:()=>Qt,xp6:()=>yC,z2F:()=>ue,zSh:()=>Gr,zs3:()=>Ps});var d=O(7579),U=O(727),k=O(9751),ee=O(6451),Ee=O(3099);function me(s){for(let o in s)if(s[o]===me)return o;throw Error("Could not find renamed property on target object.")}function oe(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function ce(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ce).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function we(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const j=me({__forward_ref__:me});function H(s){return s.__forward_ref__=H,s.toString=function(){return ce(this())},s}function K(s){return ke(s)?s():s}function ke(s){return"function"==typeof s&&s.hasOwnProperty(j)&&s.__forward_ref__===H}class ye extends Error{constructor(o,u){super(function qe(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function ve(s){return"string"==typeof s?s:null==s?"":String(s)}function be(s,o){throw new ye(-201,!1)}function Ae(s,o){null==s&&function Te(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function tt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Fe(s){return{providers:s.providers||[],imports:s.imports||[]}}function Ke(s){return jt(s,An)||jt(s,Wn)}function mt(s){return null!==Ke(s)}function jt(s,o){return s.hasOwnProperty(o)?s[o]:null}function Rn(s){return s&&(s.hasOwnProperty(Qn)||s.hasOwnProperty(at))?s[Qn]:null}const An=me({\u0275prov:me}),Qn=me({\u0275inj:me}),Wn=me({ngInjectableDef:me}),at=me({ngInjectorDef:me});var Z=(()=>((Z=Z||{})[Z.Default=0]="Default",Z[Z.Host=1]="Host",Z[Z.Self=2]="Self",Z[Z.SkipSelf=4]="SkipSelf",Z[Z.Optional=8]="Optional",Z))();let xe;function _t(s){const o=xe;return xe=s,o}function Jt(s,o,u){const c=Ke(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&Z.Optional?null:void 0!==o?o:void be(ce(s))}function tn(s){return{toString:s}.toString()}var Xt=(()=>((Xt=Xt||{})[Xt.OnPush=0]="OnPush",Xt[Xt.Default=1]="Default",Xt))(),ft=(()=>{return(s=ft||(ft={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ft;var s})();const Kt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Mn={},Lt=[],On=me({\u0275cmp:me}),Nt=me({\u0275dir:me}),ir=me({\u0275pipe:me}),sn=me({\u0275mod:me}),Zn=me({\u0275fac:me}),vn=me({__NG_ELEMENT_ID__:me});let st=0;function Se(s){return tn(()=>{const u=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Xt.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Lt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||ft.Emulated,id:"c"+st++,styles:s.styles||Lt,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,y=s.features;return h.inputs=$(s.inputs,c),h.outputs=$(s.outputs),y&&y.forEach(C=>C(h)),h.directiveDefs=g?()=>("function"==typeof g?g():g).map(Pt).filter(on):null,h.pipeDefs=g?()=>("function"==typeof g?g():g).map(L).filter(on):null,h})}function Pt(s){return S(s)||A(s)}function on(s){return null!==s}function an(s){return tn(()=>({type:s.type,bootstrap:s.bootstrap||Lt,declarations:s.declarations||Lt,imports:s.imports||Lt,exports:s.exports||Lt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function $(s,o){if(null==s)return Mn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),u[h]=c,o&&(o[h]=g)}return u}const B=Se;function N(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function S(s){return s[On]||null}function A(s){return s[Nt]||null}function L(s){return s[ir]||null}function X(s){const o=S(s)||A(s)||L(s);return null!==o&&o.standalone}function de(s,o){const u=s[sn]||null;if(!u&&!0===o)throw new Error(`Type ${ce(s)} does not have '\u0275mod' property.`);return u}function zr(s){return Array.isArray(s)&&"object"==typeof s[1]}function vi(s){return Array.isArray(s)&&!0===s[1]}function rs(s){return 0!=(8&s.flags)}function Ha(s){return 2==(2&s.flags)}function Wo(s){return 1==(1&s.flags)}function Ui(s){return null!==s.template}function gl(s){return 0!=(256&s[2])}function Lr(s,o){return s.hasOwnProperty(Zn)?s[Zn]:null}class __{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function za(){return hp}function hp(s){return s.type.prototype.ngOnChanges&&(s.setInput=wd),Wa}function Wa(){const s=y_(this),o=s?.current;if(o){const u=s.previous;if(u===Mn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function wd(s,o,u,c){const h=y_(s)||function v_(s,o){return s[_l]=o}(s,{previous:Mn,current:null}),g=h.current||(h.current={}),y=h.previous,C=this.declaredInputs[u],I=y[C];g[C]=new __(I&&I.currentValue,o,y===Mn),s[c]=o}za.ngInherit=!0;const _l="__ngSimpleChanges__";function y_(s){return s[_l]||null}function Xn(s){for(;Array.isArray(s);)s=s[0];return s}function qa(s,o){return Xn(o[s])}function wi(s,o){return Xn(o[s.index])}function Ws(s,o){return s.data[o]}function xr(s,o){const u=o[s];return zr(u)?u:u[0]}function lo(s){return 64==(64&s[2])}function wr(s,o){return null==o?null:s[o]}function Zo(s){s[18]=0}function Td(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const Yt={lFrame:T_(null),bindingsEnabled:!0};function yl(){return Yt.bindingsEnabled}function Le(){return Yt.lFrame.lView}function Tn(){return Yt.lFrame.tView}function vl(s){return Yt.lFrame.contextLView=s,s[8]}function Md(s){return Yt.lFrame.contextLView=null,s}function mr(){let s=Ya();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ya(){return Yt.lFrame.currentTNode}function Bi(s,o){const u=Yt.lFrame;u.currentTNode=s,u.isParent=o}function Qa(){return Yt.lFrame.isParent}function ho(){return Yt.lFrame.bindingIndex++}function oi(s){const o=Yt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function y0(s,o){const u=Yt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Nd(o)}function Nd(s){Yt.lFrame.currentDirectiveIndex=s}function Xa(){return Yt.lFrame.currentQueryIndex}function Is(s){Yt.lFrame.currentQueryIndex=s}function v0(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Od(s,o,u){if(u&Z.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||u&Z.Host||(h=v0(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;o=h,s=g}const c=Yt.lFrame=eu();return c.currentTNode=o,c.lView=s,!0}function wl(s){const o=eu(),u=s[1];Yt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function eu(){const s=Yt.lFrame,o=null===s?null:s.child;return null===o?T_(s):o}function T_(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function D_(){const s=Yt.lFrame;return Yt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Cl=D_;function Il(){const s=D_();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ai(){return Yt.lFrame.selectedIndex}function bs(s){Yt.lFrame.selectedIndex=s}function sr(){const s=Yt.lFrame;return Ws(s.tView,s.selectedIndex)}function tu(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:I,ngAfterViewChecked:D,ngOnDestroy:R}=g;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),C&&((s.contentHooks||(s.contentHooks=[])).push(u,C),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,C)),I&&(s.viewHooks||(s.viewHooks=[])).push(-u,I),D&&((s.viewHooks||(s.viewHooks=[])).push(u,D),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,D)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function bl(s,o,u){A_(s,o,3,u)}function Yo(s,o,u,c){(3&s[2])===u&&A_(s,o,u,c)}function vp(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function A_(s,o,u,c){const g=c??-1,y=o.length-1;let C=0;for(let I=void 0!==c?65535&s[18]:0;I<y;I++)if("number"==typeof o[I+1]){if(C=o[I],null!=c&&C>=c)break}else o[I]<0&&(s[18]+=65536),(C<g||-1==g)&&(M_(s,u,o,I),s[18]=(4294901760&s[18])+I+2),I++}function M_(s,o,u,c){const h=u[c]<0,g=u[c+1],C=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(C)}finally{}}}else try{g.call(C)}finally{}}class Tl{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Fd(s,o,u){let c=0;for(;c<u.length;){const h=u[c];if("number"==typeof h){if(0!==h)break;c++;const g=u[c++],y=u[c++],C=u[c++];s.setAttribute(o,y,C,g)}else{const g=h,y=u[++c];Cp(g)?s.setProperty(o,g,y):s.setAttribute(o,g,y),c++}}return c}function ru(s){return 3===s||4===s||6===s}function Cp(s){return 64===s.charCodeAt(0)}function iu(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||P_(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function P_(s,o,u,c,h){let g=0,y=s.length;if(-1===o)y=-1;else for(;g<s.length;){const C=s[g++];if("number"==typeof C){if(C===o){y=-1;break}if(C>o){y=g-1;break}}}for(;g<s.length;){const C=s[g];if("number"==typeof C)break;if(C===u){if(null===c)return void(null!==h&&(s[g+1]=h));if(c===s[g+1])return void(s[g+2]=h)}g++,null!==c&&g++,null!==h&&g++}-1!==y&&(s.splice(y,0,o),g=y+1),s.splice(g++,0,u),null!==c&&s.splice(g++,0,c),null!==h&&s.splice(g++,0,h)}function N_(s){return-1!==s}function su(s){return 32767&s}function $i(s,o){let u=function b0(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Ri=!0;function fo(s){const o=Ri;return Ri=s,o}let Ip=0;const Pi={};function Gs(s,o){const u=Vd(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,ou(c.data,s),ou(o,null),ou(c.blueprint,null));const h=po(s,o),g=s.injectorIndex;if(N_(h)){const y=su(h),C=$i(h,o),I=C[1].data;for(let D=0;D<8;D++)o[g+D]=C[y+D]|I[y+D]}return o[g+8]=h,g}function ou(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Vd(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function po(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){if(c=V_(h),null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function au(s,o,u){!function bp(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(vn)&&(c=u[vn]),null==c&&(c=u[vn]=Ip++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function Ud(s,o,u){if(u&Z.Optional||void 0!==s)return s;be()}function k_(s,o,u,c){if(u&Z.Optional&&void 0===c&&(c=null),0==(u&(Z.Self|Z.Host))){const h=s[9],g=_t(void 0);try{return h?h.get(o,c,u&Z.Optional):Jt(o,c,u&Z.Optional)}finally{_t(g)}}return Ud(c,0,u)}function Bd(s,o,u,c=Z.Default,h){if(null!==s){if(1024&o[2]){const y=function lu(s,o,u,c,h){let g=s,y=o;for(;null!==g&&null!==y&&1024&y[2]&&!(256&y[2]);){const C=uu(g,y,u,c|Z.Self,Pi);if(C!==Pi)return C;let I=g.parent;if(!I){const D=y[21];if(D){const R=D.get(u,Pi,c);if(R!==Pi)return R}I=V_(y),y=y[15]}g=I}return h}(s,o,u,c,Pi);if(y!==Pi)return y}const g=uu(s,o,u,c,Pi);if(g!==Pi)return g}return k_(o,u,c,h)}function uu(s,o,u,c,h){const g=function F_(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(vn)?s[vn]:void 0;return"number"==typeof o?o>=0?255&o:L_:o}(u);if("function"==typeof g){if(!Od(o,s,c))return c&Z.Host?Ud(h,0,c):k_(o,u,c,h);try{const y=g(c);if(null!=y||c&Z.Optional)return y;be()}finally{Cl()}}else if("number"==typeof g){let y=null,C=Vd(s,o),I=-1,D=c&Z.Host?o[16][6]:null;for((-1===C||c&Z.SkipSelf)&&(I=-1===C?po(s,o):o[C+8],-1!==I&&Tp(c,!1)?(y=o[1],C=su(I),o=$i(I,o)):C=-1);-1!==C;){const R=o[1];if(Xo(g,C,R.data)){const F=T0(C,o,u,y,c,D);if(F!==Pi)return F}I=o[C+8],-1!==I&&Tp(c,o[1].data[C+8]===D)&&Xo(g,C,o)?(y=R,C=su(I),o=$i(I,o)):C=-1}}return h}function T0(s,o,u,c,h,g){const y=o[1],C=y.data[s+8],R=go(C,y,u,null==c?Ha(C)&&Ri:c!=y&&0!=(3&C.type),h&Z.Host&&g===C);return null!==R?Jo(o,y,R,C):Pi}function go(s,o,u,c,h){const g=s.providerIndexes,y=o.data,C=1048575&g,I=s.directiveStart,R=g>>20,q=h?C+R:s.directiveEnd;for(let ne=c?C:C+R;ne<q;ne++){const Re=y[ne];if(ne<I&&u===Re||ne>=I&&Re.type===u)return ne}if(h){const ne=y[I];if(ne&&Ui(ne)&&ne.type===u)return I}return null}function Jo(s,o,u,c){let h=s[u];const g=o.data;if(function nu(s){return s instanceof Tl}(h)){const y=h;y.resolving&&function dt(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ye(-200,`Circular dependency in DI detected for ${s}${u}`)}(function ie(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ve(s)}(g[u]));const C=fo(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?_t(y.injectImpl):null;Od(s,c,Z.Default);try{h=s[u]=y.factory(void 0,g,s,c),o.firstCreatePass&&u>=c.directiveStart&&function S_(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(c){const y=hp(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],o)}finally{null!==I&&_t(I),fo(C),y.resolving=!1,Cl()}}return h}function Xo(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Tp(s,o){return!(s&Z.Self||s&Z.Host&&o)}class Gn{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Bd(this._tNode,this._lView,o,c,u)}}function L_(){return new Gn(mr(),Le())}function Al(s){return tn(()=>{const o=s.prototype.constructor,u=o[Zn]||$d(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const g=h[Zn]||$d(h);if(g&&g!==u)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function $d(s){return ke(s)?()=>{const o=$d(K(s));return o&&o()}:Lr(s)}function V_(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Dp(s){return function Sl(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const g=u[h];if(ru(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(g===o)return u[h+1];h+=2}}}return null}(mr(),s)}const cu="__parameters__";function is(s,o,u){return tn(()=>{const c=function mo(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...g){if(this instanceof h)return c.apply(this,g),this;const y=new h(...g);return C.annotation=y,C;function C(I,D,R){const F=I.hasOwnProperty(cu)?I[cu]:Object.defineProperty(I,cu,{value:[]})[cu];for(;F.length<=R;)F.push(null);return(F[R]=F[R]||[]).push(y),I}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Un{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=tt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Zr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Zr(c,o)):o!==s&&o.push(c)}return o}function ss(s,o){s.forEach(u=>Array.isArray(u)?ss(u,o):o(u))}function Wd(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Gd(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Ci(s,o,u){let c=du(s,o);return c>=0?s[1|c]=u:(c=~c,function R0(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function Pl(s,o){const u=du(s,o);if(u>=0)return s[1|u]}function du(s,o){return function W_(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const g=c+(h-c>>1),y=s[g<<u];if(o===y)return g<<u;y>o?h=g:c=g+1}return~(h<<u)}(s,o,1)}const _o={},Zd="__NG_DI_FLAG__",Nl="ngTempTokenPath",Yd=/\n/gm,yo="__source";let or;function Gt(s){const o=or;return or=s,o}function G_(s,o=Z.Default){if(void 0===or)throw new ye(-203,!1);return null===or?Jt(s,void 0,o):or.get(s,o&Z.Optional?null:void 0,o)}function ar(s,o=Z.Default){return(function ot(){return xe}()||G_)(K(s),o)}function hu(s,o=Z.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),ar(s,o)}function fu(s){const o=[];for(let u=0;u<s.length;u++){const c=K(s[u]);if(Array.isArray(c)){if(0===c.length)throw new ye(900,!1);let h,g=Z.Default;for(let y=0;y<c.length;y++){const C=c[y],I=ji(C);"number"==typeof I?-1===I?h=C.token:g|=I:h=C}o.push(ar(h,g))}else o.push(ar(c))}return o}function ra(s,o){return s[Zd]=o,s.prototype[Zd]=o,s}function ji(s){return s[Zd]}const vo=ra(is("Optional"),8),pu=ra(is("SkipSelf"),4);var us=(()=>((us=us||{})[us.Important=1]="Important",us[us.DashCase=2]="DashCase",us))();const ih=new Map;let k0=0;const sh="__ngContext__";function Pr(s,o){zr(o)?(s[sh]=o[20],function F0(s){ih.set(s[20],s)}(o)):s[sh]=o}function ql(s,o){return undefined(s,o)}function Au(s){const o=s[3];return vi(o)?o[3]:o}function E(s){return _(s[13])}function p(s){return _(s[4])}function _(s){for(;null!==s&&!vi(s);)s=s[4];return s}function M(s,o,u,c,h){if(null!=c){let g,y=!1;vi(c)?g=c:zr(c)&&(y=!0,c=c[0]);const C=Xn(c);0===s&&null!==u?null==h?ua(o,u,C):Zs(o,u,C,h||null,!0):1===s&&null!==u?Zs(o,u,C,h||null,!0):2===s?function Up(s,o,u){const c=ch(s,o);c&&function Lp(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,C,y):3===s&&o.destroyNode(C),null!=g&&function tS(s,o,u,c,h){const g=u[7];g!==Xn(u)&&M(o,s,c,g,h);for(let C=10;C<u.length;C++){const I=u[C];dh(I[1],I,s,o,c,g)}}(o,s,g,u,h)}}function Je(s,o,u){return s.createElement(o,u)}function Yl(s,o){const u=s[9],c=u.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,Td(h,-1)),u.splice(c,1)}function Ql(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&Yl(h,c),o>0&&(s[u-1][4]=c[4]);const g=Gd(s,10+o);!function ct(s,o){dh(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=g[19];null!==y&&y.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Mu(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&dh(s,o,u,3,null,null),function ci(s){let o=s[13];if(!o)return Jl(s[1],s);for(;o;){let u=null;if(zr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)zr(o)&&Jl(o[1],o),o=o[3];null===o&&(o=s),zr(o)&&Jl(o[1],o),u=o&&o[4]}o=u}}(o)}}function Jl(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function ec(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof Tl)){const g=u[c+1];if(Array.isArray(g))for(let y=0;y<g.length;y+=2){const C=h[g[y]],I=g[y+1];try{I.call(C)}finally{}}else try{g.call(h)}finally{}}}}(s,o),function Xl(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const y=u[g+1],C="function"==typeof y?y(o):Xn(o[y]),I=c[h=u[g+2]],D=u[g+3];"boolean"==typeof D?C.removeEventListener(u[g],I,D):D>=0?c[h=D]():c[h=-D].unsubscribe(),g+=2}else{const y=c[h=u[g+1]];u[g].call(y)}if(null!==c){for(let g=h+1;g<c.length;g++)(0,c[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&vi(o[3])){u!==o[3]&&Yl(u,o);const c=o[19];null!==c&&c.detachView(s)}!function L0(s){ih.delete(s[20])}(o)}}function uh(s,o,u){return function lh(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===ft.None||h===ft.Emulated)return null}return wi(c,u)}(s,o.parent,u)}function Zs(s,o,u,c,h){s.insertBefore(o,u,c,h)}function ua(s,o,u){s.appendChild(o,u)}function la(s,o,u,c,h){null!==c?Zs(s,o,u,c,h):ua(s,o,u)}function ch(s,o){return s.parentNode(o)}let fh,JD=function oy(s,o,u){return 40&s.type?wi(s,u):null};function ay(s,o,u,c){const h=uh(s,c,o),g=o[11],C=function $0(s,o,u){return JD(s,o,u)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let I=0;I<u.length;I++)la(g,h,u[I],C,!1);else la(g,h,u,C,!1)}function Vp(s,o){if(null!==o){const u=o.type;if(3&u)return wi(o,s);if(4&u)return ly(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Vp(s,c);{const h=s[o.index];return vi(h)?ly(-1,h):Xn(h)}}if(32&u)return ql(o,s)()||Xn(s[o.index]);{const c=uy(s,o);return null!==c?Array.isArray(c)?c[0]:Vp(Au(s[16]),c):Vp(s,o.next)}}return null}function uy(s,o){return null!==o?s[16][6].projection[o.projection]:null}function ly(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return Vp(c,h)}return o[7]}function tc(s,o,u,c,h,g,y){for(;null!=u;){const C=c[u.index],I=u.type;if(y&&0===o&&(C&&Pr(Xn(C),c),u.flags|=4),64!=(64&u.flags))if(8&I)tc(s,o,u.child,c,h,g,!1),M(o,s,h,C,g);else if(32&I){const D=ql(u,c);let R;for(;R=D();)M(o,s,h,R,g);M(o,s,h,C,g)}else 16&I?cy(s,o,c,u,h,g):M(o,s,h,C,g);u=y?u.projectionNext:u.next}}function dh(s,o,u,c,h,g){tc(u,c,s.firstChild,o,h,g,!1)}function cy(s,o,u,c,h,g){const y=u[16],I=y[6].projection[c.projection];if(Array.isArray(I))for(let D=0;D<I.length;D++)M(o,s,h,I[D],g);else tc(s,o,I,y[3],h,g,!0)}function dy(s,o,u){s.setAttribute(o,"style",u)}function hy(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function sS(s){fh=s}class W0{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function bo(s){return s instanceof W0?s.changingThisBreaksApplicationSecurity:s}const hS=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Ur=(()=>((Ur=Ur||{})[Ur.NONE=0]="NONE",Ur[Ur.HTML=1]="HTML",Ur[Ur.STYLE=2]="STYLE",Ur[Ur.SCRIPT=3]="SCRIPT",Ur[Ur.URL=4]="URL",Ur[Ur.RESOURCE_URL=5]="RESOURCE_URL",Ur))();function ls(s){const o=function To(){const s=Le();return s&&s[12]}();return o?o.sanitize(Ur.URL,s)||"":function gh(s,o){const u=function EO(s){return s instanceof W0&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?bo(s):function my(s){return(s=String(s)).match(hS)?s:"unsafe:"+s}(ve(s))}const Ey=new Un("ENVIRONMENT_INITIALIZER"),Wp=new Un("INJECTOR",-1),wy=new Un("INJECTOR_DEF_TYPES");class nC{get(o,u=_o){if(u===_o){const c=new Error(`NullInjectorError: No provider for ${ce(o)}!`);throw c.name="NullInjectorError",c}return u}}function Cy(...s){return{\u0275providers:ic(0,s)}}function ic(s,...o){const u=[],c=new Set;let h;return ss(o,g=>{const y=g;Gp(y,u,[],c)&&(h||(h=[]),h.push(y))}),void 0!==h&&da(h,u),u}function da(s,o){for(let u=0;u<s.length;u++){const{providers:h}=s[u];ss(h,g=>{o.push(g)})}}function Gp(s,o,u,c){if(!(s=K(s)))return!1;let h=null,g=Rn(s);const y=!g&&S(s);if(g||y){if(y&&!y.standalone)return!1;h=s}else{const I=s.ngModule;if(g=Rn(I),!g)return!1;h=I}const C=c.has(h);if(y){if(C)return!1;if(c.add(h),y.dependencies){const I="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const D of I)Gp(D,o,u,c)}}else{if(!g)return!1;{if(null!=g.imports&&!C){let D;c.add(h);try{ss(g.imports,R=>{Gp(R,o,u,c)&&(D||(D=[]),D.push(R))})}finally{}void 0!==D&&da(D,o)}if(!C){const D=Lr(h)||(()=>new h);o.push({provide:h,useFactory:D,deps:Lt},{provide:wy,useValue:h,multi:!0},{provide:Ey,useValue:()=>ar(h),multi:!0})}const I=g.providers;null==I||C||ss(I,R=>{o.push(R)})}}return h!==s&&void 0!==s.providers}const Iy=me({provide:String,useValue:me});function qp(s){return null!==s&&"object"==typeof s&&Iy in s}function Ms(s){return"function"==typeof s}const Gr=new Un("Set Injector scope."),xu={},rC={};let by;function ds(){return void 0===by&&(by=new nC),by}class zi{}class Qr extends zi{constructor(o,u,c,h){super(),this.parent=u,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Pu(o,y=>this.processProvider(y)),this.records.set(Wp,Ru(void 0,this)),h.has("environment")&&this.records.set(zi,Ru(void 0,this));const g=this.records.get(Gr);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(wy.multi,Lt,Z.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=Gt(this),c=_t(void 0);try{return o()}finally{Gt(u),_t(c)}}get(o,u=_o,c=Z.Default){this.assertNotDestroyed();const h=Gt(this),g=_t(void 0);try{if(!(c&Z.SkipSelf)){let C=this.records.get(o);if(void 0===C){const I=function Ty(s){return"function"==typeof s||"object"==typeof s&&s instanceof Un}(o)&&Ke(o);C=I&&this.injectableDefInScope(I)?Ru(Ys(o),xu):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(c&Z.Self?ds():this.parent).get(o,u=c&Z.Optional&&u===_o?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[Nl]=y[Nl]||[]).unshift(ce(o)),h)throw y;return function os(s,o,u,c){const h=s[Nl];throw o[yo]&&h.unshift(o[yo]),s.message=function q_(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=ce(o);if(Array.isArray(o))h=o.map(ce).join(" -> ");else if("object"==typeof o){let g=[];for(let y in o)if(o.hasOwnProperty(y)){let C=o[y];g.push(y+":"+("string"==typeof C?JSON.stringify(C):ce(C)))}h=`{${g.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(Yd,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[Nl]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{_t(g),Gt(h)}}resolveInjectorInitializers(){const o=Gt(this),u=_t(void 0);try{const c=this.get(Ey.multi,Lt,Z.Self);for(const h of c)h()}finally{Gt(o),_t(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(ce(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ye(205,!1)}processProvider(o){let u=Ms(o=K(o))?o:K(o&&o.provide);const c=function _h(s){return qp(s)?Ru(void 0,s.useValue):Ru(Kp(s),xu)}(o);if(Ms(o)||!0!==o.multi)this.records.get(u);else{let h=this.records.get(u);h||(h=Ru(void 0,xu,!0),h.factory=()=>fu(h.multi),this.records.set(u,h)),u=o,h.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===xu&&(u.value=rC,u.value=u.factory()),"object"==typeof u.value&&u.value&&function TS(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=K(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Ys(s){const o=Ke(s),u=null!==o?o.factory:Lr(s);if(null!==u)return u;if(s instanceof Un)throw new ye(204,!1);if(s instanceof Function)return function IS(s){const o=s.length;if(o>0)throw function Rl(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new ye(204,!1);const u=function en(s){const o=s&&(s[An]||s[Wn]);if(o){const u=function qt(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new ye(204,!1)}function Kp(s,o,u){let c;if(Ms(s)){const h=K(s);return Lr(h)||Ys(h)}if(qp(s))c=()=>K(s.useValue);else if(function sc(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...fu(s.deps||[]));else if(function Cr(s){return!(!s||!s.useExisting)}(s))c=()=>ar(K(s.useExisting));else{const h=K(s&&(s.useClass||s.provide));if(!function bS(s){return!!s.deps}(s))return Lr(h)||Ys(h);c=()=>new h(...fu(s.deps))}return c}function Ru(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function En(s){return!!s.\u0275providers}function Pu(s,o){for(const u of s)Array.isArray(u)?Pu(u,o):En(u)?Pu(u.\u0275providers,o):o(u)}class Nu{}class sC{resolveComponentFactory(o){throw function SS(s){const o=Error(`No component factory found for ${ce(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let oc=(()=>{class s{}return s.NULL=new sC,s})();function oC(){return yh(mr(),Le())}function yh(s,o){return new Ir(wi(s,o))}let Ir=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=oC,s})();function ha(s){return s instanceof Ir?s.nativeElement:s}class uC{}let AS=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function lC(){const s=Le(),u=xr(mr().index,s);return(zr(u)?u:s)[11]}(),s})(),cC=(()=>{class s{}return s.\u0275prov=tt({token:s,providedIn:"root",factory:()=>null}),s})();class dC{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Dy=new dC("14.3.0"),Sy={};function ac(s){return s.ngOriginalError}class xs{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&ac(o);for(;u&&ac(u);)u=ac(u);return u||null}}function hs(s){return s instanceof Function?s():s}function Ry(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===c||s.charCodeAt(h+g)<=32)return h}u=h+1}}const gC="ng-template";function PS(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==Ry(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function mC(s){return 4===s.type&&s.value!==gC}function Qp(s,o,u){return o===(4!==s.type||u?s.value:gC)}function NS(s,o,u){let c=4;const h=s.attrs||[],g=function Py(s){for(let o=0;o<s.length;o++)if(ru(s[o]))return o;return s.length}(h);let y=!1;for(let C=0;C<o.length;C++){const I=o[C];if("number"!=typeof I){if(!y)if(4&c){if(c=2|1&c,""!==I&&!Qp(s,I,u)||""===I&&1===o.length){if(Rs(c))return!1;y=!0}}else{const D=8&c?I:o[++C];if(8&c&&null!==s.attrs){if(!PS(s.attrs,D,u)){if(Rs(c))return!1;y=!0}continue}const F=OS(8&c?"class":I,h,mC(s),u);if(-1===F){if(Rs(c))return!1;y=!0;continue}if(""!==D){let q;q=F>g?"":h[F+1].toLowerCase();const ne=8&c?q:null;if(ne&&-1!==Ry(ne,D,0)||2&c&&D!==q){if(Rs(c))return!1;y=!0}}}}else{if(!y&&!Rs(c)&&!Rs(I))return!1;if(y&&Rs(I))continue;y=!1,c=I|1&c}}return Rs(c)||y}function Rs(s){return 0==(1&s)}function OS(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let g=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)g=!0;else{if(1===y||2===y){let C=o[++h];for(;"string"==typeof C;)C=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=g?1:2}return-1}return function Jp(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function _C(s,o,u=!1){for(let c=0;c<o.length;c++)if(NS(s,o[c],u))return!0;return!1}function fa(s,o){return s?":not("+o.trim()+")":o}function Ny(s){let o=s[0],u=1,c=2,h="",g=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const C=s[++u];h+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!Rs(y)&&(o+=fa(g,h),h=""),c=y,g=g||!Rs(c);u++}return""!==h&&(o+=fa(g,h)),o}const dn={};function yC(s){lc(Tn(),Le(),ai()+s,!1)}function lc(s,o,u,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&bl(o,g,u)}else{const g=s.preOrderHooks;null!==g&&Yo(o,g,0,u)}bs(u)}function wC(s,o=null,u=null,c){const h=Xp(s,o,u,c);return h.resolveInjectorInitializers(),h}function Xp(s,o=null,u=null,c,h=new Set){const g=[u||Lt,Cy(s)];return c=c||("object"==typeof s?void 0:ce(s)),new Qr(g,o||ds(),c||null,h)}let Ps=(()=>{class s{static create(u,c){if(Array.isArray(u))return wC({name:""},c,u,"");{const h=u.name??"";return wC({name:h},u.parent,u.providers,h)}}}return s.THROW_IF_NOT_FOUND=_o,s.NULL=new nC,s.\u0275prov=tt({token:s,providedIn:"any",factory:()=>ar(Wp)}),s.__NG_ELEMENT_ID__=-1,s})();function Oi(s,o=Z.Default){const u=Le();return null===u?ar(s,o):Bd(mr(),u,K(s),o)}function Fy(){throw new Error("invalid")}function Lu(s,o){return s<<17|o<<2}function fs(s){return s>>17&32767}function bh(s){return 2|s}function Os(s){return(131068&s)>>2}function Ly(s,o){return-131069&s|o<<2}function Vy(s){return 1|s}function FC(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],g=u[c+1];if(-1!==g){const y=s.data[g];Is(h),y.contentQueries(2,o[g],g)}}}function gc(s,o,u,c,h,g,y,C,I,D,R){const F=o.blueprint.slice();return F[0]=h,F[2]=76|c,(null!==R||s&&1024&s[2])&&(F[2]|=1024),Zo(F),F[3]=F[15]=s,F[8]=u,F[10]=y||s&&s[10],F[11]=C||s&&s[11],F[12]=I||s&&s[12]||null,F[9]=D||s&&s[9]||null,F[6]=g,F[20]=function ry(){return k0++}(),F[21]=R,F[16]=2==o.type?s[16]:F,F}function So(s,o,u,c,h){let g=s.data[o];if(null===g)g=function ya(s,o,u,c,h){const g=Ya(),y=Qa(),I=s.data[o]=function Jy(s,o,u,c,h,g){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?g:g&&g.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=I),null!==g&&(y?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(s,o,u,c,h),function _0(){return Yt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=u,g.value=c,g.attrs=h;const y=function co(){const s=Yt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===y?-1:y.injectorIndex}return Bi(g,!0),g}function mc(s,o,u,c){if(0===u)return-1;const h=o.length;for(let g=0;g<u;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function Gy(s,o,u){wl(o);try{const c=s.viewQuery;null!==c&&nv(1,c,u);const h=s.template;null!==h&&LC(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&FC(s,o),s.staticViewQueries&&nv(2,s.viewQuery,u);const g=s.components;null!==g&&function oA(s,o){for(let u=0;u<o.length;u++)QC(s,o[u])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Il()}}function cg(s,o,u,c){const h=o[2];if(128!=(128&h)){wl(o);try{Zo(o),function Rd(s){return Yt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&LC(s,o,u,2,c);const y=3==(3&h);if(y){const D=s.preOrderCheckHooks;null!==D&&bl(o,D,null)}else{const D=s.preOrderHooks;null!==D&&Yo(o,D,0,null),vp(o,0)}if(function ZC(s){for(let o=E(s);null!==o;o=p(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],g=h[3];0==(512&h[2])&&Td(g,1),h[2]|=512}}}(o),function gA(s){for(let o=E(s);null!==o;o=p(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];lo(c)&&cg(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&FC(s,o),y){const D=s.contentCheckHooks;null!==D&&bl(o,D)}else{const D=s.contentHooks;null!==D&&Yo(o,D,1),vp(o,1)}!function sA(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)bs(~h);else{const g=h,y=u[++c],C=u[++c];y0(y,g),C(2,o[g])}}}finally{bs(-1)}}(s,o);const C=s.components;null!==C&&function FO(s,o){for(let u=0;u<o.length;u++)YC(s,o[u])}(o,C);const I=s.viewQuery;if(null!==I&&nv(2,I,c),y){const D=s.viewCheckHooks;null!==D&&bl(o,D)}else{const D=s.viewHooks;null!==D&&Yo(o,D,2),vp(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Td(o[3],-1))}finally{Il()}}}function LC(s,o,u,c,h){const g=ai(),y=2&c;try{bs(-1),y&&o.length>22&&lc(s,o,22,!1),u(c,h)}finally{bs(g)}}function qy(s,o,u){!yl()||(function xh(s,o,u,c){const h=u.directiveStart,g=u.directiveEnd;s.firstCreatePass||Gs(u,o),Pr(c,o);const y=u.initialInputs;for(let C=h;C<g;C++){const I=s.data[C],D=Ui(I);D&&hA(o,u,I);const R=Jo(o,s,C,u);Pr(R,o),null!==y&&fA(0,C-h,R,I,0,y),D&&(xr(u.index,o)[8]=R)}}(s,o,u,wi(u,o)),128==(128&u.flags)&&function WC(s,o,u){const c=u.directiveStart,h=u.directiveEnd,g=u.index,y=function El(){return Yt.lFrame.currentDirectiveIndex}();try{bs(g);for(let C=c;C<h;C++){const I=s.data[C],D=o[C];Nd(C),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&GC(I,D)}}finally{bs(-1),Nd(y)}}(s,o,u))}function Ky(s,o,u=wi){const c=o.localNames;if(null!==c){let h=o.index+1;for(let g=0;g<c.length;g+=2){const y=c[g+1],C=-1===y?u(o,s):s[y];s[h++]=C}}}function UC(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Zy(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Zy(s,o,u,c,h,g,y,C,I,D){const R=22+c,F=R+h,q=function BC(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:dn);return u}(R,F),ne="function"==typeof D?D():D;return q[1]={type:s,blueprint:q,template:u,queries:null,viewQuery:C,declTNode:o,data:q.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:ne,incompleteFirstPass:!1}}function Qy(s,o,u,c){const h=rv(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&gg(s).push(c,h.length-1))}function Ah(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function $C(s,o){const c=o.directiveEnd,h=s.data,g=o.attrs,y=[];let C=null,I=null;for(let D=o.directiveStart;D<c;D++){const R=h[D],F=R.inputs,q=null===g||mC(o)?null:pA(F,g);y.push(q),C=Ah(F,D,C),I=Ah(R.outputs,D,I)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=16),C.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=C,o.outputs=I}function jC(s,o){const u=xr(o,s);16&u[2]||(u[2]|=32)}function _c(s,o,u,c){let h=!1;if(yl()){const g=function lA(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let g=0;g<c.length;g++){const y=c[g];_C(u,y.selectors,!1)&&(h||(h=[]),au(Gs(u,o),s,y.type),Ui(y)?(qC(s,u),h.unshift(y)):h.push(y))}return h}(s,o,u),y=null===c?null:{"":-1};if(null!==g){h=!0,Rh(u,s.data.length,g.length);for(let R=0;R<g.length;R++){const F=g[R];F.providersResolver&&F.providersResolver(F)}let C=!1,I=!1,D=mc(s,o,g.length,null);for(let R=0;R<g.length;R++){const F=g[R];u.mergedAttrs=iu(u.mergedAttrs,F.hostAttrs),KC(s,u,o,D,F),dA(D,F,y),null!==F.contentQueries&&(u.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(u.flags|=128);const q=F.type.prototype;!C&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),C=!0),!I&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),D++}$C(s,u)}y&&function cA(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=u[o[h+1]];if(null==g)throw new ye(-301,!1);c.push(o[h],g)}}}(u,c,y)}return u.mergedAttrs=iu(u.mergedAttrs,u.attrs),h}function Mh(s,o,u,c,h,g){const y=g.hostBindings;if(y){let C=s.hostBindingOpCodes;null===C&&(C=s.hostBindingOpCodes=[]);const I=~o.index;(function zC(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(C)!=I&&C.push(I),C.push(c,h,y)}}function GC(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function qC(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function dA(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Ui(o)&&(u[""]=s)}}function Rh(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function KC(s,o,u,c,h){s.data[c]=h;const g=h.factory||(h.factory=Lr(h.type)),y=new Tl(g,Ui(h),Oi);s.blueprint[c]=y,u[c]=y,Mh(s,o,0,c,mc(s,u,h.hostVars,dn),h)}function hA(s,o,u){const c=wi(o,s),h=UC(u),g=s[10],y=fg(s,gc(s,h,null,u.onPush?32:16,c,o,g,g.createRenderer(c,u),null,null,null));s[o.index]=y}function Qs(s,o,u,c,h,g){const y=wi(s,o);!function Xy(s,o,u,c,h,g,y){if(null==g)s.removeAttribute(o,h,u);else{const C=null==y?ve(g):y(g,c||"",h);s.setAttribute(o,h,C,u)}}(o[11],y,g,s.value,u,c,h)}function fA(s,o,u,c,h,g){const y=g[o];if(null!==y){const C=c.setInput;for(let I=0;I<y.length;){const D=y[I++],R=y[I++],F=y[I++];null!==C?c.setInput(u,F,D,R):u[R]=F}}}function pA(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function ev(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function YC(s,o){const u=xr(o,s);if(lo(u)){const c=u[1];48&u[2]?cg(c,u,c.template,u[8]):u[5]>0&&hg(u)}}function hg(s){for(let c=E(s);null!==c;c=p(c))for(let h=10;h<c.length;h++){const g=c[h];if(lo(g))if(512&g[2]){const y=g[1];cg(y,g,y.template,g[8])}else g[5]>0&&hg(g)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=xr(u[c],s);lo(h)&&h[5]>0&&hg(h)}}function QC(s,o){const u=xr(o,s),c=u[1];(function JC(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),Gy(c,u,u[8])}function fg(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function tv(s){for(;s;){s[2]|=32;const o=Au(s);if(gl(s)&&!o)return s;s=o}return null}function pg(s,o,u,c=!0){const h=o[10];h.begin&&h.begin();try{cg(s,o,s.template,u)}catch(y){throw c&&sv(o,y),y}finally{h.end&&h.end()}}function nv(s,o,u){Is(0),o(s,u)}function rv(s){return s[7]||(s[7]=[])}function gg(s){return s.cleanup||(s.cleanup=[])}function sv(s,o){const u=s[9],c=u?u.get(xs,null):null;c&&c.handleError(o)}function XC(s,o,u,c,h){for(let g=0;g<u.length;){const y=u[g++],C=u[g++],I=o[y],D=s.data[y];null!==D.setInput?D.setInput(I,h,c,C):I[C]=h}}function Ao(s,o,u){const c=qa(o,s);!function Q(s,o,u){s.setValue(o,u)}(s[11],c,u)}function mg(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,g=0;if(null!==o)for(let y=0;y<o.length;y++){const C=o[y];"number"==typeof C?g=C:1==g?h=we(h,C):2==g&&(c=we(c,C+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}function _g(s,o,u,c,h=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&c.push(Xn(g)),vi(g))for(let C=10;C<g.length;C++){const I=g[C],D=I[1].firstChild;null!==D&&_g(I[1],I,D,c)}const y=u.type;if(8&y)_g(s,o,u.child,c);else if(32&y){const C=ql(u,o);let I;for(;I=C();)c.push(I)}else if(16&y){const C=uy(o,u);if(Array.isArray(C))c.push(...C);else{const I=Au(o[16]);_g(I[1],I,C,c,!0)}}u=h?u.projectionNext:u.next}return c}class Ph{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return _g(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(vi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Ql(o,c),Gd(u,c))}this._attachedToViewContainer=!1}Mu(this._lView[1],this._lView)}onDestroy(o){Qy(this._lView[1],this._lView,null,o)}markForCheck(){tv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){pg(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function cn(s,o){dh(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ye(902,!1);this._appRef=o}}class yg extends Ph{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;pg(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class vg extends oc{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=S(o);return new Nh(u,this.ngModule)}}function Eg(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class mA{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){const h=this.injector.get(o,Sy,c);return h!==Sy||u===Sy?h:this.parentInjector.get(o,u,c)}}class Nh extends Nu{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function AO(s){return s.map(Ny).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Eg(this.componentDef.inputs)}get outputs(){return Eg(this.componentDef.outputs)}create(o,u,c,h){let g=(h=h||this.ngModule)instanceof zi?h:h?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const y=g?new mA(o,g):o,C=y.get(uC,null);if(null===C)throw new ye(407,!1);const I=y.get(cC,null),D=C.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",F=c?function Yy(s,o,u){return s.selectRootElement(o,u===ft.ShadowDom)}(D,c,this.componentDef.encapsulation):Je(D,R,function ov(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),q=this.componentDef.onPush?288:272,ne=Zy(0,null,null,1,0,null,null,null,null,null),Re=gc(null,ne,null,q,null,null,C,D,I,y,null);let Qe,lt;wl(Re);try{const xt=function yA(s,o,u,c,h,g){const y=u[1];u[22]=s;const I=So(y,22,2,"#host",null),D=I.mergedAttrs=o.hostAttrs;null!==D&&(mg(I,D,!0),null!==s&&(Fd(h,s,D),null!==I.classes&&hy(h,s,I.classes),null!==I.styles&&dy(h,s,I.styles)));const R=c.createRenderer(s,o),F=gc(u,UC(o),null,o.onPush?32:16,u[22],I,c,R,g||null,null,null);return y.firstCreatePass&&(au(Gs(I,u),y,o.type),qC(y,I),Rh(I,u.length,1)),fg(u,F),u[22]=F}(F,this.componentDef,Re,C,D);if(F)if(c)Fd(D,F,["ng-version",Dy.full]);else{const{attrs:Ct,classes:Ve}=function LS(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++c]):8===h&&u.push(g);else{if(!Rs(h))break;h=g}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Ct&&Fd(D,F,Ct),Ve&&Ve.length>0&&hy(D,F,Ve.join(" "))}if(lt=Ws(ne,22),void 0!==u){const Ct=lt.projection=[];for(let Ve=0;Ve<this.ngContentSelectors.length;Ve++){const vt=u[Ve];Ct.push(null!=vt?Array.from(vt):null)}}Qe=function vA(s,o,u,c){const h=u[1],g=function HC(s,o,u){const c=mr();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),KC(s,c,o,mc(s,o,1,null),u),$C(s,c));const h=Jo(o,s,c.directiveStart,c);Pr(h,o);const g=wi(c,o);return g&&Pr(g,o),h}(h,u,o);if(s[8]=u[8]=g,null!==c)for(const C of c)C(g,o);if(o.contentQueries){const C=mr();o.contentQueries(1,g,C.directiveStart)}const y=mr();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(bs(y.index),Mh(u[1],y,0,y.directiveStart,y.directiveEnd,o),GC(o,g)),g}(xt,this.componentDef,Re,[eI]),Gy(ne,Re,null)}finally{Il()}return new _A(this.componentType,Qe,yh(lt,Re),Re,lt)}}class _A extends class DS{}{constructor(o,u,c,h,g){super(),this.location=c,this._rootLView=h,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new yg(h),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const g=this._rootLView;XC(g[1],g,h,o,u),jC(g,this._tNode.index)}}get injector(){return new Gn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function eI(){const s=mr();tu(Le()[1],s)}function av(s){let o=function er(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let h;if(Ui(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ye(903,!1);h=o.\u0275dir}if(h){if(u){c.push(h);const y=s;y.inputs=Oh(s.inputs),y.declaredInputs=Oh(s.declaredInputs),y.outputs=Oh(s.outputs);const C=h.hostBindings;C&&wA(s,C);const I=h.viewQuery,D=h.contentQueries;if(I&&uv(s,I),D&&EA(s,D),oe(s.inputs,h.inputs),oe(s.declaredInputs,h.declaredInputs),oe(s.outputs,h.outputs),Ui(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let y=0;y<g.length;y++){const C=g[y];C&&C.ngInherit&&C(s),C===av&&(u=!1)}}o=Object.getPrototypeOf(o)}!function tI(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=iu(h.hostAttrs,u=iu(u,h.hostAttrs))}}(c)}function Oh(s){return s===Mn?{}:s===Lt?[]:s}function uv(s,o){const u=s.viewQuery;s.viewQuery=u?(c,h)=>{o(c,h),u(c,h)}:o}function EA(s,o){const u=s.contentQueries;s.contentQueries=u?(c,h,g)=>{o(c,h,g),u(c,h,g)}:o}function wA(s,o){const u=s.hostBindings;s.hostBindings=u?(c,h)=>{o(c,h),u(c,h)}:o}let Cg=null;function Mo(){if(!Cg){const s=Kt.Symbol;if(s&&s.iterator)Cg=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Cg=c)}}}return Cg}function va(s){return!!Ea(s)&&(Array.isArray(s)||!(s instanceof Map)&&Mo()in s)}function Ea(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Jr(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function cv(s,o,u,c){const h=Le();return Jr(h,ho(),o)&&(Tn(),Qs(sr(),h,s,o,u,c)),cv}function kh(s,o,u,c,h,g){const C=function Ro(s,o,u,c){const h=Jr(s,o,u);return Jr(s,o+1,c)||h}(s,function xi(){return Yt.lFrame.bindingIndex}(),u,h);return oi(2),C?o+ve(u)+c+ve(h)+g:dn}function Lh(s,o,u,c,h,g,y,C){const I=Le(),D=Tn(),R=s+22,F=D.firstCreatePass?function TA(s,o,u,c,h,g,y,C,I){const D=o.consts,R=So(o,s,4,y||null,wr(D,C));_c(o,u,R,wr(D,I)),tu(o,R);const F=R.tViews=Zy(2,R,c,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,D);return null!==o.queries&&(o.queries.template(o,R),F.queries=o.queries.embeddedTView(R)),R}(R,D,I,o,u,c,h,g,y):D.data[R];Bi(F,!1);const q=I[11].createComment("");ay(D,I,q,F),Pr(q,I),fg(I,I[R]=ev(q,I,q,F)),Wo(F)&&qy(D,I,F),null!=y&&Ky(I,F,C)}function fv(s,o,u){const c=Le();return Jr(c,ho(),o)&&function Wi(s,o,u,c,h,g,y,C){const I=wi(o,u);let R,D=o.inputs;!C&&null!=D&&(R=D[c])?(XC(s,u,R,c,h),Ha(o)&&jC(u,o.index)):3&o.type&&(c=function aA(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=y?y(h,o.value||"",c):h,g.setProperty(I,c,h))}(Tn(),sr(),c,s,o,c[11],u,!1),fv}function bg(s,o,u,c,h){const y=h?"class":"style";XC(s,u,o.inputs[y],y,c)}function Cc(s,o,u,c){const h=Le(),g=Tn(),y=22+s,C=h[11],I=h[y]=Je(C,o,function yp(){return Yt.lFrame.currentNamespace}()),D=g.firstCreatePass?function cI(s,o,u,c,h,g,y){const C=o.consts,D=So(o,s,2,h,wr(C,g));return _c(o,u,D,wr(C,y)),null!==D.attrs&&mg(D,D.attrs,!1),null!==D.mergedAttrs&&mg(D,D.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,D),D}(y,g,h,0,o,u,c):g.data[y];Bi(D,!0);const R=D.mergedAttrs;null!==R&&Fd(C,I,R);const F=D.classes;null!==F&&hy(C,I,F);const q=D.styles;return null!==q&&dy(C,I,q),64!=(64&D.flags)&&ay(g,h,I,D),0===function w_(){return Yt.lFrame.elementDepthCount}()&&Pr(I,h),function C_(){Yt.lFrame.elementDepthCount++}(),Wo(D)&&(qy(g,h,D),function VC(s,o,u){if(rs(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const y=s.data[g];y.contentQueries&&y.contentQueries(1,u[g],g)}}}(g,D,h)),null!==c&&Ky(h,D),Cc}function it(){let s=mr();Qa()?function xd(){Yt.lFrame.isParent=!1}():(s=s.parent,Bi(s,!1));const o=s;!function Dd(){Yt.lFrame.elementDepthCount--}();const u=Tn();return u.firstCreatePass&&(tu(u,s),rs(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function I0(s){return 0!=(16&s.flags)}(o)&&bg(u,o,Le(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function R_(s){return 0!=(32&s.flags)}(o)&&bg(u,o,Le(),o.stylesWithoutHost,!1),it}function Gi(s,o,u,c){return Cc(s,o,u,c),it(),Gi}function dI(){return Le()}function Vh(s){return!!s&&"function"==typeof s.then}function hI(s){return!!s&&"function"==typeof s.subscribe}const fI=hI;function pv(s,o,u,c){const h=Le(),g=Tn(),y=mr();return function xA(s,o,u,c,h,g,y,C){const I=Wo(c),R=s.firstCreatePass&&gg(s),F=o[8],q=rv(o);let ne=!0;if(3&c.type||C){const lt=wi(c,o),xt=C?C(lt):lt,Ct=q.length,Ve=C?In=>C(Xn(In[c.index])):c.index;let vt=null;if(!C&&I&&(vt=function MA(s,o,u,c){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const y=h[g];if(y===u&&h[g+1]===c){const C=o[7],I=h[g+2];return C.length>I?C[I]:null}"string"==typeof y&&(g+=2)}return null}(s,o,h,c.index)),null!==vt)(vt.__ngLastListenerFn__||vt).__ngNextListenerFn__=g,vt.__ngLastListenerFn__=g,ne=!1;else{g=PA(c,o,F,g,!1);const In=u.listen(xt,h,g);q.push(g,In),R&&R.push(h,Ve,Ct,Ct+1)}}else g=PA(c,o,F,g,!1);const Re=c.outputs;let Qe;if(ne&&null!==Re&&(Qe=Re[h])){const lt=Qe.length;if(lt)for(let xt=0;xt<lt;xt+=2){const nr=o[Qe[xt]][Qe[xt+1]].subscribe(g),Aa=q.length;q.push(g,nr),R&&R.push(h,c.index,Aa,-(Aa+1))}}}(g,h,h[11],y,s,o,0,c),pv}function RA(s,o,u,c){try{return!1!==u(c)}catch(h){return sv(s,h),!1}}function PA(s,o,u,c,h){return function g(y){if(y===Function)return c;tv(2&s.flags?xr(s.index,o):o);let I=RA(o,0,c,y),D=g.__ngNextListenerFn__;for(;D;)I=RA(o,0,D,y)&&I,D=D.__ngNextListenerFn__;return h&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function gI(s=1){return function E0(s){return(Yt.lFrame.contextLView=function gp(s,o){for(;s>0;)o=o[15],s--;return o}(s,Yt.lFrame.contextLView))[8]}(s)}function yI(s,o,u,c,h){const g=s[u+1],y=null===o;let C=c?fs(g):Os(g),I=!1;for(;0!==C&&(!1===I||y);){const R=s[C+1];OA(s[C],o)&&(I=!0,s[C+1]=c?Vy(R):bh(R)),C=c?fs(R):Os(R)}I&&(s[u+1]=c?bh(g):Vy(g))}function OA(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&du(s,o)>=0}function Ev(s,o){return function Ls(s,o,u,c){const h=Le(),g=Tn(),y=oi(2);g.firstUpdatePass&&function TI(s,o,u,c){const h=s.data;if(null===h[u+1]){const g=h[ai()],y=function bI(s,o){return o>=s.expandoStartIndex}(s,u);(function Pg(s,o){return 0!=(s.flags&(o?16:32))})(g,c)&&null===o&&!y&&(o=!1),o=function DI(s,o,u,c){const h=function Ja(s){const o=Yt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=Oo(u=Mg(null,s,o,u,c),o.attrs,c),g=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(u=Mg(h,s,o,u,c),null===g){let I=function wv(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Os(c))return s[fs(c)]}(s,o,c);void 0!==I&&Array.isArray(I)&&(I=Mg(null,s,o,I[1],c),I=Oo(I,o.attrs,c),function SI(s,o,u,c){s[fs(u?o.classBindings:o.styleBindings)]=c}(s,o,c,I))}else g=function Cv(s,o,u){let c;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)c=Oo(c,s[g].hostAttrs,u);return Oo(c,o.attrs,u)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),u}(h,g,o,c),function _v(s,o,u,c,h,g){let y=g?o.classBindings:o.styleBindings,C=fs(y),I=Os(y);s[c]=u;let R,D=!1;if(Array.isArray(u)){const F=u;R=F[1],(null===R||du(F,R)>0)&&(D=!0)}else R=u;if(h)if(0!==I){const q=fs(s[C+1]);s[c+1]=Lu(q,C),0!==q&&(s[q+1]=Ly(s[q+1],c)),s[C+1]=function PC(s,o){return 131071&s|o<<17}(s[C+1],c)}else s[c+1]=Lu(C,0),0!==C&&(s[C+1]=Ly(s[C+1],c)),C=c;else s[c+1]=Lu(I,0),0===C?C=c:s[I+1]=Ly(s[I+1],c),I=c;D&&(s[c+1]=bh(s[c+1])),yI(s,R,c,!0),yI(s,R,c,!1),function NA(s,o,u,c,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&du(g,o)>=0&&(u[c+1]=Vy(u[c+1]))}(o,R,s,c,g),y=Lu(C,I),g?o.classBindings=y:o.styleBindings=y}(h,g,o,u,y,c)}}(g,s,y,c),o!==dn&&Jr(h,y,o)&&function AI(s,o,u,c,h,g,y,C){if(!(3&o.type))return;const I=s.data,D=I[C+1];Bh(function fc(s){return 1==(1&s)}(D)?Rg(I,o,u,h,Os(D),y):void 0)||(Bh(g)||function ig(s){return 2==(2&s)}(D)&&(g=Rg(I,null,u,h,C,y)),function vO(s,o,u,c,h){if(o)h?s.addClass(u,c):s.removeClass(u,c);else{let g=-1===c.indexOf("-")?void 0:us.DashCase;null==h?s.removeStyle(u,c,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=us.Important),s.setStyle(u,c,h,g))}}(c,y,qa(ai(),u),h,g))}(g,g.data[ai()],h,h[11],s,h[y+1]=function MI(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ce(bo(s)))),s}(o,u),c,y)}(s,o,null,!0),Ev}function Mg(s,o,u,c,h){let g=null;const y=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<y&&(g=o[C],c=Oo(c,g.hostAttrs,h),g!==s);)C++;return null!==s&&(u.directiveStylingLast=C),c}function Oo(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const y=o[g];"number"==typeof y?h=y:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Ci(s,y,!!u||o[++g]))}return void 0===s?null:s}function Rg(s,o,u,c,h,g){const y=null===o;let C;for(;h>0;){const I=s[h],D=Array.isArray(I),R=D?I[1]:I,F=null===R;let q=u[h+1];q===dn&&(q=F?Lt:void 0);let ne=F?Pl(q,c):R===c?q:void 0;if(D&&!Bh(ne)&&(ne=Pl(I,c)),Bh(ne)&&(C=ne,y))return C;const Re=s[h+1];h=y?fs(Re):Os(Re)}if(null!==o){let I=g?o.residualClasses:o.residualStyles;null!=I&&(C=Pl(I,c))}return C}function Bh(s){return void 0!==s}function xI(s,o=""){const u=Le(),c=Tn(),h=s+22,g=c.firstCreatePass?So(c,h,1,o,null):c.data[h],y=u[h]=function P(s,o){return s.createText(o)}(u[11],o);ay(c,u,y,g),Bi(g,!1)}function bv(s){return Ng("",s,""),bv}function Ng(s,o,u){const c=Le(),h=function vc(s,o,u,c){return Jr(s,ho(),u)?o+ve(u)+c:dn}(c,s,o,u);return h!==dn&&Ao(c,ai(),h),Ng}function Ic(s,o,u,c,h){const g=Le(),y=kh(g,s,o,u,c,h);return y!==dn&&Ao(g,ai(),y),Ic}const Ca=void 0;var VI=["en",[["a","p"],["AM","PM"],Ca],[["AM","PM"],Ca,Ca],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ca,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ca,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ca,"{1} 'at' {0}",Ca],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function tM(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Ia={};function UI(s){const o=function rM(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=$I(o);if(u)return u;const c=o.split("-")[0];if(u=$I(c),u)return u;if("en"===c)return VI;throw new ye(701,!1)}function nM(s){return UI(s)[Qt.PluralCase]}function $I(s){return s in Ia||(Ia[s]=Kt.ng&&Kt.ng.common&&Kt.ng.common.locales&&Kt.ng.common.locales[s]),Ia[s]}var Qt=(()=>((Qt=Qt||{})[Qt.LocaleId=0]="LocaleId",Qt[Qt.DayPeriodsFormat=1]="DayPeriodsFormat",Qt[Qt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Qt[Qt.DaysFormat=3]="DaysFormat",Qt[Qt.DaysStandalone=4]="DaysStandalone",Qt[Qt.MonthsFormat=5]="MonthsFormat",Qt[Qt.MonthsStandalone=6]="MonthsStandalone",Qt[Qt.Eras=7]="Eras",Qt[Qt.FirstDayOfWeek=8]="FirstDayOfWeek",Qt[Qt.WeekendRange=9]="WeekendRange",Qt[Qt.DateFormat=10]="DateFormat",Qt[Qt.TimeFormat=11]="TimeFormat",Qt[Qt.DateTimeFormat=12]="DateTimeFormat",Qt[Qt.NumberSymbols=13]="NumberSymbols",Qt[Qt.NumberFormats=14]="NumberFormats",Qt[Qt.CurrencyCode=15]="CurrencyCode",Qt[Qt.CurrencySymbol=16]="CurrencySymbol",Qt[Qt.CurrencyName=17]="CurrencyName",Qt[Qt.Currencies=18]="Currencies",Qt[Qt.Directionality=19]="Directionality",Qt[Qt.PluralCase=20]="PluralCase",Qt[Qt.ExtraData=21]="ExtraData",Qt))();const bc="en-US";let jI=bc;function Mc(s,o,u,c,h){if(s=K(s),Array.isArray(s))for(let g=0;g<s.length;g++)Mc(s[g],o,u,c,h);else{const g=Tn(),y=Le();let C=Ms(s)?s:K(s.provide),I=Kp(s);const D=mr(),R=1048575&D.providerIndexes,F=D.directiveStart,q=D.providerIndexes>>20;if(Ms(s)||!s.multi){const ne=new Tl(I,h,Oi),Re=qh(C,o,h?R:R+q,F);-1===Re?(au(Gs(D,y),g,C),Gh(g,s,o.length),o.push(C),D.directiveStart++,D.directiveEnd++,h&&(D.providerIndexes+=1048576),u.push(ne),y.push(ne)):(u[Re]=ne,y[Re]=ne)}else{const ne=qh(C,o,R+q,F),Re=qh(C,o,R,R+q),Qe=ne>=0&&u[ne],lt=Re>=0&&u[Re];if(h&&!lt||!h&&!Qe){au(Gs(D,y),g,C);const xt=function EM(s,o,u,c,h){const g=new Tl(s,u,Oi);return g.multi=[],g.index=o,g.componentProviders=0,Qg(g,h,c&&!u),g}(h?db:Zv,u.length,h,c,I);!h&&lt&&(u[Re].providerFactory=xt),Gh(g,s,o.length,0),o.push(C),D.directiveStart++,D.directiveEnd++,h&&(D.providerIndexes+=1048576),u.push(xt),y.push(xt)}else Gh(g,s,ne>-1?ne:Re,Qg(u[h?Re:ne],I,!h&&c));!h&&c&&lt&&u[Re].componentProviders++}}}function Gh(s,o,u,c){const h=Ms(o),g=function Hi(s){return!!s.useClass}(o);if(h||g){const I=(g?K(o.useClass):o).prototype.ngOnDestroy;if(I){const D=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=D.indexOf(u);-1===R?D.push(u,[c,I]):D[R+1].push(c,I)}else D.push(u,I)}}}function Qg(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function qh(s,o,u,c){for(let h=u;h<c;h++)if(o[h]===s)return h;return-1}function Zv(s,o,u,c){return Jg(this.multi,[])}function db(s,o,u,c){const h=this.multi;let g;if(this.providerFactory){const y=this.providerFactory.componentProviders,C=Jo(u,u[1],this.providerFactory.index,c);g=C.slice(0,y),Jg(h,g);for(let I=y;I<C.length;I++)g.push(C[I])}else g=[],Jg(h,g);return g}function Jg(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function Yv(s,o=[]){return u=>{u.providersResolver=(c,h)=>function cb(s,o,u){const c=Tn();if(c.firstCreatePass){const h=Ui(s);Mc(u,c.data,c.blueprint,h,!0),Mc(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class Wu{}class Xg{}function hb(s,o){return new em(s,o??null)}class em extends Wu{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vg(this);const c=de(o);this._bootstrapComponents=hs(c.bootstrap),this._r3Injector=Xp(o,u,[{provide:Wu,useValue:this},{provide:oc,useValue:this.componentFactoryResolver}],ce(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Kh extends Xg{constructor(o){super(),this.moduleType=o}create(o){return new em(this.moduleType,o)}}class Qv extends Wu{constructor(o,u,c){super(),this.componentFactoryResolver=new vg(this),this.instance=null;const h=new Qr([...o,{provide:Wu,useValue:this},{provide:oc,useValue:this.componentFactoryResolver}],u||ds(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function kr(s,o,u=null){return new Qv(s,o,u).injector}let ni=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=ic(0,u.type),h=c.length>0?kr([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,h)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=tt({token:s,providedIn:"environment",factory:()=>new s(ar(zi))}),s})();function Zh(s){s.getStandaloneInjector=o=>o.get(ni).getOrCreateStandaloneInjector(s)}function tE(s,o,u,c){return function Jh(s,o,u,c,h,g){const y=o+u;return Jr(s,y,h)?function xo(s,o,u){return s[o]=u}(s,y+1,g?c.call(g,h):c(h)):function Rc(s,o){const u=s[o];return u===dn?void 0:u}(s,y+1)}(Le(),function Wr(){const s=Yt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),s,o,u,c)}function tf(s){return o=>{setTimeout(s,void 0,o)}}const Ki=class oE extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let h=o,g=u||(()=>null),y=c;if(o&&"object"==typeof o){const I=o;h=I.next?.bind(I),g=I.error?.bind(I),y=I.complete?.bind(I)}this.__isAsync&&(g=tf(g),h&&(h=tf(h)),y&&(y=tf(y)));const C=super.subscribe({next:h,error:g,complete:y});return o instanceof U.w0&&o.add(C),C}};function nf(){return this._results[Mo()]()}class im{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Mo(),c=im.prototype;c[u]||(c[u]=nf)}get changes(){return this._changes||(this._changes=new Ki)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=Zr(o);(this._changesDetected=!function j_(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],g=o[c];if(u&&(h=u(h),g=u(g)),g!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let rf=(()=>{class s{}return s.__NG_ELEMENT_ID__=uE,s})();const aE=rf,sm=class extends aE{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,h=gc(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(c)),Gy(c,h,o),new Ph(h)}};function uE(){return sf(mr(),Le())}function sf(s,o){return 4&s.type?new sm(o,s,yh(s,o)):null}let af=(()=>{class s{}return s.__NG_ELEMENT_ID__=Tb,s})();function Tb(){return kc(mr(),Le())}const xM=af,Nc=class extends xM{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return yh(this._hostTNode,this._hostLView)}get injector(){return new Gn(this._hostTNode,this._hostLView)}get parentInjector(){const o=po(this._hostTNode,this._hostLView);if(N_(o)){const u=$i(o,this._hostLView),c=su(o);return new Gn(u[1].data[c+8],u)}return new Gn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=lE(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let h,g;"number"==typeof c?h=c:null!=c&&(h=c.index,g=c.injector);const y=o.createEmbeddedView(u||{},g);return this.insert(y,h),y}createComponent(o,u,c,h,g){const y=o&&!function Ni(s){return"function"==typeof s}(o);let C;if(y)C=u;else{const F=u||{};C=F.index,c=F.injector,h=F.projectableNodes,g=F.environmentInjector||F.ngModuleRef}const I=y?o:new Nh(S(o)),D=c||this.parentInjector;if(!g&&null==I.ngModule){const q=(y?D:this.parentInjector).get(zi,null);q&&(g=q)}const R=I.create(D,h,void 0,g);return this.insert(R.hostView,C),R}insert(o,u){const c=o._lView,h=c[1];if(function bd(s){return vi(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const F=c[3],q=new Nc(F,F[6],F[3]);q.detach(q.indexOf(o))}}const g=this._adjustIndex(u),y=this._lContainer;!function Io(s,o,u,c){const h=10+c,g=u.length;c>0&&(u[h-1][4]=o),c<g-10?(o[4]=u[h],Wd(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function Zl(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const C=o[19];null!==C&&C.insertView(s),o[2]|=64}(h,c,y,g);const C=ly(g,y),I=c[11],D=ch(I,y[7]);return null!==D&&function Ut(s,o,u,c,h,g){c[0]=h,c[6]=o,dh(s,c,u,1,h,g)}(h,y[6],I,c,D,C),o.attachToViewContainerRef(),Wd(Oc(y),g,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=lE(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Ql(this._lContainer,u);c&&(Gd(Oc(this._lContainer),u),Mu(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Ql(this._lContainer,u);return c&&null!=Gd(Oc(this._lContainer),u)?new Ph(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function lE(s){return s[8]}function Oc(s){return s[8]||(s[8]=[])}function kc(s,o){let u;const c=o[s.index];if(vi(c))u=c;else{let h;if(8&s.type)h=Xn(c);else{const g=o[11];h=g.createComment("");const y=wi(s,o);Zs(g,ch(g,y),h,function yO(s,o){return s.nextSibling(o)}(g,y),!1)}o[s.index]=u=ev(c,o,h,s),fg(o,u)}return new Nc(u,s,o)}class dE{constructor(o){this.queryList=o,this.matches=null}clone(){return new dE(this.queryList)}setDirty(){this.queryList.setDirty()}}class om{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let g=0;g<c;g++){const y=u.getByIndex(g);h.push(this.queries[y.indexInDeclarationView].clone())}return new om(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Vc(o,u).matches&&this.queries[u].setDirty()}}class hE{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class fE{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,g=this.getByIndex(c).embeddedTView(o,h);g&&(g.indexInDeclarationView=c,null!==u?u.push(g):u=[g])}return null!==u?new fE(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class ko{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new ko(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const g=c[h];this.matchTNodeWithReadOption(o,u,Fo(u,g)),this.matchTNodeWithReadOption(o,u,go(u,o,g,!1,!1))}else c===rf?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,go(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Ir||h===af||h===rf&&4&u.type)this.addMatch(u.index,-2);else{const g=go(u,o,h,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function Fo(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function um(s,o,u,c){return-1===u?function am(s,o){return 11&s.type?yh(s,o):4&s.type?sf(s,o):null}(o,s):-2===u?function Db(s,o,u){return u===Ir?yh(o,s):u===rf?sf(o,s):u===af?kc(o,s):void 0}(s,o,c):Jo(s,s[1],u,o)}function tr(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const g=s.data,y=u.matches,C=[];for(let I=0;I<y.length;I+=2){const D=y[I];C.push(D<0?null:um(o,g[D],y[I+1],u.metadata.read))}h.matches=C}return h.matches}function Fc(s,o,u,c){const h=s.queries.getByIndex(u),g=h.matches;if(null!==g){const y=tr(s,o,h,u);for(let C=0;C<g.length;C+=2){const I=g[C];if(I>0)c.push(y[C/2]);else{const D=g[C+1],R=o[-I];for(let F=10;F<R.length;F++){const q=R[F];q[17]===q[3]&&Fc(q[1],q,D,c)}if(null!==R[9]){const F=R[9];for(let q=0;q<F.length;q++){const ne=F[q];Fc(ne[1],ne,D,c)}}}}}return c}function Lc(s){const o=Le(),u=Tn(),c=Xa();Is(c+1);const h=Vc(u,c);if(s.dirty&&function m0(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?Fc(u,o,c,[]):tr(u,o,h,c);s.reset(g,ha),s.notifyOnChanges()}return!0}return!1}function Sb(s,o,u,c){const h=Tn();if(h.firstCreatePass){const g=mr();(function Mb(s,o,u){null===s.queries&&(s.queries=new fE),s.queries.track(new ko(o,u))})(h,new hE(o,u,c),g.index),function PM(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function Ab(s,o,u){const c=new im(4==(4&u));Qy(s,o,c,c.destroy),null===o[19]&&(o[19]=new om),o[19].queries.push(new dE(c))}(h,Le(),u)}function pE(){return function RM(s,o){return s[19].queries[o].queryList}(Le(),Xa())}function Vc(s,o){return s.queries.getByIndex(o)}function gf(...s){}const mf=new Un("Application Initializer");let pi=(()=>{class s{constructor(u){this.appInits=u,this.resolve=gf,this.reject=gf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(Vh(g))u.push(g);else if(fI(g)){const y=new Promise((C,I)=>{g.subscribe({complete:C,error:I})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(ar(mf,8))},s.\u0275prov=tt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const AE=new Un("AppId",{providedIn:"root",factory:function ME(){return`${xE()}${xE()}${xE()}`}});function xE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Hb=new Un("Platform Initializer"),RE=new Un("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),zb=new Un("appBootstrapListener");let zM=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const gm=new Un("LocaleId",{providedIn:"root",factory:()=>hu(gm,Z.Optional|Z.SkipSelf)||function pm(){return typeof $localize<"u"&&$localize.locale||bc}()}),Wb=new Un("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class PE{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let WM=(()=>{class s{compileModuleSync(u){return new Kh(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),g=hs(de(u).declarations).reduce((y,C)=>{const I=S(C);return I&&y.push(new Nh(I)),y},[]);return new PE(c,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const pt=(()=>Promise.resolve(0))();function ge(s){typeof Zone>"u"?pt.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Hn{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ki(!1),this.onMicrotaskEmpty=new Ki(!1),this.onStable=new Ki(!1),this.onError=new Ki(!1),typeof Zone>"u")throw new ye(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Be(){let s=Kt.requestAnimationFrame,o=Kt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function qM(s){const o=()=>{!function GM(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Kt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,OE(s),s.isCheckStableRunning=!0,NE(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),OE(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,g,y,C)=>{try{return qb(s),u.invokeTask(h,g,y,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),kE(s)}},onInvoke:(u,c,h,g,y,C,I)=>{try{return qb(s),u.invoke(h,g,y,C,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),kE(s)}},onHasTask:(u,c,h,g)=>{u.hasTask(h,g),c===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,OE(s),NE(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,c,h,g)=>(u.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hn.isInAngularZone())throw new ye(909,!1)}static assertNotInAngularZone(){if(Hn.isInAngularZone())throw new ye(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const g=this._inner,y=g.scheduleEventTask("NgZoneEvent: "+h,o,Gb,gf,gf);try{return g.runTask(y,u,c)}finally{g.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const Gb={};function NE(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function OE(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function qb(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function kE(s){s._nesting--,NE(s)}class KM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ki,this.onMicrotaskEmpty=new Ki,this.onStable=new Ki,this.onError=new Ki}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}const ZM=new Un(""),Kb=new Un("");let _m,Zb=(()=>{class s{constructor(u,c,h){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,_m||(function Wc(s){_m=s}(h),h.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hn.assertNotInAngularZone(),ge(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ge(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==g),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(ar(Hn),ar(rn),ar(Kb))},s.\u0275prov=tt({token:s,factory:s.\u0275fac}),s})(),rn=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return _m?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=tt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),$n=null;const Wt=new Un("AllowMultipleToken"),Qu=new Un("PlatformDestroyListeners");class ym{constructor(o,u){this.name=o,this.token=u}}function Qb(s,o,u=[]){const c=`Platform: ${o}`,h=new Un(c);return(g=[])=>{let y=Di();if(!y||y.injector.get(Wt,!1)){const C=[...u,...g,{provide:h,useValue:!0}];s?s(C):function FE(s){if($n&&!$n.get(Wt,!1))throw new ye(400,!1);$n=s;const o=s.get(vm);(function Yb(s){const o=s.get(Hb,null);o&&o.forEach(u=>u())})(s)}(function VE(s=[],o){return Ps.create({name:o,providers:[{provide:Gr,useValue:"platform"},{provide:Qu,useValue:new Set([()=>$n=null])},...s]})}(C,c))}return function vf(s){const o=Di();if(!o)throw new ye(401,!1);return o}()}}function Di(){return $n?.get(vm)??null}let vm=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const h=function BE(s,o){let u;return u="noop"===s?new KM:("zone.js"===s?void 0:s)||new Hn(o),u}(c?.ngZone,function UE(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:Hn,useValue:h}];return h.run(()=>{const y=Ps.create({providers:g,parent:this.injector,name:u.moduleType.name}),C=u.create(y),I=C.injector.get(xs,null);if(!I)throw new ye(402,!1);return h.runOutsideAngular(()=>{const D=h.onError.subscribe({next:R=>{I.handleError(R)}});C.onDestroy(()=>{Xu(this._modules,C),D.unsubscribe()})}),function Lo(s,o,u){try{const c=u();return Vh(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(I,h,()=>{const D=C.injector.get(pi);return D.runInitializers(),D.donePromise.then(()=>(function HI(s){Ae(s,"Expected localeId to be defined"),"string"==typeof s&&(jI=s.toLowerCase().replace(/_/g,"-"))}(C.injector.get(gm,bc)||bc),this._moduleDoBootstrap(C),C))})})}bootstrapModule(u,c=[]){const h=Em({},c);return function YM(s,o,u){const c=new Kh(u);return Promise.resolve(c)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(u){const c=u.injector.get(ue);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new ye(403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ye(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(Qu,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(ar(Ps))},s.\u0275prov=tt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Em(s,o){return Array.isArray(o)?o.reduce(Em,s):{...s,...o}}let ue=(()=>{class s{constructor(u,c,h){this._zone=u,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new k.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),y=new k.y(C=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Hn.assertNotInAngularZone(),ge(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const D=this._zone.onUnstable.subscribe(()=>{Hn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{I.unsubscribe(),D.unsubscribe()}});this.isStable=(0,ee.T)(g,y.pipe((0,Ee.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const h=u instanceof Nu;if(!this._injector.get(pi).done)throw!h&&X(u),new ye(405,false);let y;y=h?u:this._injector.get(oc).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const C=function ht(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Wu),D=y.create(Ps.NULL,[],c||y.selector,C),R=D.location.nativeElement,F=D.injector.get(ZM,null);return F?.registerApplication(R),D.onDestroy(()=>{this.detachView(D.hostView),Xu(this.components,D),F?.unregisterApplication(R)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new ye(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Xu(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(zb,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Xu(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new ye(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(ar(Hn),ar(zi),ar(xs))},s.\u0275prov=tt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Xu(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let Gc=!0,Vo=!1;function XM(){return Vo=!0,Gc}function el(){if(Vo)throw new Error("Cannot enable prod mode after platform setup.");Gc=!1}let tx=(()=>{class s{}return s.__NG_ELEMENT_ID__=Zi,s})();function Zi(s){return function Ef(s,o,u){if(Ha(s)&&!u){const c=xr(s.index,o);return new Ph(c,c)}return 47&s.type?new Ph(o[16],o):null}(mr(),Le(),16==(16&s))}class rT{constructor(){}supports(o){return va(o)}create(o){return new iT(o)}}const sx=(s,o)=>o;class iT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||sx}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,g=null;for(;u||c;){const y=!c||u&&u.currentIndex<oT(c,h,g)?u:c,C=oT(y,h,g),I=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)h++;else{g||(g=[]);const D=C-h,R=I-h;if(D!=R){for(let q=0;q<D;q++){const ne=q<g.length?g[q]:g[q]=0,Re=ne+q;R<=Re&&Re<D&&(g[q]=ne+1)}g[y.previousIndex]=R-D}}C!==I&&o(y,C,I)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!va(o))throw new ye(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)g=o[C],y=this._trackByFn(C,g),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,g,y,C)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,y,C),c=!0),u=u._next}else h=0,function rI(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Mo()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,C=>{y=this._trackByFn(h,C),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,C,y,h)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,y,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,h)):o=this._addAfter(new ox(u,c),g,h),o}_verifyReinsertion(o,u,c,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new WE),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new WE),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ox{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sT{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class WE{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new sT,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function oT(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class bm{constructor(){}supports(o){return o instanceof Map||Ea(o)}create(){return new qr}}class qr{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Ea(o)))throw new ye(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const g=h._prev,y=h._next;return g&&(g._next=y),y&&(y._prev=g),h._next=null,h._prev=null,h}const c=new aT(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class aT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Sa(){return new Tm([new rT])}let Tm=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Sa()),deps:[[s,new pu,new vo]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new ye(901,!1)}}return s.\u0275prov=tt({token:s,providedIn:"root",factory:Sa}),s})();function Cf(){return new Br([new bm])}let Br=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Cf()),deps:[[s,new pu,new vo]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new ye(901,!1)}}return s.\u0275prov=tt({token:s,providedIn:"root",factory:Cf}),s})();const ax=Qb(null,"core",[]);let ux=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(ar(ue))},s.\u0275mod=an({type:s}),s.\u0275inj=Fe({}),s})();function $r(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(At,Ne,O)=>{O.d(Ne,{Z:()=>ye});var d=O(2090),U=O(4859),k=O(9681),ee=O(1877);class Ee{constructor(ve,ie){this._delegate=ve,this.firebase=ie,(0,k._addComponent)(ve,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this._delegate.automaticDataCollectionEnabled=ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ve=>{this._delegate.checkDestroyed(),ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(ve,ie=k._DEFAULT_ENTRY_NAME){var dt;this._delegate.checkDestroyed();const gt=this._delegate.container.getProvider(ve);return!gt.isInitialized()&&"EXPLICIT"===(null===(dt=gt.getComponent())||void 0===dt?void 0:dt.instantiationMode)&&gt.initialize(),gt.getImmediate({identifier:ie})}_removeServiceInstance(ve,ie=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ve).clearInstance(ie)}_addComponent(ve){(0,k._addComponent)(this._delegate,ve)}_addOrOverwriteComponent(ve){(0,k._addOrOverwriteComponent)(this._delegate,ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function we(){const qe=function ce(qe){const ve={},ie={__esModule:!0,initializeApp:function Me(We,z={}){const fe=k.initializeApp(We,z);if((0,d.r3)(ve,fe.name))return ve[fe.name];const Ge=new qe(fe,ie);return ve[fe.name]=Ge,Ge},app:gt,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function De(We){const z=We.name,fe=z.replace("-compat","");if(k._registerComponent(We)&&"PUBLIC"===We.type){const Ge=(Ye=gt())=>{if("function"!=typeof Ye[fe])throw oe.create("invalid-app-argument",{appName:z});return Ye[fe]()};void 0!==We.serviceProps&&(0,d.ZB)(Ge,We.serviceProps),ie[fe]=Ge,qe.prototype[fe]=function(...Ye){return this._getService.bind(this,z).apply(this,We.multipleInstances?Ye:[])}}return"PUBLIC"===We.type?ie[fe]:null},removeApp:function dt(We){delete ve[We]},useAsService:function je(We,z){return"serverAuth"===z?null:z},modularAPIs:k}};function gt(We){if(!(0,d.r3)(ve,We=We||k._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:We});return ve[We]}return ie.default=ie,Object.defineProperty(ie,"apps",{get:function be(){return Object.keys(ve).map(We=>ve[We])}}),gt.App=qe,ie}(Ee);return qe.INTERNAL=Object.assign(Object.assign({},qe.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function ve(ie){(0,d.ZB)(qe,ie)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),qe}(),H=new ee.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const qe=self.firebase.SDK_VERSION;qe&&qe.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ye=j;!function Oe(qe){(0,k.registerVersion)("@firebase/app-compat","0.2.8",qe)}()},9681:(At,Ne,O)=>{O.r(Ne),O.d(Ne,{FirebaseError:()=>ee.ZR,SDK_VERSION:()=>Rn,_DEFAULT_ENTRY_NAME:()=>Ae,_addComponent:()=>kt,_addOrOverwriteComponent:()=>tt,_apps:()=>et,_clearComponents:()=>mt,_components:()=>Et,_getProvider:()=>Fe,_registerComponent:()=>Ft,_removeServiceInstance:()=>Ke,deleteApp:()=>at,getApp:()=>Qn,getApps:()=>Wn,initializeApp:()=>An,onLog:()=>ot,registerVersion:()=>xe,setLogLevel:()=>_t});var d=O(5861),U=O(4859),k=O(1877),ee=O(2090),Ee=O(8766);class me{constructor(Se){this.container=Se}getPlatformInfoString(){return this.container.getProviders().map(yt=>{if(function oe(st){return"VERSION"===st.getComponent()?.type}(yt)){const Pt=yt.getImmediate();return`${Pt.library}/${Pt.version}`}return null}).filter(yt=>yt).join(" ")}}const ce="@firebase/app",j=new k.Yd("@firebase/app"),Ae="[DEFAULT]",Te={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},et=new Map,Et=new Map;function kt(st,Se){try{st.container.addComponent(Se)}catch(yt){j.debug(`Component ${Se.name} failed to register with FirebaseApp ${st.name}`,yt)}}function tt(st,Se){st.container.addOrOverwriteComponent(Se)}function Ft(st){const Se=st.name;if(Et.has(Se))return j.debug(`There were multiple attempts to register component ${Se}.`),!1;Et.set(Se,st);for(const yt of et.values())kt(yt,st);return!0}function Fe(st,Se){const yt=st.container.getProvider("heartbeat").getImmediate({optional:!0});return yt&&yt.triggerHeartbeat(),st.container.getProvider(Se)}function Ke(st,Se,yt=Ae){Fe(st,Se).clearInstance(yt)}function mt(){Et.clear()}const en=new ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qt{constructor(Se,yt,Pt){this._isDeleted=!1,this._options=Object.assign({},Se),this._config=Object.assign({},yt),this._name=yt.name,this._automaticDataCollectionEnabled=yt.automaticDataCollectionEnabled,this._container=Pt,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this.checkDestroyed(),this._automaticDataCollectionEnabled=Se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Se){this._isDeleted=Se}checkDestroyed(){if(this.isDeleted)throw en.create("app-deleted",{appName:this._name})}}const Rn="9.20.0";function An(st,Se={}){let yt=st;"object"!=typeof Se&&(Se={name:Se});const Pt=Object.assign({name:Ae,automaticDataCollectionEnabled:!1},Se),on=Pt.name;if("string"!=typeof on||!on)throw en.create("bad-app-name",{appName:String(on)});if(yt||(yt=(0,ee.aH)()),!yt)throw en.create("no-options");const an=et.get(on);if(an){if((0,ee.vZ)(yt,an.options)&&(0,ee.vZ)(Pt,an.config))return an;throw en.create("duplicate-app",{appName:on})}const Vn=new U.H0(on);for(const B of Et.values())Vn.addComponent(B);const $=new qt(yt,Pt,Vn);return et.set(on,$),$}function Qn(st=Ae){const Se=et.get(st);if(!Se&&st===Ae)return An();if(!Se)throw en.create("no-app",{appName:st});return Se}function Wn(){return Array.from(et.values())}function at(st){return Z.apply(this,arguments)}function Z(){return(Z=(0,d.Z)(function*(st){const Se=st.name;et.has(Se)&&(et.delete(Se),yield Promise.all(st.container.getProviders().map(yt=>yt.delete())),st.isDeleted=!0)})).apply(this,arguments)}function xe(st,Se,yt){var Pt;let on=null!==(Pt=Te[st])&&void 0!==Pt?Pt:st;yt&&(on+=`-${yt}`);const an=on.match(/\s|\//),Vn=Se.match(/\s|\//);if(an||Vn){const $=[`Unable to register library "${on}" with version "${Se}":`];return an&&$.push(`library name "${on}" contains illegal characters (whitespace or "/")`),an&&Vn&&$.push("and"),Vn&&$.push(`version name "${Se}" contains illegal characters (whitespace or "/")`),void j.warn($.join(" "))}Ft(new U.wA(`${on}-version`,()=>({library:on,version:Se}),"VERSION"))}function ot(st,Se){if(null!==st&&"function"!=typeof st)throw en.create("invalid-log-argument");(0,k.Am)(st,Se)}function _t(st){(0,k.Ub)(st)}const tn="firebase-heartbeat-store";let Xt=null;function Mt(){return Xt||(Xt=(0,Ee.X3)("firebase-heartbeat-database",1,{upgrade:(st,Se)=>{0===Se&&st.createObjectStore(tn)}}).catch(st=>{throw en.create("idb-open",{originalErrorMessage:st.message})})),Xt}function ft(){return(ft=(0,d.Z)(function*(st){try{return(yield Mt()).transaction(tn).objectStore(tn).get(yn(st))}catch(Se){if(Se instanceof ee.ZR)j.warn(Se.message);else{const yt=en.create("idb-get",{originalErrorMessage:Se?.message});j.warn(yt.message)}}})).apply(this,arguments)}function Kt(st,Se){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,d.Z)(function*(st,Se){try{const Pt=(yield Mt()).transaction(tn,"readwrite");return yield Pt.objectStore(tn).put(Se,yn(st)),Pt.done}catch(yt){if(yt instanceof ee.ZR)j.warn(yt.message);else{const Pt=en.create("idb-set",{originalErrorMessage:yt?.message});j.warn(Pt.message)}}})).apply(this,arguments)}function yn(st){return`${st.name}!${st.options.appId}`}class On{constructor(Se){this.container=Se,this._heartbeatsCache=null;const yt=this.container.getProvider("app").getImmediate();this._storage=new sn(yt),this._heartbeatsCachePromise=this._storage.read().then(Pt=>(this._heartbeatsCache=Pt,Pt))}triggerHeartbeat(){var Se=this;return(0,d.Z)(function*(){const Pt=Se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),on=Nt();if(null===Se._heartbeatsCache&&(Se._heartbeatsCache=yield Se._heartbeatsCachePromise),Se._heartbeatsCache.lastSentHeartbeatDate!==on&&!Se._heartbeatsCache.heartbeats.some(an=>an.date===on))return Se._heartbeatsCache.heartbeats.push({date:on,agent:Pt}),Se._heartbeatsCache.heartbeats=Se._heartbeatsCache.heartbeats.filter(an=>{const Vn=new Date(an.date).valueOf();return Date.now()-Vn<=2592e6}),Se._storage.overwrite(Se._heartbeatsCache)})()}getHeartbeatsHeader(){var Se=this;return(0,d.Z)(function*(){if(null===Se._heartbeatsCache&&(yield Se._heartbeatsCachePromise),null===Se._heartbeatsCache||0===Se._heartbeatsCache.heartbeats.length)return"";const yt=Nt(),{heartbeatsToSend:Pt,unsentEntries:on}=function ir(st,Se=1024){const yt=[];let Pt=st.slice();for(const on of st){const an=yt.find(Vn=>Vn.agent===on.agent);if(an){if(an.dates.push(on.date),Zn(yt)>Se){an.dates.pop();break}}else if(yt.push({agent:on.agent,dates:[on.date]}),Zn(yt)>Se){yt.pop();break}Pt=Pt.slice(1)}return{heartbeatsToSend:yt,unsentEntries:Pt}}(Se._heartbeatsCache.heartbeats),an=(0,ee.L)(JSON.stringify({version:2,heartbeats:Pt}));return Se._heartbeatsCache.lastSentHeartbeatDate=yt,on.length>0?(Se._heartbeatsCache.heartbeats=on,yield Se._storage.overwrite(Se._heartbeatsCache)):(Se._heartbeatsCache.heartbeats=[],Se._storage.overwrite(Se._heartbeatsCache)),an})()}}function Nt(){return(new Date).toISOString().substring(0,10)}class sn{constructor(Se){this.app=Se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ee.hl)()&&(0,ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Se=this;return(0,d.Z)(function*(){return(yield Se._canUseIndexedDBPromise)&&(yield function rt(st){return ft.apply(this,arguments)}(Se.app))||{heartbeats:[]}})()}overwrite(Se){var yt=this;return(0,d.Z)(function*(){var Pt;if(yield yt._canUseIndexedDBPromise){const an=yield yt.read();return Kt(yt.app,{lastSentHeartbeatDate:null!==(Pt=Se.lastSentHeartbeatDate)&&void 0!==Pt?Pt:an.lastSentHeartbeatDate,heartbeats:Se.heartbeats})}})()}add(Se){var yt=this;return(0,d.Z)(function*(){var Pt;if(yield yt._canUseIndexedDBPromise){const an=yield yt.read();return Kt(yt.app,{lastSentHeartbeatDate:null!==(Pt=Se.lastSentHeartbeatDate)&&void 0!==Pt?Pt:an.lastSentHeartbeatDate,heartbeats:[...an.heartbeats,...Se.heartbeats]})}})()}}function Zn(st){return(0,ee.L)(JSON.stringify({version:2,heartbeats:st})).length}!function vn(st){Ft(new U.wA("platform-logger",Se=>new me(Se),"PRIVATE")),Ft(new U.wA("heartbeat",Se=>new On(Se),"PRIVATE")),xe(ce,"0.9.8",st),xe(ce,"0.9.8","esm2017"),xe("fire-js","")}("")},4859:(At,Ne,O)=>{O.d(Ne,{H0:()=>ce,wA:()=>k});var d=O(5861),U=O(2090);class k{constructor(j,H,K){this.name=j,this.instanceFactory=H,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const ee="[DEFAULT]";class Ee{constructor(j,H){this.name=j,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const H=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(H)){const K=new U.BH;if(this.instancesDeferred.set(H,K),this.isInitialized(H)||this.shouldAutoInitialize())try{const ke=this.getOrInitializeService({instanceIdentifier:H});ke&&K.resolve(ke)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(j){var H;const K=this.normalizeInstanceIdentifier(j?.identifier),ke=null!==(H=j?.optional)&&void 0!==H&&H;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Oe){if(ke)return null;throw Oe}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function oe(we){return"EAGER"===we.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[H,K]of this.instancesDeferred.entries()){const ke=this.normalizeInstanceIdentifier(H);try{const Oe=this.getOrInitializeService({instanceIdentifier:ke});K.resolve(Oe)}catch{}}}}clearInstance(j=ee){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,d.Z)(function*(){const H=Array.from(j.instances.values());yield Promise.all([...H.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...H.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=ee){return this.instances.has(j)}getOptions(j=ee){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:H={}}=j,K=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ke=this.getOrInitializeService({instanceIdentifier:K,options:H});for(const[Oe,ye]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Oe)&&ye.resolve(ke);return ke}onInit(j,H){var K;const ke=this.normalizeInstanceIdentifier(H),Oe=null!==(K=this.onInitCallbacks.get(ke))&&void 0!==K?K:new Set;Oe.add(j),this.onInitCallbacks.set(ke,Oe);const ye=this.instances.get(ke);return ye&&j(ye,ke),()=>{Oe.delete(j)}}invokeOnInitCallbacks(j,H){const K=this.onInitCallbacks.get(H);if(K)for(const ke of K)try{ke(j,H)}catch{}}getOrInitializeService({instanceIdentifier:j,options:H={}}){let K=this.instances.get(j);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(we=j,we===ee?void 0:we),options:H}),this.instances.set(j,K),this.instancesOptions.set(j,H),this.invokeOnInitCallbacks(K,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,K)}catch{}var we;return K||null}normalizeInstanceIdentifier(j=ee){return this.component?this.component.multipleInstances?j:ee:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const H=this.getProvider(j.name);if(H.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);H.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const H=new Ee(j,this);return this.providers.set(j,H),H}getProviders(){return Array.from(this.providers.values())}}},2833:(At,Ne,O)=>{var d=O(5861),U=O(9681),k=O(4859),ee=O(2090),Ee=O(8766);const me="@firebase/installations",we="w:0.6.4",j="FIS_v2",qe=new ee.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ve(W){return W instanceof ee.ZR&&W.code.includes("request-failed")}function ie({projectId:W}){return`https://firebaseinstallations.googleapis.com/v1/projects/${W}/installations`}function dt(W){return{token:W.token,requestStatus:2,expiresIn:z(W.expiresIn),creationTime:Date.now()}}function gt(W,ae){return Me.apply(this,arguments)}function Me(){return(Me=(0,d.Z)(function*(W,ae){const It=(yield ae.json()).error;return qe.create("request-failed",{requestName:W,serverCode:It.code,serverMessage:It.message,serverStatus:It.status})})).apply(this,arguments)}function be({apiKey:W}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":W})}function De(W,{refreshToken:ae}){const He=be(W);return He.append("Authorization",function fe(W){return`${j} ${W}`}(ae)),He}function je(W){return We.apply(this,arguments)}function We(){return(We=(0,d.Z)(function*(W){const ae=yield W();return ae.status>=500&&ae.status<600?W():ae})).apply(this,arguments)}function z(W){return Number(W.replace("s","000"))}function Ge(W,ae){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,d.Z)(function*({appConfig:W,heartbeatServiceProvider:ae},{fid:He}){const It=ie(W),nn=be(W),mn=ae.getImmediate({optional:!0});if(mn){const dr=yield mn.getHeartbeatsHeader();dr&&nn.append("x-firebase-client",dr)}const Yn={method:"POST",headers:nn,body:JSON.stringify({fid:He,authVersion:j,appId:W.appId,sdkVersion:we})},si=yield je(()=>fetch(It,Yn));if(si.ok){const dr=yield si.json();return{fid:dr.fid||He,registrationStatus:2,refreshToken:dr.refreshToken,authToken:dt(dr.authToken)}}throw yield gt("Create Installation",si)})).apply(this,arguments)}function Tt(W){return new Promise(ae=>{setTimeout(ae,W)})}const se=/^[cdef][\w-]{21}$/;function _e(){try{const W=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(W),W[0]=112+W[0]%16;const He=function Pe(W){return function Xe(W){return btoa(String.fromCharCode(...W)).replace(/\+/g,"-").replace(/\//g,"_")}(W).substr(0,22)}(W);return se.test(He)?He:""}catch{return""}}function Ae(W){return`${W.appName}!${W.appId}`}const Te=new Map;function et(W,ae){const He=Ae(W);tt(He,ae),function Ft(W,ae){const He=function Ke(){return!Fe&&"BroadcastChannel"in self&&(Fe=new BroadcastChannel("[Firebase] FID Change"),Fe.onmessage=W=>{tt(W.data.key,W.data.fid)}),Fe}();He&&He.postMessage({key:W,fid:ae}),function mt(){0===Te.size&&Fe&&(Fe.close(),Fe=null)}()}(He,ae)}function tt(W,ae){const He=Te.get(W);if(He)for(const It of He)It(ae)}let Fe=null;const qt="firebase-installations-store";let Rn=null;function An(){return Rn||(Rn=(0,Ee.X3)("firebase-installations-database",1,{upgrade:(W,ae)=>{0===ae&&W.createObjectStore(qt)}})),Rn}function Qn(W,ae){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,d.Z)(function*(W,ae){const He=Ae(W),nn=(yield An()).transaction(qt,"readwrite"),mn=nn.objectStore(qt),Zt=yield mn.get(He);return yield mn.put(ae,He),yield nn.done,(!Zt||Zt.fid!==ae.fid)&&et(W,ae.fid),ae})).apply(this,arguments)}function at(W){return Z.apply(this,arguments)}function Z(){return(Z=(0,d.Z)(function*(W){const ae=Ae(W),It=(yield An()).transaction(qt,"readwrite");yield It.objectStore(qt).delete(ae),yield It.done})).apply(this,arguments)}function xe(W,ae){return ot.apply(this,arguments)}function ot(){return(ot=(0,d.Z)(function*(W,ae){const He=Ae(W),nn=(yield An()).transaction(qt,"readwrite"),mn=nn.objectStore(qt),Zt=yield mn.get(He),Yn=ae(Zt);return void 0===Yn?yield mn.delete(He):yield mn.put(Yn,He),yield nn.done,Yn&&(!Zt||Zt.fid!==Yn.fid)&&et(W,Yn.fid),Yn})).apply(this,arguments)}function _t(W){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,d.Z)(function*(W){let ae;const He=yield xe(W.appConfig,It=>{const nn=pn(It),mn=tn(W,nn);return ae=mn.registrationPromise,mn.installationEntry});return""===He.fid?{installationEntry:yield ae}:{installationEntry:He,registrationPromise:ae}})).apply(this,arguments)}function pn(W){return Pn(W||{fid:_e(),registrationStatus:0})}function tn(W,ae){if(0===ae.registrationStatus){if(!navigator.onLine)return{installationEntry:ae,registrationPromise:Promise.reject(qe.create("app-offline"))};const He={fid:ae.fid,registrationStatus:1,registrationTime:Date.now()},It=function Xt(W,ae){return Mt.apply(this,arguments)}(W,He);return{installationEntry:He,registrationPromise:It}}return 1===ae.registrationStatus?{installationEntry:ae,registrationPromise:rt(W)}:{installationEntry:ae}}function Mt(){return(Mt=(0,d.Z)(function*(W,ae){try{const He=yield Ge(W,ae);return Qn(W.appConfig,He)}catch(He){throw ve(He)&&409===He.customData.serverCode?yield at(W.appConfig):yield Qn(W.appConfig,{fid:ae.fid,registrationStatus:0}),He}})).apply(this,arguments)}function rt(W){return ft.apply(this,arguments)}function ft(){return(ft=(0,d.Z)(function*(W){let ae=yield Kt(W.appConfig);for(;1===ae.registrationStatus;)yield Tt(100),ae=yield Kt(W.appConfig);if(0===ae.registrationStatus){const{installationEntry:He,registrationPromise:It}=yield _t(W);return It||He}return ae})).apply(this,arguments)}function Kt(W){return xe(W,ae=>{if(!ae)throw qe.create("installation-not-found");return Pn(ae)})}function Pn(W){return function yn(W){return 1===W.registrationStatus&&W.registrationTime+1e4<Date.now()}(W)?{fid:W.fid,registrationStatus:0}:W}function Mn(W,ae){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,d.Z)(function*({appConfig:W,heartbeatServiceProvider:ae},He){const It=On(W,He),nn=De(W,He),mn=ae.getImmediate({optional:!0});if(mn){const dr=yield mn.getHeartbeatsHeader();dr&&nn.append("x-firebase-client",dr)}const Yn={method:"POST",headers:nn,body:JSON.stringify({installation:{sdkVersion:we,appId:W.appId}})},si=yield je(()=>fetch(It,Yn));if(si.ok)return dt(yield si.json());throw yield gt("Generate Auth Token",si)})).apply(this,arguments)}function On(W,{fid:ae}){return`${ie(W)}/${ae}/authTokens:generate`}function Nt(W){return ir.apply(this,arguments)}function ir(){return(ir=(0,d.Z)(function*(W,ae=!1){let He;const It=yield xe(W.appConfig,mn=>{if(!yt(mn))throw qe.create("not-registered");const Zt=mn.authToken;if(!ae&&Pt(Zt))return mn;if(1===Zt.requestStatus)return He=sn(W,ae),mn;{if(!navigator.onLine)throw qe.create("app-offline");const Yn=an(mn);return He=st(W,Yn),Yn}});return He?yield He:It.authToken})).apply(this,arguments)}function sn(W,ae){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,d.Z)(function*(W,ae){let He=yield vn(W.appConfig);for(;1===He.authToken.requestStatus;)yield Tt(100),He=yield vn(W.appConfig);const It=He.authToken;return 0===It.requestStatus?Nt(W,ae):It})).apply(this,arguments)}function vn(W){return xe(W,ae=>{if(!yt(ae))throw qe.create("not-registered");return function Vn(W){return 1===W.requestStatus&&W.requestTime+1e4<Date.now()}(ae.authToken)?Object.assign(Object.assign({},ae),{authToken:{requestStatus:0}}):ae})}function st(W,ae){return Se.apply(this,arguments)}function Se(){return(Se=(0,d.Z)(function*(W,ae){try{const He=yield Mn(W,ae),It=Object.assign(Object.assign({},ae),{authToken:He});return yield Qn(W.appConfig,It),He}catch(He){if(!ve(He)||401!==He.customData.serverCode&&404!==He.customData.serverCode){const It=Object.assign(Object.assign({},ae),{authToken:{requestStatus:0}});yield Qn(W.appConfig,It)}else yield at(W.appConfig);throw He}})).apply(this,arguments)}function yt(W){return void 0!==W&&2===W.registrationStatus}function Pt(W){return 2===W.requestStatus&&!function on(W){const ae=Date.now();return ae<W.creationTime||W.creationTime+W.expiresIn<ae+36e5}(W)}function an(W){const ae={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},W),{authToken:ae})}function B(){return(B=(0,d.Z)(function*(W){const ae=W,{installationEntry:He,registrationPromise:It}=yield _t(ae);return It?It.catch(console.error):Nt(ae).catch(console.error),He.fid})).apply(this,arguments)}function S(){return(S=(0,d.Z)(function*(W,ae=!1){const He=W;return yield A(He),(yield Nt(He,ae)).token})).apply(this,arguments)}function A(W){return L.apply(this,arguments)}function L(){return(L=(0,d.Z)(function*(W){const{registrationPromise:ae}=yield _t(W);ae&&(yield ae)})).apply(this,arguments)}function un(W){return qe.create("missing-app-config-values",{valueName:W})}const Y="installations",ut=W=>{const ae=W.getProvider("app").getImmediate(),He=function Vt(W){if(!W||!W.options)throw un("App Configuration");if(!W.name)throw un("App Name");const ae=["projectId","apiKey","appId"];for(const He of ae)if(!W.options[He])throw un(He);return{appName:W.name,projectId:W.options.projectId,apiKey:W.options.apiKey,appId:W.options.appId}}(ae);return{app:ae,appConfig:He,heartbeatServiceProvider:(0,U._getProvider)(ae,"heartbeat"),_delete:()=>Promise.resolve()}},wt=W=>{const ae=W.getProvider("app").getImmediate(),He=(0,U._getProvider)(ae,Y).getImmediate();return{getId:()=>function $(W){return B.apply(this,arguments)}(He),getToken:nn=>function N(W){return S.apply(this,arguments)}(He,nn)}};(function nt(){(0,U._registerComponent)(new k.wA(Y,ut,"PUBLIC")),(0,U._registerComponent)(new k.wA("installations-internal",wt,"PRIVATE"))})(),(0,U.registerVersion)(me,"0.6.4"),(0,U.registerVersion)(me,"0.6.4","esm2017")},1877:(At,Ne,O)=>{O.d(Ne,{Am:()=>we,Ub:()=>ce,Yd:()=>oe,in:()=>U});const d=[];var U=(()=>{return(j=U||(U={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",U;var j})();const k={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},ee=U.INFO,Ee={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},me=(j,H,...K)=>{if(H<j.logLevel)return;const ke=(new Date).toISOString(),Oe=Ee[H];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Oe](`[${ke}]  ${j.name}:`,...K)};class oe{constructor(H){this.name=H,this._logLevel=ee,this._logHandler=me,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in U))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?k[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...H),this._logHandler(this,U.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...H),this._logHandler(this,U.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,U.INFO,...H),this._logHandler(this,U.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,U.WARN,...H),this._logHandler(this,U.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...H),this._logHandler(this,U.ERROR,...H)}}function ce(j){d.forEach(H=>{H.setLogLevel(j)})}function we(j,H){for(const K of d){let ke=null;H&&H.level&&(ke=k[H.level]),K.userLogHandler=null===j?null:(Oe,ye,...qe)=>{const ve=qe.map(ie=>{if(null==ie)return null;if("string"==typeof ie)return ie;if("number"==typeof ie||"boolean"==typeof ie)return ie.toString();if(ie instanceof Error)return ie.message;try{return JSON.stringify(ie)}catch{return null}}).filter(ie=>ie).join(" ");ye>=(ke??Oe.logLevel)&&j({level:U[ye].toLowerCase(),message:ve,args:qe,type:Oe.name})}}}},3008:(At,Ne,O)=>{O.d(Ne,{IH:()=>ir,Gb:()=>Zn,Kz:()=>an,Iv:()=>Se});var d=O(5861),U=O(9681),k=O(1877),ee=O(2090),Ee=O(4859);O(2833);const oe="analytics",ce="firebase_id",H="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",K="https://www.googletagmanager.com/gtag/js",ke=new k.Yd("@firebase/analytics"),ye=new ee.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function qe(S){if(!S.startsWith(K)){const A=ye.create("invalid-gtag-resource",{gtagURL:S});return ke.warn(A.message),""}return S}function ve(S){return Promise.all(S.map(A=>A.catch(L=>L)))}function dt(S,A){const L=function ie(S,A){let L;return window.trustedTypes&&(L=window.trustedTypes.createPolicy(S,A)),L}("firebase-js-sdk-policy",{createScriptURL:qe}),X=document.createElement("script"),de=`${K}?l=${S}&id=${A}`;X.src=L?L?.createScriptURL(de):de,X.async=!0,document.head.appendChild(X)}function Me(S,A,L,X,de,Ue){return be.apply(this,arguments)}function be(){return(be=(0,d.Z)(function*(S,A,L,X,de,Ue){const re=X[de];try{if(re)yield A[re];else{const Ze=(yield ve(L)).find(Ht=>Ht.measurementId===de);Ze&&(yield A[Ze.appId])}}catch($e){ke.error($e)}S("config",de,Ue)})).apply(this,arguments)}function De(S,A,L,X,de){return je.apply(this,arguments)}function je(){return(je=(0,d.Z)(function*(S,A,L,X,de){try{let Ue=[];if(de&&de.send_to){let re=de.send_to;Array.isArray(re)||(re=[re]);const $e=yield ve(L);for(const Ze of re){const Ht=$e.find(un=>un.measurementId===Ze),Vt=Ht&&A[Ht.appId];if(!Vt){Ue=[];break}Ue.push(Vt)}}0===Ue.length&&(Ue=Object.values(A)),yield Promise.all(Ue),S("event",X,de||{})}catch(Ue){ke.error(Ue)}})).apply(this,arguments)}function fe(S){const A=window.document.getElementsByTagName("script");for(const L of Object.values(A))if(L.src&&L.src.includes(K)&&L.src.includes(S))return L;return null}const Xe=new class Tt{constructor(A={},L=1e3){this.throttleMetadata=A,this.intervalMillis=L}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,L){this.throttleMetadata[A]=L}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function se(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function pe(S){return _e.apply(this,arguments)}function _e(){return(_e=(0,d.Z)(function*(S){var A;const{appId:L,apiKey:X}=S,de={method:"GET",headers:se(X)},Ue=H.replace("{app-id}",L),re=yield fetch(Ue,de);if(200!==re.status&&304!==re.status){let $e="";try{const Ze=yield re.json();null!==(A=Ze.error)&&void 0!==A&&A.message&&($e=Ze.error.message)}catch{}throw ye.create("config-fetch-failed",{httpStatus:re.status,responseMessage:$e})}return re.json()})).apply(this,arguments)}function Pe(S){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,d.Z)(function*(S,A=Xe,L){const{appId:X,apiKey:de,measurementId:Ue}=S.options;if(!X)throw ye.create("no-app-id");if(!de){if(Ue)return{measurementId:Ue,appId:X};throw ye.create("no-api-key")}const re=A.getThrottleMetadata(X)||{backoffCount:0,throttleEndTimeMillis:Date.now()},$e=new tt;return setTimeout((0,d.Z)(function*(){$e.abort()}),void 0!==L?L:6e4),Te({appId:X,apiKey:de,measurementId:Ue},re,$e,A)})).apply(this,arguments)}function Te(S,A,L){return et.apply(this,arguments)}function et(){return(et=(0,d.Z)(function*(S,{throttleEndTimeMillis:A,backoffCount:L},X,de=Xe){var Ue;const{appId:re,measurementId:$e}=S;try{yield Et(X,A)}catch(Ze){if($e)return ke.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${$e} provided in the "measurementId" field in the local Firebase config. [${Ze?.message}]`),{appId:re,measurementId:$e};throw Ze}try{const Ze=yield pe(S);return de.deleteThrottleMetadata(re),Ze}catch(Ze){const Ht=Ze;if(!kt(Ht)){if(de.deleteThrottleMetadata(re),$e)return ke.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${$e} provided in the "measurementId" field in the local Firebase config. [${Ht?.message}]`),{appId:re,measurementId:$e};throw Ze}const Vt=503===Number(null===(Ue=Ht?.customData)||void 0===Ue?void 0:Ue.httpStatus)?(0,ee.$s)(L,de.intervalMillis,30):(0,ee.$s)(L,de.intervalMillis),un={throttleEndTimeMillis:Date.now()+Vt,backoffCount:L+1};return de.setThrottleMetadata(re,un),ke.debug(`Calling attemptFetch again in ${Vt} millis`),Te(S,un,X,de)}})).apply(this,arguments)}function Et(S,A){return new Promise((L,X)=>{const de=Math.max(A-Date.now(),0),Ue=setTimeout(L,de);S.addEventListener(()=>{clearTimeout(Ue),X(ye.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function kt(S){if(!(S instanceof ee.ZR&&S.customData))return!1;const A=Number(S.customData.httpStatus);return 429===A||500===A||503===A||504===A}class tt{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}let Ft,at;function Ke(){return(Ke=(0,d.Z)(function*(S,A,L,X,de){if(de&&de.global)S("event",L,X);else{const Ue=yield A;S("event",L,Object.assign(Object.assign({},X),{send_to:Ue}))}})).apply(this,arguments)}function qt(){return(qt=(0,d.Z)(function*(S,A,L,X){if(X&&X.global)return S("set",{user_id:L}),Promise.resolve();S("config",yield A,{update:!0,user_id:L})})).apply(this,arguments)}function Z(S){at=S}function xe(S){Ft=S}function ot(){return _t.apply(this,arguments)}function _t(){return(_t=(0,d.Z)(function*(){if(!(0,ee.hl)())return ke.warn(ye.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ee.eu)()}catch(S){return ke.warn(ye.create("indexeddb-unavailable",{errorInfo:S?.toString()}).message),!1}return!0})).apply(this,arguments)}function pn(){return(pn=(0,d.Z)(function*(S,A,L,X,de,Ue,re){var $e;const Ze=Pe(S);Ze.then(te=>{L[te.measurementId]=te.appId,S.options.measurementId&&te.measurementId!==S.options.measurementId&&ke.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${te.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(te=>ke.error(te)),A.push(Ze);const Ht=ot().then(te=>{if(te)return X.getId()}),[Vt,un]=yield Promise.all([Ze,Ht]);fe(Ue)||dt(Ue,Vt.measurementId),at&&(de("consent","default",at),Z(void 0)),de("js",new Date);const Y=null!==($e=re?.config)&&void 0!==$e?$e:{};return Y.origin="firebase",Y.update=!0,null!=un&&(Y[ce]=un),de("config",Vt.measurementId,Y),Ft&&(de("set",Ft),xe(void 0)),Vt.measurementId})).apply(this,arguments)}class tn{constructor(A){this.app=A}_delete(){return delete Xt[this.app.options.appId],Promise.resolve()}}let Xt={},Mt=[];const rt={};let Pn,yn,ft="dataLayer",Mn=!1;function Nt(S,A,L){!function On(){const S=[];if((0,ee.ru)()&&S.push("This is a browser extension environment."),(0,ee.zI)()||S.push("Cookies are not available."),S.length>0){const A=S.map((X,de)=>`(${de+1}) ${X}`).join(" "),L=ye.create("invalid-analytics-context",{errorInfo:A});ke.warn(L.message)}}();const X=S.options.appId;if(!X)throw ye.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw ye.create("no-api-key");ke.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xt[X])throw ye.create("already-exists",{id:X});if(!Mn){!function gt(S){let A=[];Array.isArray(window[S])?A=window[S]:window[S]=A}(ft);const{wrappedGtag:Ue,gtagCore:re}=function z(S,A,L,X,de){let Ue=function(...re){window[X].push(arguments)};return window[de]&&"function"==typeof window[de]&&(Ue=window[de]),window[de]=function We(S,A,L,X){function Ue(){return(Ue=(0,d.Z)(function*(re,$e,Ze){try{"event"===re?yield De(S,A,L,$e,Ze):"config"===re?yield Me(S,A,L,X,$e,Ze):"consent"===re?S("consent","update",Ze):S("set",$e)}catch(Ht){ke.error(Ht)}})).apply(this,arguments)}return function de(re,$e,Ze){return Ue.apply(this,arguments)}}(Ue,S,A,L),{gtagCore:Ue,wrappedGtag:window[de]}}(Xt,Mt,rt,ft,"gtag");yn=Ue,Pn=re,Mn=!0}return Xt[X]=function Jt(S,A,L,X,de,Ue,re){return pn.apply(this,arguments)}(S,Mt,rt,A,Pn,ft,L),new tn(S)}function ir(S=(0,U.getApp)()){S=(0,ee.m9)(S);const A=(0,U._getProvider)(S,oe);return A.isInitialized()?A.getImmediate():function sn(S,A={}){const L=(0,U._getProvider)(S,oe);if(L.isInitialized()){const de=L.getImmediate();if((0,ee.vZ)(A,L.getOptions()))return de;throw ye.create("already-initialized")}return L.initialize({options:A})}(S)}function Zn(){return vn.apply(this,arguments)}function vn(){return(vn=(0,d.Z)(function*(){if((0,ee.ru)()||!(0,ee.zI)()||!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch{return!1}})).apply(this,arguments)}function Se(S,A,L){S=(0,ee.m9)(S),function en(S,A,L,X){return qt.apply(this,arguments)}(yn,Xt[S.app.options.appId],A,L).catch(X=>ke.error(X))}function an(S,A,L,X){S=(0,ee.m9)(S),function Fe(S,A,L,X,de){return Ke.apply(this,arguments)}(yn,Xt[S.app.options.appId],A,L,X).catch(de=>ke.error(de))}const $="@firebase/analytics",B="0.9.5";!function N(){(0,U._registerComponent)(new Ee.wA(oe,(A,{options:L})=>Nt(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),L),"PUBLIC")),(0,U._registerComponent)(new Ee.wA("analytics-internal",function S(A){try{const L=A.getProvider(oe).getImmediate();return{logEvent:(X,de,Ue)=>an(L,X,de,Ue)}}catch(L){throw ye.create("interop-component-reg-failed",{reason:L})}},"PRIVATE")),(0,U.registerVersion)($,B),(0,U.registerVersion)($,B,"esm2017")}()},259:(At,Ne,O)=>{O.d(Ne,{C6:()=>d.getApps,KN:()=>d.registerVersion,Mq:()=>d.getApp,ZF:()=>d.initializeApp});var d=O(9681);(0,d.registerVersion)("firebase","9.20.0","app")},9260:(At,Ne,O)=>{O.d(Ne,{Z:()=>d.Z});var d=O(3942);d.Z.registerVersion("firebase","9.20.0","app-compat")},9568:(At,Ne,O)=>{O.r(Ne);var d=O(5861),U=O(3942),k=O(8277),ee=O(2090),oe=(O(9681),O(1877),O(4859));function ce(){return window}function H(){return(H=(0,d.Z)(function*(N,S,A){var L;const{BuildInfo:X}=ce();(0,k.as)(S.sessionId,"AuthEvent did not contain a session ID");const de=yield ie(S.sessionId),Ue={};return(0,k.at)()?Ue.ibi=X.packageName:(0,k.au)()?Ue.apn=X.packageName:(0,k.av)(N,"operation-not-supported-in-this-environment"),X.displayName&&(Ue.appDisplayName=X.displayName),Ue.sessionId=de,(0,k.aw)(N,A,S.type,void 0,null!==(L=S.eventId)&&void 0!==L?L:void 0,Ue)})).apply(this,arguments)}function ke(){return(ke=(0,d.Z)(function*(N){const{BuildInfo:S}=ce(),A={};(0,k.at)()?A.iosBundleId=S.packageName:(0,k.au)()?A.androidPackageName=S.packageName:(0,k.av)(N,"operation-not-supported-in-this-environment"),yield(0,k.ax)(N,A)})).apply(this,arguments)}function qe(){return(qe=(0,d.Z)(function*(N,S,A){const{cordova:L}=ce();let X=()=>{};try{yield new Promise((de,Ue)=>{let re=null;function $e(){var Vt;de();const un=null===(Vt=L.plugins.browsertab)||void 0===Vt?void 0:Vt.close;"function"==typeof un&&un(),"function"==typeof A?.close&&A.close()}function Ze(){re||(re=window.setTimeout(()=>{Ue((0,k.az)(N,"redirect-cancelled-by-user"))},2e3))}function Ht(){"visible"===document?.visibilityState&&Ze()}S.addPassiveListener($e),document.addEventListener("resume",Ze,!1),(0,k.au)()&&document.addEventListener("visibilitychange",Ht,!1),X=()=>{S.removePassiveListener($e),document.removeEventListener("resume",Ze,!1),document.removeEventListener("visibilitychange",Ht,!1),re&&window.clearTimeout(re)}})}finally{X()}})).apply(this,arguments)}function ie(N){return dt.apply(this,arguments)}function dt(){return(dt=(0,d.Z)(function*(N){const S=gt(N),A=yield crypto.subtle.digest("SHA-256",S);return Array.from(new Uint8Array(A)).map(X=>X.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function gt(N){if((0,k.as)(/[0-9a-zA-Z]+/.test(N),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(N);const S=new ArrayBuffer(N.length),A=new Uint8Array(S);for(let L=0;L<N.length;L++)A[L]=N.charCodeAt(L);return A}class be extends k.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(S=>{this.resolveInialized=S})}addPassiveListener(S){this.passiveListeners.add(S)}removePassiveListener(S){this.passiveListeners.delete(S)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(S){return this.resolveInialized(),this.passiveListeners.forEach(A=>A(S)),super.onEvent(S)}initialized(){var S=this;return(0,d.Z)(function*(){yield S.initPromise})()}}function We(N){return z.apply(this,arguments)}function z(){return(z=(0,d.Z)(function*(N){const S=yield Ye()._get(Tt(N));return S&&(yield Ye()._remove(Tt(N))),S})).apply(this,arguments)}function Ge(){const N=[],S="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<20;A++){const L=Math.floor(Math.random()*S.length);N.push(S.charAt(L))}return N.join("")}function Ye(){return(0,k.aC)(k.b)}function Tt(N){return(0,k.aD)("authEvent",N.config.apiKey,N.name)}function pe(N){if(!N?.includes("?"))return{};const[S,...A]=N.split("?");return(0,ee.zd)(A.join("?"))}function Te(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.az)("no-auth-event")}}function Ft(){var N;return(null===(N=self?.location)||void 0===N?void 0:N.protocol)||null}function Ke(N=(0,ee.z$)()){return!("file:"!==Ft()&&"ionic:"!==Ft()&&"capacitor:"!==Ft()||!N.toLowerCase().match(/iphone|ipad|ipod|android/))}function Rn(){try{const N=self.localStorage,S=k.aL();if(N)return N.setItem(S,"1"),N.removeItem(S),!function qt(N=(0,ee.z$)()){return function jt(){return(0,ee.w1)()&&11===document?.documentMode}()||function en(N=(0,ee.z$)()){return/Edge\/\d+/.test(N)}(N)}()||(0,ee.hl)()}catch{return An()&&(0,ee.hl)()}return!1}function An(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qn(){return(function Fe(){return"http:"===Ft()||"https:"===Ft()}()||(0,ee.ru)()||Ke())&&!function mt(){return(0,ee.b$)()||(0,ee.UG)()}()&&Rn()&&!An()}function Wn(){return Ke()&&typeof document<"u"}function Z(){return(Z=(0,d.Z)(function*(){return!!Wn()&&new Promise(N=>{const S=setTimeout(()=>{N(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(S),N(!0)})})})).apply(this,arguments)}const ot={LOCAL:"local",NONE:"none",SESSION:"session"},_t=k.aA,Jt="persistence";function tn(N){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,d.Z)(function*(N){yield N._initializationPromise;const S=rt(),A=k.aD(Jt,N.config.apiKey,N.name);S&&S.setItem(A,N._getPersistence())})).apply(this,arguments)}function rt(){var N;try{return(null===(N=function xe(){return typeof window<"u"?window:null}())||void 0===N?void 0:N.sessionStorage)||null}catch{return null}}const ft=k.aA;class Kt{constructor(){this.browserResolver=k.aC(k.k),this.cordovaResolver=k.aC(class Pe{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aE,this._overrideRedirectResult=k.aF}_initialize(S){var A=this;return(0,d.Z)(function*(){const L=S._key();let X=A.eventManagers.get(L);return X||(X=new be(S),A.eventManagers.set(L,X),A.attachCallbackListeners(S,X)),X})()}_openPopup(S){(0,k.av)(S,"operation-not-supported-in-this-environment")}_openRedirect(S,A,L,X){var de=this;return(0,d.Z)(function*(){!function ve(N){var S,A,L,X,de,Ue,re,$e,Ze,Ht;const Vt=ce();(0,k.aA)("function"==typeof(null===(S=Vt?.universalLinks)||void 0===S?void 0:S.subscribe),N,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.aA)(typeof(null===(A=Vt?.BuildInfo)||void 0===A?void 0:A.packageName)<"u",N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.aA)("function"==typeof(null===(de=null===(X=null===(L=Vt?.cordova)||void 0===L?void 0:L.plugins)||void 0===X?void 0:X.browsertab)||void 0===de?void 0:de.openUrl),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aA)("function"==typeof(null===($e=null===(re=null===(Ue=Vt?.cordova)||void 0===Ue?void 0:Ue.plugins)||void 0===re?void 0:re.browsertab)||void 0===$e?void 0:$e.isAvailable),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aA)("function"==typeof(null===(Ht=null===(Ze=Vt?.cordova)||void 0===Ze?void 0:Ze.InAppBrowser)||void 0===Ht?void 0:Ht.open),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(S);const Ue=yield de._initialize(S);yield Ue.initialized(),Ue.resetRedirect(),(0,k.aG)(),yield de._originValidation(S);const re=function De(N,S,A=null){return{type:S,eventId:A,urlResponse:null,sessionId:Ge(),postBody:null,tenantId:N.tenantId,error:(0,k.az)(N,"no-auth-event")}}(S,L,X);yield function je(N,S){return Ye()._set(Tt(N),S)}(S,re);const $e=yield function j(N,S,A){return H.apply(this,arguments)}(S,re,A),Ze=yield function Oe(N){const{cordova:S}=ce();return new Promise(A=>{S.plugins.browsertab.isAvailable(L=>{let X=null;L?S.plugins.browsertab.openUrl(N):X=S.InAppBrowser.open(N,(0,k.ay)()?"_blank":"_system","location=yes"),A(X)})})}($e);return function ye(N,S,A){return qe.apply(this,arguments)}(S,Ue,Ze)})()}_isIframeWebStorageSupported(S,A){throw new Error("Method not implemented.")}_originValidation(S){const A=S._key();return this.originValidationPromises[A]||(this.originValidationPromises[A]=function K(N){return ke.apply(this,arguments)}(S)),this.originValidationPromises[A]}attachCallbackListeners(S,A){const{universalLinks:L,handleOpenURL:X,BuildInfo:de}=ce(),Ue=setTimeout((0,d.Z)(function*(){yield We(S),A.onEvent(Te())}),500),re=function(){var Ht=(0,d.Z)(function*(Vt){clearTimeout(Ue);const un=yield We(S);let Y=null;un&&Vt?.url&&(Y=function fe(N,S){var A,L;const X=function se(N){const S=pe(N),A=S.link?decodeURIComponent(S.link):void 0,L=pe(A).link,X=S.deep_link_id?decodeURIComponent(S.deep_link_id):void 0;return pe(X).link||X||L||A||N}(S);if(X.includes("/__/auth/callback")){const de=pe(X),Ue=de.firebaseError?function Xe(N){try{return JSON.parse(N)}catch{return null}}(decodeURIComponent(de.firebaseError)):null,re=null===(L=null===(A=Ue?.code)||void 0===A?void 0:A.split("auth/"))||void 0===L?void 0:L[1],$e=re?(0,k.az)(re):null;return $e?{type:N.type,eventId:N.eventId,tenantId:N.tenantId,error:$e,urlResponse:null,sessionId:null,postBody:null}:{type:N.type,eventId:N.eventId,tenantId:N.tenantId,sessionId:N.sessionId,urlResponse:X,postBody:null}}return null}(un,Vt.url)),A.onEvent(Y||Te())});return function(un){return Ht.apply(this,arguments)}}();typeof L<"u"&&"function"==typeof L.subscribe&&L.subscribe(null,re);const $e=X,Ze=`${de.packageName.toLowerCase()}://`;ce().handleOpenURL=function(){var Ht=(0,d.Z)(function*(Vt){if(Vt.toLowerCase().startsWith(Ze)&&re({url:Vt}),"function"==typeof $e)try{$e(Vt)}catch(un){console.error(un)}});return function(Vt){return Ht.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aE,this._overrideRedirectResult=k.aF}_initialize(S){var A=this;return(0,d.Z)(function*(){return yield A.selectUnderlyingResolver(),A.assertedUnderlyingResolver._initialize(S)})()}_openPopup(S,A,L,X){var de=this;return(0,d.Z)(function*(){return yield de.selectUnderlyingResolver(),de.assertedUnderlyingResolver._openPopup(S,A,L,X)})()}_openRedirect(S,A,L,X){var de=this;return(0,d.Z)(function*(){return yield de.selectUnderlyingResolver(),de.assertedUnderlyingResolver._openRedirect(S,A,L,X)})()}_isIframeWebStorageSupported(S,A){this.assertedUnderlyingResolver._isIframeWebStorageSupported(S,A)}_originValidation(S){return this.assertedUnderlyingResolver._originValidation(S)}get _shouldInitProactively(){return Wn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ft(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var S=this;return(0,d.Z)(function*(){if(S.underlyingResolver)return;const A=yield function at(){return Z.apply(this,arguments)}();S.underlyingResolver=A?S.cordovaResolver:S.browserResolver})()}}function Pn(N){return N.unwrap()}function Mn(N){return On(N)}function On(N){const{_tokenResponse:S}=N instanceof ee.ZR?N.customData:N;if(!S)return null;if(!(N instanceof ee.ZR)&&"temporaryProof"in S&&"phoneNumber"in S)return k.P.credentialFromResult(N);const A=S.providerId;if(!A||A===k.p.PASSWORD)return null;let L;switch(A){case k.p.GOOGLE:L=k.V;break;case k.p.FACEBOOK:L=k.U;break;case k.p.GITHUB:L=k.W;break;case k.p.TWITTER:L=k.Z;break;default:const{oauthIdToken:X,oauthAccessToken:de,oauthTokenSecret:Ue,pendingToken:re,nonce:$e}=S;return de||Ue||X||re?re?A.startsWith("saml.")?k.aO._create(A,re):k.L._fromParams({providerId:A,signInMethod:A,pendingToken:re,idToken:X,accessToken:de}):new k.X(A).credential({idToken:X,accessToken:de,rawNonce:$e}):null}return N instanceof ee.ZR?L.credentialFromError(N):L.credentialFromResult(N)}function Nt(N,S){return S.catch(A=>{throw A instanceof ee.ZR&&function Lt(N,S){var A;const L=null===(A=S.customData)||void 0===A?void 0:A._tokenResponse;if("auth/multi-factor-auth-required"===S?.code)S.resolver=new Zn(N,k.aq(N,S));else if(L){const X=On(S),de=S;X&&(de.credential=X,de.tenantId=L.tenantId||void 0,de.email=L.email||void 0,de.phoneNumber=L.phoneNumber||void 0)}}(N,A),A}).then(A=>{const X=A.user;return{operationType:A.operationType,credential:Mn(A),additionalUserInfo:k.ao(A),user:vn.getOrCreate(X)}})}function ir(N,S){return sn.apply(this,arguments)}function sn(){return(sn=(0,d.Z)(function*(N,S){const A=yield S;return{verificationId:A.verificationId,confirm:L=>Nt(N,A.confirm(L))}})).apply(this,arguments)}class Zn{constructor(S,A){this.resolver=A,this.auth=function yn(N){return N.wrapped()}(S)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(S){return Nt(Pn(this.auth),this.resolver.resolveSignIn(S))}}class vn{constructor(S){this._delegate=S,this.multiFactor=k.ar(S)}static getOrCreate(S){return vn.USER_MAP.has(S)||vn.USER_MAP.set(S,new vn(S)),vn.USER_MAP.get(S)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(S){return this._delegate.getIdTokenResult(S)}getIdToken(S){return this._delegate.getIdToken(S)}linkAndRetrieveDataWithCredential(S){return this.linkWithCredential(S)}linkWithCredential(S){var A=this;return(0,d.Z)(function*(){return Nt(A.auth,k.a0(A._delegate,S))})()}linkWithPhoneNumber(S,A){var L=this;return(0,d.Z)(function*(){return ir(L.auth,k.l(L._delegate,S,A))})()}linkWithPopup(S){var A=this;return(0,d.Z)(function*(){return Nt(A.auth,k.d(A._delegate,S,Kt))})()}linkWithRedirect(S){var A=this;return(0,d.Z)(function*(){return yield tn(k.aH(A.auth)),k.g(A._delegate,S,Kt)})()}reauthenticateAndRetrieveDataWithCredential(S){return this.reauthenticateWithCredential(S)}reauthenticateWithCredential(S){var A=this;return(0,d.Z)(function*(){return Nt(A.auth,k.a1(A._delegate,S))})()}reauthenticateWithPhoneNumber(S,A){return ir(this.auth,k.r(this._delegate,S,A))}reauthenticateWithPopup(S){return Nt(this.auth,k.e(this._delegate,S,Kt))}reauthenticateWithRedirect(S){var A=this;return(0,d.Z)(function*(){return yield tn(k.aH(A.auth)),k.h(A._delegate,S,Kt)})()}sendEmailVerification(S){return k.ae(this._delegate,S)}unlink(S){var A=this;return(0,d.Z)(function*(){return yield k.an(A._delegate,S),A})()}updateEmail(S){return k.aj(this._delegate,S)}updatePassword(S){return k.ak(this._delegate,S)}updatePhoneNumber(S){return k.u(this._delegate,S)}updateProfile(S){return k.ai(this._delegate,S)}verifyBeforeUpdateEmail(S,A){return k.af(this._delegate,S,A)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}vn.USER_MAP=new WeakMap;const st=k.aA;let Se=(()=>{class N{constructor(A,L){if(this.app=A,L.isInitialized())return this._delegate=L.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:X}=A.options;st(X,"invalid-api-key",{appName:A.name}),st(X,"invalid-api-key",{appName:A.name});const de=typeof window<"u"?Kt:void 0;this._delegate=L.initialize({options:{persistence:Pt(X,A.name),popupRedirectResolver:de}}),this._delegate._updateErrorMap(k.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?vn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(A){this._delegate.languageCode=A}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(A){this._delegate.tenantId=A}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(A,L){k.I(this._delegate,A,L)}applyActionCode(A){return k.a5(this._delegate,A)}checkActionCode(A){return k.a6(this._delegate,A)}confirmPasswordReset(A,L){return k.a4(this._delegate,A,L)}createUserWithEmailAndPassword(A,L){var X=this;return(0,d.Z)(function*(){return Nt(X._delegate,k.a8(X._delegate,A,L))})()}fetchProvidersForEmail(A){return this.fetchSignInMethodsForEmail(A)}fetchSignInMethodsForEmail(A){return k.ad(this._delegate,A)}isSignInWithEmailLink(A){return k.ab(this._delegate,A)}getRedirectResult(){var A=this;return(0,d.Z)(function*(){st(Qn(),A._delegate,"operation-not-supported-in-this-environment");const L=yield k.j(A._delegate,Kt);return L?Nt(A._delegate,Promise.resolve(L)):{credential:null,user:null}})()}addFrameworkForLogging(A){!function et(N,S){(0,k.aH)(N)._logFramework(S)}(this._delegate,A)}onAuthStateChanged(A,L,X){const{next:de,error:Ue,complete:re}=yt(A,L,X);return this._delegate.onAuthStateChanged(de,Ue,re)}onIdTokenChanged(A,L,X){const{next:de,error:Ue,complete:re}=yt(A,L,X);return this._delegate.onIdTokenChanged(de,Ue,re)}sendSignInLinkToEmail(A,L){return k.aa(this._delegate,A,L)}sendPasswordResetEmail(A,L){return k.a3(this._delegate,A,L||void 0)}setPersistence(A){var L=this;return(0,d.Z)(function*(){let X;switch(function pn(N,S){_t(Object.values(ot).includes(S),N,"invalid-persistence-type"),(0,ee.b$)()?_t(S!==ot.SESSION,N,"unsupported-persistence-type"):(0,ee.UG)()?_t(S===ot.NONE,N,"unsupported-persistence-type"):An()?_t(S===ot.NONE||S===ot.LOCAL&&(0,ee.hl)(),N,"unsupported-persistence-type"):_t(S===ot.NONE||Rn(),N,"unsupported-persistence-type")}(L._delegate,A),A){case ot.SESSION:X=k.a;break;case ot.LOCAL:X=(yield k.aC(k.i)._isAvailable())?k.i:k.b;break;case ot.NONE:X=k.N;break;default:return k.av("argument-error",{appName:L._delegate.name})}return L._delegate.setPersistence(X)})()}signInAndRetrieveDataWithCredential(A){return this.signInWithCredential(A)}signInAnonymously(){return Nt(this._delegate,k._(this._delegate))}signInWithCredential(A){return Nt(this._delegate,k.$(this._delegate,A))}signInWithCustomToken(A){return Nt(this._delegate,k.a2(this._delegate,A))}signInWithEmailAndPassword(A,L){return Nt(this._delegate,k.a9(this._delegate,A,L))}signInWithEmailLink(A,L){return Nt(this._delegate,k.ac(this._delegate,A,L))}signInWithPhoneNumber(A,L){return ir(this._delegate,k.s(this._delegate,A,L))}signInWithPopup(A){var L=this;return(0,d.Z)(function*(){return st(Qn(),L._delegate,"operation-not-supported-in-this-environment"),Nt(L._delegate,k.c(L._delegate,A,Kt))})()}signInWithRedirect(A){var L=this;return(0,d.Z)(function*(){return st(Qn(),L._delegate,"operation-not-supported-in-this-environment"),yield tn(L._delegate),k.f(L._delegate,A,Kt)})()}updateCurrentUser(A){return this._delegate.updateCurrentUser(A)}verifyPasswordResetCode(A){return k.a7(this._delegate,A)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return N.Persistence=ot,N})();function yt(N,S,A){let L=N;"function"!=typeof N&&({next:L,error:S,complete:A}=N);const X=L;return{next:Ue=>X(Ue&&vn.getOrCreate(Ue)),error:S,complete:A}}function Pt(N,S){const A=function Mt(N,S){const A=rt();if(!A)return[];const L=k.aD(Jt,N,S);switch(A.getItem(L)){case ot.NONE:return[k.N];case ot.LOCAL:return[k.i,k.a];case ot.SESSION:return[k.a];default:return[]}}(N,S);if(typeof self<"u"&&!A.includes(k.i)&&A.push(k.i),typeof window<"u")for(const L of[k.b,k.a])A.includes(L)||A.push(L);return A.includes(k.N)||A.push(k.N),A}class on{constructor(){this.providerId="phone",this._delegate=new k.P(Pn(U.Z.auth()))}static credential(S,A){return k.P.credential(S,A)}verifyPhoneNumber(S,A){return this._delegate.verifyPhoneNumber(S,A)}unwrap(){return this._delegate}}on.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,on.PROVIDER_ID=k.P.PROVIDER_ID;const an=k.aA;class Vn{constructor(S,A,L=U.Z.app()){var X;an(null===(X=L.options)||void 0===X?void 0:X.apiKey,"invalid-api-key",{appName:L.name}),this._delegate=new k.R(S,A,L.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function B(N){N.INTERNAL.registerComponent(new oe.wA("auth-compat",S=>{const A=S.getProvider("app-compat").getImmediate(),L=S.getProvider("auth");return new Se(A,L)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.Q,FacebookAuthProvider:k.U,GithubAuthProvider:k.W,GoogleAuthProvider:k.V,OAuthProvider:k.X,SAMLAuthProvider:k.Y,PhoneAuthProvider:on,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:Vn,TwitterAuthProvider:k.Z,Auth:Se,AuthCredential:k.J,Error:ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),N.registerVersion("@firebase/auth-compat","0.4.0")}(U.Z)},751:(At,Ne,O)=>{O.d(Ne,{KL:()=>$e,Gb:()=>L});var d=O(5861),k=(O(2833),O(4859)),ee=O(8766),Ee=O(2090),me=O(9681);const oe="/firebase-messaging-sw.js",ce="/firebase-cloud-messaging-push-scope",we="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",H="google.c.a.c_id",K="google.c.a.c_l",ke="google.c.a.ts",Oe="google.c.a.e";var qe=(()=>{return(Y=qe||(qe={})).PUSH_RECEIVED="push-received",Y.NOTIFICATION_CLICKED="notification-clicked",qe;var Y})();function ve(Y){const te=new Uint8Array(Y);return btoa(String.fromCharCode(...te)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ie(Y){const ut=(Y+"=".repeat((4-Y.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),wt=atob(ut),nt=new Uint8Array(wt.length);for(let W=0;W<wt.length;++W)nt[W]=wt.charCodeAt(W);return nt}const dt="fcm_token_details_db",Me="fcm_token_object_Store";function be(Y){return De.apply(this,arguments)}function De(){return De=(0,d.Z)(function*(Y){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(W=>W.name).includes(dt))return null;let te=null;return(yield(0,ee.X3)(dt,5,{upgrade:(wt=(0,d.Z)(function*(nt,W,ae,He){var It;if(W<2||!nt.objectStoreNames.contains(Me))return;const nn=He.objectStore(Me),mn=yield nn.index("fcmSenderId").get(Y);if(yield nn.clear(),mn)if(2===W){const Zt=mn;if(!Zt.auth||!Zt.p256dh||!Zt.endpoint)return;te={token:Zt.fcmToken,createTime:null!==(It=Zt.createTime)&&void 0!==It?It:Date.now(),subscriptionOptions:{auth:Zt.auth,p256dh:Zt.p256dh,endpoint:Zt.endpoint,swScope:Zt.swScope,vapidKey:"string"==typeof Zt.vapidKey?Zt.vapidKey:ve(Zt.vapidKey)}}}else if(3===W){const Zt=mn;te={token:Zt.fcmToken,createTime:Zt.createTime,subscriptionOptions:{auth:ve(Zt.auth),p256dh:ve(Zt.p256dh),endpoint:Zt.endpoint,swScope:Zt.swScope,vapidKey:ve(Zt.vapidKey)}}}else if(4===W){const Zt=mn;te={token:Zt.fcmToken,createTime:Zt.createTime,subscriptionOptions:{auth:ve(Zt.auth),p256dh:ve(Zt.p256dh),endpoint:Zt.endpoint,swScope:Zt.swScope,vapidKey:ve(Zt.vapidKey)}}}}),function(W,ae,He,It){return wt.apply(this,arguments)})})).close(),yield(0,ee.Lj)(dt),yield(0,ee.Lj)("fcm_vapid_details_db"),yield(0,ee.Lj)("undefined"),je(te)?te:null;var wt}),De.apply(this,arguments)}function je(Y){if(!Y||!Y.subscriptionOptions)return!1;const{subscriptionOptions:te}=Y;return"number"==typeof Y.createTime&&Y.createTime>0&&"string"==typeof Y.token&&Y.token.length>0&&"string"==typeof te.auth&&te.auth.length>0&&"string"==typeof te.p256dh&&te.p256dh.length>0&&"string"==typeof te.endpoint&&te.endpoint.length>0&&"string"==typeof te.swScope&&te.swScope.length>0&&"string"==typeof te.vapidKey&&te.vapidKey.length>0}const fe="firebase-messaging-store";let Ge=null;function Ye(){return Ge||(Ge=(0,ee.X3)("firebase-messaging-database",1,{upgrade:(Y,te)=>{0===te&&Y.createObjectStore(fe)}})),Ge}function Tt(Y){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,d.Z)(function*(Y){const te=Ae(Y),wt=yield(yield Ye()).transaction(fe).objectStore(fe).get(te);if(wt)return wt;{const nt=yield be(Y.appConfig.senderId);if(nt)return yield se(Y,nt),nt}})).apply(this,arguments)}function se(Y,te){return pe.apply(this,arguments)}function pe(){return(pe=(0,d.Z)(function*(Y,te){const ut=Ae(Y),nt=(yield Ye()).transaction(fe,"readwrite");return yield nt.objectStore(fe).put(te,ut),yield nt.done,te})).apply(this,arguments)}function _e(Y){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,d.Z)(function*(Y){const te=Ae(Y),wt=(yield Ye()).transaction(fe,"readwrite");yield wt.objectStore(fe).delete(te),yield wt.done})).apply(this,arguments)}function Ae({appConfig:Y}){return Y.appId}const et=new Ee.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Et(Y,te){return kt.apply(this,arguments)}function kt(){return(kt=(0,d.Z)(function*(Y,te){const ut=yield jt(Y),wt=qt(te),nt={method:"POST",headers:ut,body:JSON.stringify(wt)};let W;try{W=yield(yield fetch(mt(Y.appConfig),nt)).json()}catch(ae){throw et.create("token-subscribe-failed",{errorInfo:ae?.toString()})}if(W.error)throw et.create("token-subscribe-failed",{errorInfo:W.error.message});if(!W.token)throw et.create("token-subscribe-no-token");return W.token})).apply(this,arguments)}function tt(Y,te){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,d.Z)(function*(Y,te){const ut=yield jt(Y),wt=qt(te.subscriptionOptions),nt={method:"PATCH",headers:ut,body:JSON.stringify(wt)};let W;try{W=yield(yield fetch(`${mt(Y.appConfig)}/${te.token}`,nt)).json()}catch(ae){throw et.create("token-update-failed",{errorInfo:ae?.toString()})}if(W.error)throw et.create("token-update-failed",{errorInfo:W.error.message});if(!W.token)throw et.create("token-update-no-token");return W.token})).apply(this,arguments)}function Fe(Y,te){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,d.Z)(function*(Y,te){const wt={method:"DELETE",headers:yield jt(Y)};try{const W=yield(yield fetch(`${mt(Y.appConfig)}/${te}`,wt)).json();if(W.error)throw et.create("token-unsubscribe-failed",{errorInfo:W.error.message})}catch(nt){throw et.create("token-unsubscribe-failed",{errorInfo:nt?.toString()})}})).apply(this,arguments)}function mt({projectId:Y}){return`https://fcmregistrations.googleapis.com/v1/projects/${Y}/registrations`}function jt(Y){return en.apply(this,arguments)}function en(){return(en=(0,d.Z)(function*({appConfig:Y,installations:te}){const ut=yield te.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Y.apiKey,"x-goog-firebase-installations-auth":`FIS ${ut}`})})).apply(this,arguments)}function qt({p256dh:Y,auth:te,endpoint:ut,vapidKey:wt}){const nt={web:{endpoint:ut,auth:te,p256dh:Y}};return wt!==we&&(nt.web.applicationPubKey=wt),nt}const Rn=6048e5;function An(Y){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,d.Z)(function*(Y){const te=yield Jt(Y.swRegistration,Y.vapidKey),ut={vapidKey:Y.vapidKey,swScope:Y.swRegistration.scope,endpoint:te.endpoint,auth:ve(te.getKey("auth")),p256dh:ve(te.getKey("p256dh"))},wt=yield Tt(Y.firebaseDependencies);if(wt){if(tn(wt.subscriptionOptions,ut))return Date.now()>=wt.createTime+Rn?Z(Y,{token:wt.token,createTime:Date.now(),subscriptionOptions:ut}):wt.token;try{yield Fe(Y.firebaseDependencies,wt.token)}catch(nt){console.warn(nt)}return ot(Y.firebaseDependencies,ut)}return ot(Y.firebaseDependencies,ut)})).apply(this,arguments)}function Wn(Y){return at.apply(this,arguments)}function at(){return(at=(0,d.Z)(function*(Y){const te=yield Tt(Y.firebaseDependencies);te&&(yield Fe(Y.firebaseDependencies,te.token),yield _e(Y.firebaseDependencies));const ut=yield Y.swRegistration.pushManager.getSubscription();return!ut||ut.unsubscribe()})).apply(this,arguments)}function Z(Y,te){return xe.apply(this,arguments)}function xe(){return(xe=(0,d.Z)(function*(Y,te){try{const ut=yield tt(Y.firebaseDependencies,te),wt=Object.assign(Object.assign({},te),{token:ut,createTime:Date.now()});return yield se(Y.firebaseDependencies,wt),ut}catch(ut){throw yield Wn(Y),ut}})).apply(this,arguments)}function ot(Y,te){return _t.apply(this,arguments)}function _t(){return(_t=(0,d.Z)(function*(Y,te){const wt={token:yield Et(Y,te),createTime:Date.now(),subscriptionOptions:te};return yield se(Y,wt),wt.token})).apply(this,arguments)}function Jt(Y,te){return pn.apply(this,arguments)}function pn(){return(pn=(0,d.Z)(function*(Y,te){return(yield Y.pushManager.getSubscription())||Y.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ie(te)})})).apply(this,arguments)}function tn(Y,te){return te.vapidKey===Y.vapidKey&&te.endpoint===Y.endpoint&&te.auth===Y.auth&&te.p256dh===Y.p256dh}function Xt(Y){const te={from:Y.from,collapseKey:Y.collapse_key,messageId:Y.fcmMessageId};return function Mt(Y,te){if(!te.notification)return;Y.notification={};const ut=te.notification.title;ut&&(Y.notification.title=ut);const wt=te.notification.body;wt&&(Y.notification.body=wt);const nt=te.notification.image;nt&&(Y.notification.image=nt);const W=te.notification.icon;W&&(Y.notification.icon=W)}(te,Y),function rt(Y,te){!te.data||(Y.data=te.data)}(te,Y),function ft(Y,te){var ut,wt,nt,W,ae;if(!(te.fcmOptions||null!==(ut=te.notification)&&void 0!==ut&&ut.click_action))return;Y.fcmOptions={};const He=null!==(nt=null===(wt=te.fcmOptions)||void 0===wt?void 0:wt.link)&&void 0!==nt?nt:null===(W=te.notification)||void 0===W?void 0:W.click_action;He&&(Y.fcmOptions.link=He);const It=null===(ae=te.fcmOptions)||void 0===ae?void 0:ae.analytics_label;It&&(Y.fcmOptions.analyticsLabel=It)}(te,Y),te}function Kt(Y){return"object"==typeof Y&&!!Y&&H in Y}function Pn(Y,te){const ut=[];for(let wt=0;wt<Y.length;wt++)ut.push(Y.charAt(wt)),wt<te.length&&ut.push(te.charAt(wt));return ut.join("")}function Mn(Y){return et.create("missing-app-config-values",{valueName:Y})}Pn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Pn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Lt{constructor(te,ut,wt){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const nt=function yn(Y){if(!Y||!Y.options)throw Mn("App Configuration Object");if(!Y.name)throw Mn("App Name");const te=["projectId","apiKey","appId","messagingSenderId"],{options:ut}=Y;for(const wt of te)if(!ut[wt])throw Mn(wt);return{appName:Y.name,projectId:ut.projectId,apiKey:ut.apiKey,appId:ut.appId,senderId:ut.messagingSenderId}}(te);this.firebaseDependencies={app:te,appConfig:nt,installations:ut,analyticsProvider:wt}}_delete(){return Promise.resolve()}}function On(Y){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,d.Z)(function*(Y){try{Y.swRegistration=yield navigator.serviceWorker.register(oe,{scope:ce}),Y.swRegistration.update().catch(()=>{})}catch(te){throw et.create("failed-service-worker-registration",{browserErrorMessage:te?.message})}})).apply(this,arguments)}function ir(Y,te){return sn.apply(this,arguments)}function sn(){return(sn=(0,d.Z)(function*(Y,te){if(!te&&!Y.swRegistration&&(yield On(Y)),te||!Y.swRegistration){if(!(te instanceof ServiceWorkerRegistration))throw et.create("invalid-sw-registration");Y.swRegistration=te}})).apply(this,arguments)}function Zn(Y,te){return vn.apply(this,arguments)}function vn(){return(vn=(0,d.Z)(function*(Y,te){te?Y.vapidKey=te:Y.vapidKey||(Y.vapidKey=we)})).apply(this,arguments)}function Se(){return(Se=(0,d.Z)(function*(Y,te){if(!navigator)throw et.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw et.create("permission-blocked");return yield Zn(Y,te?.vapidKey),yield ir(Y,te?.serviceWorkerRegistration),An(Y)})).apply(this,arguments)}function yt(Y,te,ut){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,d.Z)(function*(Y,te,ut){const wt=on(te);(yield Y.firebaseDependencies.analyticsProvider.get()).logEvent(wt,{message_id:ut[H],message_name:ut[K],message_time:ut[ke],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function on(Y){switch(Y){case qe.NOTIFICATION_CLICKED:return"notification_open";case qe.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Vn(){return(Vn=(0,d.Z)(function*(Y,te){const ut=te.data;if(!ut.isFirebaseMessaging)return;Y.onMessageHandler&&ut.messageType===qe.PUSH_RECEIVED&&("function"==typeof Y.onMessageHandler?Y.onMessageHandler(Xt(ut)):Y.onMessageHandler.next(Xt(ut)));const wt=ut.data;Kt(wt)&&"1"===wt[Oe]&&(yield yt(Y,ut.messageType,wt))})).apply(this,arguments)}const $="@firebase/messaging",B="0.12.4",N=Y=>{const te=new Lt(Y.getProvider("app").getImmediate(),Y.getProvider("installations-internal").getImmediate(),Y.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",ut=>function an(Y,te){return Vn.apply(this,arguments)}(te,ut)),te},S=Y=>{const te=Y.getProvider("messaging").getImmediate();return{getToken:wt=>function st(Y,te){return Se.apply(this,arguments)}(te,wt)}};function L(){return X.apply(this,arguments)}function X(){return(X=(0,d.Z)(function*(){try{yield(0,Ee.eu)()}catch{return!1}return typeof window<"u"&&(0,Ee.hl)()&&(0,Ee.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function $e(Y=(0,me.getApp)()){return L().then(te=>{if(!te)throw et.create("unsupported-browser")},te=>{throw et.create("indexed-db-unsupported")}),(0,me._getProvider)((0,Ee.m9)(Y),"messaging").getImmediate()}!function A(){(0,me._registerComponent)(new k.wA("messaging",N,"PUBLIC")),(0,me._registerComponent)(new k.wA("messaging-internal",S,"PRIVATE")),(0,me.registerVersion)($,B),(0,me.registerVersion)($,B,"esm2017")}()},4880:(At,Ne,O)=>{O.d(Ne,{sN:()=>dt,Gb:()=>Qn});var d=O(5861),U=O(9681),k=O(2090),ee=O(4859),Ee=O(1877);O(2833);const oe="@firebase/remote-config",j="remote-config",K=new k.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});function dt(at=(0,U.getApp)()){return at=(0,k.m9)(at),(0,U._getProvider)(at,j).getImmediate()}class se{constructor(Z,xe,ot,_t){this.client=Z,this.storage=xe,this.storageCache=ot,this.logger=_t}isCachedDataFresh(Z,xe){if(!xe)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ot=Date.now()-xe,_t=ot<=Z;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ot}. Cache max age millis (minimumFetchIntervalMillis setting): ${Z}. Is cache hit: ${_t}.`),_t}fetch(Z){var xe=this;return(0,d.Z)(function*(){const[ot,_t]=yield Promise.all([xe.storage.getLastSuccessfulFetchTimestampMillis(),xe.storage.getLastSuccessfulFetchResponse()]);if(_t&&xe.isCachedDataFresh(Z.cacheMaxAgeMillis,ot))return _t;Z.eTag=_t&&_t.eTag;const Jt=yield xe.client.fetch(Z),pn=[xe.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Jt.status&&pn.push(xe.storage.setLastSuccessfulFetchResponse(Jt)),yield Promise.all(pn),Jt})()}}function pe(at=navigator){return at.languages&&at.languages[0]||at.language}class _e{constructor(Z,xe,ot,_t,Jt,pn){this.firebaseInstallations=Z,this.sdkVersion=xe,this.namespace=ot,this.projectId=_t,this.apiKey=Jt,this.appId=pn}fetch(Z){var xe=this;return(0,d.Z)(function*(){const[ot,_t]=yield Promise.all([xe.firebaseInstallations.getId(),xe.firebaseInstallations.getToken()]),pn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${xe.projectId}/namespaces/${xe.namespace}:fetch?key=${xe.apiKey}`,tn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Z.eTag||"*"},Xt={sdk_version:xe.sdkVersion,app_instance_id:ot,app_instance_id_token:_t,app_id:xe.appId,language_code:pe()},Mt={method:"POST",headers:tn,body:JSON.stringify(Xt)},rt=fetch(pn,Mt),ft=new Promise((On,Nt)=>{Z.signal.addEventListener(()=>{const ir=new Error("The operation was aborted.");ir.name="AbortError",Nt(ir)})});let Kt;try{yield Promise.race([rt,ft]),Kt=yield rt}catch(On){let Nt="fetch-client-network";throw"AbortError"===On?.name&&(Nt="fetch-timeout"),K.create(Nt,{originalErrorMessage:On?.message})}let Pn=Kt.status;const yn=Kt.headers.get("ETag")||void 0;let Mn,Lt;if(200===Kt.status){let On;try{On=yield Kt.json()}catch(Nt){throw K.create("fetch-client-parse",{originalErrorMessage:Nt?.message})}Mn=On.entries,Lt=On.state}if("INSTANCE_STATE_UNSPECIFIED"===Lt?Pn=500:"NO_CHANGE"===Lt?Pn=304:("NO_TEMPLATE"===Lt||"EMPTY_CONFIG"===Lt)&&(Mn={}),304!==Pn&&200!==Pn)throw K.create("fetch-status",{httpStatus:Pn});return{status:Pn,eTag:yn,config:Mn}})()}}class Te{constructor(Z,xe){this.client=Z,this.storage=xe}fetch(Z){var xe=this;return(0,d.Z)(function*(){const ot=(yield xe.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return xe.attemptFetch(Z,ot)})()}attemptFetch(Z,{throttleEndTimeMillis:xe,backoffCount:ot}){var _t=this;return(0,d.Z)(function*(){yield function Pe(at,Z){return new Promise((xe,ot)=>{const _t=Math.max(Z-Date.now(),0),Jt=setTimeout(xe,_t);at.addEventListener(()=>{clearTimeout(Jt),ot(K.create("fetch-throttle",{throttleEndTimeMillis:Z}))})})}(Z.signal,xe);try{const Jt=yield _t.client.fetch(Z);return yield _t.storage.deleteThrottleMetadata(),Jt}catch(Jt){if(!function Ae(at){if(!(at instanceof k.ZR&&at.customData))return!1;const Z=Number(at.customData.httpStatus);return 429===Z||500===Z||503===Z||504===Z}(Jt))throw Jt;const pn={throttleEndTimeMillis:Date.now()+(0,k.$s)(ot),backoffCount:ot+1};return yield _t.storage.setThrottleMetadata(pn),_t.attemptFetch(Z,pn)}})()}}class kt{constructor(Z,xe,ot,_t,Jt){this.app=Z,this._client=xe,this._storageCache=ot,this._storage=_t,this._logger=Jt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function tt(at,Z){const xe=at.target.error||void 0;return K.create(Z,{originalErrorMessage:xe&&xe?.message})}const Ft="app_namespace_store";class jt{constructor(Z,xe,ot,_t=function mt(){return new Promise((at,Z)=>{try{const xe=indexedDB.open("firebase_remote_config",1);xe.onerror=ot=>{Z(tt(ot,"storage-open"))},xe.onsuccess=ot=>{at(ot.target.result)},xe.onupgradeneeded=ot=>{0===ot.oldVersion&&ot.target.result.createObjectStore(Ft,{keyPath:"compositeKey"})}}catch(xe){Z(K.create("storage-open",{originalErrorMessage:xe?.message}))}})}()){this.appId=Z,this.appName=xe,this.namespace=ot,this.openDbPromise=_t}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(Z){return this.set("last_fetch_status",Z)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(Z){return this.set("last_successful_fetch_timestamp_millis",Z)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(Z){return this.set("last_successful_fetch_response",Z)}getActiveConfig(){return this.get("active_config")}setActiveConfig(Z){return this.set("active_config",Z)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(Z){return this.set("active_config_etag",Z)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(Z){return this.set("throttle_metadata",Z)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(Z){var xe=this;return(0,d.Z)(function*(){const ot=yield xe.openDbPromise;return new Promise((_t,Jt)=>{const tn=ot.transaction([Ft],"readonly").objectStore(Ft),Xt=xe.createCompositeKey(Z);try{const Mt=tn.get(Xt);Mt.onerror=rt=>{Jt(tt(rt,"storage-get"))},Mt.onsuccess=rt=>{const ft=rt.target.result;_t(ft?ft.value:void 0)}}catch(Mt){Jt(K.create("storage-get",{originalErrorMessage:Mt?.message}))}})})()}set(Z,xe){var ot=this;return(0,d.Z)(function*(){const _t=yield ot.openDbPromise;return new Promise((Jt,pn)=>{const Xt=_t.transaction([Ft],"readwrite").objectStore(Ft),Mt=ot.createCompositeKey(Z);try{const rt=Xt.put({compositeKey:Mt,value:xe});rt.onerror=ft=>{pn(tt(ft,"storage-set"))},rt.onsuccess=()=>{Jt()}}catch(rt){pn(K.create("storage-set",{originalErrorMessage:rt?.message}))}})})()}delete(Z){var xe=this;return(0,d.Z)(function*(){const ot=yield xe.openDbPromise;return new Promise((_t,Jt)=>{const tn=ot.transaction([Ft],"readwrite").objectStore(Ft),Xt=xe.createCompositeKey(Z);try{const Mt=tn.delete(Xt);Mt.onerror=rt=>{Jt(tt(rt,"storage-delete"))},Mt.onsuccess=()=>{_t()}}catch(Mt){Jt(K.create("storage-delete",{originalErrorMessage:Mt?.message}))}})})()}createCompositeKey(Z){return[this.appId,this.appName,this.namespace,Z].join()}}class en{constructor(Z){this.storage=Z}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var Z=this;return(0,d.Z)(function*(){const xe=Z.storage.getLastFetchStatus(),ot=Z.storage.getLastSuccessfulFetchTimestampMillis(),_t=Z.storage.getActiveConfig(),Jt=yield xe;Jt&&(Z.lastFetchStatus=Jt);const pn=yield ot;pn&&(Z.lastSuccessfulFetchTimestampMillis=pn);const tn=yield _t;tn&&(Z.activeConfig=tn)})()}setLastFetchStatus(Z){return this.lastFetchStatus=Z,this.storage.setLastFetchStatus(Z)}setLastSuccessfulFetchTimestampMillis(Z){return this.lastSuccessfulFetchTimestampMillis=Z,this.storage.setLastSuccessfulFetchTimestampMillis(Z)}setActiveConfig(Z){return this.activeConfig=Z,this.storage.setActiveConfig(Z)}}function Qn(){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,d.Z)(function*(){if(!(0,k.hl)())return!1;try{return yield(0,k.eu)()}catch{return!1}})).apply(this,arguments)}!function qt(){(0,U._registerComponent)(new ee.wA(j,function at(Z,{instanceIdentifier:xe}){const ot=Z.getProvider("app").getImmediate(),_t=Z.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw K.create("registration-window");if(!(0,k.hl)())throw K.create("indexed-db-unavailable");const{projectId:Jt,apiKey:pn,appId:tn}=ot.options;if(!Jt)throw K.create("registration-project-id");if(!pn)throw K.create("registration-api-key");if(!tn)throw K.create("registration-app-id");const Xt=new jt(tn,ot.name,xe=xe||"firebase"),Mt=new en(Xt),rt=new Ee.Yd(oe);rt.logLevel=Ee.in.ERROR;const ft=new _e(_t,U.SDK_VERSION,xe,Jt,pn,tn),Kt=new Te(ft,Xt),Pn=new se(Kt,Xt,Mt,rt),yn=new kt(ot,Pn,Mt,Xt,rt);return function be(at){const Z=(0,k.m9)(at);Z._initializePromise||(Z._initializePromise=Z._storageCache.loadFromStorage().then(()=>{Z._isInitializationComplete=!0}))}(yn),yn},"PUBLIC").setMultipleInstances(!0)),(0,U.registerVersion)(oe,"0.4.4"),(0,U.registerVersion)(oe,"0.4.4","esm2017")}()},8766:(At,Ne,O)=>{O.d(Ne,{Lj:()=>Me,X3:()=>gt});var d=O(5861);let k,ee;const oe=new WeakMap,ce=new WeakMap,we=new WeakMap,j=new WeakMap,H=new WeakMap;let Oe={get(z,fe,Ge){if(z instanceof IDBTransaction){if("done"===fe)return ce.get(z);if("objectStoreNames"===fe)return z.objectStoreNames||we.get(z);if("store"===fe)return Ge.objectStoreNames[1]?void 0:Ge.objectStore(Ge.objectStoreNames[0])}return ie(z[fe])},set:(z,fe,Ge)=>(z[fe]=Ge,!0),has:(z,fe)=>z instanceof IDBTransaction&&("done"===fe||"store"===fe)||fe in z};function ve(z){return"function"==typeof z?function qe(z){return z!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function me(){return ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(z)?function(...fe){return z.apply(dt(this),fe),ie(oe.get(this))}:function(...fe){return ie(z.apply(dt(this),fe))}:function(fe,...Ge){const Ye=z.call(dt(this),fe,...Ge);return we.set(Ye,fe.sort?fe.sort():[fe]),ie(Ye)}}(z):(z instanceof IDBTransaction&&function ke(z){if(ce.has(z))return;const fe=new Promise((Ge,Ye)=>{const Tt=()=>{z.removeEventListener("complete",Xe),z.removeEventListener("error",se),z.removeEventListener("abort",se)},Xe=()=>{Ge(),Tt()},se=()=>{Ye(z.error||new DOMException("AbortError","AbortError")),Tt()};z.addEventListener("complete",Xe),z.addEventListener("error",se),z.addEventListener("abort",se)});ce.set(z,fe)}(z),((z,fe)=>fe.some(Ge=>z instanceof Ge))(z,function Ee(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(z,Oe):z)}function ie(z){if(z instanceof IDBRequest)return function K(z){const fe=new Promise((Ge,Ye)=>{const Tt=()=>{z.removeEventListener("success",Xe),z.removeEventListener("error",se)},Xe=()=>{Ge(ie(z.result)),Tt()},se=()=>{Ye(z.error),Tt()};z.addEventListener("success",Xe),z.addEventListener("error",se)});return fe.then(Ge=>{Ge instanceof IDBCursor&&oe.set(Ge,z)}).catch(()=>{}),H.set(fe,z),fe}(z);if(j.has(z))return j.get(z);const fe=ve(z);return fe!==z&&(j.set(z,fe),H.set(fe,z)),fe}const dt=z=>H.get(z);function gt(z,fe,{blocked:Ge,upgrade:Ye,blocking:Tt,terminated:Xe}={}){const se=indexedDB.open(z,fe),pe=ie(se);return Ye&&se.addEventListener("upgradeneeded",_e=>{Ye(ie(se.result),_e.oldVersion,_e.newVersion,ie(se.transaction))}),Ge&&se.addEventListener("blocked",()=>Ge()),pe.then(_e=>{Xe&&_e.addEventListener("close",()=>Xe()),Tt&&_e.addEventListener("versionchange",()=>Tt())}).catch(()=>{}),pe}function Me(z,{blocked:fe}={}){const Ge=indexedDB.deleteDatabase(z);return fe&&Ge.addEventListener("blocked",()=>fe()),ie(Ge).then(()=>{})}const be=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],je=new Map;function We(z,fe){if(!(z instanceof IDBDatabase)||fe in z||"string"!=typeof fe)return;if(je.get(fe))return je.get(fe);const Ge=fe.replace(/FromIndex$/,""),Ye=fe!==Ge,Tt=De.includes(Ge);if(!(Ge in(Ye?IDBIndex:IDBObjectStore).prototype)||!Tt&&!be.includes(Ge))return;const Xe=function(){var se=(0,d.Z)(function*(pe,..._e){const Pe=this.transaction(pe,Tt?"readwrite":"readonly");let Ae=Pe.store;return Ye&&(Ae=Ae.index(_e.shift())),(yield Promise.all([Ae[Ge](..._e),Tt&&Pe.done]))[0]});return function(_e){return se.apply(this,arguments)}}();return je.set(fe,Xe),Xe}!function ye(z){Oe=z(Oe)}(z=>({...z,get:(fe,Ge,Ye)=>We(fe,Ge)||z.get(fe,Ge,Ye),has:(fe,Ge)=>!!We(fe,Ge)||z.has(fe,Ge)}))},5861:(At,Ne,O)=>{function d(k,ee,Ee,me,oe,ce,we){try{var j=k[ce](we),H=j.value}catch(K){return void Ee(K)}j.done?ee(H):Promise.resolve(H).then(me,oe)}function U(k){return function(){var ee=this,Ee=arguments;return new Promise(function(me,oe){var ce=k.apply(ee,Ee);function we(H){d(ce,me,oe,we,j,"next",H)}function j(H){d(ce,me,oe,we,j,"throw",H)}we(void 0)})}}O.d(Ne,{Z:()=>U})}},At=>{At(At.s=2182)}]);